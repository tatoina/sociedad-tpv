/*! For license information please see main.f79f3961.js.LICENSE.txt */
(()=>{"use strict";var e={32:(e,t,n)=>{n.d(t,{addDoc:()=>Wd,collection:()=>Du,deleteDoc:()=>Bd,doc:()=>Pu,x7:()=>jd,getDocs:()=>Fd,aU:()=>Fu,aQ:()=>Vd,orderBy:()=>Td,query:()=>bd,O5:()=>qd,BN:()=>Ud,mZ:()=>zd,where:()=>xd});var r,i=n(150),o=n(812),a=n(443),s=n(700),l="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},c={},u=u||{},d=l||self;function h(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function f(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var p="closure_uid_"+(1e9*Math.random()>>>0),g=0;function m(e,t,n){return e.call.apply(e.bind,arguments)}function v(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function y(e,t,n){return(y=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?m:v).apply(null,arguments)}function b(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function w(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}function x(){this.s=this.s,this.o=this.o}x.prototype.s=!1,x.prototype.sa=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,p)&&e[p]||(e[p]=++g))},x.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const S=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function E(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function T(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(h(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function A(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}A.prototype.h=function(){this.defaultPrevented=!0};var _=function(){if(!d.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{d.addEventListener("test",()=>{},t),d.removeEventListener("test",()=>{},t)}catch(n){}return e}();function k(e){return/^[\s\xa0]*$/.test(e)}function C(){var e=d.navigator;return e&&(e=e.userAgent)?e:""}function I(e){return-1!=C().indexOf(e)}function R(e){return R[" "](e),e}R[" "]=function(){};var N,O,D=I("Opera"),P=I("Trident")||I("MSIE"),L=I("Edge"),j=L||P,M=I("Gecko")&&!(-1!=C().toLowerCase().indexOf("webkit")&&!I("Edge"))&&!(I("Trident")||I("MSIE"))&&!I("Edge"),F=-1!=C().toLowerCase().indexOf("webkit")&&!I("Edge");function U(){var e=d.document;return e?e.documentMode:void 0}e:{var z="",B=function(){var e=C();return M?/rv:([^\);]+)(\)|;)/.exec(e):L?/Edge\/([\d\.]+)/.exec(e):P?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):F?/WebKit\/(\S+)/.exec(e):D?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(B&&(z=B?B[1]:""),P){var W=U();if(null!=W&&W>parseFloat(z)){N=String(W);break e}}N=z}if(d.document&&P){var V=U();O=V||(parseInt(N,10)||void 0)}else O=void 0;var H=O;function G(e,t){if(A.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(M){e:{try{R(t.nodeName);var i=!0;break e}catch(o){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:q[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&G.$.h.call(this)}}w(G,A);var q={2:"touch",3:"pen",4:"mouse"};G.prototype.h=function(){G.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var K="closure_listenable_"+(1e6*Math.random()|0),Y=0;function $(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++Y,this.fa=this.ia=!1}function X(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function Q(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function J(e){const t={};for(const n in e)t[n]=e[n];return t}const Z="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ee(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<Z.length;t++)n=Z[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function te(e){this.src=e,this.g={},this.h=0}function ne(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],o=S(i,t);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(X(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function re(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.fa&&o.listener==t&&o.capture==!!n&&o.la==r)return i}return-1}te.prototype.add=function(e,t,n,r,i){var o=e.toString();(e=this.g[o])||(e=this.g[o]=[],this.h++);var a=re(e,t,r,i);return-1<a?(t=e[a],n||(t.ia=!1)):((t=new $(t,this.src,o,!!r,i)).ia=n,e.push(t)),t};var ie="closure_lm_"+(1e6*Math.random()|0),oe={};function ae(e,t,n,r,i){if(r&&r.once)return le(e,t,n,r,i);if(Array.isArray(t)){for(var o=0;o<t.length;o++)ae(e,t[o],n,r,i);return null}return n=ge(n),e&&e[K]?e.O(t,n,f(r)?!!r.capture:!!r,i):se(e,t,n,!1,r,i)}function se(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var a=f(i)?!!i.capture:!!i,s=fe(e);if(s||(e[ie]=s=new te(e)),(n=s.add(t,n,r,a,o)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=he;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)_||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(de(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function le(e,t,n,r,i){if(Array.isArray(t)){for(var o=0;o<t.length;o++)le(e,t[o],n,r,i);return null}return n=ge(n),e&&e[K]?e.P(t,n,f(r)?!!r.capture:!!r,i):se(e,t,n,!0,r,i)}function ce(e,t,n,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)ce(e,t[o],n,r,i);else r=f(r)?!!r.capture:!!r,n=ge(n),e&&e[K]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=re(o=e.g[t],n,r,i))&&(X(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete e.g[t],e.h--)))):e&&(e=fe(e))&&(t=e.g[t.toString()],e=-1,t&&(e=re(t,n,r,i)),(n=-1<e?t[e]:null)&&ue(n))}function ue(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[K])ne(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(de(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=fe(t))?(ne(n,e),0==n.h&&(n.src=null,t[ie]=null)):X(e)}}}function de(e){return e in oe?oe[e]:oe[e]="on"+e}function he(e,t){if(e.fa)e=!0;else{t=new G(t,this);var n=e.listener,r=e.la||e.src;e.ia&&ue(e),e=n.call(r,t)}return e}function fe(e){return(e=e[ie])instanceof te?e:null}var pe="__closure_events_fn_"+(1e9*Math.random()>>>0);function ge(e){return"function"===typeof e?e:(e[pe]||(e[pe]=function(t){return e.handleEvent(t)}),e[pe])}function me(){x.call(this),this.i=new te(this),this.S=this,this.J=null}function ve(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new A(t,e);else if(t instanceof A)t.target=t.target||e;else{var i=t;ee(t=new A(r,e),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var a=t.g=n[o];i=ye(a,r,!0,t)&&i}if(i=ye(a=t.g=e,r,!0,t)&&i,i=ye(a,r,!1,t)&&i,n)for(o=0;o<n.length;o++)i=ye(a=t.g=n[o],r,!1,t)&&i}function ye(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var a=t[o];if(a&&!a.fa&&a.capture==n){var s=a.listener,l=a.la||a.src;a.ia&&ne(e.i,a),i=!1!==s.call(l,r)&&i}}return i&&!r.defaultPrevented}w(me,x),me.prototype[K]=!0,me.prototype.removeEventListener=function(e,t,n,r){ce(this,e,t,n,r)},me.prototype.N=function(){if(me.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)X(n[r]);delete t.g[e],t.h--}}this.J=null},me.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},me.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var be=d.JSON.stringify;function we(){var e=ke;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var xe=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new Se,e=>e.reset());class Se{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Ee(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function Te(e){d.setTimeout(()=>{throw e},0)}let Ae,_e=!1,ke=new class{constructor(){this.h=this.g=null}add(e,t){const n=xe.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},Ce=()=>{const e=d.Promise.resolve(void 0);Ae=()=>{e.then(Ie)}};var Ie=()=>{for(var e;e=we();){try{e.h.call(e.g)}catch(n){Te(n)}var t=xe;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}_e=!1};function Re(e,t){me.call(this),this.h=e||1,this.g=t||d,this.j=y(this.qb,this),this.l=Date.now()}function Ne(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function Oe(e,t,n){if("function"===typeof e)n&&(e=y(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=y(e.handleEvent,e)}return 2147483647<Number(t)?-1:d.setTimeout(e,t||0)}function De(e){e.g=Oe(()=>{e.g=null,e.i&&(e.i=!1,De(e))},e.j);const t=e.h;e.h=null,e.m.apply(null,t)}w(Re,me),(r=Re.prototype).ga=!1,r.T=null,r.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),ve(this,"tick"),this.ga&&(Ne(this),this.start()))}},r.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},r.N=function(){Re.$.N.call(this),Ne(this),delete this.g};class Pe extends x{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:De(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Le(e){x.call(this),this.h=e,this.g={}}w(Le,x);var je=[];function Me(e,t,n,r){Array.isArray(n)||(n&&(je[0]=n.toString()),n=je);for(var i=0;i<n.length;i++){var o=ae(t,n[i],r||e.handleEvent,!1,e.h||e);if(!o)break;e.g[o.key]=o}}function Fe(e){Q(e.g,function(e,t){this.g.hasOwnProperty(t)&&ue(e)},e),e.g={}}function Ue(){this.g=!0}function ze(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var a=1;a<i.length;a++)i[a]=""}}}return be(n)}catch(s){return t}}(e,n)+(r?" "+r:"")})}Le.prototype.N=function(){Le.$.N.call(this),Fe(this)},Le.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Ue.prototype.Ea=function(){this.g=!1},Ue.prototype.info=function(){};var Be={},We=null;function Ve(){return We=We||new me}function He(e){A.call(this,Be.Ta,e)}function Ge(e){const t=Ve();ve(t,new He(t))}function qe(e,t){A.call(this,Be.STAT_EVENT,e),this.stat=t}function Ke(e){const t=Ve();ve(t,new qe(t,e))}function Ye(e,t){A.call(this,Be.Ua,e),this.size=t}function $e(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){e()},t)}Be.Ta="serverreachability",w(He,A),Be.STAT_EVENT="statevent",w(qe,A),Be.Ua="timingevent",w(Ye,A);var Xe={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Qe={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Je(){}function Ze(e){return e.h||(e.h=e.i())}function et(){}Je.prototype.h=null;var tt,nt={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function rt(){A.call(this,"d")}function it(){A.call(this,"c")}function ot(){}function at(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new Le(this),this.P=lt,e=j?125:void 0,this.V=new Re(e),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new st}function st(){this.i=null,this.g="",this.h=!1}w(rt,A),w(it,A),w(ot,Je),ot.prototype.g=function(){return new XMLHttpRequest},ot.prototype.i=function(){return{}},tt=new ot;var lt=45e3,ct={},ut={};function dt(e,t,n){e.L=1,e.v=Rt(At(t)),e.s=n,e.S=!0,ht(e,null)}function ht(e,t){e.G=Date.now(),mt(e),e.A=At(e.v);var n=e.A,r=e.W;Array.isArray(r)||(r=[String(r)]),Vt(n.i,"t",r),e.C=0,n=e.l.J,e.h=new st,e.g=Gn(e.l,n?t:null,!e.s),0<e.O&&(e.M=new Pe(y(e.Pa,e,e.g),e.O)),Me(e.U,e.g,"readystatechange",e.nb),t=e.I?J(e.I):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.A,e.u,e.s,t)):(e.u="GET",e.g.ha(e.A,e.u,null,t)),Ge(),function(e,t,n,r,i,o){e.info(function(){if(e.g)if(o)for(var a="",s=o.split("&"),l=0;l<s.length;l++){var c=s[l].split("=");if(1<c.length){var u=c[0];c=c[1];var d=u.split("_");a=2<=d.length&&"type"==d[1]?a+(u+"=")+c+"&":a+(u+"=redacted&")}}else a=null;else a=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+a})}(e.j,e.u,e.A,e.m,e.W,e.s)}function ft(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.l.Ha)}function pt(e,t,n){let r,i=!0;for(;!e.J&&e.C<n.length;){if(r=gt(e,n),r==ut){4==t&&(e.o=4,Ke(14),i=!1),ze(e.j,e.m,null,"[Incomplete Response]");break}if(r==ct){e.o=4,Ke(15),ze(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}ze(e.j,e.m,r,null),xt(e,r)}ft(e)&&r!=ut&&r!=ct&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Ke(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Mn(t),t.M=!0,Ke(11))):(ze(e.j,e.m,n,"[Invalid Chunked Response]"),wt(e),bt(e))}function gt(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?ut:(n=Number(t.substring(n,r)),isNaN(n)?ct:(r+=1)+n>t.length?ut:(t=t.slice(r,r+n),e.C=r+n,t))}function mt(e){e.Y=Date.now()+e.P,vt(e,e.P)}function vt(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=$e(y(e.lb,e),t)}function yt(e){e.B&&(d.clearTimeout(e.B),e.B=null)}function bt(e){0==e.l.H||e.J||zn(e.l,e)}function wt(e){yt(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,Ne(e.V),Fe(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function xt(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||Xt(n.i,e)))if(!e.K&&Xt(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(c){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;Un(n),In(n)}jn(n),Ke(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=$e(y(n.ib,n),6e3));if(1>=$t(n.i)&&n.oa){try{n.oa()}catch(c){}n.oa=void 0}}else Wn(n,11)}else if((e.K||n.g==e)&&Un(n),!k(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){let c=i[t];if(n.V=c[0],c=c[1],2==n.H)if("c"==c[0]){n.K=c[1],n.pa=c[2];const t=c[3];null!=t&&(n.ra=t,n.l.info("VER="+n.ra));const i=c[4];null!=i&&(n.Ga=i,n.l.info("SVER="+n.Ga));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var o=r.i;o.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(o.j=o.l,o.g=new Set,o.h&&(Qt(o,o.h),o.h=null))}if(r.F){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.Da=e,It(r.I,r.F,e))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var a=e;if((r=n).wa=Hn(r,r.J?r.pa:null,r.Y),a.K){Jt(r.i,a);var s=a,l=r.L;l&&s.setTimeout(l),s.B&&(yt(s),mt(s)),r.g=a}else Ln(r);0<n.j.length&&Nn(n)}else"stop"!=c[0]&&"close"!=c[0]||Wn(n,7);else 3==n.H&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?Wn(n,7):Cn(n):"noop"!=c[0]&&n.h&&n.h.Aa(c),n.A=0)}Ge()}catch(c){}}function St(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(h(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(h(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(h(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}(r=at.prototype).setTimeout=function(e){this.P=e},r.nb=function(e){e=e.target;const t=this.M;t&&3==Sn(e)?t.l():this.Pa(e)},r.Pa=function(e){try{if(e==this.g)e:{const u=Sn(this.g);var t=this.g.Ia();this.g.da();if(!(3>u)&&(3!=u||j||this.g&&(this.h.h||this.g.ja()||En(this.g)))){this.J||4!=u||7==t||Ge(),yt(this);var n=this.g.da();this.ca=n;t:if(ft(this)){var r=En(this.g);e="";var i=r.length,o=4==Sn(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){wt(this),bt(this);var a="";break t}this.h.i=new d.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:o&&t==i-1});r.splice(0,i),this.h.g+=e,this.C=0,a=this.h.g}else a=this.g.ja();if(this.i=200==n,function(e,t,n,r,i,o,a){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+o+" "+a})}(this.j,this.u,this.A,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var s,l=this.g;if((s=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(s)){var c=s;break t}}c=null}if(!(n=c)){this.i=!1,this.o=3,Ke(12),wt(this),bt(this);break e}ze(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,xt(this,n)}this.S?(pt(this,u,a),j&&this.i&&3==u&&(Me(this.U,this.V,"tick",this.mb),this.V.start())):(ze(this.j,this.m,a,null),xt(this,a)),4==u&&wt(this),this.i&&!this.J&&(4==u?zn(this.l,this):(this.i=!1,mt(this)))}else(function(e){const t={};e=(e.g&&2<=Sn(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(k(e[r]))continue;var n=Ee(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const o=t[i]||[];t[i]=o,o.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==n&&0<a.indexOf("Unknown SID")?(this.o=3,Ke(12)):(this.o=0,Ke(13)),wt(this),bt(this)}}}catch(u){}},r.mb=function(){if(this.g){var e=Sn(this.g),t=this.g.ja();this.C<t.length&&(yt(this),pt(this,e,t),this.i&&4!=e&&mt(this))}},r.cancel=function(){this.J=!0,wt(this)},r.lb=function(){this.B=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.j,this.A),2!=this.L&&(Ge(),Ke(17)),wt(this),this.o=2,bt(this)):vt(this,this.Y-e)};var Et=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Tt(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof Tt){this.h=e.h,_t(this,e.j),this.s=e.s,this.g=e.g,kt(this,e.m),this.l=e.l;var t=e.i,n=new Ut;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),Ct(this,n),this.o=e.o}else e&&(t=String(e).match(Et))?(this.h=!1,_t(this,t[1]||"",!0),this.s=Nt(t[2]||""),this.g=Nt(t[3]||"",!0),kt(this,t[4]),this.l=Nt(t[5]||"",!0),Ct(this,t[6]||"",!0),this.o=Nt(t[7]||"")):(this.h=!1,this.i=new Ut(null,this.h))}function At(e){return new Tt(e)}function _t(e,t,n){e.j=n?Nt(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function kt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Ct(e,t,n){t instanceof Ut?(e.i=t,function(e,t){t&&!e.j&&(zt(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(Bt(this,t),Vt(this,n,e))},e)),e.j=t}(e.i,e.h)):(n||(t=Ot(t,Mt)),e.i=new Ut(t,e.h))}function It(e,t,n){e.i.set(t,n)}function Rt(e){return It(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Nt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Ot(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Dt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Dt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Tt.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Ot(t,Pt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Ot(t,Pt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(Ot(n,"/"==n.charAt(0)?jt:Lt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Ot(n,Ft)),e.join("")};var Pt=/[#\/\?@]/g,Lt=/[#\?:]/g,jt=/[#\?]/g,Mt=/[#\?@]/g,Ft=/#/g;function Ut(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function zt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function Bt(e,t){zt(e),t=Ht(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Wt(e,t){return zt(e),t=Ht(e,t),e.g.has(t)}function Vt(e,t,n){Bt(e,t),0<n.length&&(e.i=null,e.g.set(Ht(e,t),E(n)),e.h+=n.length)}function Ht(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(r=Ut.prototype).add=function(e,t){zt(this),this.i=null,e=Ht(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},r.forEach=function(e,t){zt(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},r.ta=function(){zt(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},r.Z=function(e){zt(this);let t=[];if("string"===typeof e)Wt(this,e)&&(t=t.concat(this.g.get(Ht(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},r.set=function(e,t){return zt(this),this.i=null,Wt(this,e=Ht(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},r.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const o=encodeURIComponent(String(r)),a=this.Z(r);for(r=0;r<a.length;r++){var i=o;""!==a[r]&&(i+="="+encodeURIComponent(String(a[r]))),e.push(i)}}return this.i=e.join("&")};var Gt=class{constructor(e,t){this.g=e,this.map=t}};function qt(e){this.l=e||Kt,d.PerformanceNavigationTiming?e=0<(e=d.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(d.g&&d.g.Ka&&d.g.Ka()&&d.g.Ka().ec),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Kt=10;function Yt(e){return!!e.h||!!e.g&&e.g.size>=e.j}function $t(e){return e.h?1:e.g?e.g.size:0}function Xt(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Qt(e,t){e.g?e.g.add(t):e.h=t}function Jt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Zt(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return E(e.i)}qt.prototype.cancel=function(){if(this.i=Zt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var en,tn=class{stringify(e){return d.JSON.stringify(e,void 0)}parse(e){return d.JSON.parse(e,void 0)}};function nn(){this.g=new tn}function rn(e,t,n){const r=n||"";try{St(e,function(e,n){let i=e;f(e)&&(i=be(e)),t.push(r+n+"="+encodeURIComponent(i))})}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function on(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(o){}}function an(e){this.l=e.fc||null,this.j=e.ob||!1}function sn(e,t){me.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=ln,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}w(an,Je),an.prototype.g=function(){return new sn(this.l,this.j)},an.prototype.i=(en={},function(){return en}),w(sn,me);var ln=0;function cn(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function un(e){e.readyState=4,e.l=null,e.j=null,e.A=null,dn(e)}function dn(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(r=sn.prototype).open=function(e,t){if(this.readyState!=ln)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,dn(this)},r.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||d).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},r.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,un(this)),this.readyState=ln},r.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,dn(this)),this.g&&(this.readyState=3,dn(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof d.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;cn(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},r.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?un(this):dn(this),3==this.readyState&&cn(this)}},r.Za=function(e){this.g&&(this.response=this.responseText=e,un(this))},r.Ya=function(e){this.g&&(this.response=e,un(this))},r.ka=function(){this.g&&un(this)},r.setRequestHeader=function(e,t){this.v.append(e,t)},r.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(sn.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var hn=d.JSON.parse;function fn(e){me.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=pn,this.L=this.M=!1}w(fn,me);var pn="",gn=/^https?$/i,mn=["POST","PUT"];function vn(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,yn(e),wn(e)}function yn(e){e.F||(e.F=!0,ve(e,"complete"),ve(e,"error"))}function bn(e){if(e.h&&"undefined"!=typeof u&&(!e.C[1]||4!=Sn(e)||2!=e.da()))if(e.v&&4==Sn(e))Oe(e.La,0,e);else if(ve(e,"readystatechange"),4==Sn(e)){e.h=!1;try{const s=e.da();e:switch(s){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===s){var i=String(e.I).match(Et)[1]||null;!i&&d.self&&d.self.location&&(i=d.self.location.protocol.slice(0,-1)),r=!gn.test(i?i.toLowerCase():"")}n=r}if(n)ve(e,"complete"),ve(e,"success");else{e.m=6;try{var o=2<Sn(e)?e.g.statusText:""}catch(a){o=""}e.j=o+" ["+e.da()+"]",yn(e)}}finally{wn(e)}}}function wn(e,t){if(e.g){xn(e);const r=e.g,i=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||ve(e,"ready");try{r.onreadystatechange=i}catch(n){}}}function xn(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(d.clearTimeout(e.A),e.A=null)}function Sn(e){return e.g?e.g.readyState:0}function En(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case pn:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(Cr){return null}}function Tn(e){let t="";return Q(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function An(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Tn(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):It(e,t,n))}function _n(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function kn(e){this.Ga=0,this.j=[],this.l=new Ue,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=_n("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=_n("baseRetryDelayMs",5e3,e),this.hb=_n("retryDelaySeedMs",1e4,e),this.eb=_n("forwardChannelMaxRetries",2,e),this.xa=_n("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.dc||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new qt(e&&e.concurrentRequestLimit),this.Ja=new nn,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Cn(e){if(Rn(e),3==e.H){var t=e.W++,n=At(e.I);if(It(n,"SID",e.K),It(n,"RID",t),It(n,"TYPE","terminate"),Dn(e,n),(t=new at(e,e.l,t)).L=2,t.v=Rt(At(n)),n=!1,d.navigator&&d.navigator.sendBeacon)try{n=d.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&d.Image&&((new Image).src=t.v,n=!0),n||(t.g=Gn(t.l,null),t.g.ha(t.v)),t.G=Date.now(),mt(t)}Vn(e)}function In(e){e.g&&(Mn(e),e.g.cancel(),e.g=null)}function Rn(e){In(e),e.u&&(d.clearTimeout(e.u),e.u=null),Un(e),e.i.cancel(),e.m&&("number"===typeof e.m&&d.clearTimeout(e.m),e.m=null)}function Nn(e){if(!Yt(e.i)&&!e.m){e.m=!0;var t=e.Na;Ae||Ce(),_e||(Ae(),_e=!0),ke.add(t,e),e.C=0}}function On(e,t){var n;n=t?t.m:e.W++;const r=At(e.I);It(r,"SID",e.K),It(r,"RID",n),It(r,"AID",e.V),Dn(e,r),e.o&&e.s&&An(r,e.o,e.s),n=new at(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=Pn(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),Qt(e.i,n),dt(n,r,t)}function Dn(e,t){e.na&&Q(e.na,function(e,n){It(t,n,e)}),e.h&&St({},function(e,n){It(t,n,e)})}function Pn(e,t,n){n=Math.min(e.j.length,n);var r=e.h?y(e.h.Va,e.h,e):null;e:{var i=e.j;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let o=!0;for(let a=0;a<n;a++){let n=i[a].g;const s=i[a].map;if(n-=t,0>n)t=Math.max(0,i[a].g-100),o=!1;else try{rn(s,e,"req"+n+"_")}catch(Ur){r&&r(s)}}if(o){r=e.join("&");break e}}}return e=e.j.splice(0,n),t.F=e,r}function Ln(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;Ae||Ce(),_e||(Ae(),_e=!0),ke.add(t,e),e.A=0}}function jn(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=$e(y(e.Ma,e),Bn(e,e.A)),e.A++,!0)}function Mn(e){null!=e.B&&(d.clearTimeout(e.B),e.B=null)}function Fn(e){e.g=new at(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=At(e.wa);It(t,"RID","rpc"),It(t,"SID",e.K),It(t,"AID",e.V),It(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&It(t,"TO",e.qa),It(t,"TYPE","xmlhttp"),Dn(e,t),e.o&&e.s&&An(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.v=Rt(At(t)),n.s=null,n.S=!0,ht(n,e)}function Un(e){null!=e.v&&(d.clearTimeout(e.v),e.v=null)}function zn(e,t){var n=null;if(e.g==t){Un(e),Mn(e),e.g=null;var r=2}else{if(!Xt(e.i,t))return;n=t.F,Jt(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.G;var i=e.C;ve(r=Ve(),new Ye(r,n)),Nn(e)}else Ln(e);else if(3==(i=t.o)||0==i&&0<t.ca||!(1==r&&function(e,t){return!($t(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=$e(y(e.Na,e,t),Bn(e,e.C)),e.C++,!0))}(e,t)||2==r&&jn(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Wn(e,5);break;case 4:Wn(e,10);break;case 3:Wn(e,6);break;default:Wn(e,2)}}function Bn(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function Wn(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=y(e.pb,e);n||(n=new Tt("//www.google.com/images/cleardot.gif"),d.location&&"http"==d.location.protocol||_t(n,"https"),Rt(n)),function(e,t){const n=new Ue;if(d.Image){const r=new Image;r.onload=b(on,n,r,"TestLoadImage: loaded",!0,t),r.onerror=b(on,n,r,"TestLoadImage: error",!1,t),r.onabort=b(on,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=b(on,n,r,"TestLoadImage: timeout",!1,t),d.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(n.toString(),r)}else Ke(2);e.H=0,e.h&&e.h.za(t),Vn(e),Rn(e)}function Vn(e){if(e.H=0,e.ma=[],e.h){const t=Zt(e.i);0==t.length&&0==e.j.length||(T(e.ma,t),T(e.ma,e.j),e.i.i.length=0,E(e.j),e.j.length=0),e.h.ya()}}function Hn(e,t,n){var r=n instanceof Tt?At(n):new Tt(n);if(""!=r.g)t&&(r.g=t+"."+r.g),kt(r,r.m);else{var i=d.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var o=new Tt(null);r&&_t(o,r),t&&(o.g=t),i&&kt(o,i),n&&(o.l=n),r=o}return n=e.F,t=e.Da,n&&t&&It(r,n,t),It(r,"VER",e.ra),Dn(e,r),r}function Gn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ha&&!e.va?new fn(new an({ob:!0})):new fn(e.va)).Oa(e.J),t}function qn(){}function Kn(){if(P&&!(10<=Number(H)))throw Error("Environmental error: no available transport.")}function Yn(e,t){me.call(this),this.g=new kn(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!k(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!k(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Qn(this)}function $n(e){rt.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Xn(){it.call(this),this.status=1}function Qn(e){this.g=e}function Jn(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Zn(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var o=e.g[3],a=t+(o^n&(i^o))+r[0]+3614090360&4294967295;a=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=n+(a<<7&4294967295|a>>>25))+((a=o+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^o&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(o^t))+r[3]+3250441966&4294967295)<<22&4294967295|a>>>10))+((a=t+(o^n&(i^o))+r[4]+4118548399&4294967295)<<7&4294967295|a>>>25))+((a=o+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^o&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(o^t))+r[7]+4249261313&4294967295)<<22&4294967295|a>>>10))+((a=t+(o^n&(i^o))+r[8]+1770035416&4294967295)<<7&4294967295|a>>>25))+((a=o+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^o&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(o^t))+r[11]+2304563134&4294967295)<<22&4294967295|a>>>10))+((a=t+(o^n&(i^o))+r[12]+1804603682&4294967295)<<7&4294967295|a>>>25))+((a=o+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^o&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(o^t))+r[15]+1236535329&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^o&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|a>>>27))+((a=o+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(o^t))+r[11]+643717713&4294967295)<<14&4294967295|a>>>18))+((a=n+(o^t&(i^o))+r[0]+3921069994&4294967295)<<20&4294967295|a>>>12))+((a=t+(i^o&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|a>>>27))+((a=o+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(o^t))+r[15]+3634488961&4294967295)<<14&4294967295|a>>>18))+((a=n+(o^t&(i^o))+r[4]+3889429448&4294967295)<<20&4294967295|a>>>12))+((a=t+(i^o&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|a>>>27))+((a=o+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(o^t))+r[3]+4107603335&4294967295)<<14&4294967295|a>>>18))+((a=n+(o^t&(i^o))+r[8]+1163531501&4294967295)<<20&4294967295|a>>>12))+((a=t+(i^o&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|a>>>27))+((a=o+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(o^t))+r[7]+1735328473&4294967295)<<14&4294967295|a>>>18))+((a=n+(o^t&(i^o))+r[12]+2368359562&4294967295)<<20&4294967295|a>>>12))+((a=t+(n^i^o)+r[5]+4294588738&4294967295)<<4&4294967295|a>>>28))+((a=o+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|a>>>21))+((a=i+(o^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^o^t)+r[14]+4259657740&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^i^o)+r[1]+2763975236&4294967295)<<4&4294967295|a>>>28))+((a=o+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|a>>>21))+((a=i+(o^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^o^t)+r[10]+3200236656&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^i^o)+r[13]+681279174&4294967295)<<4&4294967295|a>>>28))+((a=o+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|a>>>21))+((a=i+(o^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^o^t)+r[6]+76029189&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^i^o)+r[9]+3654602809&4294967295)<<4&4294967295|a>>>28))+((a=o+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|a>>>21))+((a=i+(o^t^n)+r[15]+530742520&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^o^t)+r[2]+3299628645&4294967295)<<23&4294967295|a>>>9))+((a=t+(i^(n|~o))+r[0]+4096336452&4294967295)<<6&4294967295|a>>>26))+((a=o+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|a>>>22))+((a=i+(t^(o|~n))+r[14]+2878612391&4294967295)<<15&4294967295|a>>>17))+((a=n+(o^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|a>>>11))+((a=t+(i^(n|~o))+r[12]+1700485571&4294967295)<<6&4294967295|a>>>26))+((a=o+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|a>>>22))+((a=i+(t^(o|~n))+r[10]+4293915773&4294967295)<<15&4294967295|a>>>17))+((a=n+(o^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|a>>>11))+((a=t+(i^(n|~o))+r[8]+1873313359&4294967295)<<6&4294967295|a>>>26))+((a=o+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|a>>>22))+((a=i+(t^(o|~n))+r[6]+2734768916&4294967295)<<15&4294967295|a>>>17))+((a=n+(o^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|a>>>11))+((o=(t=n+((a=t+(i^(n|~o))+r[4]+4149444226&4294967295)<<6&4294967295|a>>>26))+((a=o+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|a>>>22))^((i=o+((a=i+(t^(o|~n))+r[2]+718787259&4294967295)<<15&4294967295|a>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(a<<21&4294967295|a>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+o&4294967295}function er(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var o=0|e[i];r&&o==t||(n[i]=o,r=!1)}this.g=n}(r=fn.prototype).Oa=function(e){this.M=e},r.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():tt.g(),this.C=this.u?Ze(this.u):Ze(tt),this.g.onreadystatechange=y(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(o){return void vn(this,o)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),i=d.FormData&&e instanceof d.FormData,!(0<=S(mn,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[a,s]of n)this.g.setRequestHeader(a,s);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{xn(this),0<this.B&&((this.L=function(e){return P&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=y(this.ua,this)):this.A=Oe(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(o){vn(this,o)}},r.ua=function(){"undefined"!=typeof u&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ve(this,"timeout"),this.abort(8))},r.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,ve(this,"complete"),ve(this,"abort"),wn(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),wn(this,!0)),fn.$.N.call(this)},r.La=function(){this.s||(this.G||this.v||this.l?bn(this):this.kb())},r.kb=function(){bn(this)},r.isActive=function(){return!!this.g},r.da=function(){try{return 2<Sn(this)?this.g.status:-1}catch(en){return-1}},r.ja=function(){try{return this.g?this.g.responseText:""}catch(en){return""}},r.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),hn(t)}},r.Ia=function(){return this.m},r.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(r=kn.prototype).ra=8,r.H=1,r.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const i=new at(this,this.l,e);let o=this.s;if(this.U&&(o?(o=J(o),ee(o,this.U)):o=this.U),null!==this.o||this.O||(i.I=o,o=null),this.P)e:{for(var t=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.j.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=Pn(this,i,t),It(n=At(this.I),"RID",e),It(n,"CVER",22),this.F&&It(n,"X-HTTP-Session-Id",this.F),Dn(this,n),o&&(this.O?t="headers="+encodeURIComponent(String(Tn(o)))+"&"+t:this.o&&An(n,this.o,o)),Qt(this.i,i),this.bb&&It(n,"TYPE","init"),this.P?(It(n,"$req",t),It(n,"SID","null"),i.aa=!0,dt(i,n,null)):dt(i,n,t),this.H=2}}else 3==this.H&&(e?On(this,e):0==this.j.length||Yt(this.i)||On(this))},r.Ma=function(){if(this.u=null,Fn(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=$e(y(this.jb,this),e)}},r.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Ke(10),In(this),Fn(this))},r.ib=function(){null!=this.v&&(this.v=null,In(this),jn(this),Ke(19))},r.pb=function(e){e?(this.l.info("Successfully pinged google.com"),Ke(2)):(this.l.info("Failed to ping google.com"),Ke(1))},r.isActive=function(){return!!this.h&&this.h.isActive(this)},(r=qn.prototype).Ba=function(){},r.Aa=function(){},r.za=function(){},r.ya=function(){},r.isActive=function(){return!0},r.Va=function(){},Kn.prototype.g=function(e,t){return new Yn(e,t)},w(Yn,me),Yn.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;Ke(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=Hn(e,null,e.Y),Nn(e)},Yn.prototype.close=function(){Cn(this.g)},Yn.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=be(e),e=n);t.j.push(new Gt(t.fb++,e)),3==t.H&&Nn(t)},Yn.prototype.N=function(){this.g.h=null,delete this.j,Cn(this.g),delete this.g,Yn.$.N.call(this)},w($n,rt),w(Xn,it),w(Qn,qn),Qn.prototype.Ba=function(){ve(this.g,"a")},Qn.prototype.Aa=function(e){ve(this.g,new $n(e))},Qn.prototype.za=function(e){ve(this.g,new Xn)},Qn.prototype.ya=function(){ve(this.g,"b")},w(Jn,function(){this.blockSize=-1}),Jn.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Jn.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,o=0;o<t;){if(0==i)for(;o<=n;)Zn(this,e,o),o+=this.blockSize;if("string"===typeof e){for(;o<t;)if(r[i++]=e.charCodeAt(o++),i==this.blockSize){Zn(this,r),i=0;break}}else for(;o<t;)if(r[i++]=e[o++],i==this.blockSize){Zn(this,r),i=0;break}}this.h=i,this.i+=t},Jn.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var tr={};function nr(e){return-128<=e&&128>e?function(e,t){var n=tr;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new er([0|e],0>e?-1:0)}):new er([0|e],0>e?-1:0)}function rr(e){if(isNaN(e)||!isFinite(e))return or;if(0>e)return ur(rr(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=ir;return new er(t,0)}var ir=4294967296,or=nr(0),ar=nr(1),sr=nr(16777216);function lr(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function cr(e){return-1==e.h}function ur(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new er(n,~e.h).add(ar)}function dr(e,t){return e.add(ur(t))}function hr(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function fr(e,t){this.g=e,this.h=t}function pr(e,t){if(lr(t))throw Error("division by zero");if(lr(e))return new fr(or,or);if(cr(e))return t=pr(ur(e),t),new fr(ur(t.g),ur(t.h));if(cr(t))return t=pr(e,ur(t)),new fr(ur(t.g),t.h);if(30<e.g.length){if(cr(e)||cr(t))throw Error("slowDivide_ only works with positive integers.");for(var n=ar,r=t;0>=r.X(e);)n=gr(n),r=gr(r);var i=mr(n,1),o=mr(r,1);for(r=mr(r,2),n=mr(n,2);!lr(r);){var a=o.add(r);0>=a.X(e)&&(i=i.add(n),o=a),r=mr(r,1),n=mr(n,1)}return t=dr(e,i.R(t)),new fr(i,t)}for(i=or;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),a=(o=rr(n)).R(t);cr(a)||0<a.X(e);)a=(o=rr(n-=r)).R(t);lr(o)&&(o=ar),i=i.add(o),e=dr(e,a)}return new fr(i,e)}function gr(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new er(n,e.h)}function mr(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],o=0;o<r;o++)i[o]=0<t?e.D(o+n)>>>t|e.D(o+n+1)<<32-t:e.D(o+n);return new er(i,e.h)}(r=er.prototype).ea=function(){if(cr(this))return-ur(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:ir+r)*t,t*=ir}return e},r.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(lr(this))return"0";if(cr(this))return"-"+ur(this).toString(e);for(var t=rr(Math.pow(e,6)),n=this,r="";;){var i=pr(n,t).g,o=((0<(n=dr(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(lr(n=i))return o+r;for(;6>o.length;)o="0"+o;r=o+r}},r.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},r.X=function(e){return cr(e=dr(this,e))?-1:lr(e)?0:1},r.abs=function(){return cr(this)?ur(this):this},r.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var o=r+(65535&this.D(i))+(65535&e.D(i)),a=(o>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=a>>>16,o&=65535,a&=65535,n[i]=a<<16|o}return new er(n,-2147483648&n[n.length-1]?-1:0)},r.R=function(e){if(lr(this)||lr(e))return or;if(cr(this))return cr(e)?ur(this).R(ur(e)):ur(ur(this).R(e));if(cr(e))return ur(this.R(ur(e)));if(0>this.X(sr)&&0>e.X(sr))return rr(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var o=this.D(r)>>>16,a=65535&this.D(r),s=e.D(i)>>>16,l=65535&e.D(i);n[2*r+2*i]+=a*l,hr(n,2*r+2*i),n[2*r+2*i+1]+=o*l,hr(n,2*r+2*i+1),n[2*r+2*i+1]+=a*s,hr(n,2*r+2*i+1),n[2*r+2*i+2]+=o*s,hr(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new er(n,0)},r.gb=function(e){return pr(this,e).h},r.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new er(n,this.h&e.h)},r.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new er(n,this.h|e.h)},r.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new er(n,this.h^e.h)},Kn.prototype.createWebChannel=Kn.prototype.g,Yn.prototype.send=Yn.prototype.u,Yn.prototype.open=Yn.prototype.m,Yn.prototype.close=Yn.prototype.close,Xe.NO_ERROR=0,Xe.TIMEOUT=8,Xe.HTTP_ERROR=6,Qe.COMPLETE="complete",et.EventType=nt,nt.OPEN="a",nt.CLOSE="b",nt.ERROR="c",nt.MESSAGE="d",me.prototype.listen=me.prototype.O,fn.prototype.listenOnce=fn.prototype.P,fn.prototype.getLastError=fn.prototype.Sa,fn.prototype.getLastErrorCode=fn.prototype.Ia,fn.prototype.getStatus=fn.prototype.da,fn.prototype.getResponseJson=fn.prototype.Wa,fn.prototype.getResponseText=fn.prototype.ja,fn.prototype.send=fn.prototype.ha,fn.prototype.setWithCredentials=fn.prototype.Oa,Jn.prototype.digest=Jn.prototype.l,Jn.prototype.reset=Jn.prototype.reset,Jn.prototype.update=Jn.prototype.j,er.prototype.add=er.prototype.add,er.prototype.multiply=er.prototype.R,er.prototype.modulo=er.prototype.gb,er.prototype.compare=er.prototype.X,er.prototype.toNumber=er.prototype.ea,er.prototype.toString=er.prototype.toString,er.prototype.getBits=er.prototype.D,er.fromNumber=rr,er.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return ur(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=rr(Math.pow(n,8)),i=or,o=0;o<t.length;o+=8){var a=Math.min(8,t.length-o),s=parseInt(t.substring(o,o+a),n);8>a?(a=rr(Math.pow(n,a)),i=i.R(a).add(rr(s))):i=(i=i.R(r)).add(rr(s))}return i};var vr=c.createWebChannelTransport=function(){return new Kn},yr=c.getStatEventTarget=function(){return Ve()},br=c.ErrorCode=Xe,wr=c.EventType=Qe,xr=c.Event=Be,Sr=c.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Er=c.FetchXmlHttpFactory=an,Tr=c.WebChannel=et,Ar=c.XhrIo=fn,_r=c.Md5=Jn,kr=c.Integer=er;const Cr="@firebase/firestore";class Ir{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ir.UNAUTHENTICATED=new Ir(null),Ir.GOOGLE_CREDENTIALS=new Ir("google-credentials-uid"),Ir.FIRST_PARTY=new Ir("first-party-uid"),Ir.MOCK_USER=new Ir("mock-user");let Rr="9.23.0";const Nr=new a.Vy("@firebase/firestore");function Or(){return Nr.logLevel}function Dr(e){if(Nr.logLevel<=a.$b.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(jr);Nr.debug("Firestore (".concat(Rr,"): ").concat(e),...i)}}function Pr(e){if(Nr.logLevel<=a.$b.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(jr);Nr.error("Firestore (".concat(Rr,"): ").concat(e),...i)}}function Lr(e){if(Nr.logLevel<=a.$b.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(jr);Nr.warn("Firestore (".concat(Rr,"): ").concat(e),...i)}}function jr(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function Mr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const t="FIRESTORE (".concat(Rr,") INTERNAL ASSERTION FAILED: ")+e;throw Pr(t),new Error(t)}function Fr(e,t){e||Mr()}function Ur(e,t){return e}const zr={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Br extends s.g{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class Wr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Vr{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class Hr{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ir.UNAUTHENTICATED))}shutdown(){}}class Gr{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class qr{constructor(e){this.t=e,this.currentUser=Ir.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new Wr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Wr,e.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const t=i;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},a=e=>{Dr("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(e=>a(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?a(e):(Dr("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Wr)}},0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(Dr("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Fr("string"==typeof t.accessToken),new Vr(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Fr(null===e||"string"==typeof e),new Ir(e)}}class Kr{constructor(e,t,n){this.h=e,this.l=t,this.m=n,this.type="FirstParty",this.user=Ir.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class Yr{constructor(e,t,n){this.h=e,this.l=t,this.m=n}getToken(){return Promise.resolve(new Kr(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Ir.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class $r{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Xr{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const n=e=>{null!=e.error&&Dr("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.T;return this.T=e.token,Dr("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{Dr("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.I.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.I.getImmediate({optional:!0});e?r(e):Dr("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(Fr("string"==typeof e.token),this.T=e.token,new $r(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Qr(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class Jr{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=Qr(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function Zr(e,t){return e<t?-1:e>t?1:0}function ei(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}class ti{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Br(zr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Br(zr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Br(zr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Br(zr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ti.fromMillis(Date.now())}static fromDate(e){return ti.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new ti(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Zr(this.nanoseconds,e.nanoseconds):Zr(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class ni{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ni(e)}static min(){return new ni(new ti(0,0))}static max(){return new ni(new ti(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class ri{constructor(e,t,n){void 0===t?t=0:t>e.length&&Mr(),void 0===n?n=e.length-t:n>e.length-t&&Mr(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===ri.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ri?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class ii extends ri{construct(e,t,n){return new ii(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new Br(zr.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter(e=>e.length>0))}return new ii(e)}static emptyPath(){return new ii([])}}const oi=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ai extends ri{construct(e,t,n){return new ai(e,t,n)}static isValidIdentifier(e){return oi.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ai.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new ai(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new Br(zr.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let o=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Br(zr.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Br(zr.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(o=!o,r++):"."!==t||o?(n+=t,r++):(i(),r++)}if(i(),o)throw new Br(zr.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ai(t)}static emptyPath(){return new ai([])}}class si{constructor(e){this.path=e}static fromPath(e){return new si(ii.fromString(e))}static fromName(e){return new si(ii.fromString(e).popFirst(5))}static empty(){return new si(ii.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===ii.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return ii.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new si(new ii(e.slice()))}}class li{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}li.UNKNOWN_ID=-1;function ci(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=ni.fromTimestamp(1e9===r?new ti(n+1,0):new ti(n,r));return new di(i,si.empty(),t)}function ui(e){return new di(e.readTime,e.key,-1)}class di{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new di(ni.min(),si.empty(),-1)}static max(){return new di(ni.max(),si.empty(),-1)}}function hi(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=si.comparator(e.documentKey,t.documentKey),0!==n?n:Zr(e.largestBatchId,t.largestBatchId))}const fi="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class pi{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function gi(e){if(e.code!==zr.FAILED_PRECONDITION||e.message!==fi)throw e;Dr("LocalStore","Unexpectedly lost primary lease")}class mi{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Mr(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new mi((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof mi?t:mi.resolve(t)}catch(e){return mi.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):mi.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):mi.reject(t)}static resolve(e){return new mi((t,n)=>{t(e)})}static reject(e){return new mi((t,n)=>{n(e)})}static waitFor(e){return new mi((t,n)=>{let r=0,i=0,o=!1;e.forEach(e=>{++r,e.next(()=>{++i,o&&i===r&&t()},e=>n(e))}),o=!0,i===r&&t()})}static or(e){let t=mi.resolve(!1);for(const n of e)t=t.next(e=>e?mi.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new mi((n,r)=>{const i=e.length,o=new Array(i);let a=0;for(let s=0;s<i;s++){const l=s;t(e[l]).next(e=>{o[l]=e,++a,a===i&&n(o)},e=>r(e))}})}static doWhile(e,t){return new mi((n,r)=>{const i=()=>{!0===e()?t().next(()=>{i()},r):n()};i()})}}function vi(e){return"IndexedDbTransactionError"===e.name}class yi{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ot(e),this.ut=e=>t.writeSequenceNumber(e))}ot(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ut&&this.ut(e),e}}function bi(e){return null==e}function wi(e){return 0===e&&1/e==-1/0}function xi(e){return"number"==typeof e&&Number.isInteger(e)&&!wi(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}yi.ct=-1;const Si=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Ei=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Ti=Ei;function Ai(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function _i(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function ki(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class Ci{constructor(e,t){this.comparator=e,this.root=t||Ri.EMPTY}insert(e,t){return new Ci(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ri.BLACK,null,null))}remove(e){return new Ci(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ri.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push("".concat(t,":").concat(n)),!1)),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ii(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ii(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ii(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ii(this.root,e,this.comparator,!0)}}class Ii{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ri{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Ri.RED,this.left=null!=r?r:Ri.EMPTY,this.right=null!=i?i:Ri.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new Ri(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Ri.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Ri.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ri.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ri.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Mr();if(this.right.isRed())throw Mr();const e=this.left.check();if(e!==this.right.check())throw Mr();return e+(this.isRed()?0:1)}}Ri.EMPTY=null,Ri.RED=!0,Ri.BLACK=!1,Ri.EMPTY=new class{constructor(){this.size=0}get key(){throw Mr()}get value(){throw Mr()}get color(){throw Mr()}get left(){throw Mr()}get right(){throw Mr()}copy(e,t,n,r,i){return this}insert(e,t,n){return new Ri(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ni{constructor(e){this.comparator=e,this.data=new Ci(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Oi(this.data.getIterator())}getIteratorFrom(e){return new Oi(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof Ni))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Ni(this.comparator);return t.data=e,t}}class Oi{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Di{constructor(e){this.fields=e,e.sort(ai.comparator)}static empty(){return new Di([])}unionWith(e){let t=new Ni(ai.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Di(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ei(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class Pi extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Li{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Pi("Invalid base64 string: "+e):e}}(e);return new Li(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Li(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Zr(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Li.EMPTY_BYTE_STRING=new Li("");const ji=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Mi(e){if(Fr(!!e),"string"==typeof e){let t=0;const n=ji.exec(e);if(Fr(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Fi(e.seconds),nanos:Fi(e.nanos)}}function Fi(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Ui(e){return"string"==typeof e?Li.fromBase64String(e):Li.fromUint8Array(e)}function zi(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Bi(e){const t=e.mapValue.fields.__previous_value__;return zi(t)?Bi(t):t}function Wi(e){const t=Mi(e.mapValue.fields.__local_write_time__.timestampValue);return new ti(t.seconds,t.nanos)}class Vi{constructor(e,t,n,r,i,o,a,s,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=s,this.useFetchStreams=l}}class Hi{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Hi("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Hi&&e.projectId===this.projectId&&e.database===this.database}}const Gi={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function qi(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?zi(e)?4:ao(e)?9007199254740991:10:Mr()}function Ki(e,t){if(e===t)return!0;const n=qi(e);if(n!==qi(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Wi(e).isEqual(Wi(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Mi(e.timestampValue),r=Mi(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Ui(e.bytesValue).isEqual(Ui(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Fi(e.geoPointValue.latitude)===Fi(t.geoPointValue.latitude)&&Fi(e.geoPointValue.longitude)===Fi(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Fi(e.integerValue)===Fi(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Fi(e.doubleValue),r=Fi(t.doubleValue);return n===r?wi(n)===wi(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return ei(e.arrayValue.values||[],t.arrayValue.values||[],Ki);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Ai(n)!==Ai(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Ki(n[i],r[i])))return!1;return!0}(e,t);default:return Mr()}}function Yi(e,t){return void 0!==(e.values||[]).find(e=>Ki(e,t))}function $i(e,t){if(e===t)return 0;const n=qi(e),r=qi(t);if(n!==r)return Zr(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Zr(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Fi(e.integerValue||e.doubleValue),r=Fi(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Xi(e.timestampValue,t.timestampValue);case 4:return Xi(Wi(e),Wi(t));case 5:return Zr(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Ui(e),r=Ui(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=Zr(n[i],r[i]);if(0!==e)return e}return Zr(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Zr(Fi(e.latitude),Fi(t.latitude));return 0!==n?n:Zr(Fi(e.longitude),Fi(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=$i(n[i],r[i]);if(e)return e}return Zr(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Gi.mapValue&&t===Gi.mapValue)return 0;if(e===Gi.mapValue)return 1;if(t===Gi.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},o=Object.keys(i);r.sort(),o.sort();for(let a=0;a<r.length&&a<o.length;++a){const e=Zr(r[a],o[a]);if(0!==e)return e;const t=$i(n[r[a]],i[o[a]]);if(0!==t)return t}return Zr(r.length,o.length)}(e.mapValue,t.mapValue);default:throw Mr()}}function Xi(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Zr(e,t);const n=Mi(e),r=Mi(t),i=Zr(n.seconds,r.seconds);return 0!==i?i:Zr(n.nanos,r.nanos)}function Qi(e){return Ji(e)}function Ji(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Mi(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Ui(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,si.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Ji(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(Ji(e.fields[i]));return n+"}"}(e.mapValue):Mr();var t,n}function Zi(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function eo(e){return!!e&&"integerValue"in e}function to(e){return!!e&&"arrayValue"in e}function no(e){return!!e&&"nullValue"in e}function ro(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function io(e){return!!e&&"mapValue"in e}function oo(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return _i(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=oo(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=oo(e.arrayValue.values[n]);return t}return Object.assign({},e)}function ao(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}class so{constructor(e){this.value=e}static empty(){return new so({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!io(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=oo(t)}setAll(e){let t=ai.emptyPath(),n={},r=[];e.forEach((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=oo(e):r.push(i.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());io(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ki(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];io(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){_i(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new so(oo(this.value))}}function lo(e){const t=[];return _i(e.fields,(e,n)=>{const r=new ai([e]);if(io(n)){const e=lo(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new Di(t)}class co{constructor(e,t,n,r,i,o,a){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new co(e,0,ni.min(),ni.min(),ni.min(),so.empty(),0)}static newFoundDocument(e,t,n,r){return new co(e,1,t,ni.min(),n,r,0)}static newNoDocument(e,t){return new co(e,2,t,ni.min(),ni.min(),so.empty(),0)}static newUnknownDocument(e,t){return new co(e,3,t,ni.min(),ni.min(),so.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ni.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=so.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=so.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ni.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof co&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new co(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class uo{constructor(e,t){this.position=e,this.inclusive=t}}function ho(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const o=t[i],a=e.position[i];if(r=o.field.isKeyField()?si.comparator(si.fromName(a.referenceValue),n.key):$i(a,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return r}function fo(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Ki(e.position[n],t.position[n]))return!1;return!0}class po{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function go(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class mo{}class vo extends mo{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Ao(e,t,n):"array-contains"===t?new Io(e,n):"in"===t?new Ro(e,n):"not-in"===t?new No(e,n):"array-contains-any"===t?new Oo(e,n):new vo(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new _o(e,n):new ko(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison($i(t,this.value)):null!==t&&qi(this.value)===qi(t)&&this.matchesComparison($i(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Mr()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class yo extends mo{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new yo(e,t)}matches(e){return bo(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(e=>e.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function bo(e){return"and"===e.op}function wo(e){return xo(e)&&bo(e)}function xo(e){for(const t of e.filters)if(t instanceof yo)return!1;return!0}function So(e){if(e instanceof vo)return e.field.canonicalString()+e.op.toString()+Qi(e.value);if(wo(e))return e.filters.map(e=>So(e)).join(",");{const t=e.filters.map(e=>So(e)).join(",");return"".concat(e.op,"(").concat(t,")")}}function Eo(e,t){return e instanceof vo?function(e,t){return t instanceof vo&&e.op===t.op&&e.field.isEqual(t.field)&&Ki(e.value,t.value)}(e,t):e instanceof yo?function(e,t){return t instanceof yo&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&Eo(n,t.filters[r]),!0)}(e,t):void Mr()}function To(e){return e instanceof vo?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Qi(e.value))}(e):e instanceof yo?function(e){return e.op.toString()+" {"+e.getFilters().map(To).join(" ,")+"}"}(e):"Filter"}class Ao extends vo{constructor(e,t,n){super(e,t,n),this.key=si.fromName(n.referenceValue)}matches(e){const t=si.comparator(e.key,this.key);return this.matchesComparison(t)}}class _o extends vo{constructor(e,t){super(e,"in",t),this.keys=Co("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class ko extends vo{constructor(e,t){super(e,"not-in",t),this.keys=Co("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Co(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>si.fromName(e.referenceValue))}class Io extends vo{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return to(t)&&Yi(t.arrayValue,this.value)}}class Ro extends vo{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Yi(this.value.arrayValue,t)}}class No extends vo{constructor(e,t){super(e,"not-in",t)}matches(e){if(Yi(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Yi(this.value.arrayValue,t)}}class Oo extends vo{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!to(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>Yi(this.value.arrayValue,e))}}class Do{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.dt=null}}function Po(e){return new Do(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Lo(e){const t=Ur(e);if(null===t.dt){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>So(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),bi(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>Qi(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>Qi(e)).join(",")),t.dt=e}return t.dt}function jo(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!go(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Eo(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!fo(e.startAt,t.startAt)&&fo(e.endAt,t.endAt)}function Mo(e){return si.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class Fo{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=s,this.wt=null,this._t=null,this.startAt,this.endAt}}function Uo(e,t,n,r,i,o,a,s){return new Fo(e,t,n,r,i,o,a,s)}function zo(e){return new Fo(e)}function Bo(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Wo(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function Vo(e){for(const t of e.filters){const e=t.getFirstInequalityField();if(null!==e)return e}return null}function Ho(e){return null!==e.collectionGroup}function Go(e){const t=Ur(e);if(null===t.wt){t.wt=[];const e=Vo(t),n=Wo(t);if(null!==e&&null===n)e.isKeyField()||t.wt.push(new po(e)),t.wt.push(new po(ai.keyField(),"asc"));else{let e=!1;for(const n of t.explicitOrderBy)t.wt.push(n),n.field.isKeyField()&&(e=!0);if(!e){const e=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.wt.push(new po(ai.keyField(),e))}}}return t.wt}function qo(e){const t=Ur(e);if(!t._t)if("F"===t.limitType)t._t=Po(t.path,t.collectionGroup,Go(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const i of Go(t)){const t="desc"===i.dir?"asc":"desc";e.push(new po(i.field,t))}const n=t.endAt?new uo(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new uo(t.startAt.position,t.startAt.inclusive):null;t._t=Po(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}return t._t}function Ko(e,t){t.getFirstInequalityField(),Vo(e);const n=e.filters.concat([t]);return new Fo(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Yo(e,t,n){return new Fo(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function $o(e,t){return jo(qo(e),qo(t))&&e.limitType===t.limitType}function Xo(e){return"".concat(Lo(qo(e)),"|lt:").concat(e.limitType)}function Qo(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map(e=>To(e)).join(", "),"]")),bi(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map(e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>Qi(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>Qi(e)).join(",")),"Target(".concat(t,")")}(qo(e)),"; limitType=").concat(e.limitType,")")}function Jo(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):si.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Go(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=ho(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Go(e),t))&&!(e.endAt&&!function(e,t,n){const r=ho(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Go(e),t))}(e,t)}function Zo(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function ea(e){return(t,n)=>{let r=!1;for(const i of Go(e)){const e=ta(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function ta(e,t,n){const r=e.field.isKeyField()?si.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?$i(r,i):Mr()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Mr()}}class na{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){_i(this.inner,(t,n)=>{for(const[r,i]of n)e(r,i)})}isEmpty(){return ki(this.inner)}size(){return this.innerSize}}const ra=new Ci(si.comparator);function ia(){return ra}const oa=new Ci(si.comparator);function aa(){let e=oa;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function sa(e){let t=oa;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function la(){return ua()}function ca(){return ua()}function ua(){return new na(e=>e.toString(),(e,t)=>e.isEqual(t))}const da=new Ci(si.comparator),ha=new Ni(si.comparator);function fa(){let e=ha;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const pa=new Ni(Zr);function ga(){return pa}function ma(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:wi(t)?"-0":t}}function va(e){return{integerValue:""+e}}function ya(e,t){return xi(t)?va(t):ma(e,t)}class ba{constructor(){this._=void 0}}function wa(e,t,n){return e instanceof Ea?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&zi(t)&&(t=Bi(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Ta?Aa(e,t):e instanceof _a?ka(e,t):function(e,t){const n=Sa(e,t),r=Ia(n)+Ia(e.gt);return eo(n)&&eo(e.gt)?va(r):ma(e.serializer,r)}(e,t)}function xa(e,t,n){return e instanceof Ta?Aa(e,t):e instanceof _a?ka(e,t):n}function Sa(e,t){return e instanceof Ca?eo(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}class Ea extends ba{}class Ta extends ba{constructor(e){super(),this.elements=e}}function Aa(e,t){const n=Ra(t);for(const r of e.elements)n.some(e=>Ki(e,r))||n.push(r);return{arrayValue:{values:n}}}class _a extends ba{constructor(e){super(),this.elements=e}}function ka(e,t){let n=Ra(t);for(const r of e.elements)n=n.filter(e=>!Ki(e,r));return{arrayValue:{values:n}}}class Ca extends ba{constructor(e,t){super(),this.serializer=e,this.gt=t}}function Ia(e){return Fi(e.integerValue||e.doubleValue)}function Ra(e){return to(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Na{constructor(e,t){this.field=e,this.transform=t}}class Oa{constructor(e,t){this.version=e,this.transformResults=t}}class Da{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Da}static exists(e){return new Da(void 0,e)}static updateTime(e){return new Da(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Pa(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class La{}function ja(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new qa(e.key,Da.none()):new Ba(e.key,e.data,Da.none());{const n=e.data,r=so.empty();let i=new Ni(ai.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new Wa(e.key,r,new Di(i.toArray()),Da.none())}}function Ma(e,t,n){e instanceof Ba?function(e,t,n){const r=e.value.clone(),i=Ha(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Wa?function(e,t,n){if(!Pa(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Ha(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Va(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Fa(e,t,n,r){return e instanceof Ba?function(e,t,n,r){if(!Pa(e.precondition,t))return n;const i=e.value.clone(),o=Ga(e.fieldTransforms,r,t);return i.setAll(o),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Wa?function(e,t,n,r){if(!Pa(e.precondition,t))return n;const i=Ga(e.fieldTransforms,r,t),o=t.data;return o.setAll(Va(e)),o.setAll(i),t.convertToFoundDocument(t.version,o).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):function(e,t,n){return Pa(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Ua(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=Sa(r.transform,e||null);null!=i&&(null===n&&(n=so.empty()),n.set(r.field,i))}return n||null}function za(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&ei(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Ta&&t instanceof Ta||e instanceof _a&&t instanceof _a?ei(e.elements,t.elements,Ki):e instanceof Ca&&t instanceof Ca?Ki(e.gt,t.gt):e instanceof Ea&&t instanceof Ea}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Ba extends La{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Wa extends La{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Va(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function Ha(e,t,n){const r=new Map;Fr(e.length===n.length);for(let i=0;i<n.length;i++){const o=e[i],a=o.transform,s=t.data.field(o.field);r.set(o.field,xa(a,s,n[i]))}return r}function Ga(e,t,n){const r=new Map;for(const i of e){const e=i.transform,o=n.data.field(i.field);r.set(i.field,wa(e,o,t))}return r}class qa extends La{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Ka extends La{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Ya{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Ma(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Fa(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Fa(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=ca();return this.mutations.forEach(r=>{const i=e.get(r.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=t.has(r.key)?null:a;const s=ja(o,a);null!==s&&n.set(r.key,s),o.isValidDocument()||o.convertToNoDocument(ni.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),fa())}isEqual(e){return this.batchId===e.batchId&&ei(this.mutations,e.mutations,(e,t)=>za(e,t))&&ei(this.baseMutations,e.baseMutations,(e,t)=>za(e,t))}}class $a{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Fr(e.mutations.length===n.length);let r=da;const i=e.mutations;for(let o=0;o<i.length;o++)r=r.insert(i[o].key,n[o].version);return new $a(e,t,n,r)}}class Xa{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class Qa{constructor(e,t){this.count=e,this.unchangedNames=t}}var Ja,Za;function es(e){switch(e){default:return Mr();case zr.CANCELLED:case zr.UNKNOWN:case zr.DEADLINE_EXCEEDED:case zr.RESOURCE_EXHAUSTED:case zr.INTERNAL:case zr.UNAVAILABLE:case zr.UNAUTHENTICATED:return!1;case zr.INVALID_ARGUMENT:case zr.NOT_FOUND:case zr.ALREADY_EXISTS:case zr.PERMISSION_DENIED:case zr.FAILED_PRECONDITION:case zr.ABORTED:case zr.OUT_OF_RANGE:case zr.UNIMPLEMENTED:case zr.DATA_LOSS:return!0}}function ts(e){if(void 0===e)return Pr("GRPC error has no .code"),zr.UNKNOWN;switch(e){case Ja.OK:return zr.OK;case Ja.CANCELLED:return zr.CANCELLED;case Ja.UNKNOWN:return zr.UNKNOWN;case Ja.DEADLINE_EXCEEDED:return zr.DEADLINE_EXCEEDED;case Ja.RESOURCE_EXHAUSTED:return zr.RESOURCE_EXHAUSTED;case Ja.INTERNAL:return zr.INTERNAL;case Ja.UNAVAILABLE:return zr.UNAVAILABLE;case Ja.UNAUTHENTICATED:return zr.UNAUTHENTICATED;case Ja.INVALID_ARGUMENT:return zr.INVALID_ARGUMENT;case Ja.NOT_FOUND:return zr.NOT_FOUND;case Ja.ALREADY_EXISTS:return zr.ALREADY_EXISTS;case Ja.PERMISSION_DENIED:return zr.PERMISSION_DENIED;case Ja.FAILED_PRECONDITION:return zr.FAILED_PRECONDITION;case Ja.ABORTED:return zr.ABORTED;case Ja.OUT_OF_RANGE:return zr.OUT_OF_RANGE;case Ja.UNIMPLEMENTED:return zr.UNIMPLEMENTED;case Ja.DATA_LOSS:return zr.DATA_LOSS;default:return Mr()}}(Za=Ja||(Ja={}))[Za.OK=0]="OK",Za[Za.CANCELLED=1]="CANCELLED",Za[Za.UNKNOWN=2]="UNKNOWN",Za[Za.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Za[Za.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Za[Za.NOT_FOUND=5]="NOT_FOUND",Za[Za.ALREADY_EXISTS=6]="ALREADY_EXISTS",Za[Za.PERMISSION_DENIED=7]="PERMISSION_DENIED",Za[Za.UNAUTHENTICATED=16]="UNAUTHENTICATED",Za[Za.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Za[Za.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Za[Za.ABORTED=10]="ABORTED",Za[Za.OUT_OF_RANGE=11]="OUT_OF_RANGE",Za[Za.UNIMPLEMENTED=12]="UNIMPLEMENTED",Za[Za.INTERNAL=13]="INTERNAL",Za[Za.UNAVAILABLE=14]="UNAVAILABLE",Za[Za.DATA_LOSS=15]="DATA_LOSS";class ns{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return rs}static getOrCreateInstance(){return null===rs&&(rs=new ns),rs}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let rs=null;function is(){return new TextEncoder}const os=new kr([4294967295,4294967295],0);function as(e){const t=is().encode(e),n=new _r;return n.update(t),new Uint8Array(n.digest())}function ss(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),o=t.getUint32(12,!0);return[new kr([n,r],0),new kr([i,o],0)]}class ls{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new cs("Invalid padding: ".concat(t));if(n<0)throw new cs("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new cs("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new cs("Invalid padding when bitmap length is 0: ".concat(t));this.It=8*e.length-t,this.Tt=kr.fromNumber(this.It)}Et(e,t,n){let r=e.add(t.multiply(kr.fromNumber(n)));return 1===r.compare(os)&&(r=new kr([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=as(e),[n,r]=ss(t);for(let i=0;i<this.hashCount;i++){const e=this.Et(n,r,i);if(!this.At(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new ls(i,r,t);return n.forEach(e=>o.insert(e)),o}insert(e){if(0===this.It)return;const t=as(e),[n,r]=ss(t);for(let i=0;i<this.hashCount;i++){const e=this.Et(n,r,i);this.Rt(e)}}Rt(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class cs extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class us{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,ds.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new us(ni.min(),r,new Ci(Zr),ia(),fa())}}class ds{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new ds(n,t,fa(),fa(),fa())}}class hs{constructor(e,t,n,r){this.Pt=e,this.removedTargetIds=t,this.key=n,this.bt=r}}class fs{constructor(e,t){this.targetId=e,this.Vt=t}}class ps{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Li.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class gs{constructor(){this.St=0,this.Dt=ys(),this.Ct=Li.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=fa(),t=fa(),n=fa();return this.Dt.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Mr()}}),new ds(this.Ct,this.xt,e,t,n)}Ft(){this.Nt=!1,this.Dt=ys()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class ms{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=ia(),this.zt=vs(),this.Wt=new Ci(Zr)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const n=this.Zt(t);switch(e.state){case 0:this.te(t)&&n.$t(e.resumeToken);break;case 1:n.Ut(),n.kt||n.Ft(),n.$t(e.resumeToken);break;case 2:n.Ut(),n.kt||this.removeTarget(t);break;case 3:this.te(t)&&(n.Kt(),n.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),n.$t(e.resumeToken));break;default:Mr()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((e,n)=>{this.te(n)&&t(n)})}ne(e){var t;const n=e.targetId,r=e.Vt.count,i=this.se(n);if(i){const o=i.target;if(Mo(o))if(0===r){const e=new si(o.path);this.Yt(n,e,co.newNoDocument(e,ni.min()))}else Fr(1===r);else{const i=this.ie(n);if(i!==r){const r=this.re(e,i);if(0!==r){this.ee(n);const e=2===r?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Wt=this.Wt.insert(n,e)}null===(t=ns.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(e,t,n){var r,i,o,a,s,l;const c={localCacheCount:t,existenceFilterCount:n.count},u=n.unchangedNames;return u&&(c.bloomFilter={applied:0===e,hashCount:null!==(r=null==u?void 0:u.hashCount)&&void 0!==r?r:0,bitmapLength:null!==(a=null===(o=null===(i=null==u?void 0:u.bits)||void 0===i?void 0:i.bitmap)||void 0===o?void 0:o.length)&&void 0!==a?a:0,padding:null!==(l=null===(s=null==u?void 0:u.bits)||void 0===s?void 0:s.padding)&&void 0!==l?l:0}),c}(r,i,e.Vt))}}}}re(e,t){const{unchangedNames:n,count:r}=e.Vt;if(!n||!n.bits)return 1;const{bits:{bitmap:i="",padding:o=0},hashCount:a=0}=n;let s,l;try{s=Ui(i).toUint8Array()}catch(e){if(e instanceof Pi)return Lr("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw e}try{l=new ls(s,o,a)}catch(e){return Lr(e instanceof cs?"BloomFilter error: ":"Applying bloom filter failed: ",e),1}return 0===l.It?1:r!==t-this.oe(e.targetId,l)?2:0}oe(e,t){const n=this.Gt.getRemoteKeysForTarget(e);let r=0;return n.forEach(n=>{const i=this.Gt.ue(),o="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());t.vt(o)||(this.Yt(e,n,null),r++)}),r}ce(e){const t=new Map;this.Qt.forEach((n,r)=>{const i=this.se(r);if(i){if(n.current&&Mo(i.target)){const t=new si(i.target.path);null!==this.jt.get(t)||this.ae(r,t)||this.Yt(r,t,co.newNoDocument(t,e))}n.Mt&&(t.set(r,n.Ot()),n.Ft())}});let n=fa();this.zt.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.se(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.jt.forEach((t,n)=>n.setReadTime(e));const r=new us(e,t,this.Wt,this.jt,n);return this.jt=ia(),this.zt=vs(),this.Wt=new Ci(Zr),r}Jt(e,t){if(!this.te(e))return;const n=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,n),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,n){if(!this.te(e))return;const r=this.Zt(e);this.ae(e,t)?r.Bt(t,1):r.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),n&&(this.jt=this.jt.insert(t,n))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new gs,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new Ni(Zr),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||Dr("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new gs),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function vs(){return new Ci(si.comparator)}function ys(){return new Ci(si.comparator)}const bs={asc:"ASCENDING",desc:"DESCENDING"},ws={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},xs={and:"AND",or:"OR"};class Ss{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Es(e,t){return e.useProto3Json||bi(t)?t:{value:t}}function Ts(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function As(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function _s(e,t){return Ts(e,t.toTimestamp())}function ks(e){return Fr(!!e),ni.fromTimestamp(function(e){const t=Mi(e);return new ti(t.seconds,t.nanos)}(e))}function Cs(e,t){return function(e){return new ii(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function Is(e){const t=ii.fromString(e);return Fr($s(t)),t}function Rs(e,t){return Cs(e.databaseId,t.path)}function Ns(e,t){const n=Is(t);if(n.get(1)!==e.databaseId.projectId)throw new Br(zr.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Br(zr.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new si(Ls(n))}function Os(e,t){return Cs(e.databaseId,t)}function Ds(e){const t=Is(e);return 4===t.length?ii.emptyPath():Ls(t)}function Ps(e){return new ii(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Ls(e){return Fr(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function js(e,t,n){return{name:Rs(e,t),fields:n.value.mapValue.fields}}function Ms(e,t){let n;if(t instanceof Ba)n={update:js(e,t.key,t.value)};else if(t instanceof qa)n={delete:Rs(e,t.key)};else if(t instanceof Wa)n={update:js(e,t.key,t.data),updateMask:Ys(t.fieldMask)};else{if(!(t instanceof Ka))return Mr();n={verify:Rs(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof Ea)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Ta)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof _a)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Ca)return{fieldPath:t.field.canonicalString(),increment:n.gt};throw Mr()}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:_s(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Mr()}(e,t.precondition)),n}function Fs(e,t){return{documents:[Os(e,t.path)]}}function Us(e,t){const n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Os(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Os(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(e){if(0!==e.length)return Ks(yo.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);const o=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:Gs(e.field),direction:Ws(e.dir)}}(e))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Es(e,t.limit);var s;return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt={before:(s=t.startAt).inclusive,values:s.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function zs(e){let t=Ds(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Fr(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let o=[];n.where&&(o=function(e){const t=Bs(e);return t instanceof yo&&wo(t)?t.getFilters():[t]}(n.where));let a=[];n.orderBy&&(a=n.orderBy.map(e=>function(e){return new po(qs(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)));let s=null;n.limit&&(s=function(e){let t;return t="object"==typeof e?e.value:e,bi(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new uo(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new uo(n,t)}(n.endAt)),Uo(t,i,a,o,s,"F",l,c)}function Bs(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=qs(e.unaryFilter.field);return vo.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=qs(e.unaryFilter.field);return vo.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=qs(e.unaryFilter.field);return vo.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=qs(e.unaryFilter.field);return vo.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Mr()}}(e):void 0!==e.fieldFilter?function(e){return vo.create(qs(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Mr()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return yo.create(e.compositeFilter.filters.map(e=>Bs(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Mr()}}(e.compositeFilter.op))}(e):Mr()}function Ws(e){return bs[e]}function Vs(e){return ws[e]}function Hs(e){return xs[e]}function Gs(e){return{fieldPath:e.canonicalString()}}function qs(e){return ai.fromServerFormat(e.fieldPath)}function Ks(e){return e instanceof vo?function(e){if("=="===e.op){if(ro(e.value))return{unaryFilter:{field:Gs(e.field),op:"IS_NAN"}};if(no(e.value))return{unaryFilter:{field:Gs(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(ro(e.value))return{unaryFilter:{field:Gs(e.field),op:"IS_NOT_NAN"}};if(no(e.value))return{unaryFilter:{field:Gs(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Gs(e.field),op:Vs(e.op),value:e.value}}}(e):e instanceof yo?function(e){const t=e.getFilters().map(e=>Ks(e));return 1===t.length?t[0]:{compositeFilter:{op:Hs(e.op),filters:t}}}(e):Mr()}function Ys(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function $s(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Xs{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ni.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:ni.min(),a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Li.EMPTY_BYTE_STRING,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=s}withSequenceNumber(e){return new Xs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Xs(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Xs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Xs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Qs{constructor(e){this.fe=e}}function Js(e){const t=zs({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Yo(t,t.limit,"L"):t}class Zs{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(Fi(e.integerValue));else if("doubleValue"in e){const n=Fi(e.doubleValue);isNaN(n)?this.ye(t,13):(this.ye(t,15),wi(n)?t.pe(0):t.pe(n))}else if("timestampValue"in e){const n=e.timestampValue;this.ye(t,20),"string"==typeof n?t.Ie(n):(t.Ie("".concat(n.seconds||"")),t.pe(n.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(Ui(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.ye(t,45),t.pe(n.latitude||0),t.pe(n.longitude||0)}else"mapValue"in e?ao(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):Mr()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const n=e.fields||{};this.ye(t,55);for(const r of Object.keys(n))this.Te(r,t),this.me(n[r],t)}Pe(e,t){const n=e.values||[];this.ye(t,50);for(const r of n)this.me(r,t)}ve(e,t){this.ye(t,37),si.fromName(e).path.forEach(e=>{this.ye(t,60),this.be(e,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}Zs.Ve=new Zs;class el{constructor(){this.rn=new tl}addToCollectionParentIndex(e,t){return this.rn.add(t),mi.resolve()}getCollectionParents(e,t){return mi.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return mi.resolve()}deleteFieldIndex(e,t){return mi.resolve()}getDocumentsMatchingTarget(e,t){return mi.resolve(null)}getIndexType(e,t){return mi.resolve(0)}getFieldIndexes(e,t){return mi.resolve([])}getNextCollectionGroupToUpdate(e){return mi.resolve(null)}getMinOffset(e,t){return mi.resolve(di.min())}getMinOffsetFromCollectionGroup(e,t){return mi.resolve(di.min())}updateCollectionGroup(e,t,n){return mi.resolve()}updateIndexEntries(e,t){return mi.resolve()}}class tl{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Ni(ii.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Ni(ii.comparator)).toArray()}}new Uint8Array(0);class nl{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new nl(e,nl.DEFAULT_COLLECTION_PERCENTILE,nl.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}nl.DEFAULT_COLLECTION_PERCENTILE=10,nl.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,nl.DEFAULT=new nl(41943040,nl.DEFAULT_COLLECTION_PERCENTILE,nl.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),nl.DISABLED=new nl(-1,0,0);class rl{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new rl(0)}static Mn(){return new rl(-1)}}class il{constructor(){this.changes=new na(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,co.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?mi.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class ol{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class al{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&Fa(n.mutation,e,Di.empty(),ti.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,fa()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:fa();const r=la();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=aa();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=la();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,fa()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let i=ia();const o=ua(),a=ua();return t.forEach((e,t)=>{const a=n.get(t.key);r.has(t.key)&&(void 0===a||a.mutation instanceof Wa)?i=i.insert(t.key,t):void 0!==a?(o.set(t.key,a.mutation.getFieldMask()),Fa(a.mutation,t,a.mutation.getFieldMask(),ti.now())):o.set(t.key,Di.empty())}),this.recalculateAndSaveOverlays(e,i).next(e=>(e.forEach((e,t)=>o.set(e,t)),t.forEach((e,t)=>{var n;return a.set(e,new ol(t,null!==(n=o.get(e))&&void 0!==n?n:null))}),a))}recalculateAndSaveOverlays(e,t){const n=ua();let r=new Ci((e,t)=>e-t),i=fa();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const i of e)i.keys().forEach(e=>{const o=t.get(e);if(null===o)return;let a=n.get(e)||Di.empty();a=i.applyToLocalView(o,a),n.set(e,a);const s=(r.get(i.batchId)||fa()).add(e);r=r.insert(i.batchId,s)})}).next(()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const r=a.getNext(),s=r.key,l=r.value,c=ca();l.forEach(e=>{if(!i.has(e)){const r=ja(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}}),o.push(this.documentOverlayCache.saveOverlays(e,s,c))}return mi.waitFor(o)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n){return function(e){return si.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Ho(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):mi.resolve(la());let a=-1,s=i;return o.next(t=>mi.forEach(t,(t,n)=>(a<n.largestBatchId&&(a=n.largestBatchId),i.get(t)?mi.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{s=s.insert(t,e)}))).next(()=>this.populateOverlays(e,t,i)).next(()=>this.computeViews(e,s,t,fa())).next(e=>({batchId:a,changes:sa(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new si(t)).next(e=>{let t=aa();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n){const r=t.collectionGroup;let i=aa();return this.indexManager.getCollectionParents(e,r).next(o=>mi.forEach(o,o=>{const a=function(e,t){return new Fo(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(r));return this.getDocumentsMatchingCollectionQuery(e,a,n).next(e=>{e.forEach((e,t)=>{i=i.insert(e,t)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,t,n){let r;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(i=>(r=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r))).next(e=>{r.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,co.newInvalidDocument(r)))});let n=aa();return e.forEach((e,i)=>{const o=r.get(e);void 0!==o&&Fa(o.mutation,i,Di.empty(),ti.now()),Jo(t,i)&&(n=n.insert(e,i))}),n})}}class sl{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return mi.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var n;return this.cs.set(t.id,{id:(n=t).id,version:n.version,createTime:ks(n.createTime)}),mi.resolve()}getNamedQuery(e,t){return mi.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,function(e){return{name:e.name,query:Js(e.bundledQuery),readTime:ks(e.readTime)}}(t)),mi.resolve()}}class ll{constructor(){this.overlays=new Ci(si.comparator),this.ls=new Map}getOverlay(e,t){return mi.resolve(this.overlays.get(t))}getOverlays(e,t){const n=la();return mi.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.we(e,t,r)}),mi.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.ls.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.ls.delete(n)),mi.resolve()}getOverlaysForCollection(e,t,n){const r=la(),i=t.length+1,o=new si(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const e=a.getNext().value,o=e.getKey();if(!t.isPrefixOf(o.path))break;o.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return mi.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new Ci((e,t)=>e-t);const o=this.overlays.getIterator();for(;o.hasNext();){const e=o.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=la(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const a=la(),s=i.getIterator();for(;s.hasNext()&&(s.getNext().value.forEach((e,t)=>a.set(e,t)),!(a.size()>=r)););return mi.resolve(a)}we(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.ls.get(r.largestBatchId).delete(n.key);this.ls.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Xa(t,n));let i=this.ls.get(t);void 0===i&&(i=fa(),this.ls.set(t,i)),this.ls.set(t,i.add(n.key))}}class cl{constructor(){this.fs=new Ni(ul.ds),this.ws=new Ni(ul._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const n=new ul(e,t);this.fs=this.fs.add(n),this.ws=this.ws.add(n)}gs(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.ys(new ul(e,t))}ps(e,t){e.forEach(e=>this.removeReference(e,t))}Is(e){const t=new si(new ii([])),n=new ul(t,e),r=new ul(t,e+1),i=[];return this.ws.forEachInRange([n,r],e=>{this.ys(e),i.push(e.key)}),i}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new si(new ii([])),n=new ul(t,e),r=new ul(t,e+1);let i=fa();return this.ws.forEachInRange([n,r],e=>{i=i.add(e.key)}),i}containsKey(e){const t=new ul(e,0),n=this.fs.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class ul{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return si.comparator(e.key,t.key)||Zr(e.As,t.As)}static _s(e,t){return Zr(e.As,t.As)||si.comparator(e.key,t.key)}}class dl{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new Ni(ul.ds)}checkEmpty(e){return mi.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.vs;this.vs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Ya(i,t,n,r);this.mutationQueue.push(o);for(const a of r)this.Rs=this.Rs.add(new ul(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return mi.resolve(o)}lookupMutationBatch(e,t){return mi.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.bs(n),i=r<0?0:r;return mi.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return mi.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return mi.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new ul(t,0),r=new ul(t,Number.POSITIVE_INFINITY),i=[];return this.Rs.forEachInRange([n,r],e=>{const t=this.Ps(e.As);i.push(t)}),mi.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Ni(Zr);return t.forEach(e=>{const t=new ul(e,0),r=new ul(e,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([t,r],e=>{n=n.add(e.As)})}),mi.resolve(this.Vs(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;si.isDocumentKey(i)||(i=i.child(""));const o=new ul(new si(i),0);let a=new Ni(Zr);return this.Rs.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.As)),!0)},o),mi.resolve(this.Vs(a))}Vs(e){const t=[];return e.forEach(e=>{const n=this.Ps(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){Fr(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let n=this.Rs;return mi.forEach(t.mutations,r=>{const i=new ul(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Rs=n})}Cn(e){}containsKey(e,t){const n=new ul(t,0),r=this.Rs.firstAfterOrEqual(n);return mi.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,mi.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class hl{constructor(e){this.Ds=e,this.docs=new Ci(si.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,o=this.Ds(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return mi.resolve(n?n.document.mutableCopy():co.newInvalidDocument(t))}getEntries(e,t){let n=ia();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():co.newInvalidDocument(e))}),mi.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=ia();const o=t.path,a=new si(o.child("")),s=this.docs.getIteratorFrom(a);for(;s.hasNext();){const{key:e,value:{document:a}}=s.getNext();if(!o.isPrefixOf(e.path))break;e.path.length>o.length+1||hi(ui(a),n)<=0||(r.has(a.key)||Jo(t,a))&&(i=i.insert(a.key,a.mutableCopy()))}return mi.resolve(i)}getAllFromCollectionGroup(e,t,n,r){Mr()}Cs(e,t){return mi.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new fl(this)}getSize(e){return mi.resolve(this.size)}}class fl extends il{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.os.addEntry(e,r)):this.os.removeEntry(n)}),mi.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class pl{constructor(e){this.persistence=e,this.xs=new na(e=>Lo(e),jo),this.lastRemoteSnapshotVersion=ni.min(),this.highestTargetId=0,this.Ns=0,this.ks=new cl,this.targetCount=0,this.Ms=rl.kn()}forEachTarget(e,t){return this.xs.forEach((e,n)=>t(n)),mi.resolve()}getLastRemoteSnapshotVersion(e){return mi.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return mi.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),mi.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Ns&&(this.Ns=t),mi.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new rl(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,mi.resolve()}updateTargetData(e,t){return this.Fn(t),mi.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,mi.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.xs.forEach((o,a)=>{a.sequenceNumber<=t&&null===n.get(a.targetId)&&(this.xs.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),mi.waitFor(i).next(()=>r)}getTargetCount(e){return mi.resolve(this.targetCount)}getTargetData(e,t){const n=this.xs.get(t)||null;return mi.resolve(n)}addMatchingKeys(e,t,n){return this.ks.gs(t,n),mi.resolve()}removeMatchingKeys(e,t,n){this.ks.ps(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(t=>{i.push(r.markPotentiallyOrphaned(e,t))}),mi.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),mi.resolve()}getMatchingKeysForTargetId(e,t){const n=this.ks.Es(t);return mi.resolve(n)}containsKey(e,t){return mi.resolve(this.ks.containsKey(t))}}class gl{constructor(e,t){this.$s={},this.overlays={},this.Os=new yi(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new pl(this),this.indexManager=new el,this.remoteDocumentCache=function(e){return new hl(e)}(e=>this.referenceDelegate.Ls(e)),this.serializer=new Qs(t),this.qs=new sl(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new ll,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.$s[e.toKey()];return n||(n=new dl(t,this.referenceDelegate),this.$s[e.toKey()]=n),n}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,n){Dr("MemoryPersistence","Starting transaction:",e);const r=new ml(this.Os.next());return this.referenceDelegate.Us(),n(r).next(e=>this.referenceDelegate.Ks(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Gs(e,t){return mi.or(Object.values(this.$s).map(n=>()=>n.containsKey(e,t)))}}class ml extends pi{constructor(e){super(),this.currentSequenceNumber=e}}class vl{constructor(e){this.persistence=e,this.Qs=new cl,this.js=null}static zs(e){return new vl(e)}get Ws(){if(this.js)return this.js;throw Mr()}addReference(e,t,n){return this.Qs.addReference(n,t),this.Ws.delete(n.toString()),mi.resolve()}removeReference(e,t,n){return this.Qs.removeReference(n,t),this.Ws.add(n.toString()),mi.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),mi.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(e=>this.Ws.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.Ws.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return mi.forEach(this.Ws,n=>{const r=si.fromPath(n);return this.Hs(e,r).next(e=>{e||t.removeEntry(r,ni.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(e=>{e?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return mi.or([()=>mi.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class yl{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Fi=n,this.Bi=r}static Li(e,t){let n=fa(),r=fa();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new yl(e,t.fromCache,n,r)}}class bl{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,n,r){return this.Ki(e,t).next(i=>i||this.Gi(e,t,r,n)).next(n=>n||this.Qi(e,t))}Ki(e,t){if(Bo(t))return mi.resolve(null);let n=qo(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=Yo(t,null,"F"),n=qo(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const i=fa(...r);return this.Ui.getDocuments(e,i).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const o=this.ji(t,r);return this.zi(t,o,i,n.readTime)?this.Ki(e,Yo(t,null,"F")):this.Wi(e,o,t,n)}))})))}Gi(e,t,n,r){return Bo(t)||r.isEqual(ni.min())?this.Qi(e,t):this.Ui.getDocuments(e,n).next(i=>{const o=this.ji(t,i);return this.zi(t,o,n,r)?this.Qi(e,t):(Or()<=a.$b.DEBUG&&Dr("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Qo(t)),this.Wi(e,o,t,ci(r,-1)))})}ji(e,t){let n=new Ni(ea(e));return t.forEach((t,r)=>{Jo(e,r)&&(n=n.add(r))}),n}zi(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Qi(e,t){return Or()<=a.$b.DEBUG&&Dr("QueryEngine","Using full collection scan to execute query:",Qo(t)),this.Ui.getDocumentsMatchingQuery(e,t,di.min())}Wi(e,t,n,r){return this.Ui.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}class wl{constructor(e,t,n,r){this.persistence=e,this.Hi=t,this.serializer=r,this.Ji=new Ci(Zr),this.Yi=new na(e=>Lo(e),jo),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(n)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new al(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function xl(e,t,n,r){return new wl(e,t,n,r)}async function Sl(e,t){const n=Ur(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(i=>(r=i,n.tr(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const i=[],o=[];let a=fa();for(const e of r){i.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}for(const e of t){o.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}return n.localDocuments.getDocuments(e,a).next(e=>({er:e,removedBatchIds:i,addedBatchIds:o}))})})}function El(e){const t=Ur(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Bs.getLastRemoteSnapshotVersion(e))}function Tl(e,t,n){let r=fa(),i=fa();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=ia();return n.forEach((n,o)=>{const a=e.get(n);o.isFoundDocument()!==a.isFoundDocument()&&(i=i.add(n)),o.isNoDocument()&&o.version.isEqual(ni.min())?(t.removeEntry(n,o.readTime),r=r.insert(n,o)):!a.isValidDocument()||o.version.compareTo(a.version)>0||0===o.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(o),r=r.insert(n,o)):Dr("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",o.version)}),{nr:r,sr:i}})}function Al(e,t){const n=Ur(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function _l(e,t){const n=Ur(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.Bs.getTargetData(e,t).next(i=>i?(r=i,mi.resolve(r)):n.Bs.allocateTargetId(e).next(i=>(r=new Xs(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Bs.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.Ji.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ji=n.Ji.insert(e.targetId,e),n.Yi.set(t,e.targetId)),e})}async function kl(e,t,n){const r=Ur(e),i=r.Ji.get(t),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,e=>r.persistence.referenceDelegate.removeTarget(e,i))}catch(e){if(!vi(e))throw e;Dr("LocalStore","Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.Ji=r.Ji.remove(t),r.Yi.delete(i.target)}function Cl(e,t,n){const r=Ur(e);let i=ni.min(),o=fa();return r.persistence.runTransaction("Execute query","readonly",e=>function(e,t,n){const r=Ur(e),i=r.Yi.get(n);return void 0!==i?mi.resolve(r.Ji.get(i)):r.Bs.getTargetData(t,n)}(r,e,qo(t)).next(t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(e,t.targetId).next(e=>{o=e})}).next(()=>r.Hi.getDocumentsMatchingQuery(e,t,n?i:ni.min(),n?o:fa())).next(e=>(Il(r,Zo(t),e),{documents:e,ir:o})))}function Il(e,t,n){let r=e.Xi.get(t)||ni.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.Xi.set(t,r)}class Rl{constructor(){this.activeTargetIds=ga()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Nl{constructor(){this.Hr=new Rl,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,n){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new Rl,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Ol{Yr(e){}shutdown(){}}class Dl{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){Dr("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){Dr("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Pl=null;function Ll(){return null===Pl?Pl=268435456+Math.round(2147483648*Math.random()):Pl++,"0x"+Pl.toString(16)}const jl={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Ml{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const Fl="WebChannelConnection";class Ul extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http";this.mo=t+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,n,r,i){const o=Ll(),a=this.To(e,t);Dr("RestConnection","Sending RPC '".concat(e,"' ").concat(o,":"),a,n);const s={};return this.Eo(s,r,i),this.Ao(e,a,s,n).then(t=>(Dr("RestConnection","Received RPC '".concat(e,"' ").concat(o,": "),t),t),t=>{throw Lr("RestConnection","RPC '".concat(e,"' ").concat(o," failed with error: "),t,"url: ",a,"request:",n),t})}vo(e,t,n,r,i,o){return this.Io(e,t,n,r,i)}Eo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Rr,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}To(e,t){const n=jl[e];return"".concat(this.mo,"/v1/").concat(t,":").concat(n)}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,n,r){const i=Ll();return new Promise((o,a)=>{const s=new Ar;s.setWithCredentials(!0),s.listenOnce(wr.COMPLETE,()=>{try{switch(s.getLastErrorCode()){case br.NO_ERROR:const t=s.getResponseJson();Dr(Fl,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),o(t);break;case br.TIMEOUT:Dr(Fl,"RPC '".concat(e,"' ").concat(i," timed out")),a(new Br(zr.DEADLINE_EXCEEDED,"Request time out"));break;case br.HTTP_ERROR:const n=s.getStatus();if(Dr(Fl,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",s.getResponseText()),n>0){let e=s.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(zr).indexOf(t)>=0?t:zr.UNKNOWN}(t.status);a(new Br(e,t.message))}else a(new Br(zr.UNKNOWN,"Server responded with status "+s.getStatus()))}else a(new Br(zr.UNAVAILABLE,"Connection failed."));break;default:Mr()}}finally{Dr(Fl,"RPC '".concat(e,"' ").concat(i," completed."))}});const l=JSON.stringify(r);Dr(Fl,"RPC '".concat(e,"' ").concat(i," sending request:"),r),s.send(t,"POST",l,n,15)})}Ro(e,t,n){const r=Ll(),i=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=vr(),a=yr(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(s.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(s.xmlHttpFactory=new Er({})),this.Eo(s.initMessageHeaders,t,n),s.encodeInitMessageHeaders=!0;const c=i.join("");Dr(Fl,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),s);const u=o.createWebChannel(c,s);let d=!1,h=!1;const f=new Ml({ro:t=>{h?Dr(Fl,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(d||(Dr(Fl,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),d=!0),Dr(Fl,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},oo:()=>u.close()}),p=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return p(u,Tr.EventType.OPEN,()=>{h||Dr(Fl,"RPC '".concat(e,"' stream ").concat(r," transport opened."))}),p(u,Tr.EventType.CLOSE,()=>{h||(h=!0,Dr(Fl,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.wo())}),p(u,Tr.EventType.ERROR,t=>{h||(h=!0,Lr(Fl,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),f.wo(new Br(zr.UNAVAILABLE,"The operation could not be completed")))}),p(u,Tr.EventType.MESSAGE,t=>{var n;if(!h){const i=t.data[0];Fr(!!i);const o=i,a=o.error||(null===(n=o[0])||void 0===n?void 0:n.error);if(a){Dr(Fl,"RPC '".concat(e,"' stream ").concat(r," received error:"),a);const t=a.status;let n=function(e){const t=Ja[e];if(void 0!==t)return ts(t)}(t),i=a.message;void 0===n&&(n=zr.INTERNAL,i="Unknown error status: "+t+" with message "+a.message),h=!0,f.wo(new Br(n,i)),u.close()}else Dr(Fl,"RPC '".concat(e,"' stream ").concat(r," received:"),i),f._o(i)}}),p(a,xr.STAT_EVENT,t=>{t.stat===Sr.PROXY?Dr(Fl,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===Sr.NOPROXY&&Dr(Fl,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))}),setTimeout(()=>{f.fo()},0),f}}function zl(){return"undefined"!=typeof document?document:null}function Bl(e){return new Ss(e,!0)}class Wl{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.ii=e,this.timerId=t,this.Po=n,this.bo=r,this.Vo=i,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),n=Math.max(0,Date.now()-this.Co),r=Math.max(0,t-n);r>0&&Dr("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.So," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.Do=this.ii.enqueueAfterDelay(this.timerId,r,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class Vl{constructor(e,t,n,r,i,o,a,s){this.ii=e,this.$o=n,this.Oo=r,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=s,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new Wl(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}async stop(){this.Uo()&&await this.close(0)}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}async zo(){if(this.Ko())return this.close(0)}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}async close(e,t){this.Ho(),this.Jo(),this.qo.cancel(),this.Fo++,4!==e?this.qo.reset():t&&t.code===zr.RESOURCE_EXHAUSTED?(Pr(t.toString()),Pr("Using maximum backoff delay to prevent overloading the backend."),this.qo.xo()):t&&t.code===zr.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Yo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.ao(t)}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(e=>{let[n,r]=e;this.Fo===t&&this.Zo(n,r)},t=>{e(()=>{const e=new Br(zr.UNKNOWN,"Fetching auth token failed: "+t.message);return this.tu(e)})})}Zo(e,t){const n=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{n(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(e=>{n(()=>this.tu(e))}),this.stream.onMessage(e=>{n(()=>this.onMessage(e))})}Go(){this.state=5,this.qo.No(async()=>{this.state=0,this.start()})}tu(e){return Dr("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(Dr("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Hl extends Vl{constructor(e,t,n,r,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,o),this.serializer=i}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Mr()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],o=function(e,t){return e.useProto3Json?(Fr(void 0===t||"string"==typeof t),Li.fromBase64String(t||"")):(Fr(void 0===t||t instanceof Uint8Array),Li.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,s=a&&function(e){const t=void 0===e.code?zr.UNKNOWN:ts(e.code);return new Br(t,e.message||"")}(a);n=new ps(r,i,o,s||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Ns(e,r.document.name),o=ks(r.document.updateTime),a=r.document.createTime?ks(r.document.createTime):ni.min(),s=new so({mapValue:{fields:r.document.fields}}),l=co.newFoundDocument(i,o,a,s),c=r.targetIds||[],u=r.removedTargetIds||[];n=new hs(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Ns(e,r.document),o=r.readTime?ks(r.readTime):ni.min(),a=co.newNoDocument(i,o),s=r.removedTargetIds||[];n=new hs([],s,a.key,a)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Ns(e,r.document),o=r.removedTargetIds||[];n=new hs([],o,i,null)}else{if(!("filter"in t))return Mr();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,o=new Qa(r,i),a=e.targetId;n=new fs(a,o)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return ni.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?ni.min():t.readTime?ks(t.readTime):ni.min()}(e);return this.listener.nu(t,n)}su(e){const t={};t.database=Ps(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Mo(r)?{documents:Fs(e,r)}:{query:Us(e,r)},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=As(e,t.resumeToken);const r=Es(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(ni.min())>0){n.readTime=Ts(e,t.snapshotVersion.toTimestamp());const r=Es(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Mr()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.Wo(t)}iu(e){const t={};t.database=Ps(this.serializer),t.removeTarget=e,this.Wo(t)}}class Gl extends Vl{constructor(e,t,n,r,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,o),this.serializer=i,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(Fr(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function(e,t){return e&&e.length>0?(Fr(void 0!==t),e.map(e=>function(e,t){let n=e.updateTime?ks(e.updateTime):ks(t);return n.isEqual(ni.min())&&(n=ks(t)),new Oa(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=ks(e.commitTime);return this.listener.cu(n,t)}return Fr(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=Ps(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>Ms(this.serializer,e))};this.Wo(t)}}class ql extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.lu=!1}fu(){if(this.lu)throw new Br(zr.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,n){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(r=>{let[i,o]=r;return this.connection.Io(e,t,n,i,o)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===zr.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Br(zr.UNKNOWN,e.toString())})}vo(e,t,n,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(i=>{let[o,a]=i;return this.connection.vo(e,t,n,o,a,r)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===zr.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Br(zr.UNKNOWN,e.toString())})}terminate(){this.lu=!0}}class Kl{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.mu?(Pr(t),this.mu=!1):Dr("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class Yl{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=i,this.Pu.Yr(e=>{n.enqueueAndForget(async()=>{rc(this)&&(Dr("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=Ur(e);t.vu.add(4),await Xl(t),t.bu.set("Unknown"),t.vu.delete(4),await $l(t)}(this))})}),this.bu=new Kl(n,r)}}async function $l(e){if(rc(e))for(const t of e.Ru)await t(!0)}async function Xl(e){for(const t of e.Ru)await t(!1)}function Ql(e,t){const n=Ur(e);n.Au.has(t.targetId)||(n.Au.set(t.targetId,t),nc(n)?tc(n):xc(n).Ko()&&Zl(n,t))}function Jl(e,t){const n=Ur(e),r=xc(n);n.Au.delete(t),r.Ko()&&ec(n,t),0===n.Au.size&&(r.Ko()?r.jo():rc(n)&&n.bu.set("Unknown"))}function Zl(e,t){if(e.Vu.qt(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(ni.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}xc(e).su(t)}function ec(e,t){e.Vu.qt(t),xc(e).iu(t)}function tc(e){e.Vu=new ms({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),le:t=>e.Au.get(t)||null,ue:()=>e.datastore.serializer.databaseId}),xc(e).start(),e.bu.gu()}function nc(e){return rc(e)&&!xc(e).Uo()&&e.Au.size>0}function rc(e){return 0===Ur(e).vu.size}function ic(e){e.Vu=void 0}async function oc(e){e.Au.forEach((t,n)=>{Zl(e,t)})}async function ac(e,t){ic(e),nc(e)?(e.bu.Iu(t),tc(e)):e.bu.set("Unknown")}async function sc(e,t,n){if(e.bu.set("Online"),t instanceof ps&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.Au.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Au.delete(r),e.Vu.removeTarget(r))}(e,t)}catch(n){Dr("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await lc(e,n)}else if(t instanceof hs?e.Vu.Ht(t):t instanceof fs?e.Vu.ne(t):e.Vu.Xt(t),!n.isEqual(ni.min()))try{const t=await El(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Vu.ce(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.Au.get(r);i&&e.Au.set(r,i.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.Au.get(t);if(!r)return;e.Au.set(t,r.withResumeToken(Li.EMPTY_BYTE_STRING,r.snapshotVersion)),ec(e,t);const i=new Xs(r.target,t,n,r.sequenceNumber);Zl(e,i)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){Dr("RemoteStore","Failed to raise snapshot:",t),await lc(e,t)}}async function lc(e,t,n){if(!vi(t))throw t;e.vu.add(1),await Xl(e),e.bu.set("Offline"),n||(n=()=>El(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{Dr("RemoteStore","Retrying IndexedDB access"),await n(),e.vu.delete(1),await $l(e)})}function cc(e,t){return t().catch(n=>lc(e,n,t))}async function uc(e){const t=Ur(e),n=Sc(t);let r=t.Eu.length>0?t.Eu[t.Eu.length-1].batchId:-1;for(;dc(t);)try{const e=await Al(t.localStore,r);if(null===e){0===t.Eu.length&&n.jo();break}r=e.batchId,hc(t,e)}catch(e){await lc(t,e)}fc(t)&&pc(t)}function dc(e){return rc(e)&&e.Eu.length<10}function hc(e,t){e.Eu.push(t);const n=Sc(e);n.Ko()&&n.ou&&n.uu(t.mutations)}function fc(e){return rc(e)&&!Sc(e).Uo()&&e.Eu.length>0}function pc(e){Sc(e).start()}async function gc(e){Sc(e).hu()}async function mc(e){const t=Sc(e);for(const n of e.Eu)t.uu(n.mutations)}async function vc(e,t,n){const r=e.Eu.shift(),i=$a.from(r,t,n);await cc(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await uc(e)}async function yc(e,t){t&&Sc(e).ou&&await async function(e,t){if(es(n=t.code)&&n!==zr.ABORTED){const n=e.Eu.shift();Sc(e).Qo(),await cc(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await uc(e)}var n}(e,t),fc(e)&&pc(e)}async function bc(e,t){const n=Ur(e);n.asyncQueue.verifyOperationInProgress(),Dr("RemoteStore","RemoteStore received new credentials");const r=rc(n);n.vu.add(3),await Xl(n),r&&n.bu.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.vu.delete(3),await $l(n)}async function wc(e,t){const n=Ur(e);t?(n.vu.delete(2),await $l(n)):t||(n.vu.add(2),await Xl(n),n.bu.set("Unknown"))}function xc(e){return e.Su||(e.Su=function(e,t,n){const r=Ur(e);return r.fu(),new Hl(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{uo:oc.bind(null,e),ao:ac.bind(null,e),nu:sc.bind(null,e)}),e.Ru.push(async t=>{t?(e.Su.Qo(),nc(e)?tc(e):e.bu.set("Unknown")):(await e.Su.stop(),ic(e))})),e.Su}function Sc(e){return e.Du||(e.Du=function(e,t,n){const r=Ur(e);return r.fu(),new Gl(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{uo:gc.bind(null,e),ao:yc.bind(null,e),au:mc.bind(null,e),cu:vc.bind(null,e)}),e.Ru.push(async t=>{t?(e.Du.Qo(),await uc(e)):(await e.Du.stop(),e.Eu.length>0&&(Dr("RemoteStore","Stopping write stream with ".concat(e.Eu.length," pending writes")),e.Eu=[]))})),e.Du}class Ec{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Wr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}static createAndSchedule(e,t,n,r,i){const o=Date.now()+n,a=new Ec(e,t,o,r,i);return a.start(n),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Br(zr.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Tc(e,t){if(Pr("AsyncQueue","".concat(t,": ").concat(e)),vi(e))return new Br(zr.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class Ac{constructor(e){this.comparator=e?(t,n)=>e(t,n)||si.comparator(t.key,n.key):(e,t)=>si.comparator(e.key,t.key),this.keyedMap=aa(),this.sortedSet=new Ci(this.comparator)}static emptySet(e){return new Ac(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ac))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Ac;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class _c{constructor(){this.Cu=new Ci(si.comparator)}track(e){const t=e.doc.key,n=this.Cu.get(t);n?0!==e.type&&3===n.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==n.type?this.Cu=this.Cu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Cu=this.Cu.remove(t):1===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):Mr():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,n)=>{e.push(n)}),e}}class kc{constructor(e,t,n,r,i,o,a,s,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=s,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const o=[];return t.forEach(e=>{o.push({type:0,doc:e})}),new kc(e,t,Ac.emptySet(t),o,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&$o(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class Cc{constructor(){this.Nu=void 0,this.listeners=[]}}class Ic{constructor(){this.queries=new na(e=>Xo(e),$o),this.onlineState="Unknown",this.ku=new Set}}async function Rc(e,t){const n=Ur(e),r=t.query;let i=!1,o=n.queries.get(r);if(o||(i=!0,o=new Cc),i)try{o.Nu=await n.onListen(r)}catch(e){const n=Tc(e,"Initialization of query '".concat(Qo(t.query),"' failed"));return void t.onError(n)}n.queries.set(r,o),o.listeners.push(t),t.Mu(n.onlineState),o.Nu&&t.$u(o.Nu)&&Pc(n)}async function Nc(e,t){const n=Ur(e),r=t.query;let i=!1;const o=n.queries.get(r);if(o){const e=o.listeners.indexOf(t);e>=0&&(o.listeners.splice(e,1),i=0===o.listeners.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function Oc(e,t){const n=Ur(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.listeners)e.$u(i)&&(r=!0);t.Nu=i}}r&&Pc(n)}function Dc(e,t,n){const r=Ur(e),i=r.queries.get(t);if(i)for(const o of i.listeners)o.onError(n);r.queries.delete(t)}function Pc(e){e.ku.forEach(e=>{e.next()})}class Lc{constructor(e,t,n){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=n||{}}$u(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new kc(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){if(!e.fromCache)return!0;const n="Offline"!==t;return(!this.options.Ku||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){if(e.docChanges.length>0)return!0;const t=this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}Uu(e){e=kc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class jc{constructor(e){this.key=e}}class Mc{constructor(e){this.key=e}}class Fc{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=fa(),this.mutatedKeys=fa(),this.tc=ea(e),this.ec=new Ac(this.tc)}get nc(){return this.Yu}sc(e,t){const n=t?t.ic:new _c,r=t?t.ec:this.ec;let i=t?t.mutatedKeys:this.mutatedKeys,o=r,a=!1;const s="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const c=r.get(e),u=Jo(this.query,t)?t:null,d=!!c&&this.mutatedKeys.has(c.key),h=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?d!==h&&(n.track({type:3,doc:u}),f=!0):this.rc(c,u)||(n.track({type:2,doc:u}),f=!0,(s&&this.tc(u,s)>0||l&&this.tc(u,l)<0)&&(a=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(s||l)&&(a=!0)),f&&(u?(o=o.add(u),i=h?i.add(e):i.delete(e)):(o=o.delete(e),i=i.delete(e)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const e="F"===this.query.limitType?o.last():o.first();o=o.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{ec:o,ic:n,zi:a,mutatedKeys:i}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n){const r=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const i=e.ic.xu();i.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Mr()}};return n(e)-n(t)}(e.type,t.type)||this.tc(e.doc,t.doc)),this.oc(n);const o=t?this.uc():[],a=0===this.Zu.size&&this.current?1:0,s=a!==this.Xu;return this.Xu=a,0!==i.length||s?{snapshot:new kc(this.query,e.ec,r,i,e.mutatedKeys,0===a,s,!1,!!n&&n.resumeToken.approximateByteSize()>0),cc:o}:{cc:o}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new _c,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(e=>this.Yu=this.Yu.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Yu=this.Yu.delete(e)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=fa(),this.ec.forEach(e=>{this.ac(e.key)&&(this.Zu=this.Zu.add(e.key))});const t=[];return e.forEach(e=>{this.Zu.has(e)||t.push(new Mc(e))}),this.Zu.forEach(n=>{e.has(n)||t.push(new jc(n))}),t}hc(e){this.Yu=e.ir,this.Zu=fa();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return kc.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class Uc{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class zc{constructor(e){this.key=e,this.fc=!1}}class Bc{constructor(e,t,n,r,i,o){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.dc={},this.wc=new na(e=>Xo(e),$o),this._c=new Map,this.mc=new Set,this.gc=new Ci(si.comparator),this.yc=new Map,this.Ic=new cl,this.Tc={},this.Ec=new Map,this.Ac=rl.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}async function Wc(e,t){const n=au(e);let r,i;const o=n.wc.get(t);if(o)r=o.targetId,n.sharedClientState.addLocalQueryTarget(r),i=o.view.lc();else{const e=await _l(n.localStore,qo(t)),o=n.sharedClientState.addLocalQueryTarget(e.targetId);r=e.targetId,i=await Vc(n,t,r,"current"===o,e.resumeToken),n.isPrimaryClient&&Ql(n.remoteStore,e)}return i}async function Vc(e,t,n,r,i){e.Rc=(t,n,r)=>async function(e,t,n,r){let i=t.view.sc(n);i.zi&&(i=await Cl(e.localStore,t.query,!1).then(e=>{let{documents:n}=e;return t.view.sc(n,i)}));const o=r&&r.targetChanges.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,o);return eu(e,t.targetId,a.cc),a.snapshot}(e,t,n,r);const o=await Cl(e.localStore,t,!0),a=new Fc(t,o.ir),s=a.sc(o.documents),l=ds.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=a.applyChanges(s,e.isPrimaryClient,l);eu(e,n,c.cc);const u=new Uc(t,n,a);return e.wc.set(t,u),e._c.has(n)?e._c.get(n).push(t):e._c.set(n,[t]),c.snapshot}async function Hc(e,t){const n=Ur(e),r=n.wc.get(t),i=n._c.get(r.targetId);if(i.length>1)return n._c.set(r.targetId,i.filter(e=>!$o(e,t))),void n.wc.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await kl(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),Jl(n.remoteStore,r.targetId),Jc(n,r.targetId)}).catch(gi)):(Jc(n,r.targetId),await kl(n.localStore,r.targetId,!0))}async function Gc(e,t){const n=Ur(e);try{const e=await function(e,t){const n=Ur(e),r=t.snapshotVersion;let i=n.Ji;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const o=n.Zi.newChangeBuffer({trackRemovals:!0});i=n.Ji;const a=[];t.targetChanges.forEach((o,s)=>{const l=i.get(s);if(!l)return;a.push(n.Bs.removeMatchingKeys(e,o.removedDocuments,s).next(()=>n.Bs.addMatchingKeys(e,o.addedDocuments,s)));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(s)?c=c.withResumeToken(Li.EMPTY_BYTE_STRING,ni.min()).withLastLimboFreeSnapshotVersion(ni.min()):o.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(o.resumeToken,r)),i=i.insert(s,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,c,o)&&a.push(n.Bs.updateTargetData(e,c))});let s=ia(),l=fa();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),a.push(Tl(e,o,t.documentUpdates).next(e=>{s=e.nr,l=e.sr})),!r.isEqual(ni.min())){const t=n.Bs.getLastRemoteSnapshotVersion(e).next(t=>n.Bs.setTargetsMetadata(e,e.currentSequenceNumber,r));a.push(t)}return mi.waitFor(a).next(()=>o.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,s,l)).next(()=>s)}).then(e=>(n.Ji=i,e))}(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.yc.get(t);r&&(Fr(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.fc=!0:e.modifiedDocuments.size>0?Fr(r.fc):e.removedDocuments.size>0&&(Fr(r.fc),r.fc=!1))}),await ru(n,e,t)}catch(e){await gi(e)}}function qc(e,t,n){const r=Ur(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.wc.forEach((n,r)=>{const i=r.view.Mu(t);i.snapshot&&e.push(i.snapshot)}),function(e,t){const n=Ur(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const i of n.listeners)i.Mu(t)&&(r=!0)}),r&&Pc(n)}(r.eventManager,t),e.length&&r.dc.nu(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Kc(e,t,n){const r=Ur(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.yc.get(t),o=i&&i.key;if(o){let e=new Ci(si.comparator);e=e.insert(o,co.newNoDocument(o,ni.min()));const n=fa().add(o),i=new us(ni.min(),new Map,new Ci(Zr),e,n);await Gc(r,i),r.gc=r.gc.remove(o),r.yc.delete(t),nu(r)}else await kl(r.localStore,t,!1).then(()=>Jc(r,t,n)).catch(gi)}async function Yc(e,t){const n=Ur(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Ur(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),i=n.Zi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,o=i.keys();let a=mi.resolve();return o.forEach(e=>{a=a.next(()=>r.getEntry(t,e)).next(t=>{const o=n.docVersions.get(e);Fr(null!==o),t.version.compareTo(o)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),a.next(()=>e.mutationQueue.removeMutationBatch(t,i))}(n,e,t,i).next(()=>i.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=fa();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);Qc(n,r,null),Xc(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ru(n,e)}catch(e){await gi(e)}}async function $c(e,t,n){const r=Ur(e);try{const e=await function(e,t){const n=Ur(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(Fr(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);Qc(r,t,n),Xc(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await ru(r,e)}catch(n){await gi(n)}}function Xc(e,t){(e.Ec.get(t)||[]).forEach(e=>{e.resolve()}),e.Ec.delete(t)}function Qc(e,t,n){const r=Ur(e);let i=r.Tc[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Tc[r.currentUser.toKey()]=i}}function Jc(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e._c.get(t))e.wc.delete(r),n&&e.dc.Pc(r,n);e._c.delete(t),e.isPrimaryClient&&e.Ic.Is(t).forEach(t=>{e.Ic.containsKey(t)||Zc(e,t)})}function Zc(e,t){e.mc.delete(t.path.canonicalString());const n=e.gc.get(t);null!==n&&(Jl(e.remoteStore,n),e.gc=e.gc.remove(t),e.yc.delete(n),nu(e))}function eu(e,t,n){for(const r of n)r instanceof jc?(e.Ic.addReference(r.key,t),tu(e,r)):r instanceof Mc?(Dr("SyncEngine","Document no longer in limbo: "+r.key),e.Ic.removeReference(r.key,t),e.Ic.containsKey(r.key)||Zc(e,r.key)):Mr()}function tu(e,t){const n=t.key,r=n.path.canonicalString();e.gc.get(n)||e.mc.has(r)||(Dr("SyncEngine","New document in limbo: "+n),e.mc.add(r),nu(e))}function nu(e){for(;e.mc.size>0&&e.gc.size<e.maxConcurrentLimboResolutions;){const t=e.mc.values().next().value;e.mc.delete(t);const n=new si(ii.fromString(t)),r=e.Ac.next();e.yc.set(r,new zc(n)),e.gc=e.gc.insert(n,r),Ql(e.remoteStore,new Xs(qo(zo(n.path)),r,"TargetPurposeLimboResolution",yi.ct))}}async function ru(e,t,n){const r=Ur(e),i=[],o=[],a=[];r.wc.isEmpty()||(r.wc.forEach((e,s)=>{a.push(r.Rc(s,t,n).then(e=>{if((e||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(s.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){i.push(e);const t=yl.Li(s.targetId,e);o.push(t)}}))}),await Promise.all(a),r.dc.nu(i),await async function(e,t){const n=Ur(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>mi.forEach(t,t=>mi.forEach(t.Fi,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>mi.forEach(t.Bi,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!vi(e))throw e;Dr("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Ji.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.Ji=n.Ji.insert(e,i)}}}(r.localStore,o))}async function iu(e,t){const n=Ur(e);if(!n.currentUser.isEqual(t)){Dr("SyncEngine","User change. New user:",t.toKey());const e=await Sl(n.localStore,t);n.currentUser=t,function(e){e.Ec.forEach(e=>{e.forEach(e=>{e.reject(new Br(zr.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),e.Ec.clear()}(n),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await ru(n,e.er)}}function ou(e,t){const n=Ur(e),r=n.yc.get(t);if(r&&r.fc)return fa().add(r.key);{let e=fa();const r=n._c.get(t);if(!r)return e;for(const t of r){const r=n.wc.get(t);e=e.unionWith(r.view.nc)}return e}}function au(e){const t=Ur(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Gc.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=ou.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Kc.bind(null,t),t.dc.nu=Oc.bind(null,t.eventManager),t.dc.Pc=Dc.bind(null,t.eventManager),t}function su(e){const t=Ur(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Yc.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=$c.bind(null,t),t}class lu{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Bl(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return xl(this.persistence,new bl,e.initialUser,this.serializer)}createPersistence(e){return new gl(vl.zs,this.serializer)}createSharedClientState(e){return new Nl}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class cu{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>qc(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=iu.bind(null,this.syncEngine),await wc(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Ic}createDatastore(e){const t=Bl(e.databaseInfo.databaseId),n=(r=e.databaseInfo,new Ul(r));var r;return function(e,t,n,r){return new ql(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=e=>qc(this.syncEngine,e,0),o=Dl.D()?new Dl:new Ol,new Yl(t,n,r,i,o);var t,n,r,i,o}createSyncEngine(e,t){return function(e,t,n,r,i,o,a){const s=new Bc(e,t,n,r,i,o);return a&&(s.vc=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return async function(e){const t=Ur(e);Dr("RemoteStore","RemoteStore shutting down."),t.vu.add(5),await Xl(t),t.Pu.shutdown(),t.bu.set("Unknown")}(this.remoteStore)}}class uu{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):Pr("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class du{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Ir.UNAUTHENTICATED,this.clientId=Jr.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,async e=>{Dr("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(Dr("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Br(zr.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Wr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Tc(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function hu(e,t){e.asyncQueue.verifyOperationInProgress(),Dr("FirestoreClient","Initializing OfflineComponentProvider");const n=await e.getConfiguration();await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await Sl(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function fu(e,t){e.asyncQueue.verifyOperationInProgress();const n=await gu(e);Dr("FirestoreClient","Initializing OnlineComponentProvider");const r=await e.getConfiguration();await t.initialize(n,r),e.setCredentialChangeListener(e=>bc(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>bc(t.remoteStore,n)),e._onlineComponents=t}function pu(e){return"FirebaseError"===e.name?e.code===zr.FAILED_PRECONDITION||e.code===zr.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}async function gu(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Dr("FirestoreClient","Using user provided OfflineComponentProvider");try{await hu(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!pu(n))throw n;Lr("Error using user provided cache. Falling back to memory cache: "+n),await hu(e,new lu)}}else Dr("FirestoreClient","Using default OfflineComponentProvider"),await hu(e,new lu);return e._offlineComponents}async function mu(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Dr("FirestoreClient","Using user provided OnlineComponentProvider"),await fu(e,e._uninitializedComponentsProvider._online)):(Dr("FirestoreClient","Using default OnlineComponentProvider"),await fu(e,new cu))),e._onlineComponents}function vu(e){return mu(e).then(e=>e.syncEngine)}async function yu(e){const t=await mu(e),n=t.eventManager;return n.onListen=Wc.bind(null,t.syncEngine),n.onUnlisten=Hc.bind(null,t.syncEngine),n}function bu(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Wr;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const o=new uu({next:o=>{t.enqueueAndForget(()=>Nc(e,a));const s=o.docs.has(n);!s&&o.fromCache?i.reject(new Br(zr.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&o.fromCache&&r&&"server"===r.source?i.reject(new Br(zr.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:e=>i.reject(e)}),a=new Lc(zo(n.path),o,{includeMetadataChanges:!0,Ku:!0});return Rc(e,a)}(await yu(e),e.asyncQueue,t,n,r)),r.promise}function wu(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Wr;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const o=new uu({next:n=>{t.enqueueAndForget(()=>Nc(e,a)),n.fromCache&&"server"===r.source?i.reject(new Br(zr.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),a=new Lc(n,o,{includeMetadataChanges:!0,Ku:!0});return Rc(e,a)}(await yu(e),e.asyncQueue,t,n,r)),r.promise}function xu(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const Su=new Map;function Eu(e,t,n){if(!n)throw new Br(zr.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function Tu(e){if(!si.isDocumentKey(e))throw new Br(zr.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function Au(e){if(si.isDocumentKey(e))throw new Br(zr.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function _u(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":Mr()}function ku(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Br(zr.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=_u(e);throw new Br(zr.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}class Cu{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Br(zr.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Br(zr.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new Br(zr.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=xu(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Br(zr.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new Br(zr.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new Br(zr.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(t=this.experimentalLongPollingOptions,n=e.experimentalLongPollingOptions,t.timeoutSeconds===n.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams;var t,n}}class Iu{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Cu({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Br(zr.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Br(zr.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Cu(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Hr;switch(e.type){case"firstParty":return new Yr(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Br(zr.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Su.get(e);t&&(Dr("ComponentProvider","Removing Datastore"),Su.delete(e),t.terminate())}(this),Promise.resolve()}}class Ru{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ou(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ru(this.firestore,e,this._key)}}class Nu{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Nu(this.firestore,e,this._query)}}class Ou extends Nu{constructor(e,t,n){super(e,t,zo(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ru(this.firestore,null,new si(e))}withConverter(e){return new Ou(this.firestore,e,this._path)}}function Du(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=(0,s.Ku)(e),Eu("collection","path",t),e instanceof Iu){const n=ii.fromString(t,...r);return Au(n),new Ou(e,null,n)}{if(!(e instanceof Ru||e instanceof Ou))throw new Br(zr.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(ii.fromString(t,...r));return Au(n),new Ou(e.firestore,null,n)}}function Pu(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=(0,s.Ku)(e),1===arguments.length&&(t=Jr.A()),Eu("doc","path",t),e instanceof Iu){const n=ii.fromString(t,...r);return Tu(n),new Ru(e,null,new si(n))}{if(!(e instanceof Ru||e instanceof Ou))throw new Br(zr.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(ii.fromString(t,...r));return Tu(n),new Ru(e.firestore,e instanceof Ou?e.converter:null,new si(n))}}class Lu{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new Wl(this,"async_queue_retry"),this.Xc=()=>{const e=zl();e&&Dr("AsyncQueue","Visibility state changed to "+e.visibilityState),this.qo.Mo()};const e=zl();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=zl();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new Wr;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}async ea(){if(0!==this.Qc.length){try{await this.Qc[0](),this.Qc.shift(),this.qo.reset()}catch(e){if(!vi(e))throw e;Dr("AsyncQueue","Operation failed with retryable error: "+e)}this.Qc.length>0&&this.qo.No(()=>this.ea())}}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(e=>{this.Wc=e,this.Hc=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Pr("INTERNAL UNHANDLED ERROR: ",t),e}).then(e=>(this.Hc=!1,e))));return this.Gc=t,t}enqueueAfterDelay(e,t,n){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const r=Ec.createAndSchedule(this,e,t,n,e=>this.na(e));return this.zc.push(r),r}Zc(){this.Wc&&Mr()}verifyOperationInProgress(){}async sa(){let e;do{e=this.Gc,await e}while(e!==this.Gc)}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function ju(e){return function(e){if("object"!=typeof e||null===e)return!1;const t=e;for(const n of["next","error","complete"])if(n in t&&"function"==typeof t[n])return!0;return!1}(e)}class Mu extends Iu{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new Lu,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||zu(this),this._firestoreClient.terminate()}}function Fu(e,t){const n="object"==typeof e?e:(0,i.Sx)(),r="string"==typeof e?e:t||"(default)",o=(0,i.j6)(n,"firestore").getImmediate({identifier:r});if(!o._initialized){const e=(0,s.yU)("firestore");e&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const o=(e=ku(e,Iu))._getSettings(),a="".concat(t,":").concat(n);if("firestore.googleapis.com"!==o.host&&o.host!==a&&Lr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},o),{host:a,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Ir.MOCK_USER;else{t=(0,s.Fy)(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const o=r.mockUserToken.sub||r.mockUserToken.user_id;if(!o)throw new Br(zr.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Ir(o)}e._authCredentials=new Gr(new Vr(t,n))}}(o,...e)}return o}function Uu(e){return e._firestoreClient||zu(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function zu(e){var t,n,r;const i=e._freezeSettings(),o=function(e,t,n,r){return new Vi(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,xu(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new du(e._authCredentials,e._appCheckCredentials,e._queue,o),(null===(n=i.cache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.cache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}class Bu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Bu(Li.fromBase64String(e))}catch(e){throw new Br(zr.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new Bu(Li.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Wu{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new Br(zr.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ai(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Vu{constructor(e){this._methodName=e}}class Hu{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Br(zr.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Br(zr.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Zr(this._lat,e._lat)||Zr(this._long,e._long)}}const Gu=/^__.*__$/;class qu{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Wa(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ba(e,this.data,t,this.fieldTransforms)}}class Ku{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Wa(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Yu(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Mr()}}class $u{constructor(e,t,n,r,i,o){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.ua(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new $u(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:n,la:!1});return r.fa(e),r}da(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:n,la:!1});return r.ua(),r}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return dd(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(Yu(this.ca)&&Gu.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class Xu{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Bl(e)}ya(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new $u({ca:e,methodName:t,ga:n,path:ai.emptyPath(),la:!1,ma:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Qu(e){const t=e._freezeSettings(),n=Bl(e._databaseId);return new Xu(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Ju(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const a=e.ya(o.merge||o.mergeFields?2:0,t,n,i);sd("Data must be an object, but it was:",a,r);const s=od(r,a);let l,c;if(o.merge)l=new Di(a.fieldMask),c=a.fieldTransforms;else if(o.mergeFields){const e=[];for(const r of o.mergeFields){const i=ld(t,r,n);if(!a.contains(i))throw new Br(zr.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));hd(e,i)||e.push(i)}l=new Di(e),c=a.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,c=a.fieldTransforms;return new qu(new so(s),l,c)}class Zu extends Vu{_toFieldTransform(e){if(2!==e.ca)throw 1===e.ca?e._a("".concat(this._methodName,"() can only appear at the top level of your update data")):e._a("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Zu}}class ed extends Vu{_toFieldTransform(e){return new Na(e.path,new Ea)}isEqual(e){return e instanceof ed}}function td(e,t,n,r){const i=e.ya(1,t,n);sd("Data must be an object, but it was:",i,r);const o=[],a=so.empty();_i(r,(e,r)=>{const l=ud(t,e,n);r=(0,s.Ku)(r);const c=i.da(l);if(r instanceof Zu)o.push(l);else{const e=id(r,c);null!=e&&(o.push(l),a.set(l,e))}});const l=new Di(o);return new Ku(a,l,i.fieldTransforms)}function nd(e,t,n,r,i,o){const a=e.ya(1,t,n),l=[ld(t,r,n)],c=[i];if(o.length%2!=0)throw new Br(zr.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let s=0;s<o.length;s+=2)l.push(ld(t,o[s])),c.push(o[s+1]);const u=[],d=so.empty();for(let f=l.length-1;f>=0;--f)if(!hd(u,l[f])){const e=l[f];let t=c[f];t=(0,s.Ku)(t);const n=a.da(e);if(t instanceof Zu)u.push(e);else{const r=id(t,n);null!=r&&(u.push(e),d.set(e,r))}}const h=new Di(u);return new Ku(d,h,a.fieldTransforms)}function rd(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return id(n,e.ya(r?4:3,t))}function id(e,t){if(ad(e=(0,s.Ku)(e)))return sd("Unsupported field value:",t,e),od(e,t);if(e instanceof Vu)return function(e,t){if(!Yu(t.ca))throw t._a("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t._a("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.la&&4!==t.ca)throw t._a("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=id(i,t.wa(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=(0,s.Ku)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return ya(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=ti.fromDate(e);return{timestampValue:Ts(t.serializer,n)}}if(e instanceof ti){const n=new ti(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Ts(t.serializer,n)}}if(e instanceof Hu)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Bu)return{bytesValue:As(t.serializer,e._byteString)};if(e instanceof Ru){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t._a("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:Cs(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t._a("Unsupported field value: ".concat(_u(e)))}(e,t)}function od(e,t){const n={};return ki(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):_i(e,(e,r)=>{const i=id(r,t.ha(e));null!=i&&(n[e]=i)}),{mapValue:{fields:n}}}function ad(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof ti||e instanceof Hu||e instanceof Bu||e instanceof Ru||e instanceof Vu)}function sd(e,t,n){if(!ad(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=_u(n);throw"an object"===r?t._a(e+" a custom object"):t._a(e+" "+r)}}function ld(e,t,n){if((t=(0,s.Ku)(t))instanceof Wu)return t._internalPath;if("string"==typeof t)return ud(e,t);throw dd("Field path arguments must be of type string or ",e,!1,void 0,n)}const cd=new RegExp("[~\\*/\\[\\]]");function ud(e,t,n){if(t.search(cd)>=0)throw dd("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new Wu(...t.split("."))._internalPath}catch(r){throw dd("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function dd(e,t,n,r,i){const o=r&&!r.isEmpty(),a=void 0!==i;let s="Function ".concat(t,"() called with invalid data");n&&(s+=" (via `toFirestore()`)"),s+=". ";let l="";return(o||a)&&(l+=" (found",o&&(l+=" in field ".concat(r)),a&&(l+=" in document ".concat(i)),l+=")"),new Br(zr.INVALID_ARGUMENT,s+e+l)}function hd(e,t){return e.some(e=>e.isEqual(t))}class fd{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Ru(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new pd(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(gd("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class pd extends fd{data(){return super.data()}}function gd(e,t){return"string"==typeof t?ud(e,t):t instanceof Wu?t._internalPath:t._delegate._internalPath}function md(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Br(zr.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class vd{}class yd extends vd{}function bd(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];t instanceof vd&&n.push(t),n=n.concat(i),function(e){const t=e.filter(e=>e instanceof Sd).length,n=e.filter(e=>e instanceof wd).length;if(t>1||t>0&&n>0)throw new Br(zr.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const a of n)e=a._apply(e);return e}class wd extends yd{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new wd(e,t,n)}_apply(e){const t=this._parse(e);return kd(e._query,t),new Nu(e.firestore,e.converter,Ko(e._query,t))}_parse(e){const t=Qu(e.firestore),n=function(e,t,n,r,i,o,a){let s;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new Br(zr.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(o,"' queries on documentId()."));if("in"===o||"not-in"===o){_d(a,o);const t=[];for(const n of a)t.push(Ad(r,e,n));s={arrayValue:{values:t}}}else s=Ad(r,e,a)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||_d(a,o),s=rd(n,"where",a,"in"===o||"not-in"===o);return vo.create(i,o,s)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function xd(e,t,n){const r=t,i=gd("where",e);return wd._create(i,r,n)}class Sd extends vd{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Sd(e,t)}_parse(e){const t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:yo.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)kd(n,i),n=Ko(n,i)}(e._query,t),new Nu(e.firestore,e.converter,Ko(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Ed extends yd{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Ed(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new Br(zr.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Br(zr.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const r=new po(t,n);return function(e,t){if(null===Wo(e)){const n=Vo(e);null!==n&&Cd(e,n,t.field)}}(e,r),r}(e._query,this._field,this._direction);return new Nu(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new Fo(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function Td(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=gd("orderBy",e);return Ed._create(n,t)}function Ad(e,t,n){if("string"==typeof(n=(0,s.Ku)(n))){if(""===n)throw new Br(zr.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ho(t)&&-1!==n.indexOf("/"))throw new Br(zr.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(ii.fromString(n));if(!si.isDocumentKey(r))throw new Br(zr.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Zi(e,new si(r))}if(n instanceof Ru)return Zi(e,n._key);throw new Br(zr.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(_u(n),"."))}function _d(e,t){if(!Array.isArray(e)||0===e.length)throw new Br(zr.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function kd(e,t){if(t.isInequality()){const n=Vo(e),r=t.field;if(null!==n&&!n.isEqual(r))throw new Br(zr.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(r.toString(),"'"));const i=Wo(e);null!==i&&Cd(e,r,i)}const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new Br(zr.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Br(zr.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}function Cd(e,t,n){if(!n.isEqual(t))throw new Br(zr.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}class Id{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(qi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Fi(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ui(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Mr()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return _i(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertGeoPoint(e){return new Hu(Fi(e.latitude),Fi(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Bi(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Wi(e));default:return null}}convertTimestamp(e){const t=Mi(e);return new ti(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=ii.fromString(e);Fr($s(n));const r=new Hi(n.get(1),n.get(3)),i=new si(n.popFirst(5));return r.isEqual(t)||Pr("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function Rd(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class Nd{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Od extends fd{constructor(e,t,n,r,i,o){super(e,t,n,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new Dd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(gd("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class Dd extends Od{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class Pd{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Nd(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new Dd(this._firestore,this._userDataWriter,n.key,n,new Nd(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Br(zr.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new Dd(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Nd(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new Dd(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Nd(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,o=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),o=n.indexOf(t.doc.key)),{type:Ld(t.type),doc:r,oldIndex:i,newIndex:o}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function Ld(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Mr()}}function jd(e){e=ku(e,Ru);const t=ku(e.firestore,Mu);return bu(Uu(t),e._key).then(n=>Gd(t,e,n))}class Md extends Id{constructor(e){super(),this.firestore=e}convertBytes(e){return new Bu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ru(this.firestore,null,t)}}function Fd(e){e=ku(e,Nu);const t=ku(e.firestore,Mu),n=Uu(t),r=new Md(t);return md(e._query),wu(n,e._query).then(n=>new Pd(t,r,e,n))}function Ud(e,t,n){e=ku(e,Ru);const r=ku(e.firestore,Mu),i=Rd(e.converter,t,n);return Hd(r,[Ju(Qu(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Da.none())])}function zd(e,t,n){e=ku(e,Ru);const r=ku(e.firestore,Mu),i=Qu(r);let o;for(var a=arguments.length,l=new Array(a>3?a-3:0),c=3;c<a;c++)l[c-3]=arguments[c];return o="string"==typeof(t=(0,s.Ku)(t))||t instanceof Wu?nd(i,"updateDoc",e._key,t,n,l):td(i,"updateDoc",e._key,t),Hd(r,[o.toMutation(e._key,Da.exists(!0))])}function Bd(e){return Hd(ku(e.firestore,Mu),[new qa(e._key,Da.none())])}function Wd(e,t){const n=ku(e.firestore,Mu),r=Pu(e),i=Rd(e.converter,t);return Hd(n,[Ju(Qu(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Da.exists(!1))]).then(()=>r)}function Vd(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,o,a;e=(0,s.Ku)(e);let l={includeMetadataChanges:!1},c=0;"object"!=typeof n[c]||ju(n[c])||(l=n[c],c++);const u={includeMetadataChanges:l.includeMetadataChanges};if(ju(n[c])){const e=n[c];n[c]=null===(i=e.next)||void 0===i?void 0:i.bind(e),n[c+1]=null===(o=e.error)||void 0===o?void 0:o.bind(e),n[c+2]=null===(a=e.complete)||void 0===a?void 0:a.bind(e)}let d,h,f;if(e instanceof Ru)h=ku(e.firestore,Mu),f=zo(e._key.path),d={next:t=>{n[c]&&n[c](Gd(h,e,t))},error:n[c+1],complete:n[c+2]};else{const t=ku(e,Nu);h=ku(t.firestore,Mu),f=t._query;const r=new Md(h);d={next:e=>{n[c]&&n[c](new Pd(h,r,t,e))},error:n[c+1],complete:n[c+2]},md(e._query)}return function(e,t,n,r){const i=new uu(r),o=new Lc(t,i,n);return e.asyncQueue.enqueueAndForget(async()=>Rc(await yu(e),o)),()=>{i.Dc(),e.asyncQueue.enqueueAndForget(async()=>Nc(await yu(e),o))}}(Uu(h),f,u,d)}function Hd(e,t){return function(e,t){const n=new Wr;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const r=su(e);try{const e=await function(e,t){const n=Ur(e),r=ti.now(),i=t.reduce((e,t)=>e.add(t.key),fa());let o,a;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let s=ia(),l=fa();return n.Zi.getEntries(e,i).next(e=>{s=e,s.forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,s)).next(i=>{o=i;const a=[];for(const e of t){const t=Ua(e,o.get(e.key).overlayedDocument);null!=t&&a.push(new Wa(e.key,t,lo(t.value.mapValue),Da.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,a,t)}).next(t=>{a=t;const r=t.applyToLocalDocumentSet(o,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:a.batchId,changes:sa(o)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Tc[e.currentUser.toKey()];r||(r=new Ci(Zr)),r=r.insert(t,n),e.Tc[e.currentUser.toKey()]=r}(r,e.batchId,n),await ru(r,e.changes),await uc(r.remoteStore)}catch(e){const t=Tc(e,"Failed to persist write");n.reject(t)}}(await vu(e),t,n)),n.promise}(Uu(e),t)}function Gd(e,t,n){const r=n.docs.get(t._key),i=new Md(e);return new Od(e,i,t._key,r,new Nd(n.hasPendingWrites,n.fromCache),t.converter)}function qd(){return new ed("serverTimestamp")}!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Rr=e}(i.MF),(0,i.om)(new o.uA("firestore",(e,n)=>{let{instanceIdentifier:r,options:i}=n;const o=e.getProvider("app").getImmediate(),a=new Mu(new qr(e.getProvider("auth-internal")),new Xr(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Br(zr.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Hi(e.options.projectId,t)}(o,r),o);return i=Object.assign({useFetchStreams:t},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),(0,i.KO)(Cr,"3.13.0",e),(0,i.KO)(Cr,"3.13.0","esm2017")}()},43:(e,t,n)=>{e.exports=n(202)},147:(e,t,n)=>{n.d(t,{XR:()=>De,qk:()=>Oe,c7:()=>Le,_w:()=>Ne,KR:()=>Pe,D:()=>Re});var r=n(150),i=n(700),o=n(812);const a="firebasestorage.googleapis.com",s="storageBucket";class l extends i.g{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(d(e),"Firebase Storage: ".concat(t," (").concat(d(e),")")),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,l.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return d(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}var c,u;function d(e){return"storage/"+e}function h(){return new l(c.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function f(){return new l(c.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function p(){return new l(c.CANCELED,"User canceled the upload/download.")}function g(){return new l(c.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function m(e){return new l(c.INVALID_ARGUMENT,e)}function v(){return new l(c.APP_DELETED,"The Firebase app was deleted.")}function y(e,t){return new l(c.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function b(e){throw new l(c.INTERNAL_ERROR,"Internal error: "+e)}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(c||(c={}));class w{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=w.makeFromUrl(e,t)}catch(i){return new w(e,"")}if(""===n.path)return n;throw r=e,new l(c.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.");var r}static makeFromUrl(e,t){let n=null;const r="([A-Za-z0-9.\\-_]+)";const i=new RegExp("^gs://"+r+"(/(.*))?$","i");function o(e){e.path_=decodeURIComponent(e.path)}const s=t.replace(/[.]/g,"\\."),u=[{regex:i,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(s,"/").concat("v[A-Za-z0-9_]+","/b/").concat(r,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://".concat(t===a?"(?:storage.googleapis.com|storage.cloud.google.com)":t,"/").concat(r,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:o}];for(let a=0;a<u.length;a++){const t=u[a],r=t.regex.exec(e);if(r){const e=r[t.indices.bucket];let i=r[t.indices.path];i||(i=""),n=new w(e,i),t.postModify(n);break}}if(null==n)throw function(e){return new l(c.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return n}}class x{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(){}}function S(e){return"string"===typeof e||e instanceof String}function E(e){return T()&&e instanceof Blob}function T(){return"undefined"!==typeof Blob&&!(0,i.Ll)()}function A(e,t,n,r){if(r<t)throw m("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw m("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function _(e,t,n){let r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function k(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1),n}function C(e,t){const n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return n||r||i}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(u||(u={}));class I{constructor(e,t,n,r,i,o,a,s,l,c,u){let d=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=s,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=u,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()})}start_(){const e=(e,t)=>{if(t)return void e(!1,new R(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const r=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(r),n.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(r),this.pendingConnection_=null;const t=n.getErrorCode()===u.NO_ERROR,i=n.getStatus();if(!t||C(i,this.additionalRetryCodes_)&&this.retry){const t=n.getErrorCode()===u.ABORT;return void e(!1,new R(!1,null,t))}const o=-1!==this.successCodes_.indexOf(i);e(!0,new R(o,n))})},t=(e,t)=>{const n=this.resolve_,r=this.reject_,i=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(i,i.getResponse());void 0!==e?n(e):n()}catch(o){r(o)}else if(null!==i){const e=h();e.serverResponse=i.getErrorText(),this.errorCallback_?r(this.errorCallback_(i,e)):r(e)}else if(t.canceled){r(this.appDelete_?v():p())}else{r(f())}};this.canceled_?t(0,new R(!1,null,!0)):this.backoffId_=function(e,t,n){let r=1,i=null,o=null,a=!1,s=0;function l(){return 2===s}let c=!1;function u(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function d(t){i=setTimeout(()=>{i=null,e(f,l())},t)}function h(){o&&clearTimeout(o)}function f(e){if(c)return void h();for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return h(),void u.call(null,e,...n);if(l()||a)return h(),void u.call(null,e,...n);let o;r<64&&(r*=2),1===s?(s=2,o=0):o=1e3*(r+Math.random()),d(o)}let p=!1;function g(e){p||(p=!0,h(),c||(null!==i?(e||(s=2),clearTimeout(i),d(0)):e||(s=1)))}return d(0),o=setTimeout(()=>{a=!0,g(!0)},n),g}(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class R{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function N(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function O(){const e=N();for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){const t=new e;for(let e=0;e<n.length;e++)t.append(n[e]);return t.getBlob()}if(T())return new Blob(n);throw new l(c.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}function D(e){if("undefined"===typeof atob)throw t="base-64",new l(c.UNSUPPORTED_ENVIRONMENT,"".concat(t," is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information."));var t;return atob(e)}const P="raw",L="base64",j="base64url",M="data_url";class F{constructor(e,t){this.data=e,this.contentType=t||null}}function U(e,t){switch(e){case P:return new F(z(t));case L:case j:return new F(B(e,t));case M:return new F(function(e){const t=new W(e);return t.base64?B(L,t.rest):function(e){let t;try{t=decodeURIComponent(e)}catch(n){throw y(M,"Malformed data URL.")}return z(t)}(t.rest)}(t),new W(t).contentType)}throw h()}function z(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r)){if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1))){r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else t.push(239,191,189)}else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function B(e,t){switch(e){case L:{const n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r){throw y(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?")}break}case j:{const n=-1!==t.indexOf("+"),r=-1!==t.indexOf("/");if(n||r){throw y(e,"Invalid character '"+(n?"+":"/")+"' found: is it base64 encoded?")}t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=D(t)}catch(i){if(i.message.includes("polyfill"))throw i;throw y(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let o=0;o<n.length;o++)r[o]=n.charCodeAt(o);return r}class W{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw y(M,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=t[1]||null;null!=n&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}class V{constructor(e,t){let n=0,r="";E(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if(E(this.data_)){const n=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,e,t);return null===n?null:new V(n)}{const n=new Uint8Array(this.data_.buffer,e,t-e);return new V(n,!0)}}static getBlob(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(T()){const e=t.map(e=>e instanceof V?e.data_:e);return new V(O.apply(null,e))}{const e=t.map(e=>S(e)?U(P,e).data:e.data_);let n=0;e.forEach(e=>{n+=e.byteLength});const r=new Uint8Array(n);let i=0;return e.forEach(e=>{for(let t=0;t<e.length;t++)r[i++]=e[t]}),new V(r,!0)}}uploadData(){return this.data_}}function H(e){let t;try{t=JSON.parse(e)}catch(r){return null}return"object"!==typeof(n=t)||Array.isArray(n)?null:t;var n}function G(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function q(e,t){return t}class K{constructor(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||q}}let Y=null;function $(){if(Y)return Y;const e=[];e.push(new K("bucket")),e.push(new K("generation")),e.push(new K("metageneration")),e.push(new K("name","fullPath",!0));const t=new K("name");t.xform=function(e,t){return function(e){return!S(e)||e.length<2?e:G(e)}(t)},e.push(t);const n=new K("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new K("timeCreated")),e.push(new K("updated")),e.push(new K("md5Hash",null,!0)),e.push(new K("cacheControl",null,!0)),e.push(new K("contentDisposition",null,!0)),e.push(new K("contentEncoding",null,!0)),e.push(new K("contentLanguage",null,!0)),e.push(new K("contentType",null,!0)),e.push(new K("metadata","customMetadata",!0)),Y=e,Y}function X(e,t,n){const r={type:"file"},i=n.length;for(let o=0;o<i;o++){const e=n[o];r[e.local]=e.xform(r,t[e.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){const n=e.bucket,r=e.fullPath,i=new w(n,r);return t._makeStorageReference(i)}})}(r,e),r}function Q(e,t,n){const r=H(t);if(null===r)return null;return X(e,r,n)}function J(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const r=t[i];r.writable&&(n[r.server]=e[r.local])}return JSON.stringify(n)}const Z="prefixes",ee="items";function te(e,t,n){const r=H(n);if(null===r)return null;return function(e,t,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[Z])for(const i of n[Z]){const n=i.replace(/\/$/,""),o=e._makeStorageReference(new w(t,n));r.prefixes.push(o)}if(n[ee])for(const i of n[ee]){const n=e._makeStorageReference(new w(t,i.name));r.items.push(n)}return r}(e,t,r)}class ne{constructor(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function re(e){if(!e)throw h()}function ie(e,t){return function(n,r){const i=Q(e,r,t);return re(null!==i),i}}function oe(e,t){return function(n,r){const i=Q(e,r,t);return re(null!==i),function(e,t,n,r){const i=H(t);if(null===i)return null;if(!S(i.downloadTokens))return null;const o=i.downloadTokens;if(0===o.length)return null;const a=encodeURIComponent;return o.split(",").map(t=>{const i=e.bucket,o=e.fullPath;return _("/b/"+a(i)+"/o/"+a(o),n,r)+k({alt:"media",token:t})})[0]}(i,r,e.host,e._protocol)}}function ae(e){return function(t,n){let r;var i,o;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new l(c.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new l(c.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(o=e.bucket,r=new l(c.QUOTA_EXCEEDED,"Quota for bucket '"+o+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new l(c.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}}function se(e){const t=ae(e);return function(n,r){let i=t(n,r);var o;return 404===n.getStatus()&&(o=e.path,i=new l(c.OBJECT_NOT_FOUND,"Object '"+o+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function le(e,t,n,r,i){const o={};t.isRoot?o.prefix="":o.prefix=t.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);const a=_(t.bucketOnlyServerUrl(),e.host,e._protocol),s=e.maxOperationRetryTime,l=new ne(a,"GET",function(e,t){return function(n,r){const i=te(e,t,r);return re(null!==i),i}}(e,t.bucket),s);return l.urlParams=o,l.errorHandler=ae(t),l}function ce(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function ue(e,t,n,r,i){const o=t.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};const s=function(){let e="";for(let t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();a["Content-Type"]="multipart/related; boundary="+s;const l=ce(t,r,i),c="--"+s+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+J(l,n)+"\r\n--"+s+"\r\nContent-Type: "+l.contentType+"\r\n\r\n",u="\r\n--"+s+"--",d=V.getBlob(c,r,u);if(null===d)throw g();const h={name:l.fullPath},f=_(o,e.host,e._protocol),p=e.maxUploadRetryTime,m=new ne(f,"POST",ie(e,n),p);return m.urlParams=h,m.headers=a,m.body=d.uploadData(),m.errorHandler=ae(t),m}let de=null;class he{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=u.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=u.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=u.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,n,r){if(this.sent_)throw b("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(const i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw b("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw b("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw b("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw b("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class fe extends he{initXhr(){this.xhr_.responseType="text"}}function pe(){return de?de():new fe}class ge{constructor(e,t){this._service=e,this._location=t instanceof w?t:w.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new ge(e,t)}get root(){const e=new w(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return G(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new w(this._location.bucket,e);return new ge(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function(e){return new l(c.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function me(e,t,n){e._throwIfRoot("uploadBytes");const r=ue(e.storage,e._location,$(),new V(t,!0),n);return e.storage.makeRequestWithTokens(r,pe).then(t=>({metadata:t,ref:e}))}function ve(e){const t={prefixes:[],items:[]};return ye(e,t).then(()=>t)}async function ye(e,t,n){const r={pageToken:n},i=await be(e,r);t.prefixes.push(...i.prefixes),t.items.push(...i.items),null!=i.nextPageToken&&await ye(e,t,i.nextPageToken)}function be(e,t){null!=t&&"number"===typeof t.maxResults&&A("options.maxResults",1,1e3,t.maxResults);const n=t||{},r=le(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,pe)}function we(e){e._throwIfRoot("getDownloadURL");const t=function(e,t,n){const r=_(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,o=new ne(r,"GET",oe(e,n),i);return o.errorHandler=se(t),o}(e.storage,e._location,$());return e.storage.makeRequestWithTokens(t,pe).then(e=>{if(null===e)throw new l(c.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e})}function xe(e){e._throwIfRoot("deleteObject");const t=function(e,t){const n=_(t.fullServerUrl(),e.host,e._protocol),r=e.maxOperationRetryTime,i=new ne(n,"DELETE",function(e,t){},r);return i.successCodes=[200,204],i.errorHandler=se(t),i}(e.storage,e._location);return e.storage.makeRequestWithTokens(t,pe)}function Se(e,t){const n=function(e,t){const n=t.split("/").filter(e=>e.length>0).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new w(e._location.bucket,n);return new ge(e.storage,r)}function Ee(e,t){if(e instanceof _e){const n=e;if(null==n._bucket)throw new l(c.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+s+"' property when initializing the app?");const r=new ge(n,n._bucket);return null!=t?Ee(r,t):r}return void 0!==t?Se(e,t):e}function Te(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof _e)return new ge(e,t);throw m("To use ref(service, url), the first argument must be a Storage instance.")}return Ee(e,t)}function Ae(e,t){const n=null===t||void 0===t?void 0:t[s];return null==n?null:w.makeFromBucketSpec(n,e)}class _e{constructor(e,t,n,r,i){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=i,this._bucket=null,this._host=a,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?w.makeFromBucketSpec(r,this._host):Ae(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=w.makeFromBucketSpec(this._url,e):this._bucket=Ae(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){A("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){A("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});if(e){return(await e.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ge(this,e)}_makeRequest(e,t,n,r){let i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new x(v());{const o=function(e,t,n,r,i,o){let a=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];const s=k(e.urlParams),l=e.url+s,c=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(c,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(c,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(c,o),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(c,r),new I(l,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,a)}(e,this._appId,n,r,t,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,t){const[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,r).getPromise()}}const ke="@firebase/storage",Ce="0.11.2",Ie="storage";function Re(e,t,n){return me(e=(0,i.Ku)(e),t,n)}function Ne(e){return ve(e=(0,i.Ku)(e))}function Oe(e){return we(e=(0,i.Ku)(e))}function De(e){return xe(e=(0,i.Ku)(e))}function Pe(e,t){return Te(e=(0,i.Ku)(e),t)}function Le(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,r.Sx)(),t=arguments.length>1?arguments[1]:void 0;e=(0,i.Ku)(e);const n=(0,r.j6)(e,Ie).getImmediate({identifier:t}),o=(0,i.yU)("storage");return o&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};!function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";const{mockUserToken:o}=r;o&&(e._overrideAuthToken="string"===typeof o?o:(0,i.Fy)(o,e.app.options.projectId))}(e,t,n,r)}(n,...o),n}function je(e,t){let{instanceIdentifier:n}=t;const i=e.getProvider("app").getImmediate(),o=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return new _e(i,o,a,n,r.MF)}(0,r.om)(new o.uA(Ie,je,"PUBLIC").setMultipleInstances(!0)),(0,r.KO)(ke,Ce,""),(0,r.KO)(ke,Ce,"esm2017")},150:(e,t,n)=>{n.d(t,{MF:()=>se,j6:()=>re,om:()=>ne,Sx:()=>ce,Wp:()=>le,KO:()=>ue});var r=n(812),i=n(443),o=n(700),a=n(555);let s,l;const c=new WeakMap,u=new WeakMap,d=new WeakMap,h=new WeakMap,f=new WeakMap;let p={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return u.get(e);if("objectStoreNames"===t)return e.objectStoreNames||d.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return v(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function g(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(l||(l=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(y(this),n),v(c.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return v(e.apply(y(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const o=e.call(y(this),t,...r);return d.set(o,t.sort?t.sort():[t]),v(o)}}function m(e){return"function"===typeof e?g(e):(e instanceof IDBTransaction&&function(e){if(u.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",o),e.removeEventListener("abort",o)},i=()=>{t(),r()},o=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",o),e.addEventListener("abort",o)});u.set(e,t)}(e),t=e,(s||(s=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,p):e);var t}function v(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",o)},i=()=>{t(v(e.result)),r()},o=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",o)});return t.then(t=>{t instanceof IDBCursor&&c.set(t,e)}).catch(()=>{}),f.set(t,e),t}(e);if(h.has(e))return h.get(e);const t=m(e);return t!==e&&(h.set(e,t),f.set(t,e)),t}const y=e=>f.get(e);const b=["get","getKey","getAll","getAllKeys","count"],w=["put","add","delete","clear"],x=new Map;function S(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(x.get(t))return x.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=w.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!b.includes(n))return;const o=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let o=t.store;for(var a=arguments.length,s=new Array(a>1?a-1:0),l=1;l<a;l++)s[l-1]=arguments[l];return r&&(o=o.index(s.shift())),(await Promise.all([o[n](...s),i&&t.done]))[0]};return x.set(t,o),o}p=(e=>(0,a.A)((0,a.A)({},e),{},{get:(t,n,r)=>S(t,n)||e.get(t,n,r),has:(t,n)=>!!S(t,n)||e.has(t,n)}))(p);class E{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null}).filter(e=>e).join(" ")}}const T="@firebase/app",A="0.9.13",_=new i.Vy("@firebase/app"),k="@firebase/app-compat",C="@firebase/analytics-compat",I="@firebase/analytics",R="@firebase/app-check-compat",N="@firebase/app-check",O="@firebase/auth",D="@firebase/auth-compat",P="@firebase/database",L="@firebase/database-compat",j="@firebase/functions",M="@firebase/functions-compat",F="@firebase/installations",U="@firebase/installations-compat",z="@firebase/messaging",B="@firebase/messaging-compat",W="@firebase/performance",V="@firebase/performance-compat",H="@firebase/remote-config",G="@firebase/remote-config-compat",q="@firebase/storage",K="@firebase/storage-compat",Y="@firebase/firestore",$="@firebase/firestore-compat",X="firebase",Q="[DEFAULT]",J={[T]:"fire-core",[k]:"fire-core-compat",[I]:"fire-analytics",[C]:"fire-analytics-compat",[N]:"fire-app-check",[R]:"fire-app-check-compat",[O]:"fire-auth",[D]:"fire-auth-compat",[P]:"fire-rtdb",[L]:"fire-rtdb-compat",[j]:"fire-fn",[M]:"fire-fn-compat",[F]:"fire-iid",[U]:"fire-iid-compat",[z]:"fire-fcm",[B]:"fire-fcm-compat",[W]:"fire-perf",[V]:"fire-perf-compat",[H]:"fire-rc",[G]:"fire-rc-compat",[q]:"fire-gcs",[K]:"fire-gcs-compat",[Y]:"fire-fst",[$]:"fire-fst-compat","fire-js":"fire-js",[X]:"fire-js-all"},Z=new Map,ee=new Map;function te(e,t){try{e.container.addComponent(t)}catch(n){_.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function ne(e){const t=e.name;if(ee.has(t))return _.debug("There were multiple attempts to register component ".concat(t,".")),!1;ee.set(t,e);for(const n of Z.values())te(n,e);return!0}function re(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}const ie={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},oe=new o.FA("app","Firebase",ie);class ae{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new r.uA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw oe.create("app-deleted",{appName:this._name})}}const se="9.23.0";function le(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const i=Object.assign({name:Q,automaticDataCollectionEnabled:!1},t),a=i.name;if("string"!==typeof a||!a)throw oe.create("bad-app-name",{appName:String(a)});if(n||(n=(0,o.T9)()),!n)throw oe.create("no-options");const s=Z.get(a);if(s){if((0,o.bD)(n,s.options)&&(0,o.bD)(i,s.config))return s;throw oe.create("duplicate-app",{appName:a})}const l=new r.h1(a);for(const r of ee.values())l.addComponent(r);const c=new ae(n,i,l);return Z.set(a,c),c}function ce(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q;const t=Z.get(e);if(!t&&e===Q&&(0,o.T9)())return le();if(!t)throw oe.create("no-app",{appName:e});return t}function ue(e,t,n){var i;let o=null!==(i=J[e])&&void 0!==i?i:e;n&&(o+="-".concat(n));const a=o.match(/\s|\//),s=t.match(/\s|\//);if(a||s){const e=['Unable to register library "'.concat(o,'" with version "').concat(t,'":')];return a&&e.push('library name "'.concat(o,'" contains illegal characters (whitespace or "/")')),a&&s&&e.push("and"),s&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void _.warn(e.join(" "))}ne(new r.uA("".concat(o,"-version"),()=>({library:o,version:t}),"VERSION"))}const de="firebase-heartbeat-store";let he=null;function fe(){return he||(he=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:o}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=indexedDB.open(e,t),s=v(a);return r&&a.addEventListener("upgradeneeded",e=>{r(v(a.result),e.oldVersion,e.newVersion,v(a.transaction),e)}),n&&a.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),s.then(e=>{o&&e.addEventListener("close",()=>o()),i&&e.addEventListener("versionchange",e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),s}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(de)}}).catch(e=>{throw oe.create("idb-open",{originalErrorMessage:e.message})})),he}async function pe(e,t){try{const n=(await fe()).transaction(de,"readwrite"),r=n.objectStore(de);await r.put(t,ge(e)),await n.done}catch(n){if(n instanceof o.g)_.warn(n.message);else{const e=oe.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});_.warn(e.message)}}}function ge(e){return"".concat(e.name,"!").concat(e.options.appId)}class me{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new ye(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),t=ve();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==t&&!this._heartbeatsCache.heartbeats.some(e=>e.date===t))return this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const e=ve(),{heartbeatsToSend:t,unsentEntries:n}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),be(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),be(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),r=(0,o.Uj)(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function ve(){return(new Date).toISOString().substring(0,10)}class ye{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!(0,o.zW)()&&(0,o.eX)().then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){return await async function(e){try{const t=await fe();return await t.transaction(de).objectStore(de).get(ge(e))}catch(t){if(t instanceof o.g)_.warn(t.message);else{const e=oe.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});_.warn(e.message)}}}(this.app)||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return pe(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return pe(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function be(e){return(0,o.Uj)(JSON.stringify({version:2,heartbeats:e})).length}var we;we="",ne(new r.uA("platform-logger",e=>new E(e),"PRIVATE")),ne(new r.uA("heartbeat",e=>new me(e),"PRIVATE")),ue(T,A,we),ue(T,A,"esm2017"),ue("fire-js","")},153:(e,t,n)=>{var r=n(43),i=Symbol.for("react.element"),o=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,o={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)a.call(t,r)&&!l.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:o,_owner:s.current}}t.Fragment=o,t.jsx=c,t.jsxs=c},202:(e,t)=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,m={};function v(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var w=b.prototype=new y;w.constructor=b,g(w,v.prototype),w.isPureReactComponent=!0;var x=Array.isArray,S=Object.prototype.hasOwnProperty,E={current:null},T={key:!0,ref:!0,__self:!0,__source:!0};function A(e,t,r){var i,o={},a=null,s=null;if(null!=t)for(i in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)S.call(t,i)&&!T.hasOwnProperty(i)&&(o[i]=t[i]);var l=arguments.length-2;if(1===l)o.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];o.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===o[i]&&(o[i]=l[i]);return{$$typeof:n,type:e,key:a,ref:s,props:o,_owner:E.current}}function _(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var k=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function I(e,t,i,o,a){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l=!1;if(null===e)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return a=a(l=e),e=""===o?"."+C(l,0):o,x(a)?(i="",null!=e&&(i=e.replace(k,"$&/")+"/"),I(a,t,i,"",function(e){return e})):null!=a&&(_(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,i+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(k,"$&/")+"/")+e)),t.push(a)),1;if(l=0,o=""===o?".":o+":",x(e))for(var c=0;c<e.length;c++){var u=o+C(s=e[c],c);l+=I(s,t,i,u,a)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(s=e.next()).done;)l+=I(s=s.value,t,i,u=o+C(s,c++),a);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function R(e,t,n){if(null==e)return e;var r=[],i=0;return I(e,r,"","",function(e){return t.call(n,e,i++)}),r}function N(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var O={current:null},D={transition:null},P={ReactCurrentDispatcher:O,ReactCurrentBatchConfig:D,ReactCurrentOwner:E};function L(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:R,forEach:function(e,t,n){R(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return R(e,function(){t++}),t},toArray:function(e){return R(e,function(e){return e})||[]},only:function(e){if(!_(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=i,t.Profiler=a,t.PureComponent=b,t.StrictMode=o,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=P,t.act=L,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=g({},e.props),o=e.key,a=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,s=E.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)S.call(t,c)&&!T.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:e.type,key:o,ref:a,props:i,_owner:s}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=A,t.createFactory=function(e){var t=A.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=_,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:N}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=D.transition;D.transition={};try{e()}finally{D.transition=t}},t.unstable_act=L,t.useCallback=function(e,t){return O.current.useCallback(e,t)},t.useContext=function(e){return O.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return O.current.useDeferredValue(e)},t.useEffect=function(e,t){return O.current.useEffect(e,t)},t.useId=function(){return O.current.useId()},t.useImperativeHandle=function(e,t,n){return O.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return O.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return O.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return O.current.useMemo(e,t)},t.useReducer=function(e,t,n){return O.current.useReducer(e,t,n)},t.useRef=function(e){return O.current.useRef(e)},t.useState=function(e){return O.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return O.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return O.current.useTransition()},t.version="18.3.1"},234:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<o(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,a=i>>>1;r<a;){var s=2*(r+1)-1,l=e[s],c=s+1,u=e[c];if(0>o(l,n))c<i&&0>o(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[s]=n,r=s);else{if(!(c<i&&0>o(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var c=[],u=[],d=1,h=null,f=3,p=!1,g=!1,m=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function x(e){if(m=!1,w(e),!g)if(null!==r(c))g=!0,D(S);else{var t=r(u);null!==t&&P(x,t.startTime-e)}}function S(e,n){g=!1,m&&(m=!1,y(_),_=-1),p=!0;var o=f;try{for(w(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!I());){var a=h.callback;if("function"===typeof a){h.callback=null,f=h.priorityLevel;var s=a(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?h.callback=s:h===r(c)&&i(c),w(n)}else i(c);h=r(c)}if(null!==h)var l=!0;else{var d=r(u);null!==d&&P(x,d.startTime-n),l=!1}return l}finally{h=null,f=o,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var E,T=!1,A=null,_=-1,k=5,C=-1;function I(){return!(t.unstable_now()-C<k)}function R(){if(null!==A){var e=t.unstable_now();C=e;var n=!0;try{n=A(!0,e)}finally{n?E():(T=!1,A=null)}}else T=!1}if("function"===typeof b)E=function(){b(R)};else if("undefined"!==typeof MessageChannel){var N=new MessageChannel,O=N.port2;N.port1.onmessage=R,E=function(){O.postMessage(null)}}else E=function(){v(R,0)};function D(e){A=e,T||(T=!0,E())}function P(e,n){_=v(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){g||p||(g=!0,D(S))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,o){var a=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?a+o:a:o=a,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:o,expirationTime:s=o+s,sortIndex:-1},o>a?(e.sortIndex=o,n(u,e),null===r(c)&&e===r(u)&&(m?(y(_),_=-1):m=!0,P(x,o-a))):(e.sortIndex=s,n(c,e),g||p||(g=!0,D(S))),e},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},391:(e,t,n)=>{var r=n(950);t.H=r.createRoot,r.hydrateRoot},443:(e,t,n)=>{n.d(t,{$b:()=>i,Vy:()=>c});const r=[];var i;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(i||(i={}));const o={debug:i.DEBUG,verbose:i.VERBOSE,info:i.INFO,warn:i.WARN,error:i.ERROR,silent:i.SILENT},a=i.INFO,s={[i.DEBUG]:"log",[i.VERBOSE]:"log",[i.INFO]:"info",[i.WARN]:"warn",[i.ERROR]:"error"},l=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=s[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,o=new Array(i>2?i-2:0),a=2;a<i;a++)o[a-2]=arguments[a];console[r]("[".concat(n,"]  ").concat(e.name,":"),...o)};class c{constructor(e){this.name=e,this._logLevel=a,this._logHandler=l,this._userLogHandler=null,r.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in i))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?o[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,i.DEBUG,...t),this._logHandler(this,i.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,i.VERBOSE,...t),this._logHandler(this,i.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,i.INFO,...t),this._logHandler(this,i.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,i.WARN,...t),this._logHandler(this,i.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,i.ERROR,...t),this._logHandler(this,i.ERROR,...t)}}},555:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}function o(e,t,n){return(t=i(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach(function(t){o(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}n.d(t,{A:()=>s})},579:(e,t,n)=>{e.exports=n(153)},619:(e,t,n)=>{n.d(t,{eJ:()=>Qe,xI:()=>vn,hg:()=>et,J1:()=>Xe,x9:()=>Je,CI:()=>tt,r7:()=>Ze});var r=n(700),i=n(150);function o(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;var a=n(443),s=n(812);function l(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const c=l,u=new r.FA("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),d=new a.Vy("@firebase/auth");function h(e){if(d.logLevel<=a.$b.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];d.error("Auth (".concat(i.MF,"): ").concat(e),...n)}}function f(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw m(e,...n)}function p(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return m(e,...n)}function g(e,t,n){const i=Object.assign(Object.assign({},c()),{[t]:n});return new r.FA("auth","Firebase",i).create(t,{appName:e.name})}function m(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return u.create(e,...n)}function v(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw m(t,...r)}}function y(e){const t="INTERNAL ASSERTION FAILED: "+e;throw h(t),new Error(t)}function b(e,t){e||y(t)}function w(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function x(){return"http:"===S()||"https:"===S()}function S(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class E{constructor(e,t){this.shortDelay=e,this.longDelay=t,b(t>e,"Short delay should be less than long delay!"),this.isMobile=(0,r.jZ)()||(0,r.lV)()}get(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(x()||(0,r.sr)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function T(e,t){b(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class A{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void y("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void y("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void y("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const _={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},k=new E(3e4,6e4);function C(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function I(e,t,n,i){return R(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},async()=>{let o={},a={};i&&("GET"===t?a=i:o={body:JSON.stringify(i)});const s=(0,r.Am)(Object.assign({key:e.config.apiKey},a)).slice(1),l=await e._getAdditionalHeaders();return l["Content-Type"]="application/json",e.languageCode&&(l["X-Firebase-Locale"]=e.languageCode),A.fetch()(O(e,e.config.apiHost,n,s),Object.assign({method:t,headers:l,referrerPolicy:"no-referrer"},o))})}async function R(e,t,n){e._canInitEmulator=!1;const i=Object.assign(Object.assign({},_),t);try{const t=new D(e),r=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const o=await r.json();if("needConfirmation"in o)throw P(e,"account-exists-with-different-credential",o);if(r.ok&&!("errorMessage"in o))return o;{const t=r.ok?o.errorMessage:o.error.message,[n,a]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw P(e,"credential-already-in-use",o);if("EMAIL_EXISTS"===n)throw P(e,"email-already-in-use",o);if("USER_DISABLED"===n)throw P(e,"user-disabled",o);const s=i[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(a)throw g(e,s,a);f(e,s)}}catch(o){if(o instanceof r.g)throw o;f(e,"network-request-failed",{message:String(o)})}}async function N(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const o=await I(e,t,n,r,i);return"mfaPendingCredential"in o&&f(e,"multi-factor-auth-required",{_serverResponse:o}),o}function O(e,t,n,r){const i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?T(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}class D{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(p(this.auth,"network-request-failed")),k.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function P(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=p(e,t,r);return i.customData._tokenResponse=n,i}function L(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function j(e){return 1e3*Number(e)}function M(e){const[t,n,i]=e.split(".");if(void 0===t||void 0===n||void 0===i)return h("JWT malformed, contained fewer than 3 sections"),null;try{const e=(0,r.u)(n);return e?JSON.parse(e):(h("Failed to decode base64 JWT payload"),null)}catch(o){return h("Caught error parsing JWT payload as JSON",null===o||void 0===o?void 0:o.toString()),null}}async function F(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(n){throw n instanceof r.g&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}class U{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void((null===e||void 0===e?void 0:e.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class z{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=L(this.lastLoginAt),this.creationTime=L(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function B(e){var t;const n=e.auth,r=await e.getIdToken(),i=await F(e,async function(e,t){return I(e,"POST","/v1/accounts:lookup",t)}(n,{idToken:r}));v(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const a=i.users[0];e._notifyReloadListener(a);const s=(null===(t=a.providerUserInfo)||void 0===t?void 0:t.length)?a.providerUserInfo.map(e=>{var{providerId:t}=e,n=o(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}):[];const l=(c=e.providerData,u=s,[...c.filter(e=>!u.some(t=>t.providerId===e.providerId)),...u]);var c,u;const d=e.isAnonymous,h=!(e.email&&a.passwordHash)&&!(null===l||void 0===l?void 0:l.length),f=!!d&&h,p={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new z(a.createdAt,a.lastLoginAt),isAnonymous:f};Object.assign(e,p)}class W{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){v(e.idToken,"internal-error"),v("undefined"!==typeof e.idToken,"internal-error"),v("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){const t=M(e);return v(t,"internal-error"),v("undefined"!==typeof t.exp,"internal-error"),v("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return v(!this.accessToken||this.refreshToken,e,"user-token-expired"),t||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:i,expiresIn:o}=await async function(e,t){const n=await R(e,{},async()=>{const n=(0,r.Am)({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:o}=e.config,a=O(e,i,"/v1/token","key=".concat(o)),s=await e._getAdditionalHeaders();return s["Content-Type"]="application/x-www-form-urlencoded",A.fetch()(a,{method:"POST",headers:s,body:n})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,i,Number(o))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,o=new W;return n&&(v("string"===typeof n,"internal-error",{appName:e}),o.refreshToken=n),r&&(v("string"===typeof r,"internal-error",{appName:e}),o.accessToken=r),i&&(v("number"===typeof i,"internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new W,this.toJSON())}_performRefresh(){return y("not implemented")}}function V(e,t){v("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class H{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=o(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new U(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new z(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await F(this,this.stsTokenManager.getToken(this.auth,e));return v(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=(0,r.Ku)(e),i=await n.getIdToken(t),o=M(i);v(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const a="object"===typeof o.firebase?o.firebase:void 0,s=null===a||void 0===a?void 0:a.sign_in_provider;return{claims:o,token:i,authTime:L(j(o.auth_time)),issuedAtTime:L(j(o.iat)),expirationTime:L(j(o.exp)),signInProvider:s||null,signInSecondFactor:(null===a||void 0===a?void 0:a.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=(0,r.Ku)(e);await B(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(v(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>Object.assign({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new H(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){v(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await B(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await F(this,async function(e,t){return I(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,o,a,s,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,d=null!==(r=t.email)&&void 0!==r?r:void 0,h=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(o=t.photoURL)&&void 0!==o?o:void 0,p=null!==(a=t.tenantId)&&void 0!==a?a:void 0,g=null!==(s=t._redirectEventId)&&void 0!==s?s:void 0,m=null!==(l=t.createdAt)&&void 0!==l?l:void 0,y=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:b,emailVerified:w,isAnonymous:x,providerData:S,stsTokenManager:E}=t;v(b&&E,e,"internal-error");const T=W.fromJSON(this.name,E);v("string"===typeof b,e,"internal-error"),V(u,e.name),V(d,e.name),v("boolean"===typeof w,e,"internal-error"),v("boolean"===typeof x,e,"internal-error"),V(h,e.name),V(f,e.name),V(p,e.name),V(g,e.name),V(m,e.name),V(y,e.name);const A=new H({uid:b,auth:e,email:d,emailVerified:w,displayName:u,isAnonymous:x,photoURL:f,phoneNumber:h,tenantId:p,stsTokenManager:T,createdAt:m,lastLoginAt:y});return S&&Array.isArray(S)&&(A.providerData=S.map(e=>Object.assign({},e))),g&&(A._redirectEventId=g),A}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new W;r.updateFromServerResponse(t);const i=new H({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await B(i),i}}const G=new Map;function q(e){b(e instanceof Function,"Expected a class definition");let t=G.get(e);return t?(b(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,G.set(e,t),t)}class K{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}K.type="NONE";const Y=K;function $(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class X{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=$(this.userKey,r.apiKey,i),this.fullPersistenceKey=$("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?H._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new X(q(Y),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let i=r[0]||q(Y);const o=$(n,e.config.apiKey,e.name);let a=null;for(const c of t)try{const t=await c._get(o);if(t){const n=H._fromJSON(e,t);c!==i&&(a=n),i=c;break}}catch(l){}const s=r.filter(e=>e._shouldAllowMigration);return i._shouldAllowMigration&&s.length?(i=s[0],a&&await i._set(o,a.toJSON()),await Promise.all(t.map(async e=>{if(e!==i)try{await e._remove(o)}catch(l){}})),new X(i,e,n)):new X(i,e,n)}}function Q(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(te(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(J(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(re(t))return"Blackberry";if(ie(t))return"Webos";if(Z(t))return"Safari";if((t.includes("chrome/")||ee(t))&&!t.includes("edge/"))return"Chrome";if(ne(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function J(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,r.ZQ)();return/firefox\//i.test(e)}function Z(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,r.ZQ)()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ee(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,r.ZQ)();return/crios\//i.test(e)}function te(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,r.ZQ)();return/iemobile/i.test(e)}function ne(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,r.ZQ)();return/android/i.test(e)}function re(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,r.ZQ)();return/blackberry/i.test(e)}function ie(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,r.ZQ)();return/webos/i.test(e)}function oe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,r.ZQ)();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function ae(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,r.ZQ)();return oe(e)||ne(e)||ie(e)||re(e)||/windows phone/i.test(e)||te(e)}function se(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Q((0,r.ZQ)());break;case"Worker":t="".concat(Q((0,r.ZQ)()),"-").concat(e);break;default:t=e}const o=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(i.MF,"/").concat(o)}async function le(e,t){return I(e,"GET","/v2/recaptchaConfig",C(e,t))}function ce(e){return void 0!==e&&void 0!==e.enterprise}class ue{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some(e=>"EMAIL_PASSWORD_PROVIDER"===e.provider&&"OFF"!==e.enforcementState)}}function de(e){return new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=p("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)})}function he(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class fe{constructor(e){this.type="recaptcha-enterprise",this.auth=ve(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;ce(i)?i.enterprise.ready(()=>{i.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n("NO_RECAPTCHA")})}):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{le(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new ue(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(i=>{if(!t&&ce(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));de("https://www.google.com/recaptcha/enterprise.js?render="+i).then(()=>{n(i,e,r)}).catch(e=>{r(e)})}}).catch(e=>{r(e)})})}}async function pe(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=new fe(e);let o;try{o=await i.verify(n)}catch(s){o=await i.verify(n,!0)}const a=Object.assign({},t);return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}class ge{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(i){r(i)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(r){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===n||void 0===n?void 0:n.message})}}}class me{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ye(this),this.idTokenSubscription=new ye(this),this.beforeStateQueue=new ge(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=u,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=q(t)),this._initializationPromise=this.queue(async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await X.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(i){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUser(e){var t;const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,o=null===r||void 0===r?void 0:r._redirectEventId,a=await this.tryRedirectSignIn(e);n&&n!==o||!(null===a||void 0===a?void 0:a.user)||(r=a.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return v(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await B(e)}catch(t){if((null===t||void 0===t?void 0:t.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?(0,r.Ku)(e):null;return t&&v(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&v(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(q(e))})}async initializeRecaptchaConfig(){const e=await le(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),t=new ue(e);if(null==this.tenantId?this._agentRecaptchaConfig=t:this._tenantRecaptchaConfigs[this.tenantId]=t,t.emailPasswordEnabled){new fe(this).verify()}}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new r.FA("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&q(e)||this._popupRedirectResolver;v(t,this,"argument-error"),this.redirectPersistenceManager=await X.create(this,[q(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return v(o,this,"internal-error"),o.then(()=>i(this.currentUser)),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return v(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=se(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(d.logLevel<=a.$b.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];d.warn("Auth (".concat(i.MF,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function ve(e){return(0,r.Ku)(e)}class ye{constructor(e){this.auth=e,this.observer=null,this.addObserver=(0,r.tD)(e=>this.observer=e)}get next(){return v(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function be(e,t,n){const r=ve(e);v(r._canInitEmulator,r,"emulator-config-failed"),v(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),o=we(t),{host:a,port:s}=function(e){const t=we(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:xe(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:xe(t)}}}(t),l=null===s?"":":".concat(s);r.config.emulator={url:"".concat(o,"//").concat(a).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:s,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function we(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function xe(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Se{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return y("not implemented")}_getIdTokenResponse(e){return y("not implemented")}_linkToIdToken(e,t){return y("not implemented")}_getReauthenticationResolver(e){return y("not implemented")}}async function Ee(e,t){return I(e,"POST","/v1/accounts:update",t)}async function Te(e,t){return N(e,"POST","/v1/accounts:signInWithPassword",C(e,t))}async function Ae(e,t){return I(e,"POST","/v1/accounts:sendOobCode",C(e,t))}async function _e(e,t){return Ae(e,t)}class ke extends Se{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new ke(e,t,"password")}static _fromEmailAndCode(e,t){return new ke(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){var t;switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};if(null===(t=e._getRecaptchaConfig())||void 0===t?void 0:t.emailPasswordEnabled){const t=await pe(e,n,"signInWithPassword");return Te(e,t)}return Te(e,n).catch(async t=>{if(t.code==="auth/".concat("missing-recaptcha-token")){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const t=await pe(e,n,"signInWithPassword");return Te(e,t)}return Promise.reject(t)});case"emailLink":return async function(e,t){return N(e,"POST","/v1/accounts:signInWithEmailLink",C(e,t))}(e,{email:this._email,oobCode:this._password});default:f(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Ee(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(e,t){return N(e,"POST","/v1/accounts:signInWithEmailLink",C(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:f(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Ce(e,t){return N(e,"POST","/v1/accounts:signInWithIdp",C(e,t))}class Ie extends Se{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ie(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):f("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=o(t,["providerId","signInMethod"]);if(!n||!r)return null;const a=new Ie(n,r);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){return Ce(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Ce(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ce(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=(0,r.Am)(t)}return e}}const Re={USER_NOT_FOUND:"user-not-found"};class Ne extends Se{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Ne({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Ne({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return N(e,"POST","/v1/accounts:signInWithPhoneNumber",C(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await N(e,"POST","/v1/accounts:signInWithPhoneNumber",C(e,t));if(n.temporaryProof)throw P(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return N(e,"POST","/v1/accounts:signInWithPhoneNumber",C(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),Re)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new Ne({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class Oe{constructor(e){var t,n,i,o,a,s;const l=(0,r.I9)((0,r.hp)(e)),c=null!==(t=l.apiKey)&&void 0!==t?t:null,u=null!==(n=l.oobCode)&&void 0!==n?n:null,d=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=l.mode)&&void 0!==i?i:null);v(c&&u&&d,"argument-error"),this.apiKey=c,this.operation=d,this.code=u,this.continueUrl=null!==(o=l.continueUrl)&&void 0!==o?o:null,this.languageCode=null!==(a=l.languageCode)&&void 0!==a?a:null,this.tenantId=null!==(s=l.tenantId)&&void 0!==s?s:null}static parseLink(e){const t=function(e){const t=(0,r.I9)((0,r.hp)(e)).link,n=t?(0,r.I9)((0,r.hp)(t)).deep_link_id:null,i=(0,r.I9)((0,r.hp)(e)).deep_link_id;return(i?(0,r.I9)((0,r.hp)(i)).link:null)||i||n||t||e}(e);try{return new Oe(t)}catch(n){return null}}}class De{constructor(){this.providerId=De.PROVIDER_ID}static credential(e,t){return ke._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Oe.parseLink(t);return v(n,"argument-error"),ke._fromEmailAndCode(e,n.code,n.tenantId)}}De.PROVIDER_ID="password",De.EMAIL_PASSWORD_SIGN_IN_METHOD="password",De.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Pe{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Le extends Pe{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class je extends Le{constructor(){super("facebook.com")}static credential(e){return Ie._fromParams({providerId:je.PROVIDER_ID,signInMethod:je.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return je.credentialFromTaggedObject(e)}static credentialFromError(e){return je.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return je.credential(t.oauthAccessToken)}catch(n){return null}}}je.FACEBOOK_SIGN_IN_METHOD="facebook.com",je.PROVIDER_ID="facebook.com";class Me extends Le{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ie._fromParams({providerId:Me.PROVIDER_ID,signInMethod:Me.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Me.credentialFromTaggedObject(e)}static credentialFromError(e){return Me.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Me.credential(n,r)}catch(i){return null}}}Me.GOOGLE_SIGN_IN_METHOD="google.com",Me.PROVIDER_ID="google.com";class Fe extends Le{constructor(){super("github.com")}static credential(e){return Ie._fromParams({providerId:Fe.PROVIDER_ID,signInMethod:Fe.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Fe.credentialFromTaggedObject(e)}static credentialFromError(e){return Fe.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Fe.credential(t.oauthAccessToken)}catch(n){return null}}}Fe.GITHUB_SIGN_IN_METHOD="github.com",Fe.PROVIDER_ID="github.com";class Ue extends Le{constructor(){super("twitter.com")}static credential(e,t){return Ie._fromParams({providerId:Ue.PROVIDER_ID,signInMethod:Ue.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ue.credentialFromTaggedObject(e)}static credentialFromError(e){return Ue.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Ue.credential(n,r)}catch(i){return null}}}async function ze(e,t){return N(e,"POST","/v1/accounts:signUp",C(e,t))}Ue.TWITTER_SIGN_IN_METHOD="twitter.com",Ue.PROVIDER_ID="twitter.com";class Be{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await H._fromIdTokenResponse(e,n,r),o=We(n);return new Be({user:i,providerId:o,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=We(n);return new Be({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function We(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class Ve extends r.g{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,Ve.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new Ve(e,t,n,r)}}function He(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw Ve._fromErrorAndOperation(e,n,t,r);throw n})}async function Ge(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await F(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Be._forOperation(e,"link",r)}async function qe(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e,i="reauthenticate";try{const o=await F(e,He(r,i,t,e),n);v(o.idToken,r,"internal-error");const a=M(o.idToken);v(a,r,"internal-error");const{sub:s}=a;return v(e.uid===s,r,"user-mismatch"),Be._forOperation(e,i,o)}catch(o){throw(null===o||void 0===o?void 0:o.code)==="auth/".concat("user-not-found")&&f(r,"user-mismatch"),o}}async function Ke(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r="signIn",i=await He(e,r,t),o=await Be._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(o.user),o}async function Ye(e,t){return Ke(ve(e),t)}function $e(e,t,n){var r;v((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),v("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(v(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(v(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function Xe(e,t,n){var r;const i=ve(e),o={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};if(null===(r=i._getRecaptchaConfig())||void 0===r?void 0:r.emailPasswordEnabled){const e=await pe(i,o,"getOobCode",!0);n&&$e(i,e,n),await _e(i,e)}else n&&$e(i,o,n),await _e(i,o).catch(async e=>{if(e.code!=="auth/".concat("missing-recaptcha-token"))return Promise.reject(e);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const e=await pe(i,o,"getOobCode",!0);n&&$e(i,e,n),await _e(i,e)}})}async function Qe(e,t,n){var r;const i=ve(e),o={returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"};let a;if(null===(r=i._getRecaptchaConfig())||void 0===r?void 0:r.emailPasswordEnabled){const e=await pe(i,o,"signUpPassword");a=ze(i,e)}else a=ze(i,o).catch(async e=>{if(e.code==="auth/".concat("missing-recaptcha-token")){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const e=await pe(i,o,"signUpPassword");return ze(i,e)}return Promise.reject(e)});const s=await a.catch(e=>Promise.reject(e)),l=await Be._fromIdTokenResponse(i,"signIn",s);return await i._updateCurrentUser(l.user),l}function Je(e,t,n){return Ye((0,r.Ku)(e),De.credential(t,n))}async function Ze(e,t){let{displayName:n,photoURL:i}=t;if(void 0===n&&void 0===i)return;const o=(0,r.Ku)(e),a={idToken:await o.getIdToken(),displayName:n,photoUrl:i,returnSecureToken:!0},s=await F(o,async function(e,t){return I(e,"POST","/v1/accounts:update",t)}(o.auth,a));o.displayName=s.displayName||null,o.photoURL=s.photoUrl||null;const l=o.providerData.find(e=>{let{providerId:t}=e;return"password"===t});l&&(l.displayName=o.displayName,l.photoURL=o.photoURL),await o._updateTokensIfNecessary(s)}function et(e,t,n,i){return(0,r.Ku)(e).onAuthStateChanged(t,n,i)}function tt(e){return(0,r.Ku)(e).signOut()}new WeakMap;const nt="__sak";class rt{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(nt,"1"),this.storage.removeItem(nt),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class it extends rt{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=(0,r.ZQ)();return Z(e)||oe(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),this.fallbackToPolling=ae(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const i=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},o=this.storage.getItem(n);(0,r.lT)()&&10===document.documentMode&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,10):i()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}it.type="LOCAL";const ot=it;class at extends rt{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}at.type="SESSION";const st=at;class lt{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new lt(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,o=this.handlersMap[r];if(!(null===o||void 0===o?void 0:o.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const a=Array.from(o).map(async e=>e(t.origin,i)),s=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(a);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:s})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function ct(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}lt.receivers=[];class ut{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,o;return new Promise((a,s)=>{const l=ct("",20);r.port1.start();const c=setTimeout(()=>{s(new Error("unsupported_event"))},n);o={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout(()=>{s(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(t.data.response);break;default:clearTimeout(c),clearTimeout(i),s(new Error("invalid_response"))}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}function dt(){return window}function ht(){return"undefined"!==typeof dt().WorkerGlobalScope&&"function"===typeof dt().importScripts}const ft="firebaseLocalStorageDb",pt="firebaseLocalStorage",gt="fbase_key";class mt{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function vt(e,t){return e.transaction([pt],t?"readwrite":"readonly").objectStore(pt)}function yt(){const e=indexedDB.open(ft,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(pt,{keyPath:gt})}catch(r){n(r)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(pt)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(ft);return new mt(e).toPromise()}(),t(await yt()))})})}async function bt(e,t,n){const r=vt(e,!0).put({[gt]:t,value:n});return new mt(r).toPromise()}function wt(e,t){const n=vt(e,!0).delete(t);return new mt(n).toPromise()}class xt{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await yt()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ht()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=lt._getInstance(ht()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new ut(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await yt();return await bt(e,nt,"1"),await wt(e,nt),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>bt(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=vt(e,!1).get(t),r=await new mt(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>wt(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=vt(e,!1).getAll();return new mt(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}xt.type="LOCAL";const St=xt;he("rcb"),new E(3e4,6e4);const Et="recaptcha";async function Tt(e,t,n){var r;const i=await n.verify();try{let o;if(v("string"===typeof i,e,"argument-error"),v(n.type===Et,e,"argument-error"),o="string"===typeof t?{phoneNumber:t}:t,"session"in o){const t=o.session;if("phoneNumber"in o){v("enroll"===t.type,e,"internal-error");const n=await function(e,t){return I(e,"POST","/v2/accounts/mfaEnrollment:start",C(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{v("signin"===t.type,e,"internal-error");const n=(null===(r=o.multiFactorHint)||void 0===r?void 0:r.uid)||o.multiFactorUid;v(n,e,"missing-multi-factor-info");const a=await function(e,t){return I(e,"POST","/v2/accounts/mfaSignIn:start",C(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return a.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return I(e,"POST","/v1/accounts:sendVerificationCode",C(e,t))}(e,{phoneNumber:o.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}class At{constructor(e){this.providerId=At.PROVIDER_ID,this.auth=ve(e)}verifyPhoneNumber(e,t){return Tt(this.auth,e,(0,r.Ku)(t))}static credential(e,t){return Ne._fromVerification(e,t)}static credentialFromResult(e){const t=e;return At.credentialFromTaggedObject(t)}static credentialFromError(e){return At.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?Ne._fromTokenResponse(n,r):null}}function _t(e,t){return t?q(t):(v(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}At.PROVIDER_ID="phone",At.PHONE_SIGN_IN_METHOD="phone";class kt extends Se{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ce(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ce(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ce(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Ct(e){return Ke(e.auth,new kt(e),e.bypassAuthState)}function It(e){const{auth:t,user:n}=e;return v(n,t,"internal-error"),qe(n,new kt(e),e.bypassAuthState)}async function Rt(e){const{auth:t,user:n}=e;return v(n,t,"internal-error"),Ge(n,new kt(e),e.bypassAuthState)}class Nt{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:o,type:a}=e;if(o)return void this.reject(o);const s={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(s))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Ct;case"linkViaPopup":case"linkViaRedirect":return Rt;case"reauthViaPopup":case"reauthViaRedirect":return It;default:f(this.auth,"internal-error")}}resolve(e){b(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){b(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Ot=new E(2e3,1e4);class Dt extends Nt{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,Dt.currentPopupAction&&Dt.currentPopupAction.cancel(),Dt.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return v(e,this.auth,"internal-error"),e}async onExecution(){b(1===this.filter.length,"Popup operations only handle one event");const e=ct();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(p(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(p(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Dt.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(p(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,Ot.get())};e()}}Dt.currentPopupAction=null;const Pt=new Map;class Lt extends Nt{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=Pt.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=Ft(t),r=Mt(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(t){e=()=>Promise.reject(t)}Pt.set(this.auth._key(),e)}return this.bypassAuthState||Pt.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function jt(e,t){Pt.set(e._key(),t)}function Mt(e){return q(e._redirectPersistence)}function Ft(e){return $("pendingRedirect",e.config.apiKey,e.name)}async function Ut(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=ve(e),i=_t(r,t),o=new Lt(r,i,n),a=await o.execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,t)),a}class zt{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Wt(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!Wt(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(p(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Bt(e))}saveEventToCache(e){this.cachedEventUids.add(Bt(e)),this.lastProcessedEventTime=Date.now()}}function Bt(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function Wt(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const Vt=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ht=/^https?/;async function Gt(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return I(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(qt(r))return}catch(n){}f(e,"unauthorized-domain")}function qt(e){const t=w(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!Ht.test(n))return!1;if(Vt.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const Kt=new E(3e4,6e4);function Yt(){const e=dt().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}let $t=null;function Xt(e){return $t=$t||function(e){return new Promise((t,n)=>{var r,i,o;function a(){Yt(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Yt(),n(p(e,"network-request-failed"))},timeout:Kt.get()})}if(null===(i=null===(r=dt().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(o=dt().gapi)||void 0===o?void 0:o.load)){const t=he("iframefcb");return dt()[t]=()=>{gapi.load?a():n(p(e,"network-request-failed"))},de("https://apis.google.com/js/api.js?onload=".concat(t)).catch(e=>n(e))}a()}}).catch(e=>{throw $t=null,e})}(e),$t}const Qt=new E(5e3,15e3),Jt={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Zt=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function en(e){const t=e.config;v(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?T(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),o={apiKey:t.apiKey,appName:e.name,v:i.MF},a=Zt.get(e.config.apiHost);a&&(o.eid=a);const s=e._getFrameworks();return s.length&&(o.fw=s.join(",")),"".concat(n,"?").concat((0,r.Am)(o).slice(1))}const tn={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class nn{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function rn(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const a=Math.max((window.screen.availHeight-o)/2,0).toString(),s=Math.max((window.screen.availWidth-i)/2,0).toString();let l="";const c=Object.assign(Object.assign({},tn),{width:i.toString(),height:o.toString(),top:a,left:s}),u=(0,r.ZQ)().toLowerCase();n&&(l=ee(u)?"_blank":n),J(u)&&(t=t||"http://localhost",c.scrollbars="yes");const d=Object.entries(c).reduce((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")},"");if(function(){var e;return oe(arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,r.ZQ)())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(u)&&"_self"!==l)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",l),new nn(null);const h=window.open(t||"",l,d);v(h,e,"popup-blocked");try{h.focus()}catch(f){}return new nn(h)}const on="__/auth/handler",an="emulator/auth/handler",sn=encodeURIComponent("fac");async function ln(e,t,n,o,a,s){v(e.config.authDomain,e,"auth-domain-config-required"),v(e.config.apiKey,e,"invalid-api-key");const l={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:o,v:i.MF,eventId:a};if(t instanceof Pe){t.setDefaultLanguage(e.languageCode),l.providerId=t.providerId||"",(0,r.Im)(t.getCustomParameters())||(l.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))l[e]=t}if(t instanceof Le){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(l.scopes=e.join(","))}e.tenantId&&(l.tid=e.tenantId);const c=l;for(const r of Object.keys(c))void 0===c[r]&&delete c[r];const u=await e._getAppCheckToken(),d=u?"#".concat(sn,"=").concat(encodeURIComponent(u)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(on);return T(t,an)}(e),"?").concat((0,r.Am)(c).slice(1)).concat(d)}const cn="webStorageSupport";const un=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=st,this._completeRedirectFn=Ut,this._overrideRedirectResult=jt}async _openPopup(e,t,n,r){var i;b(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return rn(e,await ln(e,t,n,w(),r),ct())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){dt().location.href=e}(await ln(e,t,n,w(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(b(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await async function(e){const t=await Xt(e),n=dt().gapi;return v(n,e,"internal-error"),t.open({where:document.body,url:en(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Jt,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=p(e,"network-request-failed"),o=dt().setTimeout(()=>{r(i)},Qt.get());function a(){dt().clearTimeout(o),n(t)}t.ping(a).then(a,()=>{r(i)})}))}(e),n=new zt(e);return t.register("authEvent",t=>{v(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(cn,{type:cn},n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[cn];void 0!==i&&t(!!i),f(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Gt(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return ae()||Z()||oe()}};var dn="@firebase/auth",hn="0.23.2";class fn{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){v(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const pn=(0,r.XA)("authIdTokenMaxAge")||300;let gn=null;const mn=e=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&((new Date).getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>pn)return;const i=null===n||void 0===n?void 0:n.token;gn!==i&&(gn=i,await fetch(e,{method:i?"POST":"DELETE",headers:i?{Authorization:"Bearer ".concat(i)}:{}}))};function vn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,i.Sx)();const t=(0,i.j6)(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=(0,i.j6)(e,"auth");if(n.isInitialized()){const e=n.getImmediate(),i=n.getOptions();if((0,r.bD)(i,null!==t&&void 0!==t?t:{}))return e;f(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:un,persistence:[St,ot,st]}),o=(0,r.XA)("authTokenSyncURL");if(o){const e=mn(o);!function(e,t,n){(0,r.Ku)(e).beforeAuthStateChanged(t,n)}(n,e,()=>e(n.currentUser)),function(e,t,n,i){(0,r.Ku)(e).onIdTokenChanged(t,n,i)}(n,t=>e(t))}const a=(0,r.Tj)("auth");return a&&be(n,"http://".concat(a)),n}var yn;yn="Browser",(0,i.om)(new s.uA("auth",(e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:a,authDomain:s}=r.options;v(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:a,authDomain:s,clientPlatform:yn,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:se(yn)},c=new me(r,i,o,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(q);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),(0,i.om)(new s.uA("auth-internal",e=>(e=>new fn(e))(ve(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),(0,i.KO)(dn,hn,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(yn)),(0,i.KO)(dn,hn,"esm2017")},626:(e,t,n)=>{n.d(t,{Uz:()=>S,Qg:()=>E});var r=n(150),i=n(700),o=n(812);const a="type.googleapis.com/google.protobuf.Int64Value",s="type.googleapis.com/google.protobuf.UInt64Value";function l(e,t){const n={};for(const r in e)e.hasOwnProperty(r)&&(n[r]=t(e[r]));return n}function c(e){if(null==e)return null;if(e instanceof Number&&(e=e.valueOf()),"number"===typeof e&&isFinite(e))return e;if(!0===e||!1===e)return e;if("[object String]"===Object.prototype.toString.call(e))return e;if(e instanceof Date)return e.toISOString();if(Array.isArray(e))return e.map(e=>c(e));if("function"===typeof e||"object"===typeof e)return l(e,e=>c(e));throw new Error("Data cannot be encoded in JSON: "+e)}function u(e){if(null==e)return e;if(e["@type"])switch(e["@type"]){case a:case s:{const t=Number(e.value);if(isNaN(t))throw new Error("Data cannot be decoded from JSON: "+e);return t}default:throw new Error("Data cannot be decoded from JSON: "+e)}return Array.isArray(e)?e.map(e=>u(e)):"function"===typeof e||"object"===typeof e?l(e,e=>u(e)):e}const d="functions",h={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class f extends i.g{constructor(e,t,n){super("".concat(d,"/").concat(e),t||""),this.details=n}}class p{constructor(e,t,n){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=t.getImmediate({optional:!0}),this.auth||e.get().then(e=>this.auth=e,()=>{}),this.messaging||t.get().then(e=>this.messaging=e,()=>{}),this.appCheck||n.get().then(e=>this.appCheck=e,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return null===e||void 0===e?void 0:e.accessToken}catch(e){return}}async getMessagingToken(){if(this.messaging&&"Notification"in self&&"granted"===Notification.permission)try{return await this.messaging.getToken()}catch(e){return}}async getAppCheckToken(e){if(this.appCheck){const t=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return t.error?null:t.token}return null}async getContext(e){return{authToken:await this.getAuthToken(),messagingToken:await this.getMessagingToken(),appCheckToken:await this.getAppCheckToken(e)}}}const g="us-central1";class m{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:g,o=arguments.length>5?arguments[5]:void 0;this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new p(t,n,r),this.cancelAllRequests=new Promise(e=>{this.deleteService=()=>Promise.resolve(e())});try{const e=new URL(i);this.customDomain=e.origin,this.region=g}catch(a){this.customDomain=null,this.region=i}}_delete(){return this.deleteService()}_url(e){const t=this.app.options.projectId;if(null!==this.emulatorOrigin){const n=this.emulatorOrigin;return"".concat(n,"/").concat(t,"/").concat(this.region,"/").concat(e)}return null!==this.customDomain?"".concat(this.customDomain,"/").concat(e):"https://".concat(this.region,"-").concat(t,".cloudfunctions.net/").concat(e)}}function v(e,t,n){return r=>function(e,t,n,r){const i=e._url(t);return b(e,i,n,r)}(e,t,r,n||{})}async function y(e,t,n,r){let i;n["Content-Type"]="application/json";try{i=await r(e,{method:"POST",body:JSON.stringify(t),headers:n})}catch(a){return{status:0,json:null}}let o=null;try{o=await i.json()}catch(a){}return{status:i.status,json:o}}async function b(e,t,n,r){const i={data:n=c(n)},o={},a=await e.contextProvider.getContext(r.limitedUseAppCheckTokens);a.authToken&&(o.Authorization="Bearer "+a.authToken),a.messagingToken&&(o["Firebase-Instance-ID-Token"]=a.messagingToken),null!==a.appCheckToken&&(o["X-Firebase-AppCheck"]=a.appCheckToken);const s=function(e){let t=null;return{promise:new Promise((n,r)=>{t=setTimeout(()=>{r(new f("deadline-exceeded","deadline-exceeded"))},e)}),cancel:()=>{t&&clearTimeout(t)}}}(r.timeout||7e4),l=await Promise.race([y(t,i,o,e.fetchImpl),s.promise,e.cancelAllRequests]);if(s.cancel(),!l)throw new f("cancelled","Firebase Functions instance was deleted.");const d=function(e,t){let n,r=function(e){if(e>=200&&e<300)return"ok";switch(e){case 0:case 500:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(e),i=r;try{const e=t&&t.error;if(e){const t=e.status;if("string"===typeof t){if(!h[t])return new f("internal","internal");r=h[t],i=t}const o=e.message;"string"===typeof o&&(i=o),n=e.details,void 0!==n&&(n=u(n))}}catch(o){}return"ok"===r?null:new f(r,i,n)}(l.status,l.json);if(d)throw d;if(!l.json)throw new f("internal","Response is not valid JSON object.");let p=l.json.data;if("undefined"===typeof p&&(p=l.json.result),"undefined"===typeof p)throw new f("internal","Response is missing data field.");return{data:u(p)}}const w="@firebase/functions",x="0.10.0";function S(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,r.Sx)(),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g;const n=(0,r.j6)((0,i.Ku)(e),d).getImmediate({identifier:t}),o=(0,i.yU)("functions");return o&&function(e,t,n){!function(e,t,n){e.emulatorOrigin="http://".concat(t,":").concat(n)}((0,i.Ku)(e),t,n)}(n,...o),n}function E(e,t,n){return v((0,i.Ku)(e),t,n)}var T,A;T=fetch.bind(self),(0,r.om)(new o.uA(d,(e,t)=>{let{instanceIdentifier:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),o=e.getProvider("messaging-internal"),a=e.getProvider("app-check-internal");return new m(r,i,o,a,n,T)},"PUBLIC").setMultipleInstances(!0)),(0,r.KO)(w,x,A),(0,r.KO)(w,x,"esm2017")},700:(e,t,n)=>{n.d(t,{Am:()=>N,FA:()=>_,Fy:()=>g,I9:()=>O,Im:()=>C,Ku:()=>M,Ll:()=>y,T9:()=>h,Tj:()=>u,Uj:()=>a,XA:()=>f,ZQ:()=>m,bD:()=>I,cY:()=>p,eX:()=>T,g:()=>A,hp:()=>D,jZ:()=>v,lT:()=>x,lV:()=>w,nr:()=>S,sr:()=>b,tD:()=>P,u:()=>s,yU:()=>d,zW:()=>E});const r=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},i={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],o=i+1<e.length,a=o?e[i+1]:0,s=i+2<e.length,l=s?e[i+2]:0,c=t>>2,u=(3&t)<<4|a>>4;let d=(15&a)<<2|l>>6,h=63&l;s||(h=64,o||(d=64)),r.push(n[c],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(r(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){const o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{const o=e[n++],a=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0;++i;const s=i<e.length?n[e.charAt(i)]:64;++i;const l=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==a||null==s||null==l)throw new o;const c=t<<2|a>>4;if(r.push(c),64!==s){const e=a<<4&240|s>>2;if(r.push(e),64!==l){const e=s<<6&192|l;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class o extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const a=function(e){return function(e){const t=r(e);return i.encodeByteArray(t,!0)}(e).replace(/\./g,"")},s=function(e){try{return i.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};const l=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,c=()=>{try{return l()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&s(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},u=e=>{var t,n;return null===(n=null===(t=c())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},d=e=>{const t=u(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},h=()=>{var e;return null===(e=c())||void 0===e?void 0:e.config},f=e=>{var t;return null===(t=c())||void 0===t?void 0:t["_".concat(e)]};class p{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function g(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[a(JSON.stringify({alg:"none",type:"JWT"})),a(JSON.stringify(o)),""].join(".")}function m(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function v(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(m())}function y(){var e;const t=null===(e=c())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function b(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function w(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function x(){const e=m();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function S(){return!y()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function E(){try{return"object"===typeof indexedDB}catch(e){return!1}}function T(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})}class A extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,A.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,_.prototype.create)}}class _{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(k,(e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")})}(r,t):"Error",o="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new A(n,o,t)}}const k=/\{\$([^}]+)}/g;function C(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function I(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],o=t[i];if(R(n)&&R(o)){if(!I(n,o))return!1}else if(n!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function R(e){return null!==e&&"object"===typeof e}function N(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function O(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function D(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function P(e,t){const n=new L(e,t);return n.subscribe.bind(n)}class L{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=j),void 0===r.error&&(r.error=j),void 0===r.complete&&(r.complete=j);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}}),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function j(){}function M(e){return e&&e._delegate?e._delegate:e}},730:(e,t,n)=>{var r=n(43),i=n(853);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,s={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(s[e]=t,e=0;e<t.length;e++)a.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function g(e,t,n,r,i,o,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){m[e]=new g(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];m[t]=new g(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){m[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){m[e]=new g(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){m[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){m[e]=new g(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){m[e]=new g(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){m[e]=new g(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){m[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)});var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(p,e)||!d.call(f,e)&&(h.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(v,y);m[t]=new g(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(v,y);m[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(v,y);m[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)}),m.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)});var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=Symbol.for("react.element"),S=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),_=Symbol.for("react.provider"),k=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),O=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var D=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var P=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=P&&e[P]||e["@@iterator"])?e:null}var j,M=Object.assign;function F(e){if(void 0===j)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);j=t&&t[1]||""}return"\n"+j+e}var U=!1;function z(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),o=r.stack.split("\n"),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(1!==a||1!==s)do{if(a--,0>--s||i[a]!==o[s]){var l="\n"+i[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=s);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function B(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=z(e.type,!1);case 11:return e=z(e.type.render,!1);case 1:return e=z(e.type,!0);default:return""}}function W(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case E:return"Fragment";case S:return"Portal";case A:return"Profiler";case T:return"StrictMode";case I:return"Suspense";case R:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case k:return(e.displayName||"Context")+".Consumer";case _:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case N:return null!==(t=e.displayName||null)?t:W(e.type)||"Memo";case O:t=e._payload,e=e._init;try{return W(e(t))}catch(n){}}return null}function V(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return W(t);case 8:return t===T?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function G(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function q(e){e._valueTracker||(e._valueTracker=function(e){var t=G(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=G(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Y(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function $(e,t){var n=t.checked;return M({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function X(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Q(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function J(e,t){Q(e,t);var n=H(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Y(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return M({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(te(n)){if(1<n.length)throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function oe(e,t){var n=H(t.value),r=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return ue(e,t)})}:ue);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ge(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ge(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach(function(e){pe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]})});var ve=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function xe(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Se=null,Ee=null,Te=null;function Ae(e){if(e=bi(e)){if("function"!==typeof Se)throw Error(o(280));var t=e.stateNode;t&&(t=xi(t),Se(e.stateNode,e.type,t))}}function _e(e){Ee?Te?Te.push(e):Te=[e]:Ee=e}function ke(){if(Ee){var e=Ee,t=Te;if(Te=Ee=null,Ae(e),t)for(e=0;e<t.length;e++)Ae(t[e])}}function Ce(e,t){return e(t)}function Ie(){}var Re=!1;function Ne(e,t,n){if(Re)return e(t,n);Re=!0;try{return Ce(e,t,n)}finally{Re=!1,(null!==Ee||null!==Te)&&(Ie(),ke())}}function Oe(e,t){var n=e.stateNode;if(null===n)return null;var r=xi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var De=!1;if(u)try{var Pe={};Object.defineProperty(Pe,"passive",{get:function(){De=!0}}),window.addEventListener("test",Pe,Pe),window.removeEventListener("test",Pe,Pe)}catch(ue){De=!1}function Le(e,t,n,r,i,o,a,s,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var je=!1,Me=null,Fe=!1,Ue=null,ze={onError:function(e){je=!0,Me=e}};function Be(e,t,n,r,i,o,a,s,l){je=!1,Me=null,Le.apply(ze,arguments)}function We(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ve(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(We(e)!==e)throw Error(o(188))}function Ge(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=We(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return He(i),e;if(a===r)return He(i),t;a=a.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=a;else{for(var s=!1,l=i.child;l;){if(l===n){s=!0,n=i,r=a;break}if(l===r){s=!0,r=i,n=a;break}l=l.sibling}if(!s){for(l=a.child;l;){if(l===n){s=!0,n=a,r=i;break}if(l===r){s=!0,r=a,n=i;break}l=l.sibling}if(!s)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e))?qe(e):null}function qe(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=qe(e);if(null!==t)return t;e=e.sibling}return null}var Ke=i.unstable_scheduleCallback,Ye=i.unstable_cancelCallback,$e=i.unstable_shouldYield,Xe=i.unstable_requestPaint,Qe=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,ot=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(st(e)/lt|0)|0},st=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,a=268435455&n;if(0!==a){var s=a&~i;0!==s?r=dt(s):0!==(o&=a)&&(r=dt(o))}else 0!==(a=n&~i)?r=dt(a):0!==o&&(r=dt(o));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(o=t&-t)||16===i&&0!==(4194240&o)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-at(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function gt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-at(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var bt=0;function wt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var xt,St,Et,Tt,At,_t=!1,kt=[],Ct=null,It=null,Rt=null,Nt=new Map,Ot=new Map,Dt=[],Pt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":It=null;break;case"mouseover":case"mouseout":Rt=null;break;case"pointerover":case"pointerout":Nt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ot.delete(t.pointerId)}}function jt(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},null!==t&&(null!==(t=bi(t))&&St(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Mt(e){var t=yi(e.target);if(null!==t){var n=We(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ve(n)))return e.blockedOn=t,void At(e.priority,function(){Et(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=$t(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=bi(n))&&St(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);we=r,n.target.dispatchEvent(r),we=null,t.shift()}return!0}function Ut(e,t,n){Ft(e)&&n.delete(t)}function zt(){_t=!1,null!==Ct&&Ft(Ct)&&(Ct=null),null!==It&&Ft(It)&&(It=null),null!==Rt&&Ft(Rt)&&(Rt=null),Nt.forEach(Ut),Ot.forEach(Ut)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,_t||(_t=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,zt)))}function Wt(e){function t(t){return Bt(t,e)}if(0<kt.length){Bt(kt[0],e);for(var n=1;n<kt.length;n++){var r=kt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&Bt(Ct,e),null!==It&&Bt(It,e),null!==Rt&&Bt(Rt,e),Nt.forEach(t),Ot.forEach(t),n=0;n<Dt.length;n++)(r=Dt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Dt.length&&null===(n=Dt[0]).blockedOn;)Mt(n),null===n.blockedOn&&Dt.shift()}var Vt=w.ReactCurrentBatchConfig,Ht=!0;function Gt(e,t,n,r){var i=bt,o=Vt.transition;Vt.transition=null;try{bt=1,Kt(e,t,n,r)}finally{bt=i,Vt.transition=o}}function qt(e,t,n,r){var i=bt,o=Vt.transition;Vt.transition=null;try{bt=4,Kt(e,t,n,r)}finally{bt=i,Vt.transition=o}}function Kt(e,t,n,r){if(Ht){var i=$t(e,t,n,r);if(null===i)Hr(e,t,r,Yt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=jt(Ct,e,t,n,r,i),!0;case"dragenter":return It=jt(It,e,t,n,r,i),!0;case"mouseover":return Rt=jt(Rt,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return Nt.set(o,jt(Nt.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Ot.set(o,jt(Ot.get(o)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Pt.indexOf(e)){for(;null!==i;){var o=bi(i);if(null!==o&&xt(o),null===(o=$t(e,t,n,r))&&Hr(e,t,r,Yt,n),o===i)break;i=o}null!==i&&r.stopPropagation()}else Hr(e,t,r,null,n)}}var Yt=null;function $t(e,t,n,r){if(Yt=null,null!==(e=yi(e=xe(r))))if(null===(t=We(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ve(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Yt=e,null}function Xt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Qt=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,r=n.length,i="value"in Qt?Qt.value:Qt.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[o-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function on(e){function t(t,n,r,i,o){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return M(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,sn,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=on(cn),dn=M({},cn,{view:0,detail:0}),hn=on(dn),fn=M({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:An,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(an=e.screenX-ln.screenX,sn=e.screenY-ln.screenY):sn=an=0,ln=e),an)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),pn=on(fn),gn=on(M({},fn,{dataTransfer:0})),mn=on(M({},dn,{relatedTarget:0})),vn=on(M({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=M({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=on(yn),wn=on(M({},cn,{data:0})),xn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},En={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=En[e])&&!!t[e]}function An(){return Tn}var _n=M({},dn,{key:function(e){if(e.key){var t=xn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Sn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:An,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),kn=on(_n),Cn=on(M({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),In=on(M({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:An})),Rn=on(M({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Nn=M({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),On=on(Nn),Dn=[9,13,27,32],Pn=u&&"CompositionEvent"in window,Ln=null;u&&"documentMode"in document&&(Ln=document.documentMode);var jn=u&&"TextEvent"in window&&!Ln,Mn=u&&(!Pn||Ln&&8<Ln&&11>=Ln),Fn=String.fromCharCode(32),Un=!1;function zn(e,t){switch(e){case"keyup":return-1!==Dn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Wn=!1;var Vn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Vn[e.type]:"textarea"===t}function Gn(e,t,n,r){_e(r),0<(t=qr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var qn=null,Kn=null;function Yn(e){Fr(e,0)}function $n(e){if(K(wi(e)))return e}function Xn(e,t){if("change"===e)return t}var Qn=!1;if(u){var Jn;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Jn=Zn}else Jn=!1;Qn=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){qn&&(qn.detachEvent("onpropertychange",nr),Kn=qn=null)}function nr(e){if("value"===e.propertyName&&$n(Kn)){var t=[];Gn(t,Kn,e,xe(e)),Ne(Yn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Kn=n,(qn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return $n(Kn)}function or(e,t){if("click"===e)return $n(t)}function ar(e,t){if("input"===e||"change"===e)return $n(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!d.call(t,i)||!sr(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Y();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Y((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=void 0===r.end?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=ur(n,o);var a=ur(n,r);i&&a&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var gr=u&&"documentMode"in document&&11>=document.documentMode,mr=null,vr=null,yr=null,br=!1;function wr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==mr||mr!==Y(r)||("selectionStart"in(r=mr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&lr(yr,r)||(yr=r,0<(r=qr(vr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function xr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Sr={animationend:xr("Animation","AnimationEnd"),animationiteration:xr("Animation","AnimationIteration"),animationstart:xr("Animation","AnimationStart"),transitionend:xr("Transition","TransitionEnd")},Er={},Tr={};function Ar(e){if(Er[e])return Er[e];if(!Sr[e])return e;var t,n=Sr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Tr)return Er[e]=n[t];return e}u&&(Tr=document.createElement("div").style,"AnimationEvent"in window||(delete Sr.animationend.animation,delete Sr.animationiteration.animation,delete Sr.animationstart.animation),"TransitionEvent"in window||delete Sr.transitionend.transition);var _r=Ar("animationend"),kr=Ar("animationiteration"),Cr=Ar("animationstart"),Ir=Ar("transitionend"),Rr=new Map,Nr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Or(e,t){Rr.set(e,t),l(t,[e])}for(var Dr=0;Dr<Nr.length;Dr++){var Pr=Nr[Dr];Or(Pr.toLowerCase(),"on"+(Pr[0].toUpperCase()+Pr.slice(1)))}Or(_r,"onAnimationEnd"),Or(kr,"onAnimationIteration"),Or(Cr,"onAnimationStart"),Or("dblclick","onDoubleClick"),Or("focusin","onFocus"),Or("focusout","onBlur"),Or(Ir,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Mr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,a,s,l,c){if(Be.apply(this,arguments),je){if(!je)throw Error(o(198));var u=Me;je=!1,Me=null,Fe||(Fe=!0,Ue=u)}}(r,t,void 0,e),e.currentTarget=null}function Fr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var a=r.length-1;0<=a;a--){var s=r[a],l=s.instance,c=s.currentTarget;if(s=s.listener,l!==o&&i.isPropagationStopped())break e;Mr(i,s,c),o=l}else for(a=0;a<r.length;a++){if(l=(s=r[a]).instance,c=s.currentTarget,s=s.listener,l!==o&&i.isPropagationStopped())break e;Mr(i,s,c),o=l}}}if(Fe)throw e=Ue,Fe=!1,Ue=null,e}function Ur(e,t){var n=t[gi];void 0===n&&(n=t[gi]=new Set);var r=e+"__bubble";n.has(r)||(Vr(t,e,2,!1),n.add(r))}function zr(e,t,n){var r=0;t&&(r|=4),Vr(n,e,r,t)}var Br="_reactListening"+Math.random().toString(36).slice(2);function Wr(e){if(!e[Br]){e[Br]=!0,a.forEach(function(t){"selectionchange"!==t&&(jr.has(t)||zr(t,!1,e),zr(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Br]||(t[Br]=!0,zr("selectionchange",!1,t))}}function Vr(e,t,n,r){switch(Xt(t)){case 1:var i=Gt;break;case 4:i=qt;break;default:i=Kt}n=i.bind(null,t,n,e),i=void 0,!De||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Hr(e,t,n,r,i){var o=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;a=a.return}for(;null!==s;){if(null===(a=yi(s)))return;if(5===(l=a.tag)||6===l){r=o=a;continue e}s=s.parentNode}}r=r.return}Ne(function(){var r=o,i=xe(n),a=[];e:{var s=Rr.get(e);if(void 0!==s){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=kn;break;case"focusin":c="focus",l=mn;break;case"focusout":c="blur",l=mn;break;case"beforeblur":case"afterblur":l=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=In;break;case _r:case kr:case Cr:l=vn;break;case Ir:l=Rn;break;case"scroll":l=hn;break;case"wheel":l=On;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Cn}var u=0!==(4&t),d=!u&&"scroll"===e,h=u?null!==s?s+"Capture":null:s;u=[];for(var f,p=r;null!==p;){var g=(f=p).stateNode;if(5===f.tag&&null!==g&&(f=g,null!==h&&(null!=(g=Oe(p,h))&&u.push(Gr(p,g,f)))),d)break;p=p.return}0<u.length&&(s=new l(s,c,null,n,i),a.push({event:s,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===we||!(c=n.relatedTarget||n.fromElement)||!yi(c)&&!c[pi])&&(l||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?yi(c):null)&&(c!==(d=We(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=pn,g="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=Cn,g="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==l?s:wi(l),f=null==c?s:wi(c),(s=new u(g,p+"leave",l,n,i)).target=d,s.relatedTarget=f,g=null,yi(i)===r&&((u=new u(h,p+"enter",c,n,i)).target=f,u.relatedTarget=d,g=u),d=g,l&&c)e:{for(h=c,p=0,f=u=l;f;f=Kr(f))p++;for(f=0,g=h;g;g=Kr(g))f++;for(;0<p-f;)u=Kr(u),p--;for(;0<f-p;)h=Kr(h),f--;for(;p--;){if(u===h||null!==h&&u===h.alternate)break e;u=Kr(u),h=Kr(h)}u=null}else u=null;null!==l&&Yr(a,s,l,u,!1),null!==c&&null!==d&&Yr(a,d,c,u,!0)}if("select"===(l=(s=r?wi(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var m=Xn;else if(Hn(s))if(Qn)m=ar;else{m=ir;var v=rr}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(m=or);switch(m&&(m=m(e,r))?Gn(a,m,n,i):(v&&v(e,s,r),"focusout"===e&&(v=s._wrapperState)&&v.controlled&&"number"===s.type&&ee(s,"number",s.value)),v=r?wi(r):window,e){case"focusin":(Hn(v)||"true"===v.contentEditable)&&(mr=v,vr=r,yr=null);break;case"focusout":yr=vr=mr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,wr(a,n,i);break;case"selectionchange":if(gr)break;case"keydown":case"keyup":wr(a,n,i)}var y;if(Pn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Wn?zn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Mn&&"ko"!==n.locale&&(Wn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Wn&&(y=en()):(Jt="value"in(Qt=i)?Qt.value:Qt.textContent,Wn=!0)),0<(v=qr(r,b)).length&&(b=new wn(b,e,null,n,i),a.push({event:b,listeners:v}),y?b.data=y:null!==(y=Bn(n))&&(b.data=y))),(y=jn?function(e,t){switch(e){case"compositionend":return Bn(t);case"keypress":return 32!==t.which?null:(Un=!0,Fn);case"textInput":return(e=t.data)===Fn&&Un?null:e;default:return null}}(e,n):function(e,t){if(Wn)return"compositionend"===e||!Pn&&zn(e,t)?(e=en(),Zt=Jt=Qt=null,Wn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Mn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=qr(r,"onBeforeInput")).length&&(i=new wn("onBeforeInput","beforeinput",null,n,i),a.push({event:i,listeners:r}),i.data=y))}Fr(a,t)})}function Gr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function qr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=Oe(e,n))&&r.unshift(Gr(e,o,i)),null!=(o=Oe(e,t))&&r.push(Gr(e,o,i))),e=e.return}return r}function Kr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Yr(e,t,n,r,i){for(var o=t._reactName,a=[];null!==n&&n!==r;){var s=n,l=s.alternate,c=s.stateNode;if(null!==l&&l===r)break;5===s.tag&&null!==c&&(s=c,i?null!=(l=Oe(n,o))&&a.unshift(Gr(n,l,s)):i||null!=(l=Oe(n,o))&&a.push(Gr(n,l,s))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var $r=/\r\n?/g,Xr=/\u0000|\uFFFD/g;function Qr(e){return("string"===typeof e?e:""+e).replace($r,"\n").replace(Xr,"")}function Jr(e,t,n){if(t=Qr(t),Qr(e)!==t&&n)throw Error(o(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,oi="function"===typeof Promise?Promise:void 0,ai="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof oi?function(e){return oi.resolve(null).then(e).catch(si)}:ri;function si(e){setTimeout(function(){throw e})}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Wt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Wt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var di=Math.random().toString(36).slice(2),hi="__reactFiber$"+di,fi="__reactProps$"+di,pi="__reactContainer$"+di,gi="__reactEvents$"+di,mi="__reactListeners$"+di,vi="__reactHandles$"+di;function yi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[hi])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function bi(e){return!(e=e[hi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function wi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function xi(e){return e[fi]||null}var Si=[],Ei=-1;function Ti(e){return{current:e}}function Ai(e){0>Ei||(e.current=Si[Ei],Si[Ei]=null,Ei--)}function _i(e,t){Ei++,Si[Ei]=e.current,e.current=t}var ki={},Ci=Ti(ki),Ii=Ti(!1),Ri=ki;function Ni(e,t){var n=e.type.contextTypes;if(!n)return ki;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Oi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Di(){Ai(Ii),Ai(Ci)}function Pi(e,t,n){if(Ci.current!==ki)throw Error(o(168));_i(Ci,t),_i(Ii,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(o(108,V(e)||"Unknown",i));return M({},n,r)}function ji(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ki,Ri=Ci.current,_i(Ci,e),_i(Ii,Ii.current),!0}function Mi(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=Li(e,t,Ri),r.__reactInternalMemoizedMergedChildContext=e,Ai(Ii),Ai(Ci),_i(Ci,e)):Ai(Ii),_i(Ii,n)}var Fi=null,Ui=!1,zi=!1;function Bi(e){null===Fi?Fi=[e]:Fi.push(e)}function Wi(){if(!zi&&null!==Fi){zi=!0;var e=0,t=bt;try{var n=Fi;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Fi=null,Ui=!1}catch(i){throw null!==Fi&&(Fi=Fi.slice(e+1)),Ke(Ze,Wi),i}finally{bt=t,zi=!1}}return null}var Vi=[],Hi=0,Gi=null,qi=0,Ki=[],Yi=0,$i=null,Xi=1,Qi="";function Ji(e,t){Vi[Hi++]=qi,Vi[Hi++]=Gi,Gi=e,qi=t}function Zi(e,t,n){Ki[Yi++]=Xi,Ki[Yi++]=Qi,Ki[Yi++]=$i,$i=e;var r=Xi;e=Qi;var i=32-at(r)-1;r&=~(1<<i),n+=1;var o=32-at(t)+i;if(30<o){var a=i-i%5;o=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Xi=1<<32-at(t)+i|n<<i|r,Qi=o+e}else Xi=1<<o|n<<i|r,Qi=e}function eo(e){null!==e.return&&(Ji(e,1),Zi(e,1,0))}function to(e){for(;e===Gi;)Gi=Vi[--Hi],Vi[Hi]=null,qi=Vi[--Hi],Vi[Hi]=null;for(;e===$i;)$i=Ki[--Yi],Ki[Yi]=null,Qi=Ki[--Yi],Ki[Yi]=null,Xi=Ki[--Yi],Ki[Yi]=null}var no=null,ro=null,io=!1,oo=null;function ao(e,t){var n=Nc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function so(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,no=e,ro=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,no=e,ro=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==$i?{id:Xi,overflow:Qi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Nc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,no=e,ro=null,!0);default:return!1}}function lo(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function co(e){if(io){var t=ro;if(t){var n=t;if(!so(e,t)){if(lo(e))throw Error(o(418));t=ci(n.nextSibling);var r=no;t&&so(e,t)?ao(r,n):(e.flags=-4097&e.flags|2,io=!1,no=e)}}else{if(lo(e))throw Error(o(418));e.flags=-4097&e.flags|2,io=!1,no=e}}}function uo(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;no=e}function ho(e){if(e!==no)return!1;if(!io)return uo(e),io=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ro)){if(lo(e))throw fo(),Error(o(418));for(;t;)ao(e,t),t=ci(t.nextSibling)}if(uo(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ro=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ro=null}}else ro=no?ci(e.stateNode.nextSibling):null;return!0}function fo(){for(var e=ro;e;)e=ci(e.nextSibling)}function po(){ro=no=null,io=!1}function go(e){null===oo?oo=[e]:oo.push(e)}var mo=w.ReactCurrentBatchConfig;function vo(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=r,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=i.refs;null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function yo(e,t){throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function bo(e){return(0,e._init)(e._payload)}function wo(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Dc(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Mc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var o=n.type;return o===E?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===O&&bo(o)===t.type)?((r=i(t,n.props)).ref=vo(e,t,n),r.return=e,r):((r=Pc(n.type,n.key,n.props,null,e.mode,r)).ref=vo(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,o){return null===t||7!==t.tag?((t=Lc(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Mc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case x:return(n=Pc(t.type,t.key,t.props,null,e.mode,n)).ref=vo(e,null,t),n.return=e,n;case S:return(t=Fc(t,e.mode,n)).return=e,t;case O:return h(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Lc(t,e.mode,n,null)).return=e,t;yo(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===i?c(e,t,n,r):null;case S:return n.key===i?u(e,t,n,r):null;case O:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:d(e,t,n,r,null);yo(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case x:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case S:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case O:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return d(t,e=e.get(n)||null,r,i,null);yo(t,r)}return null}function g(i,o,s,l){for(var c=null,u=null,d=o,g=o=0,m=null;null!==d&&g<s.length;g++){d.index>g?(m=d,d=null):m=d.sibling;var v=f(i,d,s[g],l);if(null===v){null===d&&(d=m);break}e&&d&&null===v.alternate&&t(i,d),o=a(v,o,g),null===u?c=v:u.sibling=v,u=v,d=m}if(g===s.length)return n(i,d),io&&Ji(i,g),c;if(null===d){for(;g<s.length;g++)null!==(d=h(i,s[g],l))&&(o=a(d,o,g),null===u?c=d:u.sibling=d,u=d);return io&&Ji(i,g),c}for(d=r(i,d);g<s.length;g++)null!==(m=p(d,i,g,s[g],l))&&(e&&null!==m.alternate&&d.delete(null===m.key?g:m.key),o=a(m,o,g),null===u?c=m:u.sibling=m,u=m);return e&&d.forEach(function(e){return t(i,e)}),io&&Ji(i,g),c}function m(i,s,l,c){var u=L(l);if("function"!==typeof u)throw Error(o(150));if(null==(l=u.call(l)))throw Error(o(151));for(var d=u=null,g=s,m=s=0,v=null,y=l.next();null!==g&&!y.done;m++,y=l.next()){g.index>m?(v=g,g=null):v=g.sibling;var b=f(i,g,y.value,c);if(null===b){null===g&&(g=v);break}e&&g&&null===b.alternate&&t(i,g),s=a(b,s,m),null===d?u=b:d.sibling=b,d=b,g=v}if(y.done)return n(i,g),io&&Ji(i,m),u;if(null===g){for(;!y.done;m++,y=l.next())null!==(y=h(i,y.value,c))&&(s=a(y,s,m),null===d?u=y:d.sibling=y,d=y);return io&&Ji(i,m),u}for(g=r(i,g);!y.done;m++,y=l.next())null!==(y=p(g,i,m,y.value,c))&&(e&&null!==y.alternate&&g.delete(null===y.key?m:y.key),s=a(y,s,m),null===d?u=y:d.sibling=y,d=y);return e&&g.forEach(function(e){return t(i,e)}),io&&Ji(i,m),u}return function e(r,o,a,l){if("object"===typeof a&&null!==a&&a.type===E&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case x:e:{for(var c=a.key,u=o;null!==u;){if(u.key===c){if((c=a.type)===E){if(7===u.tag){n(r,u.sibling),(o=i(u,a.props.children)).return=r,r=o;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===O&&bo(c)===u.type){n(r,u.sibling),(o=i(u,a.props)).ref=vo(r,u,a),o.return=r,r=o;break e}n(r,u);break}t(r,u),u=u.sibling}a.type===E?((o=Lc(a.props.children,r.mode,l,a.key)).return=r,r=o):((l=Pc(a.type,a.key,a.props,null,r.mode,l)).ref=vo(r,o,a),l.return=r,r=l)}return s(r);case S:e:{for(u=a.key;null!==o;){if(o.key===u){if(4===o.tag&&o.stateNode.containerInfo===a.containerInfo&&o.stateNode.implementation===a.implementation){n(r,o.sibling),(o=i(o,a.children||[])).return=r,r=o;break e}n(r,o);break}t(r,o),o=o.sibling}(o=Fc(a,r.mode,l)).return=r,r=o}return s(r);case O:return e(r,o,(u=a._init)(a._payload),l)}if(te(a))return g(r,o,a,l);if(L(a))return m(r,o,a,l);yo(r,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==o&&6===o.tag?(n(r,o.sibling),(o=i(o,a)).return=r,r=o):(n(r,o),(o=Mc(a,r.mode,l)).return=r,r=o),s(r)):n(r,o)}}var xo=wo(!0),So=wo(!1),Eo=Ti(null),To=null,Ao=null,_o=null;function ko(){_o=Ao=To=null}function Co(e){var t=Eo.current;Ai(Eo),e._currentValue=t}function Io(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ro(e,t){To=e,_o=Ao=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bs=!0),e.firstContext=null)}function No(e){var t=e._currentValue;if(_o!==e)if(e={context:e,memoizedValue:t,next:null},null===Ao){if(null===To)throw Error(o(308));Ao=e,To.dependencies={lanes:0,firstContext:e}}else Ao=Ao.next=e;return t}var Oo=null;function Do(e){null===Oo?Oo=[e]:Oo.push(e)}function Po(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Do(t)):(n.next=i.next,i.next=n),t.interleaved=n,Lo(e,r)}function Lo(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var jo=!1;function Mo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Uo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function zo(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Cl)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Lo(e,n)}return null===(i=r.interleaved)?(t.next=t,Do(r)):(t.next=i.next,i.next=t),r.interleaved=t,Lo(e,n)}function Bo(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Wo(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=a:o=o.next=a,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Vo(e,t,n,r){var i=e.updateQueue;jo=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var l=s,c=l.next;l.next=null,null===a?o=c:a.next=c,a=l;var u=e.alternate;null!==u&&((s=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===s?u.firstBaseUpdate=c:s.next=c,u.lastBaseUpdate=l))}if(null!==o){var d=i.baseState;for(a=0,u=c=l=null,s=o;;){var h=s.lane,f=s.eventTime;if((r&h)===h){null!==u&&(u=u.next={eventTime:f,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,g=s;switch(h=t,f=n,g.tag){case 1:if("function"===typeof(p=g.payload)){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=g.payload)?p.call(f,d,h):p)||void 0===h)break e;d=M({},d,h);break e;case 2:jo=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[s]:h.push(s))}else f={eventTime:f,lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===u?(c=u=f,l=d):u=u.next=f,a|=h;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(h=s).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===u&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{a|=i.lane,i=i.next}while(i!==t)}else null===o&&(i.shared.lanes=0);jl|=a,e.lanes=a,e.memoizedState=d}}function Ho(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var Go={},qo=Ti(Go),Ko=Ti(Go),Yo=Ti(Go);function $o(e){if(e===Go)throw Error(o(174));return e}function Xo(e,t){switch(_i(Yo,t),_i(Ko,e),_i(qo,Go),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ai(qo),_i(qo,t)}function Qo(){Ai(qo),Ai(Ko),Ai(Yo)}function Jo(e){$o(Yo.current);var t=$o(qo.current),n=le(t,e.type);t!==n&&(_i(Ko,e),_i(qo,n))}function Zo(e){Ko.current===e&&(Ai(qo),Ai(Ko))}var ea=Ti(0);function ta(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var na=[];function ra(){for(var e=0;e<na.length;e++)na[e]._workInProgressVersionPrimary=null;na.length=0}var ia=w.ReactCurrentDispatcher,oa=w.ReactCurrentBatchConfig,aa=0,sa=null,la=null,ca=null,ua=!1,da=!1,ha=0,fa=0;function pa(){throw Error(o(321))}function ga(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function ma(e,t,n,r,i,a){if(aa=a,sa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ia.current=null===e||null===e.memoizedState?Za:es,e=n(r,i),da){a=0;do{if(da=!1,ha=0,25<=a)throw Error(o(301));a+=1,ca=la=null,t.updateQueue=null,ia.current=ts,e=n(r,i)}while(da)}if(ia.current=Ja,t=null!==la&&null!==la.next,aa=0,ca=la=sa=null,ua=!1,t)throw Error(o(300));return e}function va(){var e=0!==ha;return ha=0,e}function ya(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ca?sa.memoizedState=ca=e:ca=ca.next=e,ca}function ba(){if(null===la){var e=sa.alternate;e=null!==e?e.memoizedState:null}else e=la.next;var t=null===ca?sa.memoizedState:ca.next;if(null!==t)ca=t,la=e;else{if(null===e)throw Error(o(310));e={memoizedState:(la=e).memoizedState,baseState:la.baseState,baseQueue:la.baseQueue,queue:la.queue,next:null},null===ca?sa.memoizedState=ca=e:ca=ca.next=e}return ca}function wa(e,t){return"function"===typeof t?t(e):t}function xa(e){var t=ba(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=la,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var s=i.next;i.next=a.next,a.next=s}r.baseQueue=i=a,n.pending=null}if(null!==i){a=i.next,r=r.baseState;var l=s=null,c=null,u=a;do{var d=u.lane;if((aa&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,s=r):c=c.next=h,sa.lanes|=d,jl|=d}u=u.next}while(null!==u&&u!==a);null===c?s=r:c.next=l,sr(r,t.memoizedState)||(bs=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{a=i.lane,sa.lanes|=a,jl|=a,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Sa(e){var t=ba(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{a=e(a,s.action),s=s.next}while(s!==i);sr(a,t.memoizedState)||(bs=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function Ea(){}function Ta(e,t){var n=sa,r=ba(),i=t(),a=!sr(r.memoizedState,i);if(a&&(r.memoizedState=i,bs=!0),r=r.queue,ja(ka.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==ca&&1&ca.memoizedState.tag){if(n.flags|=2048,Na(9,_a.bind(null,n,r,i,t),void 0,null),null===Il)throw Error(o(349));0!==(30&aa)||Aa(n,t,i)}return i}function Aa(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=sa.updateQueue)?(t={lastEffect:null,stores:null},sa.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function _a(e,t,n,r){t.value=n,t.getSnapshot=r,Ca(t)&&Ia(e)}function ka(e,t,n){return n(function(){Ca(t)&&Ia(e)})}function Ca(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(r){return!0}}function Ia(e){var t=Lo(e,1);null!==t&&nc(t,e,1,-1)}function Ra(e){var t=ya();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wa,lastRenderedState:e},t.queue=e,e=e.dispatch=Ya.bind(null,sa,e),[t.memoizedState,e]}function Na(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=sa.updateQueue)?(t={lastEffect:null,stores:null},sa.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Oa(){return ba().memoizedState}function Da(e,t,n,r){var i=ya();sa.flags|=e,i.memoizedState=Na(1|t,n,void 0,void 0===r?null:r)}function Pa(e,t,n,r){var i=ba();r=void 0===r?null:r;var o=void 0;if(null!==la){var a=la.memoizedState;if(o=a.destroy,null!==r&&ga(r,a.deps))return void(i.memoizedState=Na(t,n,o,r))}sa.flags|=e,i.memoizedState=Na(1|t,n,o,r)}function La(e,t){return Da(8390656,8,e,t)}function ja(e,t){return Pa(2048,8,e,t)}function Ma(e,t){return Pa(4,2,e,t)}function Fa(e,t){return Pa(4,4,e,t)}function Ua(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function za(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Pa(4,4,Ua.bind(null,t,e),n)}function Ba(){}function Wa(e,t){var n=ba();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ga(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Va(e,t){var n=ba();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ga(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ha(e,t,n){return 0===(21&aa)?(e.baseState&&(e.baseState=!1,bs=!0),e.memoizedState=n):(sr(n,t)||(n=gt(),sa.lanes|=n,jl|=n,e.baseState=!0),t)}function Ga(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=oa.transition;oa.transition={};try{e(!1),t()}finally{bt=n,oa.transition=r}}function qa(){return ba().memoizedState}function Ka(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},$a(e))Xa(t,n);else if(null!==(n=Po(e,t,n,r))){nc(n,e,r,ec()),Qa(n,t,r)}}function Ya(e,t,n){var r=tc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if($a(e))Xa(t,i);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var a=t.lastRenderedState,s=o(a,n);if(i.hasEagerState=!0,i.eagerState=s,sr(s,a)){var l=t.interleaved;return null===l?(i.next=i,Do(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Po(e,t,i,r))&&(nc(n,e,r,i=ec()),Qa(n,t,r))}}function $a(e){var t=e.alternate;return e===sa||null!==t&&t===sa}function Xa(e,t){da=ua=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Qa(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var Ja={readContext:No,useCallback:pa,useContext:pa,useEffect:pa,useImperativeHandle:pa,useInsertionEffect:pa,useLayoutEffect:pa,useMemo:pa,useReducer:pa,useRef:pa,useState:pa,useDebugValue:pa,useDeferredValue:pa,useTransition:pa,useMutableSource:pa,useSyncExternalStore:pa,useId:pa,unstable_isNewReconciler:!1},Za={readContext:No,useCallback:function(e,t){return ya().memoizedState=[e,void 0===t?null:t],e},useContext:No,useEffect:La,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Da(4194308,4,Ua.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Da(4194308,4,e,t)},useInsertionEffect:function(e,t){return Da(4,2,e,t)},useMemo:function(e,t){var n=ya();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ya();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Ka.bind(null,sa,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ya().memoizedState=e},useState:Ra,useDebugValue:Ba,useDeferredValue:function(e){return ya().memoizedState=e},useTransition:function(){var e=Ra(!1),t=e[0];return e=Ga.bind(null,e[1]),ya().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=sa,i=ya();if(io){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===Il)throw Error(o(349));0!==(30&aa)||Aa(r,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,La(ka.bind(null,r,a,e),[e]),r.flags|=2048,Na(9,_a.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=ya(),t=Il.identifierPrefix;if(io){var n=Qi;t=":"+t+"R"+(n=(Xi&~(1<<32-at(Xi)-1)).toString(32)+n),0<(n=ha++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=fa++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},es={readContext:No,useCallback:Wa,useContext:No,useEffect:ja,useImperativeHandle:za,useInsertionEffect:Ma,useLayoutEffect:Fa,useMemo:Va,useReducer:xa,useRef:Oa,useState:function(){return xa(wa)},useDebugValue:Ba,useDeferredValue:function(e){return Ha(ba(),la.memoizedState,e)},useTransition:function(){return[xa(wa)[0],ba().memoizedState]},useMutableSource:Ea,useSyncExternalStore:Ta,useId:qa,unstable_isNewReconciler:!1},ts={readContext:No,useCallback:Wa,useContext:No,useEffect:ja,useImperativeHandle:za,useInsertionEffect:Ma,useLayoutEffect:Fa,useMemo:Va,useReducer:Sa,useRef:Oa,useState:function(){return Sa(wa)},useDebugValue:Ba,useDeferredValue:function(e){var t=ba();return null===la?t.memoizedState=e:Ha(t,la.memoizedState,e)},useTransition:function(){return[Sa(wa)[0],ba().memoizedState]},useMutableSource:Ea,useSyncExternalStore:Ta,useId:qa,unstable_isNewReconciler:!1};function ns(e,t){if(e&&e.defaultProps){for(var n in t=M({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function rs(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:M({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var is={isMounted:function(e){return!!(e=e._reactInternals)&&We(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),o=Uo(r,i);o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=zo(e,o,i))&&(nc(t,e,i,r),Bo(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),o=Uo(r,i);o.tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=zo(e,o,i))&&(nc(t,e,i,r),Bo(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),i=Uo(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=zo(e,i,r))&&(nc(t,e,r,n),Bo(t,e,r))}};function os(e,t,n,r,i,o,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,a):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,o))}function as(e,t,n){var r=!1,i=ki,o=t.contextType;return"object"===typeof o&&null!==o?o=No(o):(i=Oi(t)?Ri:Ci.current,o=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ni(e,i):ki),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=is,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function ss(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&is.enqueueReplaceState(t,t.state,null)}function ls(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Mo(e);var o=t.contextType;"object"===typeof o&&null!==o?i.context=No(o):(o=Oi(t)?Ri:Ci.current,i.context=Ni(e,o)),i.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(rs(e,t,o,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&is.enqueueReplaceState(i,i.state,null),Vo(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function cs(e,t){try{var n="",r=t;do{n+=B(r),r=r.return}while(r);var i=n}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:i,digest:null}}function us(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ds(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var hs="function"===typeof WeakMap?WeakMap:Map;function fs(e,t,n){(n=Uo(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Hl||(Hl=!0,Gl=r),ds(0,t)},n}function ps(e,t,n){(n=Uo(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){ds(0,t)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){ds(0,t),"function"!==typeof r&&(null===ql?ql=new Set([this]):ql.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function gs(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new hs;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Ac.bind(null,e,t,n),t.then(e,e))}function ms(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function vs(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Uo(-1,1)).tag=2,zo(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ys=w.ReactCurrentOwner,bs=!1;function ws(e,t,n,r){t.child=null===e?So(t,null,n,r):xo(t,e.child,n,r)}function xs(e,t,n,r,i){n=n.render;var o=t.ref;return Ro(t,i),r=ma(e,t,n,r,o,i),n=va(),null===e||bs?(io&&n&&eo(t),t.flags|=1,ws(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Hs(e,t,i))}function Ss(e,t,n,r,i){if(null===e){var o=n.type;return"function"!==typeof o||Oc(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Pc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Es(e,t,o,r,i))}if(o=e.child,0===(e.lanes&i)){var a=o.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(a,r)&&e.ref===t.ref)return Hs(e,t,i)}return t.flags|=1,(e=Dc(o,r)).ref=t.ref,e.return=t,t.child=e}function Es(e,t,n,r,i){if(null!==e){var o=e.memoizedProps;if(lr(o,r)&&e.ref===t.ref){if(bs=!1,t.pendingProps=r=o,0===(e.lanes&i))return t.lanes=e.lanes,Hs(e,t,i);0!==(131072&e.flags)&&(bs=!0)}}return _s(e,t,n,r,i)}function Ts(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},_i(Dl,Ol),Ol|=n;else{if(0===(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,_i(Dl,Ol),Ol|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==o?o.baseLanes:n,_i(Dl,Ol),Ol|=r}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,_i(Dl,Ol),Ol|=r;return ws(e,t,i,n),t.child}function As(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function _s(e,t,n,r,i){var o=Oi(n)?Ri:Ci.current;return o=Ni(t,o),Ro(t,i),n=ma(e,t,n,r,o,i),r=va(),null===e||bs?(io&&r&&eo(t),t.flags|=1,ws(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Hs(e,t,i))}function ks(e,t,n,r,i){if(Oi(n)){var o=!0;ji(t)}else o=!1;if(Ro(t,i),null===t.stateNode)Vs(e,t),as(t,n,r),ls(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var l=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=No(c):c=Ni(t,c=Oi(n)?Ri:Ci.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof a.getSnapshotBeforeUpdate;d||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==r||l!==c)&&ss(t,a,r,c),jo=!1;var h=t.memoizedState;a.state=h,Vo(t,r,a,i),l=t.memoizedState,s!==r||h!==l||Ii.current||jo?("function"===typeof u&&(rs(t,n,u,r),l=t.memoizedState),(s=jo||os(t,n,s,r,h,l,c))?(d||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=c,r=s):("function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Fo(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:ns(t.type,s),a.props=c,d=t.pendingProps,h=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=No(l):l=Ni(t,l=Oi(n)?Ri:Ci.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==d||h!==l)&&ss(t,a,r,l),jo=!1,h=t.memoizedState,a.state=h,Vo(t,r,a,i);var p=t.memoizedState;s!==d||h!==p||Ii.current||jo?("function"===typeof f&&(rs(t,n,f,r),p=t.memoizedState),(c=jo||os(t,n,c,r,h,p,l)||!1)?(u||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=l,r=c):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Cs(e,t,n,r,o,i)}function Cs(e,t,n,r,i,o){As(e,t);var a=0!==(128&t.flags);if(!r&&!a)return i&&Mi(t,n,!1),Hs(e,t,o);r=t.stateNode,ys.current=t;var s=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=xo(t,e.child,null,o),t.child=xo(t,null,s,o)):ws(e,t,s,o),t.memoizedState=r.state,i&&Mi(t,n,!0),t.child}function Is(e){var t=e.stateNode;t.pendingContext?Pi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Pi(0,t.context,!1),Xo(e,t.containerInfo)}function Rs(e,t,n,r,i){return po(),go(i),t.flags|=256,ws(e,t,n,r),t.child}var Ns,Os,Ds,Ps,Ls={dehydrated:null,treeContext:null,retryLane:0};function js(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ms(e,t,n){var r,i=t.pendingProps,a=ea.current,s=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),_i(ea,1&a),null===e)return co(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,s?(i=t.mode,s=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=l):s=jc(l,i,0,null),e=Lc(e,i,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=js(n),t.memoizedState=Ls,e):Fs(t,l));if(null!==(a=e.memoizedState)&&null!==(r=a.dehydrated))return function(e,t,n,r,i,a,s){if(n)return 256&t.flags?(t.flags&=-257,Us(e,t,s,r=us(Error(o(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=r.fallback,i=t.mode,r=jc({mode:"visible",children:r.children},i,0,null),(a=Lc(a,i,s,null)).flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,0!==(1&t.mode)&&xo(t,e.child,null,s),t.child.memoizedState=js(s),t.memoizedState=Ls,a);if(0===(1&t.mode))return Us(e,t,s,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,Us(e,t,s,r=us(a=Error(o(419)),r,void 0))}if(l=0!==(s&e.childLanes),bs||l){if(null!==(r=Il)){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|s))?0:i)&&i!==a.retryLane&&(a.retryLane=i,Lo(e,i),nc(r,e,i,-1))}return gc(),Us(e,t,s,r=us(Error(o(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=kc.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,ro=ci(i.nextSibling),no=t,io=!0,oo=null,null!==e&&(Ki[Yi++]=Xi,Ki[Yi++]=Qi,Ki[Yi++]=$i,Xi=e.id,Qi=e.overflow,$i=t),t=Fs(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,a,n);if(s){s=i.fallback,l=t.mode,r=(a=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==a?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Dc(a,c)).subtreeFlags=14680064&a.subtreeFlags,null!==r?s=Dc(r,s):(s=Lc(s,l,n,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,l=null===(l=e.child.memoizedState)?js(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=e.childLanes&~n,t.memoizedState=Ls,i}return e=(s=e.child).sibling,i=Dc(s,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Fs(e,t){return(t=jc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Us(e,t,n,r){return null!==r&&go(r),xo(t,e.child,null,n),(e=Fs(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function zs(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Io(e.return,t,n)}function Bs(e,t,n,r,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Ws(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(ws(e,t,r.children,n),0!==(2&(r=ea.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&zs(e,n,t);else if(19===e.tag)zs(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(_i(ea,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===ta(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Bs(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===ta(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Bs(t,!0,n,null,o);break;case"together":Bs(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Vs(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Hs(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),jl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Dc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Dc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Gs(e,t){if(!io)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function qs(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ks(e,t,n){var r=t.pendingProps;switch(to(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qs(t),null;case 1:case 17:return Oi(t.type)&&Di(),qs(t),null;case 3:return r=t.stateNode,Qo(),Ai(Ii),Ai(Ci),ra(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ho(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==oo&&(ac(oo),oo=null))),Os(e,t),qs(t),null;case 5:Zo(t);var i=$o(Yo.current);if(n=t.type,null!==e&&null!=t.stateNode)Ds(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(o(166));return qs(t),null}if(e=$o(qo.current),ho(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[hi]=t,r[fi]=a,e=0!==(1&t.mode),n){case"dialog":Ur("cancel",r),Ur("close",r);break;case"iframe":case"object":case"embed":Ur("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)Ur(Lr[i],r);break;case"source":Ur("error",r);break;case"img":case"image":case"link":Ur("error",r),Ur("load",r);break;case"details":Ur("toggle",r);break;case"input":X(r,a),Ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Ur("invalid",r);break;case"textarea":ie(r,a),Ur("invalid",r)}for(var l in ye(n,a),i=null,a)if(a.hasOwnProperty(l)){var c=a[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==a.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==a.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",""+c]):s.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Ur("scroll",r)}switch(n){case"input":q(r),Z(r,a,!0);break;case"textarea":q(r),ae(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[hi]=t,e[fi]=r,Ns(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(n,r),n){case"dialog":Ur("cancel",e),Ur("close",e),i=r;break;case"iframe":case"object":case"embed":Ur("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)Ur(Lr[i],e);i=r;break;case"source":Ur("error",e),i=r;break;case"img":case"image":case"link":Ur("error",e),Ur("load",e),i=r;break;case"details":Ur("toggle",e),i=r;break;case"input":X(e,r),i=$(e,r),Ur("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=M({},r,{value:void 0}),Ur("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Ur("invalid",e)}for(a in ye(n,i),c=i)if(c.hasOwnProperty(a)){var u=c[a];"style"===a?me(e,u):"dangerouslySetInnerHTML"===a?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===a?"string"===typeof u?("textarea"!==n||""!==u)&&he(e,u):"number"===typeof u&&he(e,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(s.hasOwnProperty(a)?null!=u&&"onScroll"===a&&Ur("scroll",e):null!=u&&b(e,a,u,l))}switch(n){case"input":q(e),Z(e,r,!1);break;case"textarea":q(e),ae(e);break;case"option":null!=r.value&&e.setAttribute("value",""+H(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?ne(e,!!r.multiple,a,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return qs(t),null;case 6:if(e&&null!=t.stateNode)Ps(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));if(n=$o(Yo.current),$o(qo.current),ho(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(a=r.nodeValue!==n)&&null!==(e=no))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return qs(t),null;case 13:if(Ai(ea),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(io&&null!==ro&&0!==(1&t.mode)&&0===(128&t.flags))fo(),po(),t.flags|=98560,a=!1;else if(a=ho(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(o(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(o(317));a[hi]=t}else po(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;qs(t),a=!1}else null!==oo&&(ac(oo),oo=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ea.current)?0===Pl&&(Pl=3):gc())),null!==t.updateQueue&&(t.flags|=4),qs(t),null);case 4:return Qo(),Os(e,t),null===e&&Wr(t.stateNode.containerInfo),qs(t),null;case 10:return Co(t.type._context),qs(t),null;case 19:if(Ai(ea),null===(a=t.memoizedState))return qs(t),null;if(r=0!==(128&t.flags),null===(l=a.rendering))if(r)Gs(a,!1);else{if(0!==Pl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ta(e))){for(t.flags|=128,Gs(a,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return _i(ea,1&ea.current|2),t.child}e=e.sibling}null!==a.tail&&Qe()>Wl&&(t.flags|=128,r=!0,Gs(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ta(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Gs(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!io)return qs(t),null}else 2*Qe()-a.renderingStartTime>Wl&&1073741824!==n&&(t.flags|=128,r=!0,Gs(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=a.last)?n.sibling=l:t.child=l,a.last=l)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Qe(),t.sibling=null,n=ea.current,_i(ea,r?1&n|2:1&n),t):(qs(t),null);case 22:case 23:return dc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ol)&&(qs(t),6&t.subtreeFlags&&(t.flags|=8192)):qs(t),null;case 24:case 25:return null}throw Error(o(156,t.tag))}function Ys(e,t){switch(to(t),t.tag){case 1:return Oi(t.type)&&Di(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Qo(),Ai(Ii),Ai(Ci),ra(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Zo(t),null;case 13:if(Ai(ea),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));po()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ai(ea),null;case 4:return Qo(),null;case 10:return Co(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}Ns=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Os=function(){},Ds=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,$o(qo.current);var o,a=null;switch(n){case"input":i=$(e,i),r=$(e,r),a=[];break;case"select":i=M({},i,{value:void 0}),r=M({},r,{value:void 0}),a=[];break;case"textarea":i=re(e,i),r=re(e,r),a=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(u in ye(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(s.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(a||(a=[]),a.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(a=a||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(a=a||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(s.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Ur("scroll",e),a||l===c||(a=[])):(a=a||[]).push(u,c))}n&&(a=a||[]).push("style",n);var u=a;(t.updateQueue=u)&&(t.flags|=4)}},Ps=function(e,t,n,r){n!==r&&(t.flags|=4)};var $s=!1,Xs=!1,Qs="function"===typeof WeakSet?WeakSet:Set,Js=null;function Zs(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Tc(e,t,r)}else n.current=null}function el(e,t,n){try{n()}catch(r){Tc(e,t,r)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,void 0!==o&&el(t,n,o)}i=i.next}while(i!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function il(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ol(e){var t=e.alternate;null!==t&&(e.alternate=null,ol(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[fi],delete t[gi],delete t[mi],delete t[vi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function al(e){return 5===e.tag||3===e.tag||4===e.tag}function sl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||al(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var ul=null,dl=!1;function hl(e,t,n){for(n=n.child;null!==n;)fl(e,t,n),n=n.sibling}function fl(e,t,n){if(ot&&"function"===typeof ot.onCommitFiberUnmount)try{ot.onCommitFiberUnmount(it,n)}catch(s){}switch(n.tag){case 5:Xs||Zs(n,t);case 6:var r=ul,i=dl;ul=null,hl(e,t,n),dl=i,null!==(ul=r)&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ul.removeChild(n.stateNode));break;case 18:null!==ul&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),Wt(e)):li(ul,n.stateNode));break;case 4:r=ul,i=dl,ul=n.stateNode.containerInfo,dl=!0,hl(e,t,n),ul=r,dl=i;break;case 0:case 11:case 14:case 15:if(!Xs&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var o=i,a=o.destroy;o=o.tag,void 0!==a&&(0!==(2&o)||0!==(4&o))&&el(n,t,a),i=i.next}while(i!==r)}hl(e,t,n);break;case 1:if(!Xs&&(Zs(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){Tc(n,t,s)}hl(e,t,n);break;case 21:hl(e,t,n);break;case 22:1&n.mode?(Xs=(r=Xs)||null!==n.memoizedState,hl(e,t,n),Xs=r):hl(e,t,n);break;default:hl(e,t,n)}}function pl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Qs),t.forEach(function(t){var r=Cc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function gl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var a=e,s=t,l=s;e:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,dl=!1;break e;case 3:case 4:ul=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===ul)throw Error(o(160));fl(a,s,i),ul=null,dl=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(u){Tc(i,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ml(t,e),t=t.sibling}function ml(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gl(t,e),vl(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(m){Tc(e,e.return,m)}try{nl(5,e,e.return)}catch(m){Tc(e,e.return,m)}}break;case 1:gl(t,e),vl(e),512&r&&null!==n&&Zs(n,n.return);break;case 5:if(gl(t,e),vl(e),512&r&&null!==n&&Zs(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(m){Tc(e,e.return,m)}}if(4&r&&null!=(i=e.stateNode)){var a=e.memoizedProps,s=null!==n?n.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===a.type&&null!=a.name&&Q(i,a),be(l,s);var u=be(l,a);for(s=0;s<c.length;s+=2){var d=c[s],h=c[s+1];"style"===d?me(i,h):"dangerouslySetInnerHTML"===d?de(i,h):"children"===d?he(i,h):b(i,d,h,u)}switch(l){case"input":J(i,a);break;case"textarea":oe(i,a);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var p=a.value;null!=p?ne(i,!!a.multiple,p,!1):f!==!!a.multiple&&(null!=a.defaultValue?ne(i,!!a.multiple,a.defaultValue,!0):ne(i,!!a.multiple,a.multiple?[]:"",!1))}i[fi]=a}catch(m){Tc(e,e.return,m)}}break;case 6:if(gl(t,e),vl(e),4&r){if(null===e.stateNode)throw Error(o(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(m){Tc(e,e.return,m)}}break;case 3:if(gl(t,e),vl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Wt(t.containerInfo)}catch(m){Tc(e,e.return,m)}break;case 4:default:gl(t,e),vl(e);break;case 13:gl(t,e),vl(e),8192&(i=e.child).flags&&(a=null!==i.memoizedState,i.stateNode.isHidden=a,!a||null!==i.alternate&&null!==i.alternate.memoizedState||(Bl=Qe())),4&r&&pl(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Xs=(u=Xs)||d,gl(t,e),Xs=u):gl(t,e),vl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(Js=e,d=e.child;null!==d;){for(h=Js=d;null!==Js;){switch(p=(f=Js).child,f.tag){case 0:case 11:case 14:case 15:nl(4,f,f.return);break;case 1:Zs(f,f.return);var g=f.stateNode;if("function"===typeof g.componentWillUnmount){r=f,n=f.return;try{t=r,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(m){Tc(r,n,m)}}break;case 5:Zs(f,f.return);break;case 22:if(null!==f.memoizedState){xl(h);continue}}null!==p?(p.return=f,Js=p):xl(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{i=h.stateNode,u?"function"===typeof(a=i.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=h.stateNode,s=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=ge("display",s))}catch(m){Tc(e,e.return,m)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(m){Tc(e,e.return,m)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:gl(t,e),vl(e),4&r&&pl(e);case 21:}}function vl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(al(n)){var r=n;break e}n=n.return}throw Error(o(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),cl(e,sl(e),i);break;case 3:case 4:var a=r.stateNode.containerInfo;ll(e,sl(e),a);break;default:throw Error(o(161))}}catch(s){Tc(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yl(e,t,n){Js=e,bl(e,t,n)}function bl(e,t,n){for(var r=0!==(1&e.mode);null!==Js;){var i=Js,o=i.child;if(22===i.tag&&r){var a=null!==i.memoizedState||$s;if(!a){var s=i.alternate,l=null!==s&&null!==s.memoizedState||Xs;s=$s;var c=Xs;if($s=a,(Xs=l)&&!c)for(Js=i;null!==Js;)l=(a=Js).child,22===a.tag&&null!==a.memoizedState?Sl(i):null!==l?(l.return=a,Js=l):Sl(i);for(;null!==o;)Js=o,bl(o,t,n),o=o.sibling;Js=i,$s=s,Xs=c}wl(e)}else 0!==(8772&i.subtreeFlags)&&null!==o?(o.return=i,Js=o):wl(e)}}function wl(e){for(;null!==Js;){var t=Js;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Xs||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Xs)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ns(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&Ho(t,a,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Ho(t,s,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&Wt(h)}}}break;default:throw Error(o(163))}Xs||512&t.flags&&il(t)}catch(f){Tc(t,t.return,f)}}if(t===e){Js=null;break}if(null!==(n=t.sibling)){n.return=t.return,Js=n;break}Js=t.return}}function xl(e){for(;null!==Js;){var t=Js;if(t===e){Js=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Js=n;break}Js=t.return}}function Sl(e){for(;null!==Js;){var t=Js;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(l){Tc(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){Tc(t,i,l)}}var o=t.return;try{il(t)}catch(l){Tc(t,o,l)}break;case 5:var a=t.return;try{il(t)}catch(l){Tc(t,a,l)}}}catch(l){Tc(t,t.return,l)}if(t===e){Js=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Js=s;break}Js=t.return}}var El,Tl=Math.ceil,Al=w.ReactCurrentDispatcher,_l=w.ReactCurrentOwner,kl=w.ReactCurrentBatchConfig,Cl=0,Il=null,Rl=null,Nl=0,Ol=0,Dl=Ti(0),Pl=0,Ll=null,jl=0,Ml=0,Fl=0,Ul=null,zl=null,Bl=0,Wl=1/0,Vl=null,Hl=!1,Gl=null,ql=null,Kl=!1,Yl=null,$l=0,Xl=0,Ql=null,Jl=-1,Zl=0;function ec(){return 0!==(6&Cl)?Qe():-1!==Jl?Jl:Jl=Qe()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Cl)&&0!==Nl?Nl&-Nl:null!==mo.transition?(0===Zl&&(Zl=gt()),Zl):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Xt(e.type)}function nc(e,t,n,r){if(50<Xl)throw Xl=0,Ql=null,Error(o(185));vt(e,n,r),0!==(2&Cl)&&e===Il||(e===Il&&(0===(2&Cl)&&(Ml|=n),4===Pl&&sc(e,Nl)),rc(e,r),1===n&&0===Cl&&0===(1&t.mode)&&(Wl=Qe()+500,Ui&&Wi()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var a=31-at(o),s=1<<a,l=i[a];-1===l?0!==(s&n)&&0===(s&r)||(i[a]=ft(s,t)):l<=t&&(e.expiredLanes|=s),o&=~s}}(e,t);var r=ht(e,e===Il?Nl:0);if(0===r)null!==n&&Ye(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ye(n),1===t)0===e.tag?function(e){Ui=!0,Bi(e)}(lc.bind(null,e)):Bi(lc.bind(null,e)),ai(function(){0===(6&Cl)&&Wi()}),n=null;else{switch(wt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Ic(n,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ic(e,t){if(Jl=-1,Zl=0,0!==(6&Cl))throw Error(o(327));var n=e.callbackNode;if(Sc()&&e.callbackNode!==n)return null;var r=ht(e,e===Il?Nl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=mc(e,r);else{t=r;var i=Cl;Cl|=2;var a=pc();for(Il===e&&Nl===t||(Vl=null,Wl=Qe()+500,hc(e,t));;)try{yc();break}catch(l){fc(e,l)}ko(),Al.current=a,Cl=i,null!==Rl?t=0:(Il=null,Nl=0,t=Pl)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=oc(e,i))),1===t)throw n=Ll,hc(e,0),sc(e,r),rc(e,Qe()),n;if(6===t)sc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!sr(o(),i))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=mc(e,r))&&(0!==(a=pt(e))&&(r=a,t=oc(e,a))),1===t))throw n=Ll,hc(e,0),sc(e,r),rc(e,Qe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(o(345));case 2:case 5:xc(e,zl,Vl);break;case 3:if(sc(e,r),(130023424&r)===r&&10<(t=Bl+500-Qe())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(xc.bind(null,e,zl,Vl),t);break}xc(e,zl,Vl);break;case 4:if(sc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-at(r);a=1<<s,(s=t[s])>i&&(i=s),r&=~a}if(r=i,10<(r=(120>(r=Qe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Tl(r/1960))-r)){e.timeoutHandle=ri(xc.bind(null,e,zl,Vl),r);break}xc(e,zl,Vl);break;default:throw Error(o(329))}}}return rc(e,Qe()),e.callbackNode===n?ic.bind(null,e):null}function oc(e,t){var n=Ul;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=mc(e,t))&&(t=zl,zl=n,null!==t&&ac(t)),e}function ac(e){null===zl?zl=e:zl.push.apply(zl,e)}function sc(e,t){for(t&=~Fl,t&=~Ml,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),r=1<<n;e[n]=-1,t&=~r}}function lc(e){if(0!==(6&Cl))throw Error(o(327));Sc();var t=ht(e,0);if(0===(1&t))return rc(e,Qe()),null;var n=mc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=oc(e,r))}if(1===n)throw n=Ll,hc(e,0),sc(e,t),rc(e,Qe()),n;if(6===n)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xc(e,zl,Vl),rc(e,Qe()),null}function cc(e,t){var n=Cl;Cl|=1;try{return e(t)}finally{0===(Cl=n)&&(Wl=Qe()+500,Ui&&Wi())}}function uc(e){null!==Yl&&0===Yl.tag&&0===(6&Cl)&&Sc();var t=Cl;Cl|=1;var n=kl.transition,r=bt;try{if(kl.transition=null,bt=1,e)return e()}finally{bt=r,kl.transition=n,0===(6&(Cl=t))&&Wi()}}function dc(){Ol=Dl.current,Ai(Dl)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Rl)for(n=Rl.return;null!==n;){var r=n;switch(to(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Di();break;case 3:Qo(),Ai(Ii),Ai(Ci),ra();break;case 5:Zo(r);break;case 4:Qo();break;case 13:case 19:Ai(ea);break;case 10:Co(r.type._context);break;case 22:case 23:dc()}n=n.return}if(Il=e,Rl=e=Dc(e.current,null),Nl=Ol=t,Pl=0,Ll=null,Fl=Ml=jl=0,zl=Ul=null,null!==Oo){for(t=0;t<Oo.length;t++)if(null!==(r=(n=Oo[t]).interleaved)){n.interleaved=null;var i=r.next,o=n.pending;if(null!==o){var a=o.next;o.next=i,r.next=a}n.pending=r}Oo=null}return e}function fc(e,t){for(;;){var n=Rl;try{if(ko(),ia.current=Ja,ua){for(var r=sa.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}ua=!1}if(aa=0,ca=la=sa=null,da=!1,ha=0,_l.current=null,null===n||null===n.return){Pl=1,Ll=t,Rl=null;break}e:{var a=e,s=n.return,l=n,c=t;if(t=Nl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=ms(s);if(null!==p){p.flags&=-257,vs(p,s,l,0,t),1&p.mode&&gs(a,u,t),c=u;var g=(t=p).updateQueue;if(null===g){var m=new Set;m.add(c),t.updateQueue=m}else g.add(c);break e}if(0===(1&t)){gs(a,u,t),gc();break e}c=Error(o(426))}else if(io&&1&l.mode){var v=ms(s);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),vs(v,s,l,0,t),go(cs(c,l));break e}}a=c=cs(c,l),4!==Pl&&(Pl=2),null===Ul?Ul=[a]:Ul.push(a),a=s;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,Wo(a,fs(0,c,t));break e;case 1:l=c;var y=a.type,b=a.stateNode;if(0===(128&a.flags)&&("function"===typeof y.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===ql||!ql.has(b)))){a.flags|=65536,t&=-t,a.lanes|=t,Wo(a,ps(a,l,t));break e}}a=a.return}while(null!==a)}wc(n)}catch(w){t=w,Rl===n&&null!==n&&(Rl=n=n.return);continue}break}}function pc(){var e=Al.current;return Al.current=Ja,null===e?Ja:e}function gc(){0!==Pl&&3!==Pl&&2!==Pl||(Pl=4),null===Il||0===(268435455&jl)&&0===(268435455&Ml)||sc(Il,Nl)}function mc(e,t){var n=Cl;Cl|=2;var r=pc();for(Il===e&&Nl===t||(Vl=null,hc(e,t));;)try{vc();break}catch(i){fc(e,i)}if(ko(),Cl=n,Al.current=r,null!==Rl)throw Error(o(261));return Il=null,Nl=0,Pl}function vc(){for(;null!==Rl;)bc(Rl)}function yc(){for(;null!==Rl&&!$e();)bc(Rl)}function bc(e){var t=El(e.alternate,e,Ol);e.memoizedProps=e.pendingProps,null===t?wc(e):Rl=t,_l.current=null}function wc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ks(n,t,Ol)))return void(Rl=n)}else{if(null!==(n=Ys(n,t)))return n.flags&=32767,void(Rl=n);if(null===e)return Pl=6,void(Rl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Rl=t);Rl=t=e}while(null!==t);0===Pl&&(Pl=5)}function xc(e,t,n){var r=bt,i=kl.transition;try{kl.transition=null,bt=1,function(e,t,n,r){do{Sc()}while(null!==Yl);if(0!==(6&Cl))throw Error(o(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-at(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}(e,a),e===Il&&(Rl=Il=null,Nl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Kl||(Kl=!0,Ic(tt,function(){return Sc(),null})),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=kl.transition,kl.transition=null;var s=bt;bt=1;var l=Cl;Cl|=4,_l.current=null,function(e,t){if(ei=Ht,fr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(x){n=null;break e}var s=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(l=s+i),h!==a||0!==r&&3!==h.nodeType||(c=s+r),3===h.nodeType&&(s+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++u===i&&(l=s),f===a&&++d===r&&(c=s),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Ht=!1,Js=t;null!==Js;)if(e=(t=Js).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Js=e;else for(;null!==Js;){t=Js;try{var g=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==g){var m=g.memoizedProps,v=g.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:ns(t.type,m),v);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(o(163))}}catch(x){Tc(t,t.return,x)}if(null!==(e=t.sibling)){e.return=t.return,Js=e;break}Js=t.return}g=tl,tl=!1}(e,n),ml(n,e),pr(ti),Ht=!!ei,ti=ei=null,e.current=n,yl(n,e,i),Xe(),Cl=l,bt=s,kl.transition=a}else e.current=n;if(Kl&&(Kl=!1,Yl=e,$l=i),a=e.pendingLanes,0===a&&(ql=null),function(e){if(ot&&"function"===typeof ot.onCommitFiberRoot)try{ot.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Qe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Hl)throw Hl=!1,e=Gl,Gl=null,e;0!==(1&$l)&&0!==e.tag&&Sc(),a=e.pendingLanes,0!==(1&a)?e===Ql?Xl++:(Xl=0,Ql=e):Xl=0,Wi()}(e,t,n,r)}finally{kl.transition=i,bt=r}return null}function Sc(){if(null!==Yl){var e=wt($l),t=kl.transition,n=bt;try{if(kl.transition=null,bt=16>e?16:e,null===Yl)var r=!1;else{if(e=Yl,Yl=null,$l=0,0!==(6&Cl))throw Error(o(331));var i=Cl;for(Cl|=4,Js=e.current;null!==Js;){var a=Js,s=a.child;if(0!==(16&Js.flags)){var l=a.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Js=u;null!==Js;){var d=Js;switch(d.tag){case 0:case 11:case 15:nl(8,d,a)}var h=d.child;if(null!==h)h.return=d,Js=h;else for(;null!==Js;){var f=(d=Js).sibling,p=d.return;if(ol(d),d===u){Js=null;break}if(null!==f){f.return=p,Js=f;break}Js=p}}}var g=a.alternate;if(null!==g){var m=g.child;if(null!==m){g.child=null;do{var v=m.sibling;m.sibling=null,m=v}while(null!==m)}}Js=a}}if(0!==(2064&a.subtreeFlags)&&null!==s)s.return=a,Js=s;else e:for(;null!==Js;){if(0!==(2048&(a=Js).flags))switch(a.tag){case 0:case 11:case 15:nl(9,a,a.return)}var y=a.sibling;if(null!==y){y.return=a.return,Js=y;break e}Js=a.return}}var b=e.current;for(Js=b;null!==Js;){var w=(s=Js).child;if(0!==(2064&s.subtreeFlags)&&null!==w)w.return=s,Js=w;else e:for(s=b;null!==Js;){if(0!==(2048&(l=Js).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(S){Tc(l,l.return,S)}if(l===s){Js=null;break e}var x=l.sibling;if(null!==x){x.return=l.return,Js=x;break e}Js=l.return}}if(Cl=i,Wi(),ot&&"function"===typeof ot.onPostCommitFiberRoot)try{ot.onPostCommitFiberRoot(it,e)}catch(S){}r=!0}return r}finally{bt=n,kl.transition=t}}return!1}function Ec(e,t,n){e=zo(e,t=fs(0,t=cs(n,t),1),1),t=ec(),null!==e&&(vt(e,1,t),rc(e,t))}function Tc(e,t,n){if(3===e.tag)Ec(e,e,n);else for(;null!==t;){if(3===t.tag){Ec(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===ql||!ql.has(r))){t=zo(t,e=ps(t,e=cs(n,e),1),1),e=ec(),null!==t&&(vt(t,1,e),rc(t,e));break}}t=t.return}}function Ac(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Il===e&&(Nl&n)===n&&(4===Pl||3===Pl&&(130023424&Nl)===Nl&&500>Qe()-Bl?hc(e,0):Fl|=n),rc(e,t)}function _c(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=ec();null!==(e=Lo(e,t))&&(vt(e,t,n),rc(e,n))}function kc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),_c(e,n)}function Cc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(o(314))}null!==r&&r.delete(t),_c(e,n)}function Ic(e,t){return Ke(e,t)}function Rc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nc(e,t,n,r){return new Rc(e,t,n,r)}function Oc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Dc(e,t){var n=e.alternate;return null===n?((n=Nc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Pc(e,t,n,r,i,a){var s=2;if(r=e,"function"===typeof e)Oc(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case E:return Lc(n.children,i,a,t);case T:s=8,i|=8;break;case A:return(e=Nc(12,n,t,2|i)).elementType=A,e.lanes=a,e;case I:return(e=Nc(13,n,t,i)).elementType=I,e.lanes=a,e;case R:return(e=Nc(19,n,t,i)).elementType=R,e.lanes=a,e;case D:return jc(n,i,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case _:s=10;break e;case k:s=9;break e;case C:s=11;break e;case N:s=14;break e;case O:s=16,r=null;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Nc(s,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function Lc(e,t,n,r){return(e=Nc(7,e,r,t)).lanes=n,e}function jc(e,t,n,r){return(e=Nc(22,e,r,t)).elementType=D,e.lanes=n,e.stateNode={isHidden:!1},e}function Mc(e,t,n){return(e=Nc(6,e,null,t)).lanes=n,e}function Fc(e,t,n){return(t=Nc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Uc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function zc(e,t,n,r,i,o,a,s,l){return e=new Uc(e,t,n,s,l),1===t?(t=1,!0===o&&(t|=8)):t=0,o=Nc(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Mo(o),e}function Bc(e){if(!e)return ki;e:{if(We(e=e._reactInternals)!==e||1!==e.tag)throw Error(o(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Oi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(o(171))}if(1===e.tag){var n=e.type;if(Oi(n))return Li(e,n,t)}return t}function Wc(e,t,n,r,i,o,a,s,l){return(e=zc(n,r,!0,e,0,o,0,s,l)).context=Bc(null),n=e.current,(o=Uo(r=ec(),i=tc(n))).callback=void 0!==t&&null!==t?t:null,zo(n,o,i),e.current.lanes=i,vt(e,i,r),rc(e,r),e}function Vc(e,t,n,r){var i=t.current,o=ec(),a=tc(i);return n=Bc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Uo(o,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=zo(i,t,a))&&(nc(e,i,a,o),Bo(e,i,a)),a}function Hc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Gc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function qc(e,t){Gc(e,t),(e=e.alternate)&&Gc(e,t)}El=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ii.current)bs=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bs=!1,function(e,t,n){switch(t.tag){case 3:Is(t),po();break;case 5:Jo(t);break;case 1:Oi(t.type)&&ji(t);break;case 4:Xo(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;_i(Eo,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(_i(ea,1&ea.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ms(e,t,n):(_i(ea,1&ea.current),null!==(e=Hs(e,t,n))?e.sibling:null);_i(ea,1&ea.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Ws(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),_i(ea,ea.current),r)break;return null;case 22:case 23:return t.lanes=0,Ts(e,t,n)}return Hs(e,t,n)}(e,t,n);bs=0!==(131072&e.flags)}else bs=!1,io&&0!==(1048576&t.flags)&&Zi(t,qi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Vs(e,t),e=t.pendingProps;var i=Ni(t,Ci.current);Ro(t,n),i=ma(null,t,r,e,i,n);var a=va();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Oi(r)?(a=!0,ji(t)):a=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Mo(t),i.updater=is,t.stateNode=i,i._reactInternals=t,ls(t,r,e,n),t=Cs(null,t,r,!0,a,n)):(t.tag=0,io&&a&&eo(t),ws(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Vs(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Oc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===N)return 14}return 2}(r),e=ns(r,e),i){case 0:t=_s(null,t,r,e,n);break e;case 1:t=ks(null,t,r,e,n);break e;case 11:t=xs(null,t,r,e,n);break e;case 14:t=Ss(null,t,r,ns(r.type,e),n);break e}throw Error(o(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,_s(e,t,r,i=t.elementType===r?i:ns(r,i),n);case 1:return r=t.type,i=t.pendingProps,ks(e,t,r,i=t.elementType===r?i:ns(r,i),n);case 3:e:{if(Is(t),null===e)throw Error(o(387));r=t.pendingProps,i=(a=t.memoizedState).element,Fo(e,t),Vo(t,r,null,n);var s=t.memoizedState;if(r=s.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Rs(e,t,r,n,i=cs(Error(o(423)),t));break e}if(r!==i){t=Rs(e,t,r,n,i=cs(Error(o(424)),t));break e}for(ro=ci(t.stateNode.containerInfo.firstChild),no=t,io=!0,oo=null,n=So(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(po(),r===i){t=Hs(e,t,n);break e}ws(e,t,r,n)}t=t.child}return t;case 5:return Jo(t),null===e&&co(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,s=i.children,ni(r,i)?s=null:null!==a&&ni(r,a)&&(t.flags|=32),As(e,t),ws(e,t,s,n),t.child;case 6:return null===e&&co(t),null;case 13:return Ms(e,t,n);case 4:return Xo(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=xo(t,null,r,n):ws(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,xs(e,t,r,i=t.elementType===r?i:ns(r,i),n);case 7:return ws(e,t,t.pendingProps,n),t.child;case 8:case 12:return ws(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,a=t.memoizedProps,s=i.value,_i(Eo,r._currentValue),r._currentValue=s,null!==a)if(sr(a.value,s)){if(a.children===i.children&&!Ii.current){t=Hs(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){s=a.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===a.tag){(c=Uo(-1,n&-n)).tag=2;var u=a.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),Io(a.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===a.tag)s=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(s=a.return))throw Error(o(341));s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),Io(s,n,t),s=a.sibling}else s=a.child;if(null!==s)s.return=a;else for(s=a;null!==s;){if(s===t){s=null;break}if(null!==(a=s.sibling)){a.return=s.return,s=a;break}s=s.return}a=s}ws(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ro(t,n),r=r(i=No(i)),t.flags|=1,ws(e,t,r,n),t.child;case 14:return i=ns(r=t.type,t.pendingProps),Ss(e,t,r,i=ns(r.type,i),n);case 15:return Es(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ns(r,i),Vs(e,t),t.tag=1,Oi(r)?(e=!0,ji(t)):e=!1,Ro(t,n),as(t,r,i),ls(t,r,i,n),Cs(null,t,r,!0,e,n);case 19:return Ws(e,t,n);case 22:return Ts(e,t,n)}throw Error(o(156,t.tag))};var Kc="function"===typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function $c(e){this._internalRoot=e}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Qc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Jc(){}function Zc(e,t,n,r,i){var o=n._reactRootContainer;if(o){var a=o;if("function"===typeof i){var s=i;i=function(){var e=Hc(a);s.call(e)}}Vc(t,a,e,i)}else a=function(e,t,n,r,i){if(i){if("function"===typeof r){var o=r;r=function(){var e=Hc(a);o.call(e)}}var a=Wc(t,r,e,0,null,!1,0,"",Jc);return e._reactRootContainer=a,e[pi]=a.current,Wr(8===e.nodeType?e.parentNode:e),uc(),a}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var s=r;r=function(){var e=Hc(l);s.call(e)}}var l=zc(e,0,!1,null,0,!1,0,"",Jc);return e._reactRootContainer=l,e[pi]=l.current,Wr(8===e.nodeType?e.parentNode:e),uc(function(){Vc(t,l,n,r)}),l}(n,t,e,i,r);return Hc(a)}$c.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));Vc(e,t,null,null)},$c.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uc(function(){Vc(null,e,null,null)}),t[pi]=null}},$c.prototype.unstable_scheduleHydration=function(e){if(e){var t=Tt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Dt.length&&0!==t&&t<Dt[n].priority;n++);Dt.splice(n,0,e),0===n&&Mt(e)}},xt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(yt(t,1|n),rc(t,Qe()),0===(6&Cl)&&(Wl=Qe()+500,Wi()))}break;case 13:uc(function(){var t=Lo(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}}),qc(e,1)}},St=function(e){if(13===e.tag){var t=Lo(e,134217728);if(null!==t)nc(t,e,134217728,ec());qc(e,134217728)}},Et=function(e){if(13===e.tag){var t=tc(e),n=Lo(e,t);if(null!==n)nc(n,e,t,ec());qc(e,t)}},Tt=function(){return bt},At=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},Se=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=xi(r);if(!i)throw Error(o(90));K(r),J(r,i)}}}break;case"textarea":oe(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=cc,Ie=uc;var eu={usingClientEntryPoint:!1,Events:[bi,wi,xi,_e,ke,cc]},tu={findFiberByHostInstance:yi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nu={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ge(e))?null:e.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{it=ru.inject(nu),ot=ru}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Xc(t))throw Error(o(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:S,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Xc(e))throw Error(o(299));var n=!1,r="",i=Kc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=zc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,Wr(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=null===(e=Ge(t))?null:e.stateNode},t.flushSync=function(e){return uc(e)},t.hydrate=function(e,t,n){if(!Qc(t))throw Error(o(200));return Zc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Xc(e))throw Error(o(405));var r=null!=n&&n.hydratedSources||null,i=!1,a="",s=Kc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=Wc(t,null,e,1,null!=n?n:null,i,0,a,s),e[pi]=t.current,Wr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new $c(t)},t.render=function(e,t,n){if(!Qc(t))throw Error(o(200));return Zc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Qc(e))throw Error(o(40));return!!e._reactRootContainer&&(uc(function(){Zc(null,null,e,!1,function(){e._reactRootContainer=null,e[pi]=null})}),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Qc(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return Zc(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},791:(e,t,n)=>{n.d(t,{xi:()=>j,Bj:()=>_,Vf:()=>N,j2:()=>d,db:()=>h,qT:()=>z,dF:()=>U,Wz:()=>D,DD:()=>C,hG:()=>S,FJ:()=>T,Qi:()=>y,Cn:()=>p,is:()=>M,mz:()=>R,getEventConfig:()=>W,nP:()=>P,_h:()=>m,ri:()=>v,gU:()=>b,ws:()=>I,Wq:()=>g,cw:()=>x,setEventConfig:()=>B,IG:()=>f,HG:()=>A,Og:()=>L,VK:()=>F,eY:()=>O,vc:()=>k,eg:()=>w,F6:()=>E});var r=n(555),i=n(150);(0,i.KO)("firebase","9.23.0","app");var o=n(619),a=n(32),s=n(147),l=n(626);const c={apiKey:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_FIREBASE_API_KEY||"AIzaSyAiinYBnD20OAIs9S_7wetabfQz477Duh4",authDomain:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_FIREBASE_AUTH_DOMAIN||"sociedad-tpv.firebaseapp.com",projectId:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_FIREBASE_PROJECT_ID||"sociedad-tpv",storageBucket:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_FIREBASE_STORAGE_BUCKET||"sociedad-tpv.firebasestorage.app",messagingSenderId:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_FIREBASE_MESSAGING_SENDER_ID||"180644630865",appId:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_FIREBASE_APP_ID||"1:180644630865:web:a0a2d69c67c5b482c9c370"};console.log("FIREBASE CONFIG:",{apiKey:c.apiKey,authDomain:c.authDomain,projectId:c.projectId});const u=(0,i.Wp)(c),d=(0,o.xI)(u),h=(0,a.aU)(u),f=(0,s.c7)(u),p=(0,l.Uz)(u);async function g(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const{email:i,name:s}=e,l=await(0,o.eJ)(d,i,t);if(s)try{await(0,o.r7)(l.user,{displayName:s})}catch(f){console.warn(f)}let c="";if(n)try{c=await E(l.user.uid,n)}catch(f){console.warn("Error subiendo foto durante registro:",f)}const u=(0,a.doc)(h,"users",l.user.uid);return await(0,a.BN)(u,(0,r.A)((0,r.A)({email:i},e),{},{photoURL:c,createdAt:(0,a.O5)()})),l.user}async function m(e,t){return(await(0,o.x9)(d,e,t)).user}async function v(){await(0,o.CI)(d)}async function y(e){if(!e)return null;const t=(0,a.doc)(h,"users",e),n=await(0,a.x7)(t);return n.exists()?(0,r.A)({id:n.id},n.data()):null}async function b(){try{const e=(0,a.collection)(h,"users"),t=(0,a.query)(e,(0,a.orderBy)("email","asc"));return(await(0,a.getDocs)(t)).docs.map(e=>(0,r.A)({id:e.id},e.data()))}catch(e){console.error("queryAllUsers error:",e);let t=(await(0,a.getDocs)((0,a.collection)(h,"users"))).docs.map(e=>(0,r.A)({id:e.id},e.data()));return t.sort((e,t)=>String(e.email||"").localeCompare(String(t.email||""))),t}}async function w(e,t){if(!e)throw new Error("UID requerido");const n=(0,a.doc)(h,"users",e),r={};return void 0!==t.name&&(r.name=t.name),void 0!==t.surname&&(r.surname=t.surname),void 0!==t.lastName&&(r.lastName=t.lastName),void 0!==t.dob&&(r.dob=t.dob),void 0!==t.birthDate&&(r.birthDate=t.birthDate),void 0!==t.phone&&(r.phone=t.phone),void 0!==t.alias&&(r.alias=t.alias),void 0!==t.photoURL&&(r.photoURL=t.photoURL),void 0!==t.isAdmin&&(r.isAdmin=!!t.isAdmin),r.updatedAt=(0,a.O5)(),await(0,a.mZ)(n,r),!0}async function x(e){if(!e)throw new Error("Email requerido");return await(0,o.J1)(d,e),!0}async function S(e){if(!e)throw new Error("UID requerido");try{const t=(0,a.doc)(h,"users",e);return await(0,a.deleteDoc)(t),{success:!0}}catch(t){throw console.error("Error eliminando usuario:",t),t}}async function E(e,t){if(!e||!t)throw new Error("UID y archivo requeridos");try{console.log("Iniciando compresi\xf3n y conversi\xf3n de foto...",{uid:e,fileName:t.name,fileSize:t.size});const n=await new Promise((e,n)=>{const r=new FileReader;r.onload=r=>{const i=new Image;i.onload=()=>{let n=i.width,r=i.height;const o=800;(n>o||r>o)&&(n>r?(r=r/n*o,n=o):(n=n/r*o,r=o));const a=document.createElement("canvas");a.width=n,a.height=r;a.getContext("2d").drawImage(i,0,0,n,r);const s=a.toDataURL("image/jpeg",.7);console.log("Imagen comprimida:",{originalSize:t.size,compressedSize:s.length,dimensions:"".concat(n,"x").concat(r)}),e(s)},i.onerror=n,i.src=r.target.result},r.onerror=n,r.readAsDataURL(t)});if(n.length>1e6)throw new Error("La imagen es demasiado grande incluso despu\xe9s de comprimir. Por favor, usa una imagen m\xe1s peque\xf1a.");return console.log("Guardando en Firestore..."),await w(e,{photoURL:n}),console.log("Foto guardada exitosamente en Firestore"),n}catch(n){throw console.error("Error detallado en uploadUserPhoto:",n),n}}async function T(e){if(!e)throw new Error("UID requerido");try{return await w(e,{photoURL:""}),console.log("Foto eliminada exitosamente de Firestore"),!0}catch(t){throw console.error("Error eliminando foto:",t),t}}function A(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=(0,a.collection)(h,"products");let i;i=t?(0,a.query)(n,(0,a.where)("active","==",!0),(0,a.orderBy)("label","asc")):(0,a.query)(n,(0,a.orderBy)("label","asc"));return(0,a.aQ)(i,t=>{const n=t.docs.map(e=>(0,r.A)({id:e.id},e.data()));e(n)},async n=>{console.error("subscribeProducts error:",n);try{let n=(await(0,a.getDocs)((0,a.collection)(h,"products"))).docs.map(e=>(0,r.A)({id:e.id},e.data()));t&&(n=n.filter(e=>e.active)),n.sort((e,t)=>String(e.label||"").localeCompare(String(t.label||""))),e(n)}catch(i){console.error("subscribeProducts fallback error:",i),e([])}})}async function _(e){const t=await(0,a.addDoc)((0,a.collection)(h,"products"),(0,r.A)((0,r.A)({},e),{},{createdAt:(0,a.O5)()}));return(0,r.A)({id:t.id},e)}async function k(e,t){const n=(0,a.doc)(h,"products",e);return await(0,a.mZ)(n,(0,r.A)((0,r.A)({},t),{},{updatedAt:(0,a.O5)()})),!0}async function C(e){const t=(0,a.doc)(h,"products",e);return await(0,a.deleteDoc)(t),!0}async function I(){let{uid:e,isAdmin:t=!1,startDate:n=null,endDate:i=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{const o=(0,a.collection)(h,"expenses"),s=[];n&&s.push((0,a.where)("date",">=",n)),i&&s.push((0,a.where)("date","<=",i));const l=s.length?(0,a.query)(o,...s,(0,a.orderBy)("date","desc")):(0,a.query)(o,(0,a.orderBy)("date","desc"));let c=(await(0,a.getDocs)(l)).docs.map(e=>(0,r.A)({id:e.id},e.data()));return!t&&e&&(c=c.filter(t=>t.uid===e||!(!t.participantes||!Array.isArray(t.participantes))&&t.participantes.some(t=>t.uid===e))),c}catch(o){console.error("queryExpenses error:",o);let s=(await(0,a.getDocs)((0,a.collection)(h,"expenses"))).docs.map(e=>(0,r.A)({id:e.id},e.data()));return!t&&e&&(s=s.filter(t=>t.uid===e||!(!t.participantes||!Array.isArray(t.participantes))&&t.participantes.some(t=>t.uid===e))),n&&(s=s.filter(e=>(e.date&&e.date.toDate?e.date.toDate():new Date(e.date||0))>=n)),i&&(s=s.filter(e=>(e.date&&e.date.toDate?e.date.toDate():new Date(e.date||0))<=i)),s.sort((e,t)=>{const n=e.date&&e.date.toDate?e.date.toDate():new Date(e.date||0);return(t.date&&t.date.toDate?t.date.toDate():new Date(t.date||0))-n}),s}}async function R(){try{const e=await(0,a.getDocs)((0,a.collection)(h,"users"));console.log("\ud83d\udcca Total users en DB:",e.docs.length);const t=e.docs.map(e=>(0,r.A)({id:e.id},e.data()));console.log("\ud83d\udc65 Todos los users:",t);const n=t.filter(e=>!e.isAdmin&&"admin@admin"!==e.email);return console.log("\u2705 Socios filtrados (no admins):",n),n}catch(e){throw console.error("Error getting socios:",e),e}}async function N(){let{uid:e,userEmail:t,item:n,category:i,amount:o,date:s=null,productId:l=null,productLines:c=null,attendees:u=null,eventoTexto:d=null,totalGeneral:f=null,amountPerAttendee:p=null,totalAttendees:g=null,participantes:m=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!e)throw new Error("UID requerido para addSale");const v={uid:e,userId:e,userEmail:t||"",item:n||"",category:i||"",amount:Number(o)||0,productId:l||null,productLines:c||null,attendees:u||null,eventoTexto:d||null,totalGeneral:f||null,amountPerAttendee:p||null,totalAttendees:g||null,participantes:m||null,date:s||(0,a.O5)(),createdAt:(0,a.O5)()},y=await(0,a.addDoc)((0,a.collection)(h,"expenses"),v);return(0,r.A)({id:y.id},v)}async function O(e,t){const n=(0,a.doc)(h,"expenses",e),r={};return void 0!==t.item&&(r.item=t.item),void 0!==t.amount&&(r.amount=Number(t.amount)),void 0!==t.category&&(r.category=t.category),void 0!==t.date&&(r.date=t.date),void 0!==t.productLines&&(r.productLines=t.productLines),void 0!==t.attendees&&(r.attendees=t.attendees),void 0!==t.eventoTexto&&(r.eventoTexto=t.eventoTexto),void 0!==t.totalGeneral&&(r.totalGeneral=t.totalGeneral),void 0!==t.amountPerAttendee&&(r.amountPerAttendee=t.amountPerAttendee),void 0!==t.totalAttendees&&(r.totalAttendees=t.totalAttendees),void 0!==t.participantes&&(r.participantes=t.participantes),r.updatedAt=(0,a.O5)(),await(0,a.mZ)(n,r),!0}async function D(e){const t=(0,a.doc)(h,"expenses",e);return await(0,a.deleteDoc)(t),!0}async function P(e){if(!e)return[];try{const t=(0,a.doc)(h,"users",e),n=await(0,a.x7)(t);if(n.exists()){return n.data().favoriteProducts||[]}return[]}catch(t){return console.error("getUserFavorites error:",t),[]}}async function L(e,t){if(!e||!t)throw new Error("UID y productId requeridos");try{return(await P(e)).includes(t)?await async function(e,t){if(!e||!t)throw new Error("UID y productId requeridos");try{const n=(0,a.doc)(h,"users",e),r=await(0,a.x7)(n);if(r.exists()){const e=(r.data().favoriteProducts||[]).filter(e=>e!==t);return await(0,a.mZ)(n,{favoriteProducts:e,updatedAt:(0,a.O5)()}),e}return[]}catch(n){throw console.error("removeFavoriteProduct error:",n),n}}(e,t):await async function(e,t){if(!e||!t)throw new Error("UID y productId requeridos");try{const n=(0,a.doc)(h,"users",e),r=await(0,a.x7)(n);if(r.exists()){const e=r.data().favoriteProducts||[];if(!e.includes(t)){const r=[...e,t];return await(0,a.mZ)(n,{favoriteProducts:r,updatedAt:(0,a.O5)()}),r}return e}return await(0,a.BN)(n,{favoriteProducts:[t],createdAt:(0,a.O5)()}),[t]}catch(n){throw console.error("addFavoriteProduct error:",n),n}}(e,t)}catch(n){throw console.error("toggleFavoriteProduct error:",n),n}}async function j(e){try{const t=await(0,a.addDoc)((0,a.collection)(h,"eventRegistrations"),(0,r.A)((0,r.A)({},e),{},{createdAt:(0,a.O5)(),updatedAt:(0,a.O5)()}));return(0,r.A)({id:t.id},e)}catch(t){throw console.error("addEventRegistration error:",t),t}}async function M(){try{const e=(0,a.query)((0,a.collection)(h,"eventRegistrations"),(0,a.orderBy)("createdAt","desc"));return(await(0,a.getDocs)(e)).docs.map(e=>(0,r.A)({id:e.id},e.data()))}catch(e){throw console.error("getAllEventRegistrations error:",e),e}}async function F(e,t){if(!e)throw new Error("ID de inscripci\xf3n requerido");try{const n=(0,a.doc)(h,"eventRegistrations",e);return await(0,a.mZ)(n,(0,r.A)((0,r.A)({},t),{},{updatedAt:(0,a.O5)()})),(0,r.A)({id:e},t)}catch(n){throw console.error("updateEventRegistration error:",n),n}}async function U(e){if(!e)throw new Error("ID de inscripci\xf3n requerido");try{await(0,a.deleteDoc)((0,a.doc)(h,"eventRegistrations",e))}catch(t){throw console.error("deleteEventRegistration error:",t),t}}async function z(e){if(!e)throw new Error("Tipo de evento requerido");try{const t=(0,a.query)((0,a.collection)(h,"eventRegistrations"),(0,a.where)("eventType","==",e)),n=await(0,a.getDocs)(t),r=n.docs.map(e=>(0,a.deleteDoc)(e.ref));return await Promise.all(r),n.docs.length}catch(t){throw console.error("deleteAllEventRegistrationsByType error:",t),t}}async function B(e,t){if(!e)throw new Error("Tipo de evento requerido");try{const n=(0,a.doc)(h,"eventConfigs",e);return await(0,a.BN)(n,(0,r.A)((0,r.A)({},t),{},{updatedAt:(0,a.O5)()}),{merge:!0}),t}catch(n){throw console.error("setEventConfig error:",n),n}}async function W(e){if(!e)throw new Error("Tipo de evento requerido");try{const t=(0,a.doc)(h,"eventConfigs",e),n=await(0,a.x7)(t);return n.exists()?n.data():null}catch(t){return console.error("getEventConfig error:",t),null}}},812:(e,t,n)=>{n.d(t,{h1:()=>s,uA:()=>i});var r=n(700);class i{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const o="[DEFAULT]";class a{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new r.cY;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:o})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,o]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&o.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===o?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(a){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o;return this.component?this.component.multipleInstances?e:o:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class s{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new a(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}},853:(e,t,n)=>{e.exports=n(234)},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var o=Object.create(null);n.r(o);var a={};e=e||[null,t({}),t([]),t(t)];for(var s=2&i&&r;("object"==typeof s||"function"==typeof s)&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach(e=>a[e]=()=>r[e]);return a.default=()=>r,n.d(o,a),o}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r,i=n(43),o=n.t(i,2),a=n(391),s=n(950),l=n.t(s,2);function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(r||(r={}));const u="popstate";function d(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function h(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function f(e,t){return{usr:e.state,key:e.key,idx:t}}function p(e,t,n,r){return void 0===n&&(n=null),c({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?m(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function g(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function m(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function v(e,t,n,i){void 0===i&&(i={});let{window:o=document.defaultView,v5Compat:a=!1}=i,s=o.history,l=r.Pop,h=null,m=v();function v(){return(s.state||{idx:null}).idx}function y(){l=r.Pop;let e=v(),t=null==e?null:e-m;m=e,h&&h({action:l,location:w.location,delta:t})}function b(e){let t="null"!==o.location.origin?o.location.origin:o.location.href,n="string"===typeof e?e:g(e);return n=n.replace(/ $/,"%20"),d(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==m&&(m=0,s.replaceState(c({},s.state,{idx:m}),""));let w={get action(){return l},get location(){return e(o,s)},listen(e){if(h)throw new Error("A history only accepts one active listener");return o.addEventListener(u,y),h=e,()=>{o.removeEventListener(u,y),h=null}},createHref:e=>t(o,e),createURL:b,encodeLocation(e){let t=b(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){l=r.Push;let i=p(w.location,e,t);n&&n(i,e),m=v()+1;let c=f(i,m),u=w.createHref(i);try{s.pushState(c,"",u)}catch(d){if(d instanceof DOMException&&"DataCloneError"===d.name)throw d;o.location.assign(u)}a&&h&&h({action:l,location:w.location,delta:1})},replace:function(e,t){l=r.Replace;let i=p(w.location,e,t);n&&n(i,e),m=v();let o=f(i,m),c=w.createHref(i);s.replaceState(o,"",c),a&&h&&h({action:l,location:w.location,delta:0})},go:e=>s.go(e)};return w}var y;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(y||(y={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function b(e,t,n){return void 0===n&&(n="/"),w(e,t,n,!1)}function w(e,t,n,r){let i=P(("string"===typeof t?m(t):t).pathname||"/",n);if(null==i)return null;let o=x(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(o);let a=null;for(let s=0;null==a&&s<o.length;++s){let e=D(i);a=N(o[s],e,r)}return a}function x(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let i=(e,i,o)=>{let a={relativePath:void 0===o?e.path||"":o,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};a.relativePath.startsWith("/")&&(d(a.relativePath.startsWith(r),'Absolute route path "'+a.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),a.relativePath=a.relativePath.slice(r.length));let s=U([r,a.relativePath]),l=n.concat(a);e.children&&e.children.length>0&&(d(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+s+'".'),x(e.children,t,l,s)),(null!=e.path||e.index)&&t.push({path:s,score:R(s,e.index),routesMeta:l})};return e.forEach((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of S(e.path))i(e,t,r);else i(e,t)}),t}function S(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(0===r.length)return i?[o,""]:[o];let a=S(r.join("/")),s=[];return s.push(...a.map(e=>""===e?o:[o,e].join("/"))),i&&s.push(...a),s.map(t=>e.startsWith("/")&&""===t?"/":t)}const E=/^:[\w-]+$/,T=3,A=2,_=1,k=10,C=-2,I=e=>"*"===e;function R(e,t){let n=e.split("/"),r=n.length;return n.some(I)&&(r+=C),t&&(r+=A),n.filter(e=>!I(e)).reduce((e,t)=>e+(E.test(t)?T:""===t?_:k),r)}function N(e,t,n){void 0===n&&(n=!1);let{routesMeta:r}=e,i={},o="/",a=[];for(let s=0;s<r.length;++s){let e=r[s],l=s===r.length-1,c="/"===o?t:t.slice(o.length)||"/",u=O({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),d=e.route;if(!u&&l&&n&&!r[r.length-1].route.index&&(u=O({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(i,u.params),a.push({params:i,pathname:U([o,u.pathname]),pathnameBase:z(U([o,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(o=U([o,u.pathnameBase]))}return a}function O(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);h("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)"));e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let o=new RegExp(i,t?void 0:"i");return[o,r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let o=i[0],a=o.replace(/(.)\/+$/,"$1"),s=i.slice(1);return{params:r.reduce((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=s[n]||"";a=o.slice(0,o.length-e.length).replace(/(.)\/+$/,"$1")}const l=s[n];return e[r]=i&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{}),pathname:o,pathnameBase:a,pattern:e}}function D(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return h(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function P(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function L(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function j(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function M(e,t){let n=j(e);return t?n.map((e,t)=>t===n.length-1?e.pathname:e.pathnameBase):n.map(e=>e.pathnameBase)}function F(e,t,n,r){let i;void 0===r&&(r=!1),"string"===typeof e?i=m(e):(i=c({},e),d(!i.pathname||!i.pathname.includes("?"),L("?","pathname","search",i)),d(!i.pathname||!i.pathname.includes("#"),L("#","pathname","hash",i)),d(!i.search||!i.search.includes("#"),L("#","search","hash",i)));let o,a=""===e||""===i.pathname,s=a?"/":i.pathname;if(null==s)o=n;else{let e=t.length-1;if(!r&&s.startsWith("..")){let t=s.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}o=e>=0?t[e]:"/"}let l=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:i=""}="string"===typeof e?m(e):e,o=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:o,search:B(r),hash:W(i)}}(i,o),u=s&&"/"!==s&&s.endsWith("/"),h=(a||"."===s)&&n.endsWith("/");return l.pathname.endsWith("/")||!u&&!h||(l.pathname+="/"),l}const U=e=>e.join("/").replace(/\/\/+/g,"/"),z=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),B=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",W=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function V(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const H=["post","put","patch","delete"],G=(new Set(H),["get",...H]);new Set(G),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function q(){return q=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},q.apply(this,arguments)}const K=i.createContext(null);const Y=i.createContext(null);const X=i.createContext(null);const Q=i.createContext(null);const J=i.createContext({outlet:null,matches:[],isDataRoute:!1});const Z=i.createContext(null);function ee(){return null!=i.useContext(Q)}function te(){return ee()||d(!1),i.useContext(Q).location}function ne(e){i.useContext(X).static||i.useLayoutEffect(e)}function re(){let{isDataRoute:e}=i.useContext(J);return e?function(){let{router:e}=fe(de.UseNavigateStable),t=ge(he.UseNavigateStable),n=i.useRef(!1);return ne(()=>{n.current=!0}),i.useCallback(function(r,i){void 0===i&&(i={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,q({fromRouteId:t},i)))},[e,t])}():function(){ee()||d(!1);let e=i.useContext(K),{basename:t,future:n,navigator:r}=i.useContext(X),{matches:o}=i.useContext(J),{pathname:a}=te(),s=JSON.stringify(M(o,n.v7_relativeSplatPath)),l=i.useRef(!1);return ne(()=>{l.current=!0}),i.useCallback(function(n,i){if(void 0===i&&(i={}),!l.current)return;if("number"===typeof n)return void r.go(n);let o=F(n,JSON.parse(s),a,"path"===i.relative);null==e&&"/"!==t&&(o.pathname="/"===o.pathname?t:U([t,o.pathname])),(i.replace?r.replace:r.push)(o,i.state,i)},[t,r,s,a,e])}()}function ie(e,t){let{relative:n}=void 0===t?{}:t,{future:r}=i.useContext(X),{matches:o}=i.useContext(J),{pathname:a}=te(),s=JSON.stringify(M(o,r.v7_relativeSplatPath));return i.useMemo(()=>F(e,JSON.parse(s),a,"path"===n),[e,s,a,n])}function oe(e,t,n,o){ee()||d(!1);let{navigator:a}=i.useContext(X),{matches:s}=i.useContext(J),l=s[s.length-1],c=l?l.params:{},u=(l&&l.pathname,l?l.pathnameBase:"/");l&&l.route;let h,f=te();if(t){var p;let e="string"===typeof t?m(t):t;"/"===u||(null==(p=e.pathname)?void 0:p.startsWith(u))||d(!1),h=e}else h=f;let g=h.pathname||"/",v=g;if("/"!==u){let e=u.replace(/^\//,"").split("/");v="/"+g.replace(/^\//,"").split("/").slice(e.length).join("/")}let y=b(e,{pathname:v});let w=ue(y&&y.map(e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:U([u,a.encodeLocation?a.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?u:U([u,a.encodeLocation?a.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),s,n,o);return t&&w?i.createElement(Q.Provider,{value:{location:q({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:r.Pop}},w):w}function ae(){let e=function(){var e;let t=i.useContext(Z),n=pe(he.UseRouteError),r=ge(he.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[r]}(),t=V(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:r};return i.createElement(i.Fragment,null,i.createElement("h2",null,"Unexpected Application Error!"),i.createElement("h3",{style:{fontStyle:"italic"}},t),n?i.createElement("pre",{style:o},n):null,null)}const se=i.createElement(ae,null);class le extends i.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?i.createElement(J.Provider,{value:this.props.routeContext},i.createElement(Z.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ce(e){let{routeContext:t,match:n,children:r}=e,o=i.useContext(K);return o&&o.static&&o.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=n.route.id),i.createElement(J.Provider,{value:t},r)}function ue(e,t,n,r){var o;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===r&&(r=null),null==e){var a;if(!n)return null;if(n.errors)e=n.matches;else{if(!(null!=(a=r)&&a.v7_partialHydration&&0===t.length&&!n.initialized&&n.matches.length>0))return null;e=n.matches}}let s=e,l=null==(o=n)?void 0:o.errors;if(null!=l){let e=s.findIndex(e=>e.route.id&&void 0!==(null==l?void 0:l[e.route.id]));e>=0||d(!1),s=s.slice(0,Math.min(s.length,e+1))}let c=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let i=0;i<s.length;i++){let e=s[i];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(u=i),e.route.id){let{loaderData:t,errors:r}=n,i=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||i){c=!0,s=u>=0?s.slice(0,u+1):[s[0]];break}}}return s.reduceRight((e,r,o)=>{let a,d=!1,h=null,f=null;var p;n&&(a=l&&r.route.id?l[r.route.id]:void 0,h=r.route.errorElement||se,c&&(u<0&&0===o?(p="route-fallback",!1||me[p]||(me[p]=!0),d=!0,f=null):u===o&&(d=!0,f=r.route.hydrateFallbackElement||null)));let g=t.concat(s.slice(0,o+1)),m=()=>{let t;return t=a?h:d?f:r.route.Component?i.createElement(r.route.Component,null):r.route.element?r.route.element:e,i.createElement(ce,{match:r,routeContext:{outlet:e,matches:g,isDataRoute:null!=n},children:t})};return n&&(r.route.ErrorBoundary||r.route.errorElement||0===o)?i.createElement(le,{location:n.location,revalidation:n.revalidation,component:h,error:a,children:m(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):m()},null)}var de=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(de||{}),he=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(he||{});function fe(e){let t=i.useContext(K);return t||d(!1),t}function pe(e){let t=i.useContext(Y);return t||d(!1),t}function ge(e){let t=function(){let e=i.useContext(J);return e||d(!1),e}(),n=t.matches[t.matches.length-1];return n.route.id||d(!1),n.route.id}const me={};function ve(e,t){null==e||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}o.startTransition;function ye(e){let{to:t,replace:n,state:r,relative:o}=e;ee()||d(!1);let{future:a,static:s}=i.useContext(X),{matches:l}=i.useContext(J),{pathname:c}=te(),u=re(),h=F(t,M(l,a.v7_relativeSplatPath),c,"path"===o),f=JSON.stringify(h);return i.useEffect(()=>u(JSON.parse(f),{replace:n,state:r,relative:o}),[u,f,o,n,r]),null}function be(e){d(!1)}function we(e){let{basename:t="/",children:n=null,location:o,navigationType:a=r.Pop,navigator:s,static:l=!1,future:c}=e;ee()&&d(!1);let u=t.replace(/^\/*/,"/"),h=i.useMemo(()=>({basename:u,navigator:s,static:l,future:q({v7_relativeSplatPath:!1},c)}),[u,c,s,l]);"string"===typeof o&&(o=m(o));let{pathname:f="/",search:p="",hash:g="",state:v=null,key:y="default"}=o,b=i.useMemo(()=>{let e=P(f,u);return null==e?null:{location:{pathname:e,search:p,hash:g,state:v,key:y},navigationType:a}},[u,f,p,g,v,y,a]);return null==b?null:i.createElement(X.Provider,{value:h},i.createElement(Q.Provider,{children:n,value:b}))}function xe(e){let{children:t,location:n}=e;return oe(Se(t),n)}new Promise(()=>{});i.Component;function Se(e,t){void 0===t&&(t=[]);let n=[];return i.Children.forEach(e,(e,r)=>{if(!i.isValidElement(e))return;let o=[...t,r];if(e.type===i.Fragment)return void n.push.apply(n,Se(e.props.children,o));e.type!==be&&d(!1),e.props.index&&e.props.children&&d(!1);let a={id:e.props.id||o.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(a.children=Se(e.props.children,o)),n.push(a)}),n}function Ee(){return Ee=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ee.apply(this,arguments)}function Te(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const Ae=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"];try{window.__reactRouterVersion="6"}catch(Yc){}new Map;const _e=o.startTransition;l.flushSync,o.useId;function ke(e){let{basename:t,children:n,future:r,window:o}=e,a=i.useRef();var s;null==a.current&&(a.current=(void 0===(s={window:o,v5Compat:!0})&&(s={}),v(function(e,t){let{pathname:n,search:r,hash:i}=e.location;return p("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:g(t)},null,s)));let l=a.current,[c,u]=i.useState({action:l.action,location:l.location}),{v7_startTransition:d}=r||{},h=i.useCallback(e=>{d&&_e?_e(()=>u(e)):u(e)},[u,d]);return i.useLayoutEffect(()=>l.listen(h),[l,h]),i.useEffect(()=>ve(r),[r]),i.createElement(we,{basename:t,children:n,location:c.location,navigationType:c.action,navigator:l,future:r})}const Ce="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Ie=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Re=i.forwardRef(function(e,t){let n,{onClick:r,relative:o,reloadDocument:a,replace:s,state:l,target:c,to:u,preventScrollReset:h,viewTransition:f}=e,p=Te(e,Ae),{basename:m}=i.useContext(X),v=!1;if("string"===typeof u&&Ie.test(u)&&(n=u,Ce))try{let e=new URL(window.location.href),t=u.startsWith("//")?new URL(e.protocol+u):new URL(u),n=P(t.pathname,m);t.origin===e.origin&&null!=n?u=n+t.search+t.hash:v=!0}catch(Yc){}let y=function(e,t){let{relative:n}=void 0===t?{}:t;ee()||d(!1);let{basename:r,navigator:o}=i.useContext(X),{hash:a,pathname:s,search:l}=ie(e,{relative:n}),c=s;return"/"!==r&&(c="/"===s?r:U([r,s])),o.createHref({pathname:c,search:l,hash:a})}(u,{relative:o}),b=function(e,t){let{target:n,replace:r,state:o,preventScrollReset:a,relative:s,viewTransition:l}=void 0===t?{}:t,c=re(),u=te(),d=ie(e,{relative:s});return i.useCallback(t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,n)){t.preventDefault();let n=void 0!==r?r:g(u)===g(d);c(e,{replace:n,state:o,preventScrollReset:a,relative:s,viewTransition:l})}},[u,c,d,r,o,n,e,a,s,l])}(u,{replace:s,state:l,target:c,preventScrollReset:h,relative:o,viewTransition:f});return i.createElement("a",Ee({},p,{href:n||y,onClick:v||a?r:function(e){r&&r(e),e.defaultPrevented||b(e)},ref:t,target:c}))});var Ne,Oe;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Ne||(Ne={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Oe||(Oe={}));var De=n(555),Pe=n(791),Le=n(579);function je(){const[e,t]=(0,i.useState)("entrar"),[n,r]=(0,i.useState)({name:"",surname:"",dob:"",phone:"",email:"",password:""}),[o,a]=(0,i.useState)(null),[s,l]=(0,i.useState)(""),[c,u]=(0,i.useState)(!1),d=re(),h=e=>r((0,De.A)((0,De.A)({},n),{},{[e.target.name]:e.target.value}));return(0,Le.jsxs)("div",{style:{padding:16,maxWidth:420,margin:"0 auto"},children:[(0,Le.jsx)("h3",{style:{marginBottom:12},children:"Acceso"}),(0,Le.jsxs)("form",{onSubmit:"entrar"===e?async e=>{e.preventDefault(),u(!0);try{await(0,Pe._h)(n.email,n.password),d("/menu")}catch(t){console.error("Login error full:",t),alert("Error login: ".concat(t.code||""," \u2014 ").concat(t.message||t))}finally{u(!1)}}:async e=>{e.preventDefault(),u(!0);try{await(0,Pe.Wq)({name:n.name,surname:n.surname,dob:n.dob,phone:n.phone,email:n.email},n.password,o),alert("Registro OK. Bienvenido."),d("/menu")}catch(t){console.error("Register error full:",t),alert("Error registro: ".concat(t.code||""," \u2014 ").concat(t.message||t))}finally{u(!1)}},style:{display:"flex",flexDirection:"column",gap:10},children:["registrarse"===e&&(0,Le.jsxs)(Le.Fragment,{children:[(0,Le.jsx)("input",{className:"full-input",name:"name",value:n.name,onChange:h,placeholder:"Nombre",required:!0}),(0,Le.jsx)("input",{className:"full-input",name:"surname",value:n.surname,onChange:h,placeholder:"Apellidos",required:!0}),(0,Le.jsxs)("div",{style:{marginBottom:10},children:[(0,Le.jsx)("label",{style:{fontSize:14,fontWeight:600,marginBottom:6,display:"block",color:"#333"},children:"Fecha de nacimiento"}),(0,Le.jsx)("input",{className:"full-input",name:"dob",value:n.dob,onChange:h,type:"date",required:!0})]}),(0,Le.jsx)("input",{className:"full-input",name:"phone",value:n.phone,onChange:h,placeholder:"Tel\xe9fono",required:!0}),(0,Le.jsxs)("div",{children:[(0,Le.jsx)("label",{style:{fontSize:13,fontWeight:600,marginBottom:4,display:"block"},children:"Foto (opcional)"}),s&&(0,Le.jsx)("div",{style:{marginBottom:8},children:(0,Le.jsx)("img",{src:s,alt:"Vista previa",style:{width:100,height:100,objectFit:"cover",borderRadius:8,border:"1px solid #ddd"}})}),(0,Le.jsx)("input",{type:"file",accept:"image/*",capture:"user",onChange:e=>{var t;const n=null===(t=e.target.files)||void 0===t?void 0:t[0];if(!n)return;if(!n.type.startsWith("image/"))return void alert("Por favor selecciona una imagen");if(n.size>2097152)return void alert("La imagen no puede superar 2MB");a(n);const r=new FileReader;r.onloadend=()=>{l(r.result)},r.readAsDataURL(n)},className:"full-input",style:{padding:"6px"}})]})]}),(0,Le.jsx)("input",{className:"full-input",name:"email",value:n.email,onChange:h,type:"email",placeholder:"Email",required:!0}),(0,Le.jsx)("input",{className:"full-input",name:"password",value:n.password,onChange:h,type:"password",placeholder:"Contrase\xf1a",required:!0}),(0,Le.jsx)("button",{className:"btn-primary full",type:"submit",disabled:c,children:"entrar"===e?"Entrar":"Registrarse"}),"entrar"===e&&(0,Le.jsx)("button",{type:"button",className:"btn-ghost full",onClick:async()=>{if(n.email){if(confirm("\xbfEnviar email de recuperaci\xf3n a ".concat(n.email,"?"))){u(!0);try{await(0,Pe.cw)(n.email),alert("Email enviado. Revisa tu bandeja de entrada (y spam) para restablecer tu contrase\xf1a.")}catch(e){console.error("Reset password error:",e),alert("Error: ".concat(e.message||e))}finally{u(!1)}}}else alert("Por favor introduce tu email primero")},disabled:c,style:{fontSize:13,color:"#1976d2"},children:"\xbfOlvidaste tu contrase\xf1a?"}),(0,Le.jsx)("button",{type:"button",className:"btn-ghost full",onClick:()=>t(e=>"entrar"===e?"registrarse":"entrar"),disabled:c,children:"entrar"===e?"\xbfNo tienes cuenta? Reg\xedstrate":"Ya tengo cuenta"})]})]})}function Me(e){let{user:t,profile:n}=e;const r=e=>{let{to:t,icon:n,label:r,isAdmin:i=!1}=e;return(0,Le.jsxs)(Re,{to:t,style:{textDecoration:"none",display:"flex",flexDirection:"column",alignItems:"center",gap:8},children:[(0,Le.jsx)("button",{style:{width:"110px",height:"110px",borderRadius:"50%",border:"none",background:i?"linear-gradient(135deg, #7b1fa2 0%, #6a1b9a 100%)":"linear-gradient(135deg, #1976d2 0%, #1565c0 100%)",color:"#fff",cursor:"pointer",boxShadow:"0 4px 12px rgba(25, 118, 210, 0.3)",transition:"all 0.2s ease",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:4,fontSize:"40px"},onMouseEnter:e=>{e.currentTarget.style.transform="scale(1.05)",e.currentTarget.style.boxShadow="0 6px 16px rgba(25, 118, 210, 0.4)"},onMouseLeave:e=>{e.currentTarget.style.transform="scale(1)",e.currentTarget.style.boxShadow="0 4px 12px rgba(25, 118, 210, 0.3)"},children:n}),(0,Le.jsx)("span",{style:{fontSize:"12px",fontWeight:"600",color:"#374151",textAlign:"center"},children:r})]})};return(0,Le.jsxs)("div",{style:{padding:20,display:"flex",flexDirection:"column",alignItems:"center",minHeight:"100vh"},children:[(0,Le.jsx)("h2",{style:{marginBottom:40,fontSize:22,fontWeight:700,color:"#111827",textAlign:"center"},children:"Men\xfa Principal"}),(0,Le.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:32,alignItems:"center"},children:[!(null!==n&&void 0!==n&&n.isAdmin)&&(0,Le.jsx)(r,{to:"/tpv",icon:"\ud83d\udecd\ufe0f",label:"TPV"}),!(null!==n&&void 0!==n&&n.isAdmin)&&(0,Le.jsx)(r,{to:"/eventos",icon:"\ud83d\udcc5",label:"Eventos"}),!(null!==n&&void 0!==n&&n.isAdmin)&&(0,Le.jsx)(r,{to:"/listados-eventos",icon:"\ud83d\udcca",label:"Listados Eventos"}),(null===n||void 0===n?void 0:n.isAdmin)&&(0,Le.jsx)(r,{to:"/listados-tpv",icon:"\ud83d\udcb0",label:"Listados TPV",isAdmin:!0}),(null===n||void 0===n?void 0:n.isAdmin)&&(0,Le.jsx)(r,{to:"/productos",icon:"\ud83d\udce6",label:"Productos",isAdmin:!0}),(null===n||void 0===n?void 0:n.isAdmin)&&(0,Le.jsx)(r,{to:"/socios",icon:"\ud83d\udc65",label:"Socios",isAdmin:!0})]}),(0,Le.jsxs)("div",{style:{marginTop:"auto",paddingTop:40,paddingBottom:20,fontSize:11,color:"#9ca3af",textAlign:"center"},children:["v",Bc]})]})}function Fe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t=new Map;for(const n of e){const e=n.productId?"id:".concat(n.productId):"lbl:".concat((n.label||"").trim(),"::").concat(Number(n.price||0).toFixed(2)),r=Number(n.qty||1),i=Number(n.price||0),o=t.get(e);o?o.qty+=r:t.set(e,{productId:n.productId||null,label:n.label||"",price:i,qty:r})}return Array.from(t.values())}function Ue(e){if(!e)return"";const t=e.toDate?e.toDate():new Date(e);return new Date(t.getTime()-6e4*t.getTimezoneOffset()).toISOString().slice(0,16)}function ze(e){return e?new Date(e):null}function Be(e){let{user:t,profile:n}=e;const[r,o]=(0,i.useState)([]),[a,s]=(0,i.useState)([]),[l,c]=(0,i.useState)(!1),[u,d]=(0,i.useState)([]),[h,f]=(0,i.useState)(!1),[p,g]=(0,i.useState)(null),[m,v]=(0,i.useState)(null),[y,b]=(0,i.useState)([]),[w,x]=(0,i.useState)(!1),[S,E]=(0,i.useState)("all"),[T,A]=(0,i.useState)(""),[_,k]=(0,i.useState)(""),[C,I]=(0,i.useState)(!0),[R,N]=(0,i.useState)(!1),[O,D]=(0,i.useState)(""),[P,L]=(0,i.useState)([]),[j,M]=(0,i.useState)({}),[F,U]=(0,i.useState)({}),[z,B]=(0,i.useState)({}),[W,V]=(0,i.useState)(window.innerWidth),H=re();(0,i.useEffect)(()=>{const e=()=>V(window.innerWidth);return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);const G=i.useMemo(()=>W>=1024?{gridColumns:"repeat(auto-fill, minmax(140px, 1fr))",cardPadding:14,gap:12,buttonSize:32,fontSize:14,inputFontSize:16,checkboxSize:20}:W>=768?{gridColumns:"repeat(auto-fill, minmax(110px, 1fr))",cardPadding:10,gap:8,buttonSize:30,fontSize:12,inputFontSize:15,checkboxSize:18}:{gridColumns:"repeat(auto-fill, minmax(85px, 1fr))",cardPadding:8,gap:6,buttonSize:26,fontSize:11,inputFontSize:14,checkboxSize:16},[W]);if((0,i.useEffect)(()=>{const e=(0,Pe.HG)(o,!0);return()=>e&&e()},[]),(0,i.useEffect)(()=>{let e=!0;return(async()=>{if(t&&t.uid)try{const n=await(0,Pe.nP)(t.uid);e&&b(n)}catch(n){console.error("Error loading favorites:",n)}})(),()=>{e=!1}},[t]),(0,i.useEffect)(()=>{let e=!0;return t&&t.uid&&(async()=>{try{const n=await(0,Pe.ws)({uid:null===t||void 0===t?void 0:t.uid,isAdmin:!1});if(!e)return;const r=n.map(e=>(0,De.A)((0,De.A)({},e),{},{createdAtStr:e.createdAt&&e.createdAt.toDate?e.createdAt.toDate().toLocaleString():e.createdAt||"",dateInput:Ue(e.date||e.createdAt)}));d(r)}catch(n){console.error("queryExpenses load error:",n)}})(),()=>{e=!1}},[t]),(0,i.useEffect)(()=>{let e=!0;return(async()=>{if(R||p)try{console.log("\ud83d\udd04 Recargando socios...");const t=await(0,Pe.mz)();if(console.log("\ud83d\udd0d Socios obtenidos con alias:",t.map(e=>({id:e.id,name:e.name,alias:e.alias}))),e&&(L(t),R&&!p&&t.length>0&&0===Object.keys(j).length)){const e={},n={};t.forEach(t=>{e[t.id]=!0,n[t.id]=1}),M(e),U(n)}}catch(t){console.error("Error loading socios:",t)}})(),()=>{e=!1}},[R,p]),!t)return(0,Le.jsx)("div",{children:"No autenticado"});if(null!==n&&void 0!==n&&n.isAdmin)return(0,Le.jsx)("div",{children:'Los administradores no pueden usar TPV. Usa "Listados" o "Productos".'});const q=Fe(a),K=q.reduce((e,t)=>e+(Number(t.price)||0)*(Number(t.qty)||1),0),Y=[...new Set(r.map(e=>e.category||"Sin categor\xeda"))].sort();let $=r;w&&($=$.filter(e=>y.includes(e.id))),"all"!==S&&($=$.filter(e=>(e.category||"Sin categor\xeda")===S));const X=e=>{g(e.id);const n={},r={};"sociedad"===e.category&&(e.participantes&&Array.isArray(e.participantes)?e.participantes.forEach(e=>{n[e.uid]=!0,r[e.uid]=e.attendees||1}):(n[t.uid]=!0,r[t.uid]=e.attendees||1)),v({item:e.item||"",amount:e.amount||0,productLines:(e.productLines||[]).map(e=>(0,De.A)({},e)),dateInput:e.dateInput||Ue(e.createdAt),category:e.category||"venta",eventoTexto:e.eventoTexto||"",selectedSocios:n,attendeesCount:r})},Q=()=>{g(null),v(null)},J=async()=>{if(p)try{const n=Fe(m.productLines||[]),r=n.reduce((e,t)=>e+t.price*t.qty,0);if("sociedad"===m.category){var e;const t=Object.entries(m.selectedSocios||{}).filter(e=>{let[t,n]=e;return n}).map(e=>{let[t,n]=e;return t});if(0===t.length)return void alert("Debes seleccionar al menos un socio");const i=t.reduce((e,t)=>e+Number(m.attendeesCount[t]||1),0),o=r/i,a=t.map(e=>{var t;const n=Number(m.attendeesCount[e]||1),r=o*n,i=P.find(t=>t.id===e);return{uid:e,email:(null===i||void 0===i?void 0:i.email)||"",nombre:(null===i||void 0===i?void 0:i.nombre)||(null===i||void 0===i||null===(t=i.email)||void 0===t?void 0:t.split("@")[0])||"Socio",attendees:n,amount:r}}),s=(null===(e=m.eventoTexto)||void 0===e?void 0:e.trim())||"Gasto conjunto",l={item:"[SOCIEDAD - ".concat(s,"] ").concat(n.map(e=>"".concat(e.qty,"x ").concat(e.label)).join(", ")," (").concat(i," asistente").concat(i>1?"s":"",")"),amount:r,productLines:n,date:m.dateInput?ze(m.dateInput):null,category:"sociedad",participantes:a,eventoTexto:s,totalGeneral:r,amountPerAttendee:o,totalAttendees:i};await(0,Pe.eY)(p,l)}else{const e={item:n.map(e=>"".concat(e.qty,"x ").concat(e.label)).join(", "),amount:r,productLines:n,date:m.dateInput?ze(m.dateInput):null,category:m.category,attendees:null,eventoTexto:null,totalGeneral:null,amountPerAttendee:null,totalAttendees:null};await(0,Pe.eY)(p,e)}const i=(await(0,Pe.ws)({uid:null===t||void 0===t?void 0:t.uid,isAdmin:!1})).map(e=>(0,De.A)((0,De.A)({},e),{},{createdAtStr:e.createdAt&&e.createdAt.toDate?e.createdAt.toDate().toLocaleString():e.createdAt||"",dateInput:Ue(e.date||e.createdAt)}));d(i),Q(),alert("Ticket actualizado correctamente")}catch(n){console.error("Error saving edit:",n),alert("Error al guardar cambios")}},Z=async e=>{if(confirm("Borrar este ticket?"))try{await(0,Pe.Wz)(e),d(t=>t.filter(t=>t.id!==e)),alert("Ticket borrado.")}catch(t){console.error("deleteExpense error:",t),alert("Error borrando ticket: "+(t.message||t))}},ee=()=>v(e=>(0,De.A)((0,De.A)({},e),{},{productLines:[...e.productLines||[],{productId:null,label:"",price:0,qty:1}]})),te=e=>v(t=>(0,De.A)((0,De.A)({},t),{},{productLines:t.productLines.filter((t,n)=>n!==e)})),ne=(e,t)=>v(n=>(0,De.A)((0,De.A)({},n),{},{productLines:n.productLines.map((n,r)=>r===e?(0,De.A)((0,De.A)({},n),t):n)}));return(0,Le.jsx)("div",{style:{padding:12},children:(0,Le.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:12},children:[(0,Le.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:8},children:[(0,Le.jsxs)("div",{children:[(0,Le.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16,flexWrap:"wrap",gap:12},children:[(0,Le.jsx)("h3",{style:{margin:0,fontSize:24,fontWeight:700,color:"#111827"},children:"TPV"}),(0,Le.jsxs)("div",{style:{display:"flex",gap:8,alignItems:"center",flexWrap:"wrap"},children:[(0,Le.jsx)("button",{onClick:()=>H("/listados-tpv"),style:{padding:"8px 16px",background:"linear-gradient(135deg, #059669 0%, #047857 100%)",color:"#fff",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"13px",fontWeight:"600",boxShadow:"0 2px 6px rgba(5,150,105,0.25)",transition:"all 0.2s ease",whiteSpace:"nowrap"},onMouseEnter:e=>{e.currentTarget.style.transform="scale(1.03)",e.currentTarget.style.boxShadow="0 4px 10px rgba(5,150,105,0.35)"},onMouseLeave:e=>{e.currentTarget.style.transform="scale(1)",e.currentTarget.style.boxShadow="0 2px 6px rgba(5,150,105,0.25)"},children:"\ud83d\udcca Ver Listados TPV"}),(0,Le.jsx)("button",{onClick:()=>I(!C),style:{padding:"8px 16px",fontSize:14,fontWeight:600,color:"#fff",backgroundColor:"#3b82f6",border:"none",borderRadius:8,cursor:"pointer",transition:"all 0.2s",boxShadow:"0 2px 6px rgba(59, 130, 246, 0.3)"},onMouseEnter:e=>e.target.style.backgroundColor="#2563eb",onMouseLeave:e=>e.target.style.backgroundColor="#3b82f6",children:C?"\u25bc Ocultar Productos":"\u25b6 Mostrar Productos"}),(0,Le.jsxs)("select",{value:S,onChange:e=>E(e.target.value),style:{fontSize:14,padding:"8px 12px",borderRadius:8,border:"1px solid #e5e7eb",background:"#fff",color:"#374151",cursor:"pointer",fontWeight:500},children:[(0,Le.jsx)("option",{value:"all",children:"\ud83d\udccb Todas las categor\xedas"}),Y.map(e=>(0,Le.jsx)("option",{value:e,children:e},e))]}),w&&(0,Le.jsxs)("span",{style:{fontSize:13,color:"#6b7280",fontWeight:500,background:"#fef3c7",padding:"4px 12px",borderRadius:20,border:"1px solid #fbbf24"},children:[y.length," ",1===y.length?"favorito":"favoritos"]}),(0,Le.jsxs)("button",{onClick:()=>x(!w),style:{fontSize:14,padding:"8px 16px",borderRadius:8,fontWeight:600,background:w?"linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%)":"#fff",color:w?"#fff":"#374151",border:w?"none":"1px solid #e5e7eb",cursor:"pointer",transition:"all 0.2s ease",boxShadow:w?"0 4px 12px rgba(251, 191, 36, 0.3)":"0 1px 3px rgba(0,0,0,0.1)",display:"flex",alignItems:"center",gap:6},onMouseEnter:e=>{w?(e.currentTarget.style.background="linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",e.currentTarget.style.transform="translateY(-1px)",e.currentTarget.style.boxShadow="0 6px 16px rgba(251, 191, 36, 0.4)"):(e.currentTarget.style.background="#f9fafb",e.currentTarget.style.borderColor="#d1d5db")},onMouseLeave:e=>{w?(e.currentTarget.style.background="linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%)",e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="0 4px 12px rgba(251, 191, 36, 0.3)"):(e.currentTarget.style.background="#fff",e.currentTarget.style.borderColor="#e5e7eb")},children:[(0,Le.jsx)("span",{style:{fontSize:16},children:w?"\u2b50":"\ud83d\udccb"}),(0,Le.jsx)("span",{children:w?"Favoritos":"FAV"})]})]})]}),!R&&(0,Le.jsx)(Le.Fragment,{children:C&&(0,Le.jsxs)(Le.Fragment,{children:[(0,Le.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(140px, 1fr))",gap:12},children:$.map(e=>{const n=y.includes(e.id);return(0,Le.jsx)("div",{className:"card",style:{padding:"12px",position:"relative",borderRadius:"12px",display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center"},children:(0,Le.jsxs)("div",{style:{paddingTop:4,width:"100%",display:"flex",flexDirection:"column",alignItems:"center",gap:6},children:[(0,Le.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:6,flexWrap:"wrap",justifyContent:"center",marginBottom:2},children:[(0,Le.jsx)("span",{style:{fontWeight:600,fontSize:14},children:e.label}),e.category&&(0,Le.jsx)("span",{style:{fontSize:10,color:"#999",fontStyle:"italic"},children:e.category})]}),(0,Le.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:6,marginBottom:6},children:[(0,Le.jsxs)("div",{style:{fontSize:16,fontWeight:700,color:"#1976d2"},children:[Number(e.price||0).toFixed(2)," \u20ac"]}),(0,Le.jsx)("button",{onClick:()=>(async e=>{if(t&&t.uid)try{const n=await(0,Pe.Og)(t.uid,e);b(n)}catch(n){console.error("Error toggling favorite:",n),alert("Error al actualizar favoritos")}})(e.id),style:{background:"transparent",border:"none",cursor:"pointer",fontSize:18,padding:2,lineHeight:1},title:n?"Quitar de favoritos":"A\xf1adir a favoritos",children:n?"\u2b50":"\u2606"})]}),(0,Le.jsx)("button",{className:"btn-primary full",style:{marginTop:0,fontSize:13,padding:"8px 16px",borderRadius:"8px",fontWeight:"600",width:"100%"},onClick:()=>(e=>s(t=>[...t,{productId:e.id,label:e.label,price:Number(e.price)||0,qty:1}]))(e),children:"A\xf1adir"})]})},e.id)})}),w&&0===$.length&&(0,Le.jsxs)("div",{style:{textAlign:"center",padding:"60px 20px",background:"linear-gradient(135deg, #fef3c7 0%, #fde68a 100%)",borderRadius:16,border:"2px dashed #fbbf24"},children:[(0,Le.jsx)("div",{style:{fontSize:64,marginBottom:16,filter:"grayscale(50%)",opacity:.6},children:"\u2b50"}),(0,Le.jsx)("div",{style:{fontSize:18,fontWeight:600,color:"#92400e",marginBottom:8},children:"No tienes productos favoritos"}),(0,Le.jsxs)("div",{style:{fontSize:14,color:"#78350f",maxWidth:300,margin:"0 auto",lineHeight:1.6},children:["Haz clic en el bot\xf3n ",(0,Le.jsx)("span",{style:{display:"inline-block",width:24,height:24,background:"#fef3c7",border:"1px solid #fbbf24",borderRadius:"50%",verticalAlign:"middle",lineHeight:"22px",fontSize:12},children:"\u2b50"})," en cualquier producto para a\xf1adirlo a tus favoritos"]})]})]})})]}),(0,Le.jsxs)("div",{children:[(0,Le.jsx)("h4",{style:{margin:"8px 0"},children:"Carrito"}),(0,Le.jsxs)("div",{style:{background:"#fafafa",padding:8,borderRadius:8},children:[0===a.length?(0,Le.jsx)("div",{className:"muted",children:"Carrito vac\xedo"}):a.map((e,t)=>(0,Le.jsxs)("div",{style:{display:"flex",flexDirection:"column",padding:"8px 0",borderBottom:"1px solid #eee",gap:8},children:[(0,Le.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[(0,Le.jsxs)("div",{style:{flex:1,minWidth:0},children:[(0,Le.jsx)("div",{style:{fontWeight:600,fontSize:14},children:e.label}),(0,Le.jsxs)("div",{style:{fontSize:12,color:"#666"},children:["\u20ac",Number(e.price).toFixed(2)]})]}),(0,Le.jsxs)("div",{style:{fontSize:16,fontWeight:700,color:"#1976d2",whiteSpace:"nowrap",marginLeft:8},children:["\u20ac",(e.qty*e.price).toFixed(2)]})]}),(0,Le.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:6},children:[(0,Le.jsx)("input",{className:"small-input",type:"number",min:"1",value:e.qty,onChange:e=>{return n=t,r={qty:Number(e.target.value)||1},s(e=>e.map((e,t)=>t===n?(0,De.A)((0,De.A)({},e),r):e));var n,r},style:{width:60,padding:4,fontSize:14}}),(0,Le.jsx)("span",{style:{fontSize:12,color:"#666"},children:"uds."}),(0,Le.jsx)("button",{className:"btn-ghost",onClick:()=>{return e=t,s(t=>t.filter((t,n)=>n!==e));var e},style:{marginLeft:"auto",padding:"4px 12px",fontSize:12},children:"Quitar"})]})]},t)),(0,Le.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:10},children:[(0,Le.jsx)("div",{style:{fontWeight:700},children:"Total:"}),(0,Le.jsxs)("div",{style:{fontSize:18,fontWeight:800},children:[K.toFixed(2)," \u20ac"]})]}),(0,Le.jsxs)("div",{style:{marginTop:12,padding:12,background:"#fff",borderRadius:8,border:"2px solid #ddd"},children:[(0,Le.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:8,cursor:"pointer"},children:[(0,Le.jsx)("input",{type:"checkbox",checked:R,onChange:e=>N(e.target.checked),style:{width:18,height:18,cursor:"pointer"}}),(0,Le.jsx)("span",{style:{fontWeight:700,color:"#dc2626",fontSize:14},children:"A NOMBRE DE LA SOCIEDAD"})]}),R&&(0,Le.jsx)("div",{style:{marginTop:10},children:(0,Le.jsx)("input",{type:"text",value:O,onChange:e=>D(e.target.value),placeholder:"Describe el evento (ej: Cena de Navidad, Comida de hermandad...)",style:{width:"100%",padding:"8px 12px",fontSize:13,border:"2px solid #fbbf24",borderRadius:6,background:"#fef9e7",color:"#92400e",fontWeight:500,boxSizing:"border-box"}})})]}),R&&(0,Le.jsxs)("div",{style:{marginTop:12,padding:8,background:"#fef3c7",borderRadius:12,border:"2px solid #f59e0b"},children:[(0,Le.jsx)("div",{style:{fontWeight:700,marginBottom:10,fontSize:15,color:"#92400e",textAlign:"center"},children:"Selecciona los socios que asistieron:"}),0===P.length?(0,Le.jsx)("div",{style:{padding:12,textAlign:"center",color:"#92400e",fontSize:13},children:"No se encontraron socios. Verifica que haya usuarios registrados (no admins)."}):(0,Le.jsxs)(Le.Fragment,{children:[(0,Le.jsx)("div",{style:{display:"grid",gridTemplateColumns:G.gridColumns,gap:G.gap,maxHeight:450,overflowY:"auto",padding:2},children:P.map(e=>{var t;const n=e.alias&&e.alias.trim()||e.name||(null===(t=e.email)||void 0===t?void 0:t.split("@")[0])||"Sin nombre";return(0,Le.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:5,padding:G.cardPadding,background:j[e.id]?"#fef9e7":"#fff",borderRadius:8,border:j[e.id]?"2px solid #f59e0b":"1px solid #e5e7eb",transition:"all 0.2s",cursor:"pointer",boxShadow:j[e.id]?"0 2px 8px rgba(245,158,11,0.2)":"0 1px 3px rgba(0,0,0,0.05)"},onClick:()=>{M(t=>{const n=!t[e.id];return n&&!F[e.id]&&U(t=>(0,De.A)((0,De.A)({},t),{},{[e.id]:1})),(0,De.A)((0,De.A)({},t),{},{[e.id]:n})})},children:[(0,Le.jsx)("input",{type:"checkbox",checked:j[e.id]||!1,onChange:t=>{M(n=>(0,De.A)((0,De.A)({},n),{},{[e.id]:t.target.checked}))},onClick:e=>e.stopPropagation(),style:{width:G.checkboxSize,height:G.checkboxSize,cursor:"pointer"}}),(0,Le.jsx)("div",{style:{fontWeight:700,fontSize:G.fontSize,color:j[e.id]?"#92400e":"#374151",textAlign:"center",wordBreak:"break-word",lineHeight:1.1,minHeight:22},children:n}),j[e.id]&&(0,Le.jsxs)("div",{style:{width:"100%",display:"flex",flexDirection:"column",alignItems:"center",gap:3},children:[(0,Le.jsx)("div",{style:{fontSize:9,color:"#92400e",fontWeight:600},children:"Asist."}),(0,Le.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:2,width:"100%"},children:[(0,Le.jsx)("button",{onClick:t=>{t.stopPropagation(),U(t=>(0,De.A)((0,De.A)({},t),{},{[e.id]:Math.max(1,(t[e.id]||1)-1)}))},style:{width:G.buttonSize,height:G.buttonSize,padding:0,fontSize:18,fontWeight:700,background:"#fff",border:"2px solid #f59e0b",borderRadius:4,color:"#92400e",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",lineHeight:1,flexShrink:0},children:"\u2212"}),(0,Le.jsx)("input",{type:"number",min:"1",value:F[e.id]||1,onChange:t=>{const n=t.target.value;U(t=>(0,De.A)((0,De.A)({},t),{},{[e.id]:""===n?1:Math.max(1,Number(n))}))},onClick:e=>e.stopPropagation(),onFocus:e=>e.target.select(),style:{flex:1,padding:"0",margin:0,fontSize:G.inputFontSize,textAlign:"center",border:"2px solid #f59e0b",borderRadius:4,fontWeight:700,color:"#92400e",background:"#fff",minWidth:0,width:"100%",boxSizing:"border-box",lineHeight:"".concat(G.buttonSize-4,"px"),height:G.buttonSize,WebkitAppearance:"none",MozAppearance:"textfield",appearance:"none"}}),(0,Le.jsx)("button",{onClick:t=>{t.stopPropagation(),U(t=>(0,De.A)((0,De.A)({},t),{},{[e.id]:(t[e.id]||1)+1}))},style:{width:G.buttonSize,height:G.buttonSize,padding:0,fontSize:18,fontWeight:700,background:"#fff",border:"2px solid #f59e0b",borderRadius:4,color:"#92400e",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",lineHeight:1,flexShrink:0},children:"+"})]})]})]},e.id)})}),(0,Le.jsxs)("div",{style:{marginTop:8,fontSize:12,color:"#92400e",fontWeight:600},children:["\u2713 Socios seleccionados: ",Object.values(j).filter(Boolean).length," de ",P.length," \u2022 ","Total asistentes: ",Object.entries(j).filter(e=>{let[t,n]=e;return n}).reduce((e,t)=>{let[n,r]=t;return e+Number(F[n]||1)},0)]})]})]}),(0,Le.jsx)("div",{style:{marginTop:10},children:(0,Le.jsx)("button",{className:"btn-primary full",onClick:async()=>{if(!q.length)return void alert("Carrito vac\xedo");if(!t||!t.uid)return void alert("No autenticado");if(R){if(0===Object.values(j).filter(Boolean).length)return void alert("Debes seleccionar al menos 1 socio")}c(!0);const e=q,n=e.reduce((e,t)=>e+t.price*t.qty,0);try{if(R){const r=Object.entries(j).filter(e=>{let[t,n]=e;return n}).map(e=>{let[t,n]=e;return t}),i=r.reduce((e,t)=>e+Number(F[t]||1),0);console.log("\ud83c\udfaf CREANDO GASTO DE SOCIEDAD:"),console.log("   Total del gasto:",n),console.log("   Socios seleccionados:",r.length),console.log("   Total de asistentes:",i);const o=n/i;console.log("   Precio por asistente:",o.toFixed(2));const a=r.map(e=>{var t;const n=P.find(t=>t.id===e),r=Number(F[e]||1),i=o*r;return console.log("   \u2192 ".concat(null===n||void 0===n?void 0:n.email,": ").concat(r," asist. = ").concat(i.toFixed(2),"\u20ac")),{uid:e,email:(null===n||void 0===n?void 0:n.email)||"",nombre:(null===n||void 0===n?void 0:n.nombre)||(null===n||void 0===n||null===(t=n.email)||void 0===t?void 0:t.split("@")[0])||"Socio",attendees:r,amount:i}}),s=O.trim()?"[SOCIEDAD - ".concat(O.trim(),"] ").concat(e.map(e=>"".concat(e.qty,"x ").concat(e.label)).join(", ")," (").concat(i," asistente").concat(i>1?"s":"",")"):"[SOCIEDAD] ".concat(e.map(e=>"".concat(e.qty,"x ").concat(e.label)).join(", ")," (").concat(i," asistente").concat(i>1?"s":"",")");await(0,Pe.Vf)({uid:t.uid,userEmail:t.email||"",item:s,category:"sociedad",amount:n,productLines:e,participantes:a,eventoTexto:O.trim()||null,totalGeneral:n,amountPerAttendee:o,totalAttendees:i,isForSociedad:!0}),console.log("\u2705 Ticket \xfanico creado con",a.length,"participantes"),alert("Gasto repartido entre ".concat(r.length," socios (").concat(i," asistentes)\nTotal: ").concat(n.toFixed(2)," \u20ac\nPor asistente: ").concat(o.toFixed(2)," \u20ac"))}else{const r={uid:t.uid,userEmail:t.email||"",productLines:e,item:e.map(e=>"".concat(e.qty,"x ").concat(e.label)).join(", "),category:"venta",amount:n};await(0,Pe.Vf)({uid:r.uid,userEmail:r.userEmail,item:r.item,category:r.category,amount:r.amount,productLines:r.productLines,isForSociedad:!1}),alert("Venta registrada correctamente")}s([]),N(!1),D(""),M({}),U({});const r=(await(0,Pe.ws)({uid:null===t||void 0===t?void 0:t.uid,isAdmin:!1})).map(e=>(0,De.A)((0,De.A)({},e),{},{createdAtStr:e.createdAt&&e.createdAt.toDate?e.createdAt.toDate().toLocaleString():e.createdAt||"",dateInput:Ue(e.date||e.createdAt)}));d(r)}catch(r){console.error("addSale error full:",r),alert("Error al guardar la venta: ".concat(r.code||""," \u2014 ").concat(r.message||r,". Revisa la consola."))}finally{c(!1)}},disabled:l,children:"Total y Guardar"})})]})]})]}),(0,Le.jsxs)("div",{children:[(0,Le.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",margin:"8px 0"},children:[(0,Le.jsx)("h4",{style:{margin:0},children:"Hist\xf3rico de tickets"}),(0,Le.jsx)("button",{className:"btn-small",onClick:()=>f(e=>!e),style:{fontSize:"12px"},children:h?"\u25bc Ocultar":"\u25b6 Mostrar"})]}),h&&(0===u.length?(0,Le.jsx)("div",{children:"No hay ventas registradas."}):(0,Le.jsxs)(Le.Fragment,{children:[(0,Le.jsx)("div",{className:"tpv-history-table",style:{overflowX:"auto"},children:(0,Le.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:14},children:[(0,Le.jsx)("thead",{children:(0,Le.jsxs)("tr",{style:{borderBottom:"2px solid #e5e7eb",backgroundColor:"#f9fafb"},children:[(0,Le.jsx)("th",{style:{textAlign:"left",padding:"12px 16px",fontSize:13,fontWeight:600,color:"#374151",whiteSpace:"nowrap"},children:"Fecha / Hora"}),(0,Le.jsx)("th",{style:{textAlign:"left",padding:"12px 16px",fontSize:13,fontWeight:600,color:"#374151"},children:"Productos"}),(0,Le.jsx)("th",{style:{textAlign:"center",padding:"12px 16px",fontSize:13,fontWeight:600,color:"#374151",whiteSpace:"nowrap"},children:"Tipo"}),(0,Le.jsx)("th",{style:{textAlign:"right",padding:"12px 16px",fontSize:13,fontWeight:600,color:"#374151",whiteSpace:"nowrap"},children:"Total"}),(0,Le.jsx)("th",{style:{textAlign:"center",padding:"12px 16px",fontSize:13,fontWeight:600,color:"#374151"},children:"Acciones"})]})}),(0,Le.jsx)("tbody",{children:u.map((e,t)=>{var n,o,a;return(0,Le.jsxs)(i.Fragment,{children:[(0,Le.jsxs)("tr",{style:{borderBottom:"1px solid #e5e7eb",backgroundColor:t%2===0?"#fff":"#f9fafb"},children:[(0,Le.jsx)("td",{style:{padding:"12px 16px",fontSize:13,color:"#374151",whiteSpace:"nowrap"},children:(0,Le.jsxs)("div",{children:[(0,Le.jsx)("div",{style:{fontWeight:500},children:(null===(n=e.createdAtStr)||void 0===n?void 0:n.split(",")[0])||""}),(0,Le.jsx)("div",{style:{fontSize:12,color:"#6b7280"},children:(null===(o=e.createdAtStr)||void 0===o||null===(a=o.split(",")[1])||void 0===a?void 0:a.trim())||""})]})}),(0,Le.jsx)("td",{style:{padding:"12px 16px",fontSize:13,color:"#374151"},children:(0,Le.jsx)("div",{children:Fe(e.productLines||[]).map((e,t)=>(0,Le.jsxs)("div",{style:{marginBottom:4},children:[(0,Le.jsxs)("span",{style:{fontWeight:500,color:"#6b7280"},children:[e.qty,"\xd7"]})," ",e.label,(0,Le.jsxs)("span",{style:{color:"#6b7280",marginLeft:8},children:["(",Number(e.price||0).toFixed(2),"\u20ac)"]})]},t))})}),(0,Le.jsx)("td",{style:{padding:"12px 16px",textAlign:"center"},children:"sociedad"===e.category?(0,Le.jsxs)("span",{style:{display:"inline-block",padding:"4px 8px",borderRadius:12,fontSize:11,fontWeight:600,backgroundColor:"#fff3cd",color:"#856404",border:"1px solid #ffc107",whiteSpace:"nowrap"},children:["\ud83c\udfdb\ufe0f Sociedad",e.attendees&&(0,Le.jsxs)("div",{style:{fontSize:10},children:["(",e.attendees," asist.)"]})]}):(0,Le.jsx)("span",{style:{display:"inline-block",padding:"4px 8px",borderRadius:12,fontSize:11,fontWeight:600,backgroundColor:"#e0e7ff",color:"#3730a3",whiteSpace:"nowrap"},children:"Personal"})}),(0,Le.jsxs)("td",{style:{padding:"12px 16px",fontSize:16,fontWeight:700,color:"#059669",textAlign:"right",whiteSpace:"nowrap"},children:[Number(e.amount||0).toFixed(2),"\u20ac"]}),(0,Le.jsx)("td",{style:{padding:"12px 16px",textAlign:"center"},children:(0,Le.jsxs)("div",{style:{display:"flex",gap:8,justifyContent:"center"},children:[(0,Le.jsx)("button",{className:"btn-small",onClick:()=>X(e),children:"\u270f\ufe0f"}),(0,Le.jsx)("button",{className:"btn-ghost",onClick:()=>Z(e.id),children:"\ud83d\uddd1\ufe0f"})]})})]}),p===e.id&&(0,Le.jsx)("tr",{style:{backgroundColor:"#f8fafc",borderBottom:"2px solid #e5e7eb"},children:(0,Le.jsx)("td",{colSpan:5,style:{padding:"20px 16px"},children:(0,Le.jsxs)("div",{style:{backgroundColor:"#fff",borderRadius:8,padding:20,border:"2px solid #3b82f6"},children:[(0,Le.jsx)("h4",{style:{margin:"0 0 16px 0",fontSize:16,fontWeight:600,color:"#111827"},children:"\u270f\ufe0f Editando ticket"}),(0,Le.jsxs)("div",{style:{marginBottom:16},children:[(0,Le.jsx)("label",{style:{display:"block",fontSize:13,fontWeight:500,marginBottom:4,color:"#374151"},children:"Fecha y hora"}),(0,Le.jsx)("input",{type:"datetime-local",value:m.dateInput,onChange:e=>v(t=>(0,De.A)((0,De.A)({},t),{},{dateInput:e.target.value})),className:"full-input"})]}),(0,Le.jsxs)("div",{style:{marginBottom:16},children:[(0,Le.jsx)("label",{style:{display:"block",fontSize:13,fontWeight:500,marginBottom:4,color:"#374151"},children:"Tipo de gasto"}),(0,Le.jsxs)("select",{value:m.category,onChange:e=>v(t=>(0,De.A)((0,De.A)({},t),{},{category:e.target.value})),className:"full-input",children:[(0,Le.jsx)("option",{value:"venta",children:"Personal"}),(0,Le.jsx)("option",{value:"sociedad",children:"Sociedad"})]})]}),"sociedad"===m.category&&(0,Le.jsxs)(Le.Fragment,{children:[(0,Le.jsxs)("div",{style:{marginBottom:16},children:[(0,Le.jsx)("label",{style:{display:"block",fontSize:13,fontWeight:500,marginBottom:4,color:"#374151"},children:"Evento (opcional)"}),(0,Le.jsx)("input",{type:"text",placeholder:"Nombre del evento",value:m.eventoTexto,onChange:e=>v(t=>(0,De.A)((0,De.A)({},t),{},{eventoTexto:e.target.value})),className:"full-input"})]}),(0,Le.jsxs)("div",{style:{marginBottom:16},children:[(0,Le.jsx)("label",{style:{display:"block",fontSize:13,fontWeight:500,marginBottom:8,color:"#374151"},children:"Socios participantes"}),(0,Le.jsx)("div",{style:{maxHeight:200,overflowY:"auto",border:"1px solid #d1d5db",borderRadius:6,padding:12,backgroundColor:"#f9fafb"},children:P.map(e=>{var t,n,r;return(0,Le.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:12,marginBottom:8,padding:8,backgroundColor:"#fff",borderRadius:6,border:"1px solid #e5e7eb"},children:[(0,Le.jsx)("input",{type:"checkbox",checked:(null===(t=m.selectedSocios)||void 0===t?void 0:t[e.id])||!1,onChange:t=>{const n=(0,De.A)((0,De.A)({},m.selectedSocios),{},{[e.id]:t.target.checked}),r=(0,De.A)({},m.attendeesCount);t.target.checked&&!r[e.id]&&(r[e.id]=1),v(e=>(0,De.A)((0,De.A)({},e),{},{selectedSocios:n,attendeesCount:r}))},style:{cursor:"pointer"}}),(0,Le.jsx)("span",{style:{flex:1,fontSize:13,color:"#111827"},children:e.nombre||e.email}),(null===(n=m.selectedSocios)||void 0===n?void 0:n[e.id])&&(0,Le.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:4},children:[(0,Le.jsx)("span",{style:{fontSize:12,color:"#6b7280"},children:"Asist.:"}),(0,Le.jsx)("input",{type:"number",min:"1",value:(null===(r=m.attendeesCount)||void 0===r?void 0:r[e.id])||1,onChange:t=>{const n=(0,De.A)((0,De.A)({},m.attendeesCount),{},{[e.id]:Number(t.target.value)||1});v(e=>(0,De.A)((0,De.A)({},e),{},{attendeesCount:n}))},style:{width:60,padding:"4px 8px",fontSize:13,border:"1px solid #d1d5db",borderRadius:4}})]})]},e.id)})})]})]}),(0,Le.jsxs)("div",{style:{marginBottom:16},children:[(0,Le.jsxs)("div",{style:{marginBottom:12},children:[(0,Le.jsx)("label",{style:{fontSize:13,fontWeight:500,color:"#374151",display:"block",marginBottom:8},children:"A\xf1adir productos"}),(0,Le.jsxs)("div",{style:{display:"flex",gap:8,alignItems:"center",marginBottom:8},children:[(0,Le.jsxs)("select",{value:T,onChange:e=>{A(e.target.value),k("")},style:{minWidth:200,padding:"8px 12px",fontSize:14,border:"1px solid #d1d5db",borderRadius:6,backgroundColor:"#fff",cursor:"pointer"},children:[(0,Le.jsx)("option",{value:"",children:"Seleccionar categor\xeda..."}),(()=>{const e=new Set;return r.forEach(t=>{const n=t.category||"Sin categor\xeda";e.add(n)}),Array.from(e).sort((e,t)=>e.localeCompare(t)).map(e=>(0,Le.jsx)("option",{value:e,children:e},e))})()]}),(0,Le.jsxs)("select",{value:_,onChange:e=>k(e.target.value),disabled:!T,style:{minWidth:300,flex:1,padding:"8px 12px",fontSize:14,border:"1px solid #d1d5db",borderRadius:6,backgroundColor:T?"#fff":"#f3f4f6",cursor:T?"pointer":"not-allowed"},children:[(0,Le.jsx)("option",{value:"",children:"Seleccionar producto..."}),T&&r.filter(e=>(e.category||"Sin categor\xeda")===T).sort((e,t)=>(e.label||"").localeCompare(t.label||"")).map(e=>(0,Le.jsxs)("option",{value:e.id,children:[e.label||"Sin nombre"," - ",Number(e.price||0).toFixed(2),"\u20ac"]},e.id))]}),(0,Le.jsx)("button",{onClick:()=>{if(_){const e=r.find(e=>e.id===_);if(e){const t=[...m.productLines||[],{label:e.label,price:Number(e.price||0),qty:1,productId:e.id}];v((0,De.A)((0,De.A)({},m),{},{productLines:t})),k("")}}},disabled:!_,style:{padding:"8px 16px",fontSize:13,fontWeight:600,color:"#fff",backgroundColor:_?"#10b981":"#9ca3af",border:"none",borderRadius:6,cursor:_?"pointer":"not-allowed",whiteSpace:"nowrap"},children:"+ A\xf1adir"}),(0,Le.jsx)("button",{onClick:ee,style:{padding:"8px 16px",fontSize:13,fontWeight:600,color:"#fff",backgroundColor:"#6366f1",border:"none",borderRadius:6,cursor:"pointer",whiteSpace:"nowrap"},children:"+ Manual"})]})]}),(0,Le.jsx)("div",{children:(0,Le.jsx)("label",{style:{fontSize:13,fontWeight:500,color:"#374151",display:"block",marginBottom:8},children:"Productos en el ticket"})}),(m.productLines||[]).map((e,t)=>(0,Le.jsxs)("div",{style:{display:"flex",gap:8,alignItems:"center",marginBottom:8},children:[(0,Le.jsx)("input",{className:"small-input",placeholder:"Producto",value:e.label,onChange:e=>ne(t,{label:e.target.value}),style:{flex:1}}),(0,Le.jsx)("input",{className:"small-input",type:"number",step:"0.01",placeholder:"Precio",value:e.price,onChange:e=>ne(t,{price:Number(e.target.value)||0}),style:{width:100}}),(0,Le.jsx)("input",{className:"small-input",type:"number",placeholder:"Cant.",value:e.qty,min:"1",onChange:e=>ne(t,{qty:Number(e.target.value)||1}),style:{width:70}}),(0,Le.jsx)("button",{onClick:()=>te(t),style:{padding:"8px 12px",fontSize:13,fontWeight:600,color:"#fff",backgroundColor:"#ef4444",border:"none",borderRadius:6,cursor:"pointer"},children:"\ud83d\uddd1\ufe0f"})]},t)),(0,Le.jsxs)("div",{style:{marginTop:12,paddingTop:12,borderTop:"2px solid #e5e7eb",fontSize:16,fontWeight:600,color:"#059669",textAlign:"right"},children:["Total: ",(m.productLines||[]).reduce((e,t)=>e+Number(t.price||0)*Number(t.qty||1),0).toFixed(2),"\u20ac"]})]}),(0,Le.jsxs)("div",{style:{display:"flex",gap:12,justifyContent:"flex-end"},children:[(0,Le.jsx)("button",{onClick:Q,style:{padding:"10px 20px",fontSize:14,fontWeight:600,color:"#374151",backgroundColor:"#f3f4f6",border:"none",borderRadius:8,cursor:"pointer"},children:"Cancelar"}),(0,Le.jsx)("button",{onClick:J,style:{padding:"10px 20px",fontSize:14,fontWeight:600,color:"#fff",backgroundColor:"#3b82f6",border:"none",borderRadius:8,cursor:"pointer"},children:"Guardar cambios"})]})]})})})]},e.id)})})]})}),(0,Le.jsx)("div",{className:"tpv-history-mobile",children:u.map(e=>{var t,n,o;const a=Fe(e.productLines||[]),s=p===e.id,l=z[e.id]||s,c=e.isForSociedad||"sociedad"===e.category||e.participantes&&e.participantes.length>0;return(0,Le.jsxs)(i.Fragment,{children:[(0,Le.jsxs)("div",{onClick:()=>{s||B(t=>(0,De.A)((0,De.A)({},t),{},{[e.id]:!t[e.id]}))},style:{background:"#fff",border:s?"2px solid #3b82f6":"1px solid #e5e7eb",borderRadius:10,padding:12,marginBottom:10,boxShadow:s?"0 4px 12px rgba(59,130,246,0.2)":"0 1px 3px rgba(0,0,0,0.08)",cursor:s?"default":"pointer",transition:"all 0.2s ease"},children:[(0,Le.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:l?8:0},children:[(0,Le.jsxs)("div",{style:{flex:1},children:[(0,Le.jsx)("div",{style:{fontSize:12,fontWeight:600,color:"#374151",marginBottom:2},children:(null===(t=e.createdAtStr)||void 0===t?void 0:t.split(",")[0])||""}),(0,Le.jsx)("div",{style:{fontSize:11,color:"#9ca3af"},children:(null===(n=e.createdAtStr)||void 0===n||null===(o=n.split(",")[1])||void 0===o?void 0:o.trim())||""})]}),!l&&(0,Le.jsx)("div",{style:{fontSize:11,fontWeight:700,color:c?"#92400e":"#2563eb",background:c?"#fef3c7":"#dbeafe",padding:"3px 8px",borderRadius:4,display:"flex",alignItems:"center",justifyContent:"center",minWidth:24,height:22,marginLeft:"auto",marginRight:"auto"},children:c?"S":"P"}),(0,Le.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"flex-end",gap:8,flex:1},children:[(0,Le.jsxs)("div",{style:{fontSize:16,fontWeight:700,color:"#059669"},children:[Number(e.amount||0).toFixed(2),"\u20ac"]}),!s&&(0,Le.jsx)("div",{style:{fontSize:18,color:"#9ca3af",transition:"transform 0.2s ease",transform:l?"rotate(180deg)":"rotate(0deg)"},children:"\u25bc"})]})]}),l&&(0,Le.jsxs)(Le.Fragment,{children:[(0,Le.jsx)("div",{style:{marginBottom:8},children:a.map((e,t)=>(0,Le.jsxs)("div",{style:{fontSize:11,color:"#374151",marginBottom:2},children:[(0,Le.jsxs)("span",{style:{fontWeight:600},children:[e.qty,"\xd7"]})," ",e.label,(0,Le.jsxs)("span",{style:{color:"#6b7280"},children:[" (",Number(e.price||0).toFixed(2),"\u20ac)"]})]},t))}),(0,Le.jsx)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:8},children:"sociedad"===e.category?(0,Le.jsx)("span",{style:{padding:"2px 6px",borderRadius:6,fontSize:9,fontWeight:600,backgroundColor:"#fff3cd",color:"#856404"},children:"\ud83c\udfdb\ufe0f Sociedad"}):(0,Le.jsx)("span",{style:{padding:"2px 6px",borderRadius:6,fontSize:9,fontWeight:600,backgroundColor:"#e0e7ff",color:"#3730a3"},children:"Personal"})}),!s&&(0,Le.jsxs)("div",{style:{display:"flex",gap:6},onClick:e=>e.stopPropagation(),children:[(0,Le.jsx)("button",{className:"btn-small",onClick:()=>X(e),style:{flex:1,fontSize:11},children:"\u270f\ufe0f Editar"}),(0,Le.jsx)("button",{className:"btn-ghost",onClick:()=>Z(e.id),style:{flex:1,fontSize:11},children:"\ud83d\uddd1\ufe0f Eliminar"})]})]})]}),s&&(0,Le.jsxs)("div",{style:{background:"#f8fafc",border:"2px solid #3b82f6",borderRadius:10,padding:16,marginTop:-10,marginBottom:16},children:[(0,Le.jsx)("h4",{style:{margin:"0 0 12px 0",fontSize:14,fontWeight:600,color:"#111827"},children:"\u270f\ufe0f Editando ticket"}),(0,Le.jsxs)("div",{style:{marginBottom:12},children:[(0,Le.jsx)("label",{style:{display:"block",fontSize:12,fontWeight:500,marginBottom:4,color:"#374151"},children:"Fecha y hora"}),(0,Le.jsx)("input",{type:"datetime-local",value:m.dateInput,onChange:e=>v(t=>(0,De.A)((0,De.A)({},t),{},{dateInput:e.target.value})),className:"full-input",style:{fontSize:14}})]}),(0,Le.jsxs)("div",{style:{marginBottom:12},children:[(0,Le.jsx)("label",{style:{display:"block",fontSize:12,fontWeight:500,marginBottom:4,color:"#374151"},children:"Tipo de gasto"}),(0,Le.jsxs)("select",{value:m.category,onChange:e=>v(t=>(0,De.A)((0,De.A)({},t),{},{category:e.target.value})),className:"full-input",style:{fontSize:14},children:[(0,Le.jsx)("option",{value:"venta",children:"Personal"}),(0,Le.jsx)("option",{value:"sociedad",children:"Sociedad"})]})]}),"sociedad"===m.category&&(0,Le.jsxs)(Le.Fragment,{children:[(0,Le.jsxs)("div",{style:{marginBottom:12},children:[(0,Le.jsx)("label",{style:{display:"block",fontSize:12,fontWeight:500,marginBottom:4,color:"#374151"},children:"Evento"}),(0,Le.jsx)("input",{type:"text",value:m.eventoTexto||"",onChange:e=>v(t=>(0,De.A)((0,De.A)({},t),{},{eventoTexto:e.target.value})),className:"full-input",placeholder:"Nombre del evento",style:{fontSize:14}})]}),(0,Le.jsxs)("div",{style:{marginBottom:12},children:[(0,Le.jsx)("label",{style:{display:"block",fontSize:12,fontWeight:600,marginBottom:8,color:"#374151"},children:"Participantes"}),(0,Le.jsx)("div",{style:{maxHeight:200,overflowY:"auto",border:"1px solid #e5e7eb",borderRadius:8,padding:8,background:"#fff"},children:P.map(e=>(0,Le.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:8,padding:6,background:m.selectedSocios[e.id]?"#eff6ff":"transparent",borderRadius:6},children:[(0,Le.jsx)("input",{type:"checkbox",checked:m.selectedSocios[e.id]||!1,onChange:t=>{v(n=>(0,De.A)((0,De.A)({},n),{},{selectedSocios:(0,De.A)((0,De.A)({},n.selectedSocios),{},{[e.id]:t.target.checked})}))},style:{width:16,height:16}}),(0,Le.jsx)("label",{style:{flex:1,fontSize:12,color:"#374151",fontWeight:m.selectedSocios[e.id]?500:400},children:e.nombre||e.email}),m.selectedSocios[e.id]&&(0,Le.jsx)("input",{type:"number",min:"1",value:m.attendeesCount[e.id]||1,onChange:t=>{const n=Math.max(1,parseInt(t.target.value)||1);v(t=>(0,De.A)((0,De.A)({},t),{},{attendeesCount:(0,De.A)((0,De.A)({},t.attendeesCount),{},{[e.id]:n})}))},style:{width:50,padding:4,fontSize:12,border:"1px solid #d1d5db",borderRadius:4,textAlign:"center"}})]},e.id))})]})]}),(0,Le.jsxs)("div",{style:{marginBottom:12},children:[(0,Le.jsx)("label",{style:{display:"block",fontSize:12,fontWeight:600,marginBottom:8,color:"#374151"},children:"A\xf1adir productos"}),(0,Le.jsx)("div",{style:{marginBottom:8},children:(0,Le.jsxs)("select",{value:T,onChange:e=>{A(e.target.value),k("")},className:"full-input",style:{fontSize:13},children:[(0,Le.jsx)("option",{value:"",children:"Seleccionar categor\xeda..."}),(()=>{const e=new Set;return r.forEach(t=>{const n=t.category||"Sin categor\xeda";e.add(n)}),Array.from(e).sort((e,t)=>e.localeCompare(t)).map(e=>(0,Le.jsx)("option",{value:e,children:e},e))})()]})}),(0,Le.jsx)("div",{style:{marginBottom:8},children:(0,Le.jsxs)("select",{value:_,onChange:e=>k(e.target.value),disabled:!T,className:"full-input",style:{fontSize:13,backgroundColor:T?"#fff":"#f3f4f6",cursor:T?"pointer":"not-allowed"},children:[(0,Le.jsx)("option",{value:"",children:"Seleccionar producto..."}),T&&r.filter(e=>(e.category||"Sin categor\xeda")===T).sort((e,t)=>(e.label||"").localeCompare(t.label||"")).map(e=>(0,Le.jsxs)("option",{value:e.id,children:[e.label||"Sin nombre"," - ",Number(e.price||0).toFixed(2),"\u20ac"]},e.id))]})}),(0,Le.jsxs)("div",{style:{display:"flex",gap:6,marginBottom:12},children:[(0,Le.jsx)("button",{onClick:()=>{if(_){const e=r.find(e=>e.id===_);if(e){const t=[...m.productLines||[],{label:e.label,price:Number(e.price||0),qty:1,productId:e.id}];v((0,De.A)((0,De.A)({},m),{},{productLines:t})),k("")}}},disabled:!_,style:{flex:1,padding:10,fontSize:12,fontWeight:600,color:"#fff",backgroundColor:_?"#10b981":"#9ca3af",border:"none",borderRadius:6,cursor:_?"pointer":"not-allowed"},children:"\u2705 A\xf1adir producto"}),(0,Le.jsx)("button",{onClick:ee,style:{flex:1,padding:10,fontSize:12,fontWeight:600,color:"#fff",backgroundColor:"#6366f1",border:"none",borderRadius:6,cursor:"pointer"},children:"\u270f\ufe0f Manual"})]})]}),(0,Le.jsxs)("div",{style:{marginBottom:12},children:[(0,Le.jsx)("label",{style:{display:"block",fontSize:12,fontWeight:600,marginBottom:8,color:"#374151"},children:"Productos en el ticket"}),(m.productLines||[]).map((e,t)=>(0,Le.jsxs)("div",{style:{display:"flex",gap:6,marginBottom:8,alignItems:"center",background:"#fff",padding:8,borderRadius:6,border:"1px solid #e5e7eb"},children:[(0,Le.jsx)("input",{type:"text",value:e.label||"",onChange:e=>ne(t,{label:e.target.value}),placeholder:"Producto",style:{flex:2,padding:6,fontSize:12,border:"1px solid #d1d5db",borderRadius:4}}),(0,Le.jsx)("input",{type:"number",value:e.qty||1,onChange:e=>ne(t,{qty:parseInt(e.target.value)||1}),min:"1",style:{width:40,padding:6,fontSize:12,border:"1px solid #d1d5db",borderRadius:4,textAlign:"center"}}),(0,Le.jsx)("input",{type:"number",value:e.price||0,onChange:e=>ne(t,{price:parseFloat(e.target.value)||0}),step:"0.01",style:{width:60,padding:6,fontSize:12,border:"1px solid #d1d5db",borderRadius:4}}),(0,Le.jsx)("button",{onClick:()=>te(t),style:{padding:4,fontSize:14,background:"#fee",border:"1px solid #fcc",borderRadius:4,cursor:"pointer",width:30,height:30},children:"\ud83d\uddd1\ufe0f"})]},t)),(0,Le.jsxs)("div",{style:{marginTop:12,paddingTop:12,borderTop:"2px solid #e5e7eb",fontSize:15,fontWeight:700,color:"#059669",textAlign:"right"},children:["Total: ",(m.productLines||[]).reduce((e,t)=>e+Number(t.price||0)*Number(t.qty||1),0).toFixed(2),"\u20ac"]})]}),(0,Le.jsxs)("div",{style:{display:"flex",gap:8,marginTop:16},children:[(0,Le.jsx)("button",{onClick:Q,style:{flex:1,padding:10,fontSize:13,fontWeight:600,color:"#374151",backgroundColor:"#f3f4f6",border:"none",borderRadius:8,cursor:"pointer"},children:"Cancelar"}),(0,Le.jsx)("button",{onClick:J,style:{flex:1,padding:10,fontSize:13,fontWeight:600,color:"#fff",backgroundColor:"#3b82f6",border:"none",borderRadius:8,cursor:"pointer"},children:"\ud83d\udcbe Guardar"})]})]})]},e.id)})})]}))]})]})})}const We=["RESERVAR MESA","CUMPLEA\xd1OS MES","FIESTAS DE ESTELLA","FERIAS","LOTERIA NAVIDAD","COTILLON DE REYES"];function Ve(e){let{user:t}=e;const[n,r]=(0,i.useState)(""),[o,a]=(0,i.useState)([]),[s,l]=(0,i.useState)([]),[c,u]=(0,i.useState)(!0),[d,h]=(0,i.useState)("");re();(0,i.useEffect)(()=>{null!==t&&void 0!==t&&t.uid&&f()},[t]),(0,i.useEffect)(()=>{if(n){let e=o.filter(e=>e.eventType===n);if("FIESTAS DE ESTELLA"===n&&d){let t="";t="VIERNES DE GIGANTES"===d?"Viernes":d.charAt(0).toUpperCase()+d.slice(1).toLowerCase(),e=e.filter(e=>e.diaSemana===t)}l(e)}else l([])},[n,o,d]);const f=async()=>{u(!0);try{const e=await(0,Pe.is)();a(e)}catch(e){console.error("Error cargando inscripciones:",e)}finally{u(!1)}},p=(()=>{if(!s.length)return null;let e=0,t=0,n=0,r=0,i=s.length;s.forEach(i=>{e+=i.adultos||0,t+=i.ninos||0,n+=i.comensales||0,r+=i.decimos||0});return{totalInscripciones:i,totalAdultos:e,totalNinos:t,totalGeneral:e+t,totalComensales:n,totalDecimos:r}})();return t?(0,Le.jsxs)("div",{style:{padding:20,maxWidth:1e3,margin:"0 auto"},children:[(0,Le.jsx)("h2",{style:{marginBottom:24,fontSize:28,fontWeight:700,color:"#111827"},children:"\ud83d\udcca Listados de Eventos"}),(0,Le.jsxs)("div",{style:{background:"#fff",padding:24,borderRadius:16,boxShadow:"0 2px 8px rgba(0,0,0,0.1)",marginBottom:32},children:[(0,Le.jsx)("label",{style:{display:"block",marginBottom:12,fontWeight:600,fontSize:16},children:"Selecciona un evento:"}),(0,Le.jsxs)("select",{value:n,onChange:e=>r(e.target.value),style:{width:"100%",padding:"14px",fontSize:16,border:"2px solid #d1d5db",borderRadius:8,background:"#fff",fontWeight:600},children:[(0,Le.jsx)("option",{value:"",children:"-- Selecciona un evento --"}),We.map(e=>(0,Le.jsx)("option",{value:e,children:e},e))]})]}),"FIESTAS DE ESTELLA"===n&&(0,Le.jsxs)("div",{style:{background:"#fff",padding:24,borderRadius:16,boxShadow:"0 2px 8px rgba(0,0,0,0.1)",marginBottom:32},children:[(0,Le.jsx)("label",{style:{display:"block",marginBottom:16,fontWeight:600,fontSize:16,color:"#374151"},children:"Selecciona el d\xeda:"}),(0,Le.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:12},children:["VIERNES DE GIGANTES","S\xc1BADO","DOMINGO","LUNES","MARTES","MI\xc9RCOLES","JUEVES"].map(e=>(0,Le.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:10,padding:"12px 16px",background:d===e?"linear-gradient(135deg, #1976d2 0%, #1565c0 100%)":"#f9fafb",color:d===e?"#fff":"#374151",borderRadius:8,cursor:"pointer",fontWeight:600,fontSize:14,border:"2px solid ".concat(d===e?"#1976d2":"#e5e7eb"),transition:"all 0.2s ease"},onMouseEnter:t=>{d!==e&&(t.currentTarget.style.background="#f3f4f6",t.currentTarget.style.borderColor="#1976d2")},onMouseLeave:t=>{d!==e&&(t.currentTarget.style.background="#f9fafb",t.currentTarget.style.borderColor="#e5e7eb")},children:[(0,Le.jsx)("input",{type:"radio",name:"fiestaDay",value:e,checked:d===e,onChange:e=>h(e.target.value),style:{width:18,height:18,cursor:"pointer"}}),e]},e))}),d&&(0,Le.jsx)("button",{onClick:()=>h(""),style:{marginTop:16,padding:"10px 20px",background:"#ef4444",color:"#fff",border:"none",borderRadius:8,cursor:"pointer",fontSize:14,fontWeight:600},children:"Ver todos los d\xedas"}),d&&p&&(0,Le.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:16,marginTop:24},children:[(0,Le.jsxs)("div",{style:{background:"linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)",color:"#fff",padding:20,borderRadius:12,boxShadow:"0 4px 12px rgba(59, 130, 246, 0.3)",textAlign:"center"},children:[(0,Le.jsx)("div",{style:{fontSize:13,opacity:.9,marginBottom:6,fontWeight:600},children:"Inscritos"}),(0,Le.jsx)("div",{style:{fontSize:32,fontWeight:700},children:p.totalInscripciones})]}),(0,Le.jsxs)("div",{style:{background:"linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%)",color:"#fff",padding:20,borderRadius:12,boxShadow:"0 4px 12px rgba(139, 92, 246, 0.3)",textAlign:"center"},children:[(0,Le.jsx)("div",{style:{fontSize:13,opacity:.9,marginBottom:6,fontWeight:600},children:"\ud83d\udc65 Adultos"}),(0,Le.jsx)("div",{style:{fontSize:32,fontWeight:700},children:p.totalAdultos})]}),(0,Le.jsxs)("div",{style:{background:"linear-gradient(135deg, #ec4899 0%, #db2777 100%)",color:"#fff",padding:20,borderRadius:12,boxShadow:"0 4px 12px rgba(236, 72, 153, 0.3)",textAlign:"center"},children:[(0,Le.jsx)("div",{style:{fontSize:13,opacity:.9,marginBottom:6,fontWeight:600},children:"\ud83d\udc76 Ni\xf1os"}),(0,Le.jsx)("div",{style:{fontSize:32,fontWeight:700},children:p.totalNinos})]}),(0,Le.jsxs)("div",{style:{background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",color:"#fff",padding:20,borderRadius:12,boxShadow:"0 4px 12px rgba(16, 185, 129, 0.3)",textAlign:"center",border:"3px solid rgba(255,255,255,0.3)"},children:[(0,Le.jsx)("div",{style:{fontSize:13,opacity:.9,marginBottom:6,fontWeight:700},children:"TOTAL"}),(0,Le.jsx)("div",{style:{fontSize:32,fontWeight:700},children:p.totalGeneral})]})]})]}),c&&(0,Le.jsx)("div",{style:{textAlign:"center",padding:40,color:"#6b7280"},children:"Cargando datos..."}),!c&&n&&p&&(0,Le.jsxs)(Le.Fragment,{children:["RESERVAR MESA"!==n&&"CUMPLEA\xd1OS MES"!==n&&"FIESTAS DE ESTELLA"!==n&&"LOTERIA NAVIDAD"!==n&&"COTILLON DE REYES"!==n&&(0,Le.jsxs)("div",{style:{background:"linear-gradient(135deg, #1976d2 0%, #1565c0 100%)",padding:24,borderRadius:16,boxShadow:"0 4px 12px rgba(25, 118, 210, 0.3)",marginBottom:32,color:"#fff"},children:[(0,Le.jsxs)("h3",{style:{margin:"0 0 20px 0",fontSize:22,fontWeight:700},children:["\ud83d\udcc8 Resumen: ",n]}),(0,Le.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:16},children:[(0,Le.jsxs)("div",{style:{background:"rgba(255,255,255,0.15)",padding:16,borderRadius:12,textAlign:"center"},children:[(0,Le.jsx)("div",{style:{fontSize:32,fontWeight:700,marginBottom:4},children:p.totalInscripciones}),(0,Le.jsx)("div",{style:{fontSize:13,opacity:.9},children:"Inscripciones"})]}),"LOTERIA NAVIDAD"!==n&&"RESERVAR MESA"!==n&&(0,Le.jsxs)(Le.Fragment,{children:[(0,Le.jsxs)("div",{style:{background:"rgba(255,255,255,0.15)",padding:16,borderRadius:12,textAlign:"center"},children:[(0,Le.jsx)("div",{style:{fontSize:32,fontWeight:700,marginBottom:4},children:p.totalAdultos}),(0,Le.jsx)("div",{style:{fontSize:13,opacity:.9},children:"\ud83d\udc65 Adultos"})]}),(0,Le.jsxs)("div",{style:{background:"rgba(255,255,255,0.15)",padding:16,borderRadius:12,textAlign:"center"},children:[(0,Le.jsx)("div",{style:{fontSize:32,fontWeight:700,marginBottom:4},children:p.totalNinos}),(0,Le.jsx)("div",{style:{fontSize:13,opacity:.9},children:"\ud83d\udc76 Ni\xf1os"})]}),(0,Le.jsxs)("div",{style:{background:"rgba(255,255,255,0.2)",padding:16,borderRadius:12,textAlign:"center",border:"2px solid rgba(255,255,255,0.3)"},children:[(0,Le.jsx)("div",{style:{fontSize:32,fontWeight:700,marginBottom:4},children:p.totalGeneral}),(0,Le.jsx)("div",{style:{fontSize:13,opacity:.9,fontWeight:600},children:"TOTAL PERSONAS"})]})]}),"RESERVAR MESA"===n&&(0,Le.jsxs)("div",{style:{background:"rgba(255,255,255,0.2)",padding:16,borderRadius:12,textAlign:"center",border:"2px solid rgba(255,255,255,0.3)"},children:[(0,Le.jsx)("div",{style:{fontSize:32,fontWeight:700,marginBottom:4},children:p.totalComensales}),(0,Le.jsx)("div",{style:{fontSize:13,opacity:.9,fontWeight:600},children:"\ud83c\udf7d\ufe0f TOTAL COMENSALES"})]}),"LOTERIA NAVIDAD"===n&&(0,Le.jsxs)("div",{style:{background:"rgba(255,255,255,0.2)",padding:16,borderRadius:12,textAlign:"center",border:"2px solid rgba(255,255,255,0.3)"},children:[(0,Le.jsx)("div",{style:{fontSize:32,fontWeight:700,marginBottom:4},children:p.totalDecimos}),(0,Le.jsx)("div",{style:{fontSize:13,opacity:.9,fontWeight:600},children:"\ud83c\udf9f\ufe0f TOTAL D\xc9CIMOS"})]})]})]}),(0,Le.jsxs)("div",{style:{background:"#fff",padding:24,borderRadius:16,boxShadow:"0 2px 8px rgba(0,0,0,0.1)",overflowX:"auto"},children:["RESERVAR MESA"!==n&&"CUMPLEA\xd1OS MES"!==n&&"LOTERIA NAVIDAD"!==n&&"COTILLON DE REYES"!==n&&(0,Le.jsxs)("h3",{style:{margin:"0 0 20px 0",fontSize:20,fontWeight:600,color:"#374151"},children:["\ud83d\udc65 Lista de inscritos (",s.length,")"]}),(0,Le.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:14},children:[(0,Le.jsx)("thead",{children:(0,Le.jsxs)("tr",{style:{background:"linear-gradient(135deg, #1976d2 0%, #1565c0 100%)",color:"#fff"},children:[(0,Le.jsx)("th",{style:{padding:"12px 16px",textAlign:"left",fontWeight:600,borderRadius:"8px 0 0 0"},children:"#"}),(0,Le.jsx)("th",{style:{padding:"12px 16px",textAlign:"left",fontWeight:600},children:"Usuario"}),(0,Le.jsx)("th",{style:{padding:"12px 16px",textAlign:"left",fontWeight:600},children:"Fecha Inscripci\xf3n"}),"RESERVAR MESA"===n&&(0,Le.jsxs)(Le.Fragment,{children:[(0,Le.jsx)("th",{style:{padding:"12px 16px",textAlign:"left",fontWeight:600},children:"Fecha"}),(0,Le.jsx)("th",{style:{padding:"12px 16px",textAlign:"left",fontWeight:600},children:"Hora"}),(0,Le.jsx)("th",{style:{padding:"12px 16px",textAlign:"center",fontWeight:600},children:"Comensales"}),(0,Le.jsx)("th",{style:{padding:"12px 16px",textAlign:"left",fontWeight:600,borderRadius:"0 8px 0 0"},children:"Observaciones"})]}),["CUMPLEA\xd1OS MES","FIESTAS DE ESTELLA","FERIAS","COTILLON DE REYES"].includes(n)&&(0,Le.jsxs)(Le.Fragment,{children:["FIESTAS DE ESTELLA"===n&&(0,Le.jsxs)(Le.Fragment,{children:[(0,Le.jsx)("th",{style:{padding:"12px 16px",textAlign:"left",fontWeight:600},children:"Fecha"}),(0,Le.jsx)("th",{style:{padding:"12px 16px",textAlign:"left",fontWeight:600},children:"D\xeda"})]}),(0,Le.jsx)("th",{style:{padding:"12px 16px",textAlign:"center",fontWeight:600},children:"Adultos"}),(0,Le.jsx)("th",{style:{padding:"12px 16px",textAlign:"center",fontWeight:600,borderRadius:"FIESTAS DE ESTELLA"===n?"0":"0 8px 0 0"},children:"Ni\xf1os"}),"FIESTAS DE ESTELLA"===n&&(0,Le.jsx)("th",{style:{padding:"12px 16px",textAlign:"center",fontWeight:600,borderRadius:"0 8px 0 0"},children:"Total"})]}),"LOTERIA NAVIDAD"===n&&(0,Le.jsx)("th",{style:{padding:"12px 16px",textAlign:"center",fontWeight:600,borderRadius:"0 8px 0 0"},children:"D\xe9cimos"})]})}),(0,Le.jsx)("tbody",{children:s.map((e,t)=>{var r;return(0,Le.jsxs)("tr",{style:{background:t%2===0?"#f9fafb":"#fff",borderBottom:"1px solid #e5e7eb"},children:[(0,Le.jsx)("td",{style:{padding:"12px 16px",fontWeight:600,color:"#1976d2"},children:t+1}),(0,Le.jsx)("td",{style:{padding:"12px 16px",fontWeight:500,color:"#111827"},children:e.userName||e.userEmail}),(0,Le.jsx)("td",{style:{padding:"12px 16px",color:"#6b7280"},children:null!==(r=e.createdAt)&&void 0!==r&&r.toDate?new Date(e.createdAt.toDate()).toLocaleString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A"}),"RESERVAR MESA"===n&&(0,Le.jsxs)(Le.Fragment,{children:[(0,Le.jsx)("td",{style:{padding:"12px 16px",color:"#374151"},children:e.fecha||"-"}),(0,Le.jsx)("td",{style:{padding:"12px 16px",color:"#374151"},children:e.hora||"-"}),(0,Le.jsx)("td",{style:{padding:"12px 16px",textAlign:"center",fontWeight:600,color:"#1976d2"},children:e.comensales||0}),(0,Le.jsx)("td",{style:{padding:"12px 16px",color:"#6b7280",fontSize:13},children:e.observaciones||"-"})]}),["CUMPLEA\xd1OS MES","FIESTAS DE ESTELLA","FERIAS","COTILLON DE REYES"].includes(n)&&(0,Le.jsxs)(Le.Fragment,{children:["FIESTAS DE ESTELLA"===n&&(0,Le.jsxs)(Le.Fragment,{children:[(0,Le.jsx)("td",{style:{padding:"12px 16px",color:"#374151"},children:e.fecha||"-"}),(0,Le.jsx)("td",{style:{padding:"12px 16px",color:"#374151"},children:e.diaSemana||"-"})]}),(0,Le.jsx)("td",{style:{padding:"12px 16px",textAlign:"center",fontWeight:600,color:"#1976d2"},children:e.adultos||0}),(0,Le.jsx)("td",{style:{padding:"12px 16px",textAlign:"center",fontWeight:600,color:"#7c3aed"},children:e.ninos||0})]}),"LOTERIA NAVIDAD"===n&&(0,Le.jsx)("td",{style:{padding:"12px 16px",textAlign:"center",fontWeight:600,color:"#059669"},children:e.decimos||0}),"FIESTAS DE ESTELLA"===n&&(0,Le.jsx)("td",{style:{padding:"12px 16px",textAlign:"center",fontWeight:700,color:"#059669",fontSize:15},children:(e.adultos||0)+(e.ninos||0)})]},e.id)})})]})]}),"CUMPLEA\xd1OS MES"===n&&(0,Le.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:20,marginTop:24},children:[(0,Le.jsxs)("div",{style:{background:"linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)",color:"#fff",padding:24,borderRadius:16,boxShadow:"0 4px 12px rgba(59, 130, 246, 0.3)",textAlign:"center"},children:[(0,Le.jsx)("div",{style:{fontSize:14,opacity:.9,marginBottom:8,fontWeight:600},children:"Inscritos"}),(0,Le.jsx)("div",{style:{fontSize:40,fontWeight:700},children:p.totalInscripciones})]}),(0,Le.jsxs)("div",{style:{background:"linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%)",color:"#fff",padding:24,borderRadius:16,boxShadow:"0 4px 12px rgba(139, 92, 246, 0.3)",textAlign:"center"},children:[(0,Le.jsx)("div",{style:{fontSize:14,opacity:.9,marginBottom:8,fontWeight:600},children:"\ud83d\udc65 Adultos"}),(0,Le.jsx)("div",{style:{fontSize:40,fontWeight:700},children:p.totalAdultos})]}),(0,Le.jsxs)("div",{style:{background:"linear-gradient(135deg, #ec4899 0%, #db2777 100%)",color:"#fff",padding:24,borderRadius:16,boxShadow:"0 4px 12px rgba(236, 72, 153, 0.3)",textAlign:"center"},children:[(0,Le.jsx)("div",{style:{fontSize:14,opacity:.9,marginBottom:8,fontWeight:600},children:"\ud83d\udc76 Ni\xf1os"}),(0,Le.jsx)("div",{style:{fontSize:40,fontWeight:700},children:p.totalNinos})]}),(0,Le.jsxs)("div",{style:{background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",color:"#fff",padding:24,borderRadius:16,boxShadow:"0 4px 12px rgba(16, 185, 129, 0.3)",textAlign:"center",border:"3px solid rgba(255,255,255,0.3)"},children:[(0,Le.jsx)("div",{style:{fontSize:14,opacity:.9,marginBottom:8,fontWeight:700},children:"TOTAL PERSONAS"}),(0,Le.jsx)("div",{style:{fontSize:40,fontWeight:700},children:p.totalGeneral})]})]}),"COTILLON DE REYES"===n&&(0,Le.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:20,marginTop:24},children:[(0,Le.jsxs)("div",{style:{background:"linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)",color:"#fff",padding:24,borderRadius:16,boxShadow:"0 4px 12px rgba(59, 130, 246, 0.3)",textAlign:"center"},children:[(0,Le.jsx)("div",{style:{fontSize:14,opacity:.9,marginBottom:8,fontWeight:600},children:"Inscritos"}),(0,Le.jsx)("div",{style:{fontSize:40,fontWeight:700},children:p.totalInscripciones})]}),(0,Le.jsxs)("div",{style:{background:"linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%)",color:"#fff",padding:24,borderRadius:16,boxShadow:"0 4px 12px rgba(139, 92, 246, 0.3)",textAlign:"center"},children:[(0,Le.jsx)("div",{style:{fontSize:14,opacity:.9,marginBottom:8,fontWeight:600},children:"\ud83d\udc65 Adultos"}),(0,Le.jsx)("div",{style:{fontSize:40,fontWeight:700},children:p.totalAdultos})]}),(0,Le.jsxs)("div",{style:{background:"linear-gradient(135deg, #ec4899 0%, #db2777 100%)",color:"#fff",padding:24,borderRadius:16,boxShadow:"0 4px 12px rgba(236, 72, 153, 0.3)",textAlign:"center"},children:[(0,Le.jsx)("div",{style:{fontSize:14,opacity:.9,marginBottom:8,fontWeight:600},children:"\ud83d\udc76 Ni\xf1os"}),(0,Le.jsx)("div",{style:{fontSize:40,fontWeight:700},children:p.totalNinos})]}),(0,Le.jsxs)("div",{style:{background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",color:"#fff",padding:24,borderRadius:16,boxShadow:"0 4px 12px rgba(16, 185, 129, 0.3)",textAlign:"center",border:"3px solid rgba(255,255,255,0.3)"},children:[(0,Le.jsx)("div",{style:{fontSize:14,opacity:.9,marginBottom:8,fontWeight:700},children:"TOTAL PERSONAS"}),(0,Le.jsx)("div",{style:{fontSize:40,fontWeight:700},children:p.totalGeneral})]})]}),"LOTERIA NAVIDAD"===n&&(0,Le.jsx)("div",{style:{display:"flex",justifyContent:"center",marginTop:24},children:(0,Le.jsxs)("div",{style:{background:"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",color:"#fff",padding:32,borderRadius:16,boxShadow:"0 4px 12px rgba(245, 158, 11, 0.4)",textAlign:"center",border:"3px solid rgba(255,255,255,0.3)",minWidth:250},children:[(0,Le.jsx)("div",{style:{fontSize:16,opacity:.9,marginBottom:12,fontWeight:700},children:"\ud83c\udf9f\ufe0f TOTAL D\xc9CIMOS"}),(0,Le.jsx)("div",{style:{fontSize:48,fontWeight:700},children:p.totalDecimos})]})})]}),!c&&n&&!p&&(0,Le.jsxs)("div",{style:{textAlign:"center",padding:60,background:"#f9fafb",borderRadius:16,color:"#6b7280"},children:[(0,Le.jsx)("div",{style:{fontSize:48,marginBottom:12},children:"\ud83d\udced"}),(0,Le.jsx)("div",{style:{fontSize:18,fontWeight:600},children:"No hay inscripciones para este evento"})]}),!c&&!n&&(0,Le.jsxs)("div",{style:{textAlign:"center",padding:60,background:"#f9fafb",borderRadius:16,color:"#6b7280"},children:[(0,Le.jsx)("div",{style:{fontSize:48,marginBottom:12},children:"\ud83d\udcca"}),(0,Le.jsx)("div",{style:{fontSize:18,fontWeight:600},children:"Selecciona un evento para ver el listado"})]})]}):(0,Le.jsx)("div",{style:{padding:20},children:"No autenticado"})}var He=n(147),Ge={version:"0.18.5"},qe=1200,Ke=1252,Ye=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],$e={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},Xe=function(e){-1!=Ye.indexOf(e)&&(Ke=$e[0]=e)};var Qe=function(e){qe=e,Xe(e)};function Je(){Qe(1200),Xe(1252)}function Ze(e){for(var t=[],n=0;n<e.length>>1;++n)t[n]=String.fromCharCode(e.charCodeAt(2*n+1)+(e.charCodeAt(2*n)<<8));return t.join("")}var et,tt=function(e){return String.fromCharCode(e)},nt=function(e){return String.fromCharCode(e)};var rt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function it(e){for(var t="",n=0,r=0,i=0,o=0,a=0,s=0,l=0,c=0;c<e.length;)o=(n=e.charCodeAt(c++))>>2,a=(3&n)<<4|(r=e.charCodeAt(c++))>>4,s=(15&r)<<2|(i=e.charCodeAt(c++))>>6,l=63&i,isNaN(r)?s=l=64:isNaN(i)&&(l=64),t+=rt.charAt(o)+rt.charAt(a)+rt.charAt(s)+rt.charAt(l);return t}function ot(e){var t="",n=0,r=0,i=0,o=0,a=0,s=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var l=0;l<e.length;)n=rt.indexOf(e.charAt(l++))<<2|(o=rt.indexOf(e.charAt(l++)))>>4,t+=String.fromCharCode(n),r=(15&o)<<4|(a=rt.indexOf(e.charAt(l++)))>>2,64!==a&&(t+=String.fromCharCode(r)),i=(3&a)<<6|(s=rt.indexOf(e.charAt(l++))),64!==s&&(t+=String.fromCharCode(i));return t}var at=function(){return"undefined"!==typeof Buffer&&"undefined"!==typeof process&&"undefined"!==typeof process.versions&&!!process.versions.node}(),st=function(){if("undefined"!==typeof Buffer){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch(Yc){e=!0}return e?function(e,t){return t?new Buffer(e,t):new Buffer(e)}:Buffer.from.bind(Buffer)}return function(){}}();function lt(e){return at?Buffer.alloc?Buffer.alloc(e):new Buffer(e):"undefined"!=typeof Uint8Array?new Uint8Array(e):new Array(e)}function ct(e){return at?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):"undefined"!=typeof Uint8Array?new Uint8Array(e):new Array(e)}var ut=function(e){return at?st(e,"binary"):e.split("").map(function(e){return 255&e.charCodeAt(0)})};function dt(e){if("undefined"===typeof ArrayBuffer)return ut(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r!=e.length;++r)n[r]=255&e.charCodeAt(r);return t}function ht(e){if(Array.isArray(e))return e.map(function(e){return String.fromCharCode(e)}).join("");for(var t=[],n=0;n<e.length;++n)t[n]=String.fromCharCode(e[n]);return t.join("")}var ft=at?function(e){return Buffer.concat(e.map(function(e){return Buffer.isBuffer(e)?e:st(e)}))}:function(e){if("undefined"!==typeof Uint8Array){var t=0,n=0;for(t=0;t<e.length;++t)n+=e[t].length;var r=new Uint8Array(n),i=0;for(t=0,n=0;t<e.length;n+=i,++t)if(i=e[t].length,e[t]instanceof Uint8Array)r.set(e[t],n);else{if("string"==typeof e[t])throw"wtf";r.set(new Uint8Array(e[t]),n)}return r}return[].concat.apply([],e.map(function(e){return Array.isArray(e)?e:[].slice.call(e)}))};var pt=/\u0000/g,gt=/[\u0001-\u0006]/g;function mt(e){for(var t="",n=e.length-1;n>=0;)t+=e.charAt(n--);return t}function vt(e,t){var n=""+e;return n.length>=t?n:Rn("0",t-n.length)+n}function yt(e,t){var n=""+e;return n.length>=t?n:Rn(" ",t-n.length)+n}function bt(e,t){var n=""+e;return n.length>=t?n:n+Rn(" ",t-n.length)}var wt=Math.pow(2,32);function xt(e,t){return e>wt||e<-wt?function(e,t){var n=""+Math.round(e);return n.length>=t?n:Rn("0",t-n.length)+n}(e,t):function(e,t){var n=""+e;return n.length>=t?n:Rn("0",t-n.length)+n}(Math.round(e),t)}function St(e,t){return t=t||0,e.length>=7+t&&103===(32|e.charCodeAt(t))&&101===(32|e.charCodeAt(t+1))&&110===(32|e.charCodeAt(t+2))&&101===(32|e.charCodeAt(t+3))&&114===(32|e.charCodeAt(t+4))&&97===(32|e.charCodeAt(t+5))&&108===(32|e.charCodeAt(t+6))}var Et=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],Tt=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];var At={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"\u4e0a\u5348/\u4e0b\u5348 "hh"\u6642"mm"\u5206"ss"\u79d2 "'},_t={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},kt={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function Ct(e,t,n){for(var r=e<0?-1:1,i=e*r,o=0,a=1,s=0,l=1,c=0,u=0,d=Math.floor(i);c<t&&(s=(d=Math.floor(i))*a+o,u=d*c+l,!(i-d<5e-8));)i=1/(i-d),o=a,a=s,l=c,c=u;if(u>t&&(c>t?(u=l,s=o):(u=c,s=a)),!n)return[0,r*s,u];var h=Math.floor(r*s/u);return[h,r*s-h*u,u]}function It(e,t,n){if(e>2958465||e<0)return null;var r=0|e,i=Math.floor(86400*(e-r)),o=0,a=[],s={D:r,T:i,u:86400*(e-r)-i,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(s.u)<1e-6&&(s.u=0),t&&t.date1904&&(r+=1462),s.u>.9999&&(s.u=0,86400==++i&&(s.T=i=0,++r,++s.D)),60===r)a=n?[1317,10,29]:[1900,2,29],o=3;else if(0===r)a=n?[1317,8,29]:[1900,1,0],o=6;else{r>60&&--r;var l=new Date(1900,0,1);l.setDate(l.getDate()+r-1),a=[l.getFullYear(),l.getMonth()+1,l.getDate()],o=l.getDay(),r<60&&(o=(o+6)%7),n&&(o=function(e,t){t[0]-=581;var n=e.getDay();e<60&&(n=(n+6)%7);return n}(l,a))}return s.y=a[0],s.m=a[1],s.d=a[2],s.S=i%60,i=Math.floor(i/60),s.M=i%60,i=Math.floor(i/60),s.H=i,s.q=o,s}var Rt=new Date(1899,11,31,0,0,0),Nt=Rt.getTime(),Ot=new Date(1900,2,1,0,0,0);function Dt(e,t){var n=e.getTime();return t?n-=1262304e5:e>=Ot&&(n+=864e5),(n-(Nt+6e4*(e.getTimezoneOffset()-Rt.getTimezoneOffset())))/864e5}function Pt(e){return-1==e.indexOf(".")?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function Lt(e){var t,n=Math.floor(Math.log(Math.abs(e))*Math.LOG10E);return t=n>=-4&&n<=-1?e.toPrecision(10+n):Math.abs(n)<=9?function(e){var t=e<0?12:11,n=Pt(e.toFixed(12));return n.length<=t||(n=e.toPrecision(10)).length<=t?n:e.toExponential(5)}(e):10===n?e.toFixed(10).substr(0,12):function(e){var t=Pt(e.toFixed(11));return t.length>(e<0?12:11)||"0"===t||"-0"===t?e.toPrecision(6):t}(e),Pt(function(e){return-1==e.indexOf("E")?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}(t.toUpperCase()))}function jt(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(0|e)===e?e.toString(10):Lt(e);case"undefined":return"";case"object":if(null==e)return"";if(e instanceof Date)return rn(14,Dt(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function Mt(e,t,n,r){var i,o="",a=0,s=0,l=n.y,c=0;switch(e){case 98:l=n.y+543;case 121:switch(t.length){case 1:case 2:i=l%100,c=2;break;default:i=l%1e4,c=4}break;case 109:switch(t.length){case 1:case 2:i=n.m,c=t.length;break;case 3:return Tt[n.m-1][1];case 5:return Tt[n.m-1][0];default:return Tt[n.m-1][2]}break;case 100:switch(t.length){case 1:case 2:i=n.d,c=t.length;break;case 3:return Et[n.q][0];default:return Et[n.q][1]}break;case 104:switch(t.length){case 1:case 2:i=1+(n.H+11)%12,c=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:i=n.H,c=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:i=n.M,c=t.length;break;default:throw"bad minute format: "+t}break;case 115:if("s"!=t&&"ss"!=t&&".0"!=t&&".00"!=t&&".000"!=t)throw"bad second format: "+t;return 0!==n.u||"s"!=t&&"ss"!=t?(s=r>=2?3===r?1e3:100:1===r?10:1,(a=Math.round(s*(n.S+n.u)))>=60*s&&(a=0),"s"===t?0===a?"0":""+a/s:(o=vt(a,2+r),"ss"===t?o.substr(0,2):"."+o.substr(2,t.length-1))):vt(n.S,t.length);case 90:switch(t){case"[h]":case"[hh]":i=24*n.D+n.H;break;case"[m]":case"[mm]":i=60*(24*n.D+n.H)+n.M;break;case"[s]":case"[ss]":i=60*(60*(24*n.D+n.H)+n.M)+Math.round(n.S+n.u);break;default:throw"bad abstime format: "+t}c=3===t.length?1:2;break;case 101:i=l,c=1}return c>0?vt(i,c):""}function Ft(e){if(e.length<=3)return e;for(var t=e.length%3,n=e.substr(0,t);t!=e.length;t+=3)n+=(n.length>0?",":"")+e.substr(t,3);return n}var Ut=/%/g;function zt(e,t){var n,r=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(0==t)return"0.0E+0";if(t<0)return"-"+zt(e,-t);var i=e.indexOf(".");-1===i&&(i=e.indexOf("E"));var o=Math.floor(Math.log(t)*Math.LOG10E)%i;if(o<0&&(o+=i),-1===(n=(t/Math.pow(10,o)).toPrecision(r+1+(i+o)%i)).indexOf("e")){var a=Math.floor(Math.log(t)*Math.LOG10E);for(-1===n.indexOf(".")?n=n.charAt(0)+"."+n.substr(1)+"E+"+(a-n.length+o):n+="E+"+(a-o);"0."===n.substr(0,2);)n=(n=n.charAt(0)+n.substr(2,i)+"."+n.substr(2+i)).replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");n=n.replace(/\+-/,"-")}n=n.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(e,t,n,r){return t+n+r.substr(0,(i+o)%i)+"."+r.substr(o)+"E"})}else n=t.toExponential(r);return e.match(/E\+00$/)&&n.match(/e[+-]\d$/)&&(n=n.substr(0,n.length-1)+"0"+n.charAt(n.length-1)),e.match(/E\-/)&&n.match(/e\+/)&&(n=n.replace(/e\+/,"e")),n.replace("e","E")}var Bt=/# (\?+)( ?)\/( ?)(\d+)/;var Wt=/^#*0*\.([0#]+)/,Vt=/\).*[0#]/,Ht=/\(###\) ###\\?-####/;function Gt(e){for(var t,n="",r=0;r!=e.length;++r)switch(t=e.charCodeAt(r)){case 35:break;case 63:n+=" ";break;case 48:n+="0";break;default:n+=String.fromCharCode(t)}return n}function qt(e,t){var n=Math.pow(10,t);return""+Math.round(e*n)/n}function Kt(e,t){var n=e-Math.floor(e),r=Math.pow(10,t);return t<(""+Math.round(n*r)).length?0:Math.round(n*r)}function Yt(e,t,n){if(40===e.charCodeAt(0)&&!t.match(Vt)){var r=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return n>=0?Yt("n",r,n):"("+Yt("n",r,-n)+")"}if(44===t.charCodeAt(t.length-1))return function(e,t,n){for(var r=t.length-1;44===t.charCodeAt(r-1);)--r;return Qt(e,t.substr(0,r),n/Math.pow(10,3*(t.length-r)))}(e,t,n);if(-1!==t.indexOf("%"))return function(e,t,n){var r=t.replace(Ut,""),i=t.length-r.length;return Qt(e,r,n*Math.pow(10,2*i))+Rn("%",i)}(e,t,n);if(-1!==t.indexOf("E"))return zt(t,n);if(36===t.charCodeAt(0))return"$"+Yt(e,t.substr(" "==t.charAt(1)?2:1),n);var i,o,a,s,l=Math.abs(n),c=n<0?"-":"";if(t.match(/^00+$/))return c+xt(l,t.length);if(t.match(/^[#?]+$/))return"0"===(i=xt(n,0))&&(i=""),i.length>t.length?i:Gt(t.substr(0,t.length-i.length))+i;if(o=t.match(Bt))return function(e,t,n){var r=parseInt(e[4],10),i=Math.round(t*r),o=Math.floor(i/r),a=i-o*r,s=r;return n+(0===o?"":""+o)+" "+(0===a?Rn(" ",e[1].length+1+e[4].length):yt(a,e[1].length)+e[2]+"/"+e[3]+vt(s,e[4].length))}(o,l,c);if(t.match(/^#+0+$/))return c+xt(l,t.length-t.indexOf("0"));if(o=t.match(Wt))return i=qt(n,o[1].length).replace(/^([^\.]+)$/,"$1."+Gt(o[1])).replace(/\.$/,"."+Gt(o[1])).replace(/\.(\d*)$/,function(e,t){return"."+t+Rn("0",Gt(o[1]).length-t.length)}),-1!==t.indexOf("0.")?i:i.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),o=t.match(/^(0*)\.(#*)$/))return c+qt(l,o[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,o[1].length?"0.":".");if(o=t.match(/^#{1,3},##0(\.?)$/))return c+Ft(xt(l,0));if(o=t.match(/^#,##0\.([#0]*0)$/))return n<0?"-"+Yt(e,t,-n):Ft(""+(Math.floor(n)+function(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}(n,o[1].length)))+"."+vt(Kt(n,o[1].length),o[1].length);if(o=t.match(/^#,#*,#0/))return Yt(e,t.replace(/^#,#*,/,""),n);if(o=t.match(/^([0#]+)(\\?-([0#]+))+$/))return i=mt(Yt(e,t.replace(/[\\-]/g,""),n)),a=0,mt(mt(t.replace(/\\/g,"")).replace(/[0#]/g,function(e){return a<i.length?i.charAt(a++):"0"===e?"0":""}));if(t.match(Ht))return"("+(i=Yt(e,"##########",n)).substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var u="";if(o=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(o[4].length,7),s=Ct(l,Math.pow(10,a)-1,!1),i=""+c," "==(u=Qt("n",o[1],s[1])).charAt(u.length-1)&&(u=u.substr(0,u.length-1)+"0"),i+=u+o[2]+"/"+o[3],(u=bt(s[2],a)).length<o[4].length&&(u=Gt(o[4].substr(o[4].length-u.length))+u),i+=u;if(o=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(Math.max(o[1].length,o[4].length),7),c+((s=Ct(l,Math.pow(10,a)-1,!0))[0]||(s[1]?"":"0"))+" "+(s[1]?yt(s[1],a)+o[2]+"/"+o[3]+bt(s[2],a):Rn(" ",2*a+1+o[2].length+o[3].length));if(o=t.match(/^[#0?]+$/))return i=xt(n,0),t.length<=i.length?i:Gt(t.substr(0,t.length-i.length))+i;if(o=t.match(/^([#0?]+)\.([#0]+)$/)){i=""+n.toFixed(Math.min(o[2].length,10)).replace(/([^0])0+$/,"$1"),a=i.indexOf(".");var d=t.indexOf(".")-a,h=t.length-i.length-d;return Gt(t.substr(0,d)+i+t.substr(t.length-h))}if(o=t.match(/^00,000\.([#0]*0)$/))return a=Kt(n,o[1].length),n<0?"-"+Yt(e,t,-n):Ft(function(e){return e<2147483647&&e>-2147483648?""+(e>=0?0|e:e-1|0):""+Math.floor(e)}(n)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(e){return"00,"+(e.length<3?vt(0,3-e.length):"")+e})+"."+vt(a,o[1].length);switch(t){case"###,##0.00":return Yt(e,"#,##0.00",n);case"###,###":case"##,###":case"#,###":var f=Ft(xt(l,0));return"0"!==f?c+f:"";case"###,###.00":return Yt(e,"###,##0.00",n).replace(/^0\./,".");case"#,###.00":return Yt(e,"#,##0.00",n).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function $t(e,t){var n,r=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(0==t)return"0.0E+0";if(t<0)return"-"+$t(e,-t);var i=e.indexOf(".");-1===i&&(i=e.indexOf("E"));var o=Math.floor(Math.log(t)*Math.LOG10E)%i;if(o<0&&(o+=i),!(n=(t/Math.pow(10,o)).toPrecision(r+1+(i+o)%i)).match(/[Ee]/)){var a=Math.floor(Math.log(t)*Math.LOG10E);-1===n.indexOf(".")?n=n.charAt(0)+"."+n.substr(1)+"E+"+(a-n.length+o):n+="E+"+(a-o),n=n.replace(/\+-/,"-")}n=n.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(e,t,n,r){return t+n+r.substr(0,(i+o)%i)+"."+r.substr(o)+"E"})}else n=t.toExponential(r);return e.match(/E\+00$/)&&n.match(/e[+-]\d$/)&&(n=n.substr(0,n.length-1)+"0"+n.charAt(n.length-1)),e.match(/E\-/)&&n.match(/e\+/)&&(n=n.replace(/e\+/,"e")),n.replace("e","E")}function Xt(e,t,n){if(40===e.charCodeAt(0)&&!t.match(Vt)){var r=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return n>=0?Xt("n",r,n):"("+Xt("n",r,-n)+")"}if(44===t.charCodeAt(t.length-1))return function(e,t,n){for(var r=t.length-1;44===t.charCodeAt(r-1);)--r;return Qt(e,t.substr(0,r),n/Math.pow(10,3*(t.length-r)))}(e,t,n);if(-1!==t.indexOf("%"))return function(e,t,n){var r=t.replace(Ut,""),i=t.length-r.length;return Qt(e,r,n*Math.pow(10,2*i))+Rn("%",i)}(e,t,n);if(-1!==t.indexOf("E"))return $t(t,n);if(36===t.charCodeAt(0))return"$"+Xt(e,t.substr(" "==t.charAt(1)?2:1),n);var i,o,a,s,l=Math.abs(n),c=n<0?"-":"";if(t.match(/^00+$/))return c+vt(l,t.length);if(t.match(/^[#?]+$/))return i=""+n,0===n&&(i=""),i.length>t.length?i:Gt(t.substr(0,t.length-i.length))+i;if(o=t.match(Bt))return function(e,t,n){return n+(0===t?"":""+t)+Rn(" ",e[1].length+2+e[4].length)}(o,l,c);if(t.match(/^#+0+$/))return c+vt(l,t.length-t.indexOf("0"));if(o=t.match(Wt))return i=(i=(""+n).replace(/^([^\.]+)$/,"$1."+Gt(o[1])).replace(/\.$/,"."+Gt(o[1]))).replace(/\.(\d*)$/,function(e,t){return"."+t+Rn("0",Gt(o[1]).length-t.length)}),-1!==t.indexOf("0.")?i:i.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),o=t.match(/^(0*)\.(#*)$/))return c+(""+l).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,o[1].length?"0.":".");if(o=t.match(/^#{1,3},##0(\.?)$/))return c+Ft(""+l);if(o=t.match(/^#,##0\.([#0]*0)$/))return n<0?"-"+Xt(e,t,-n):Ft(""+n)+"."+Rn("0",o[1].length);if(o=t.match(/^#,#*,#0/))return Xt(e,t.replace(/^#,#*,/,""),n);if(o=t.match(/^([0#]+)(\\?-([0#]+))+$/))return i=mt(Xt(e,t.replace(/[\\-]/g,""),n)),a=0,mt(mt(t.replace(/\\/g,"")).replace(/[0#]/g,function(e){return a<i.length?i.charAt(a++):"0"===e?"0":""}));if(t.match(Ht))return"("+(i=Xt(e,"##########",n)).substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var u="";if(o=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(o[4].length,7),s=Ct(l,Math.pow(10,a)-1,!1),i=""+c," "==(u=Qt("n",o[1],s[1])).charAt(u.length-1)&&(u=u.substr(0,u.length-1)+"0"),i+=u+o[2]+"/"+o[3],(u=bt(s[2],a)).length<o[4].length&&(u=Gt(o[4].substr(o[4].length-u.length))+u),i+=u;if(o=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(Math.max(o[1].length,o[4].length),7),c+((s=Ct(l,Math.pow(10,a)-1,!0))[0]||(s[1]?"":"0"))+" "+(s[1]?yt(s[1],a)+o[2]+"/"+o[3]+bt(s[2],a):Rn(" ",2*a+1+o[2].length+o[3].length));if(o=t.match(/^[#0?]+$/))return i=""+n,t.length<=i.length?i:Gt(t.substr(0,t.length-i.length))+i;if(o=t.match(/^([#0]+)\.([#0]+)$/)){i=""+n.toFixed(Math.min(o[2].length,10)).replace(/([^0])0+$/,"$1"),a=i.indexOf(".");var d=t.indexOf(".")-a,h=t.length-i.length-d;return Gt(t.substr(0,d)+i+t.substr(t.length-h))}if(o=t.match(/^00,000\.([#0]*0)$/))return n<0?"-"+Xt(e,t,-n):Ft(""+n).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(e){return"00,"+(e.length<3?vt(0,3-e.length):"")+e})+"."+vt(0,o[1].length);switch(t){case"###,###":case"##,###":case"#,###":var f=Ft(""+l);return"0"!==f?c+f:"";default:if(t.match(/\.[0#?]*$/))return Xt(e,t.slice(0,t.lastIndexOf(".")),n)+Gt(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function Qt(e,t,n){return(0|n)===n?Xt(e,t,n):Yt(e,t,n)}var Jt=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function Zt(e){for(var t=0,n="",r="";t<e.length;)switch(n=e.charAt(t)){case"G":St(e,t)&&(t+=6),t++;break;case'"':for(;34!==e.charCodeAt(++t)&&t<e.length;);++t;break;case"\\":case"_":t+=2;break;case"@":++t;break;case"B":case"b":if("1"===e.charAt(t+1)||"2"===e.charAt(t+1))return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"\u4e0a":if("A/P"===e.substr(t,3).toUpperCase())return!0;if("AM/PM"===e.substr(t,5).toUpperCase())return!0;if("\u4e0a\u5348/\u4e0b\u5348"===e.substr(t,5).toUpperCase())return!0;++t;break;case"[":for(r=n;"]"!==e.charAt(t++)&&t<e.length;)r+=e.charAt(t);if(r.match(Jt))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(n=e.charAt(++t))>-1||"\\"==n&&"-"==e.charAt(t+1)&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===n;);break;case"*":++t," "!=e.charAt(t)&&"*"!=e.charAt(t)||++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;default:++t}return!1}var en=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function tn(e,t){if(null==t)return!1;var n=parseFloat(t[2]);switch(t[1]){case"=":if(e==n)return!0;break;case">":if(e>n)return!0;break;case"<":if(e<n)return!0;break;case"<>":if(e!=n)return!0;break;case">=":if(e>=n)return!0;break;case"<=":if(e<=n)return!0}return!1}function nn(e,t){var n=function(e){for(var t=[],n=!1,r=0,i=0;r<e.length;++r)switch(e.charCodeAt(r)){case 34:n=!n;break;case 95:case 42:case 92:++r;break;case 59:t[t.length]=e.substr(i,r-i),i=r+1}if(t[t.length]=e.substr(i),!0===n)throw new Error("Format |"+e+"| unterminated string ");return t}(e),r=n.length,i=n[r-1].indexOf("@");if(r<4&&i>-1&&--r,n.length>4)throw new Error("cannot find right format for |"+n.join("|")+"|");if("number"!==typeof t)return[4,4===n.length||i>-1?n[n.length-1]:"@"];switch(n.length){case 1:n=i>-1?["General","General","General",n[0]]:[n[0],n[0],n[0],"@"];break;case 2:n=i>-1?[n[0],n[0],n[0],n[1]]:[n[0],n[1],n[0],"@"];break;case 3:n=i>-1?[n[0],n[1],n[0],n[2]]:[n[0],n[1],n[2],"@"]}var o=t>0?n[0]:t<0?n[1]:n[2];if(-1===n[0].indexOf("[")&&-1===n[1].indexOf("["))return[r,o];if(null!=n[0].match(/\[[=<>]/)||null!=n[1].match(/\[[=<>]/)){var a=n[0].match(en),s=n[1].match(en);return tn(t,a)?[r,n[0]]:tn(t,s)?[r,n[1]]:[r,n[null!=a&&null!=s?2:1]]}return[r,o]}function rn(e,t,n){null==n&&(n={});var r="";switch(typeof e){case"string":r="m/d/yy"==e&&n.dateNF?n.dateNF:e;break;case"number":null==(r=14==e&&n.dateNF?n.dateNF:(null!=n.table?n.table:At)[e])&&(r=n.table&&n.table[_t[e]]||At[_t[e]]),null==r&&(r=kt[e]||"General")}if(St(r,0))return jt(t,n);t instanceof Date&&(t=Dt(t,n.date1904));var i=nn(r,t);if(St(i[1]))return jt(t,n);if(!0===t)t="TRUE";else if(!1===t)t="FALSE";else if(""===t||null==t)return"";return function(e,t,n,r){for(var i,o,a,s=[],l="",c=0,u="",d="t",h="H";c<e.length;)switch(u=e.charAt(c)){case"G":if(!St(e,c))throw new Error("unrecognized character "+u+" in "+e);s[s.length]={t:"G",v:"General"},c+=7;break;case'"':for(l="";34!==(a=e.charCodeAt(++c))&&c<e.length;)l+=String.fromCharCode(a);s[s.length]={t:"t",v:l},++c;break;case"\\":var f=e.charAt(++c),p="("===f||")"===f?f:"t";s[s.length]={t:p,v:f},++c;break;case"_":s[s.length]={t:"t",v:" "},c+=2;break;case"@":s[s.length]={t:"T",v:t},++c;break;case"B":case"b":if("1"===e.charAt(c+1)||"2"===e.charAt(c+1)){if(null==i&&null==(i=It(t,n,"2"===e.charAt(c+1))))return"";s[s.length]={t:"X",v:e.substr(c,2)},d=u,c+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":u=u.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0)return"";if(null==i&&null==(i=It(t,n)))return"";for(l=u;++c<e.length&&e.charAt(c).toLowerCase()===u;)l+=u;"m"===u&&"h"===d.toLowerCase()&&(u="M"),"h"===u&&(u=h),s[s.length]={t:u,v:l},d=u;break;case"A":case"a":case"\u4e0a":var g={t:u,v:u};if(null==i&&(i=It(t,n)),"A/P"===e.substr(c,3).toUpperCase()?(null!=i&&(g.v=i.H>=12?"P":"A"),g.t="T",h="h",c+=3):"AM/PM"===e.substr(c,5).toUpperCase()?(null!=i&&(g.v=i.H>=12?"PM":"AM"),g.t="T",c+=5,h="h"):"\u4e0a\u5348/\u4e0b\u5348"===e.substr(c,5).toUpperCase()?(null!=i&&(g.v=i.H>=12?"\u4e0b\u5348":"\u4e0a\u5348"),g.t="T",c+=5,h="h"):(g.t="t",++c),null==i&&"T"===g.t)return"";s[s.length]=g,d=u;break;case"[":for(l=u;"]"!==e.charAt(c++)&&c<e.length;)l+=e.charAt(c);if("]"!==l.slice(-1))throw'unterminated "[" block: |'+l+"|";if(l.match(Jt)){if(null==i&&null==(i=It(t,n)))return"";s[s.length]={t:"Z",v:l.toLowerCase()},d=l.charAt(1)}else l.indexOf("$")>-1&&(l=(l.match(/\$([^-\[\]]*)/)||[])[1]||"$",Zt(e)||(s[s.length]={t:"t",v:l}));break;case".":if(null!=i){for(l=u;++c<e.length&&"0"===(u=e.charAt(c));)l+=u;s[s.length]={t:"s",v:l};break}case"0":case"#":for(l=u;++c<e.length&&"0#?.,E+-%".indexOf(u=e.charAt(c))>-1;)l+=u;s[s.length]={t:"n",v:l};break;case"?":for(l=u;e.charAt(++c)===u;)l+=u;s[s.length]={t:u,v:l},d=u;break;case"*":++c," "!=e.charAt(c)&&"*"!=e.charAt(c)||++c;break;case"(":case")":s[s.length]={t:1===r?"t":u,v:u},++c;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(l=u;c<e.length&&"0123456789".indexOf(e.charAt(++c))>-1;)l+=e.charAt(c);s[s.length]={t:"D",v:l};break;case" ":s[s.length]={t:u,v:u},++c;break;case"$":s[s.length]={t:"t",v:"$"},++c;break;default:if(-1===",$-+/():!^&'~{}<>=\u20acacfijklopqrtuvwxzP".indexOf(u))throw new Error("unrecognized character "+u+" in "+e);s[s.length]={t:"t",v:u},++c}var m,v=0,y=0;for(c=s.length-1,d="t";c>=0;--c)switch(s[c].t){case"h":case"H":s[c].t=h,d="h",v<1&&(v=1);break;case"s":(m=s[c].v.match(/\.0+$/))&&(y=Math.max(y,m[0].length-1)),v<3&&(v=3);case"d":case"y":case"M":case"e":d=s[c].t;break;case"m":"s"===d&&(s[c].t="M",v<2&&(v=2));break;case"X":break;case"Z":v<1&&s[c].v.match(/[Hh]/)&&(v=1),v<2&&s[c].v.match(/[Mm]/)&&(v=2),v<3&&s[c].v.match(/[Ss]/)&&(v=3)}switch(v){case 0:break;case 1:i.u>=.5&&(i.u=0,++i.S),i.S>=60&&(i.S=0,++i.M),i.M>=60&&(i.M=0,++i.H);break;case 2:i.u>=.5&&(i.u=0,++i.S),i.S>=60&&(i.S=0,++i.M)}var b,w="";for(c=0;c<s.length;++c)switch(s[c].t){case"t":case"T":case" ":case"D":break;case"X":s[c].v="",s[c].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":s[c].v=Mt(s[c].t.charCodeAt(0),s[c].v,i,y),s[c].t="t";break;case"n":case"?":for(b=c+1;null!=s[b]&&("?"===(u=s[b].t)||"D"===u||(" "===u||"t"===u)&&null!=s[b+1]&&("?"===s[b+1].t||"t"===s[b+1].t&&"/"===s[b+1].v)||"("===s[c].t&&(" "===u||"n"===u||")"===u)||"t"===u&&("/"===s[b].v||" "===s[b].v&&null!=s[b+1]&&"?"==s[b+1].t));)s[c].v+=s[b].v,s[b]={v:"",t:";"},++b;w+=s[c].v,c=b-1;break;case"G":s[c].t="t",s[c].v=jt(t,n)}var x,S,E="";if(w.length>0){40==w.charCodeAt(0)?(x=t<0&&45===w.charCodeAt(0)?-t:t,S=Qt("n",w,x)):(S=Qt("n",w,x=t<0&&r>1?-t:t),x<0&&s[0]&&"t"==s[0].t&&(S=S.substr(1),s[0].v="-"+s[0].v)),b=S.length-1;var T=s.length;for(c=0;c<s.length;++c)if(null!=s[c]&&"t"!=s[c].t&&s[c].v.indexOf(".")>-1){T=c;break}var A=s.length;if(T===s.length&&-1===S.indexOf("E")){for(c=s.length-1;c>=0;--c)null!=s[c]&&-1!=="n?".indexOf(s[c].t)&&(b>=s[c].v.length-1?(b-=s[c].v.length,s[c].v=S.substr(b+1,s[c].v.length)):b<0?s[c].v="":(s[c].v=S.substr(0,b+1),b=-1),s[c].t="t",A=c);b>=0&&A<s.length&&(s[A].v=S.substr(0,b+1)+s[A].v)}else if(T!==s.length&&-1===S.indexOf("E")){for(b=S.indexOf(".")-1,c=T;c>=0;--c)if(null!=s[c]&&-1!=="n?".indexOf(s[c].t)){for(o=s[c].v.indexOf(".")>-1&&c===T?s[c].v.indexOf(".")-1:s[c].v.length-1,E=s[c].v.substr(o+1);o>=0;--o)b>=0&&("0"===s[c].v.charAt(o)||"#"===s[c].v.charAt(o))&&(E=S.charAt(b--)+E);s[c].v=E,s[c].t="t",A=c}for(b>=0&&A<s.length&&(s[A].v=S.substr(0,b+1)+s[A].v),b=S.indexOf(".")+1,c=T;c<s.length;++c)if(null!=s[c]&&(-1!=="n?(".indexOf(s[c].t)||c===T)){for(o=s[c].v.indexOf(".")>-1&&c===T?s[c].v.indexOf(".")+1:0,E=s[c].v.substr(0,o);o<s[c].v.length;++o)b<S.length&&(E+=S.charAt(b++));s[c].v=E,s[c].t="t",A=c}}}for(c=0;c<s.length;++c)null!=s[c]&&"n?".indexOf(s[c].t)>-1&&(x=r>1&&t<0&&c>0&&"-"===s[c-1].v?-t:t,s[c].v=Qt(s[c].t,s[c].v,x),s[c].t="t");var _="";for(c=0;c!==s.length;++c)null!=s[c]&&(_+=s[c].v);return _}(i[1],t,n,i[0])}function on(e,t){if("number"!=typeof t){t=+t||-1;for(var n=0;n<392;++n)if(void 0!=At[n]){if(At[n]==e){t=n;break}}else t<0&&(t=n);t<0&&(t=391)}return At[t]=e,t}function an(e){for(var t=0;392!=t;++t)void 0!==e[t]&&on(e[t],t)}function sn(){var e;e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"\u4e0a\u5348/\u4e0b\u5348 "hh"\u6642"mm"\u5206"ss"\u79d2 "',At=e}var ln=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;var cn=function(){var e={};e.version="1.2.0";var t=function(){for(var e=0,t=new Array(256),n=0;256!=n;++n)e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=n)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1,t[n]=e;return"undefined"!==typeof Int32Array?new Int32Array(t):t}();var n=function(e){var t=0,n=0,r=0,i="undefined"!==typeof Int32Array?new Int32Array(4096):new Array(4096);for(r=0;256!=r;++r)i[r]=e[r];for(r=0;256!=r;++r)for(n=e[r],t=256+r;t<4096;t+=256)n=i[t]=n>>>8^e[255&n];var o=[];for(r=1;16!=r;++r)o[r-1]="undefined"!==typeof Int32Array?i.subarray(256*r,256*r+256):i.slice(256*r,256*r+256);return o}(t),r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],l=n[5],c=n[6],u=n[7],d=n[8],h=n[9],f=n[10],p=n[11],g=n[12],m=n[13],v=n[14];return e.table=t,e.bstr=function(e,n){for(var r=-1^n,i=0,o=e.length;i<o;)r=r>>>8^t[255&(r^e.charCodeAt(i++))];return~r},e.buf=function(e,n){for(var y=-1^n,b=e.length-15,w=0;w<b;)y=v[e[w++]^255&y]^m[e[w++]^y>>8&255]^g[e[w++]^y>>16&255]^p[e[w++]^y>>>24]^f[e[w++]]^h[e[w++]]^d[e[w++]]^u[e[w++]]^c[e[w++]]^l[e[w++]]^s[e[w++]]^a[e[w++]]^o[e[w++]]^i[e[w++]]^r[e[w++]]^t[e[w++]];for(b+=15;w<b;)y=y>>>8^t[255&(y^e[w++])];return~y},e.str=function(e,n){for(var r=-1^n,i=0,o=e.length,a=0,s=0;i<o;)(a=e.charCodeAt(i++))<128?r=r>>>8^t[255&(r^a)]:a<2048?r=(r=r>>>8^t[255&(r^(192|a>>6&31))])>>>8^t[255&(r^(128|63&a))]:a>=55296&&a<57344?(a=64+(1023&a),s=1023&e.charCodeAt(i++),r=(r=(r=(r=r>>>8^t[255&(r^(240|a>>8&7))])>>>8^t[255&(r^(128|a>>2&63))])>>>8^t[255&(r^(128|s>>6&15|(3&a)<<4))])>>>8^t[255&(r^(128|63&s))]):r=(r=(r=r>>>8^t[255&(r^(224|a>>12&15))])>>>8^t[255&(r^(128|a>>6&63))])>>>8^t[255&(r^(128|63&a))];return~r},e}(),un=function(){var e,t={};function n(e){if("/"==e.charAt(e.length-1))return-1===e.slice(0,-1).indexOf("/")?e:n(e.slice(0,-1));var t=e.lastIndexOf("/");return-1===t?e:e.slice(0,t+1)}function r(e){if("/"==e.charAt(e.length-1))return r(e.slice(0,-1));var t=e.lastIndexOf("/");return-1===t?e:e.slice(t+1)}function i(e,t){"string"===typeof t&&(t=new Date(t));var n=t.getHours();n=(n=n<<6|t.getMinutes())<<5|t.getSeconds()>>>1,e.write_shift(2,n);var r=t.getFullYear()-1980;r=(r=r<<4|t.getMonth()+1)<<5|t.getDate(),e.write_shift(2,r)}function o(e){oi(e,0);for(var t={},n=0;e.l<=e.length-4;){var r=e.read_shift(2),i=e.read_shift(2),o=e.l+i,a={};if(21589===r)1&(n=e.read_shift(1))&&(a.mtime=e.read_shift(4)),i>5&&(2&n&&(a.atime=e.read_shift(4)),4&n&&(a.ctime=e.read_shift(4))),a.mtime&&(a.mt=new Date(1e3*a.mtime));e.l=o,t[r]=a}return t}function a(){return e||(e={})}function s(e,t){if(80==e[0]&&75==e[1])return re(e,t);if(109==(32|e[0])&&105==(32|e[1]))return function(e,t){if("mime-version:"!=S(e.slice(0,13)).toLowerCase())throw new Error("Unsupported MAD header");var n=t&&t.root||"",r=(at&&Buffer.isBuffer(e)?e.toString("binary"):S(e)).split("\r\n"),i=0,o="";for(i=0;i<r.length;++i)if(o=r[i],/^Content-Location:/i.test(o)&&(o=o.slice(o.indexOf("file")),n||(n=o.slice(0,o.lastIndexOf("/")+1)),o.slice(0,n.length)!=n))for(;n.length>0&&(n=(n=n.slice(0,n.length-1)).slice(0,n.lastIndexOf("/")+1),o.slice(0,n.length)!=n););var a=(r[1]||"").match(/boundary="(.*?)"/);if(!a)throw new Error("MAD cannot find boundary");var s="--"+(a[1]||""),l=[],c=[],u={FileIndex:l,FullPaths:c};h(u);var d,f=0;for(i=0;i<r.length;++i){var p=r[i];p!==s&&p!==s+"--"||(f++&&ce(u,r.slice(d,i),n),d=i)}return u}(e,t);if(e.length<512)throw new Error("CFB file size "+e.length+" < 512");var n,r,i,o,a,s,f=512,p=[],g=e.slice(0,512);oi(g,0);var m=function(e){if(80==e[e.l]&&75==e[e.l+1])return[0,0];e.chk(y,"Header Signature: "),e.l+=16;var t=e.read_shift(2,"u");return[e.read_shift(2,"u"),t]}(g);switch(n=m[0]){case 3:f=512;break;case 4:f=4096;break;case 0:if(0==m[1])return re(e,t);default:throw new Error("Major Version: Expected 3 or 4 saw "+n)}512!==f&&oi(g=e.slice(0,f),28);var b=e.slice(0,f);!function(e,t){var n=9;switch(e.l+=2,n=e.read_shift(2)){case 9:if(3!=t)throw new Error("Sector Shift: Expected 9 saw "+n);break;case 12:if(4!=t)throw new Error("Sector Shift: Expected 12 saw "+n);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+n)}e.chk("0600","Mini Sector Shift: "),e.chk("000000000000","Reserved: ")}(g,n);var w=g.read_shift(4,"i");if(3===n&&0!==w)throw new Error("# Directory Sectors: Expected 0 saw "+w);g.l+=4,o=g.read_shift(4,"i"),g.l+=4,g.chk("00100000","Mini Stream Cutoff Size: "),a=g.read_shift(4,"i"),r=g.read_shift(4,"i"),s=g.read_shift(4,"i"),i=g.read_shift(4,"i");for(var x=-1,E=0;E<109&&!((x=g.read_shift(4,"i"))<0);++E)p[E]=x;var T=function(e,t){for(var n=Math.ceil(e.length/t)-1,r=[],i=1;i<n;++i)r[i-1]=e.slice(i*t,(i+1)*t);return r[n-1]=e.slice(n*t),r}(e,f);c(s,i,T,f,p);var A=function(e,t,n,r){var i=e.length,o=[],a=[],s=[],l=[],c=r-1,u=0,d=0,h=0,f=0;for(u=0;u<i;++u)if(s=[],(h=u+t)>=i&&(h-=i),!a[h]){l=[];var p=[];for(d=h;d>=0;){p[d]=!0,a[d]=!0,s[s.length]=d,l.push(e[d]);var g=n[Math.floor(4*d/r)];if(r<4+(f=4*d&c))throw new Error("FAT boundary crossed: "+d+" 4 "+r);if(!e[g])break;if(p[d=Qr(e[g],f)])break}o[h]={nodes:s,data:_r([l])}}return o}(T,o,p,f);A[o].name="!Directory",r>0&&a!==v&&(A[a].name="!MiniFAT"),A[p[0]].name="!FAT",A.fat_addrs=p,A.ssz=f;var _=[],k=[],C=[];!function(e,t,n,r,i,o,a,s){for(var c,h=0,f=r.length?2:0,p=t[e].data,g=0,m=0;g<p.length;g+=128){var y=p.slice(g,g+128);oi(y,64),m=y.read_shift(2),c=Cr(y,0,m-f),r.push(c);var b={name:c,type:y.read_shift(1),color:y.read_shift(1),L:y.read_shift(4,"i"),R:y.read_shift(4,"i"),C:y.read_shift(4,"i"),clsid:y.read_shift(16),state:y.read_shift(4,"i"),start:0,size:0};0!==y.read_shift(2)+y.read_shift(2)+y.read_shift(2)+y.read_shift(2)&&(b.ct=d(y,y.l-8)),0!==y.read_shift(2)+y.read_shift(2)+y.read_shift(2)+y.read_shift(2)&&(b.mt=d(y,y.l-8)),b.start=y.read_shift(4,"i"),b.size=y.read_shift(4,"i"),b.size<0&&b.start<0&&(b.size=b.type=0,b.start=v,b.name=""),5===b.type?(h=b.start,i>0&&h!==v&&(t[h].name="!StreamData")):b.size>=4096?(b.storage="fat",void 0===t[b.start]&&(t[b.start]=u(n,b.start,t.fat_addrs,t.ssz)),t[b.start].name=b.name,b.content=t[b.start].data.slice(0,b.size)):(b.storage="minifat",b.size<0?b.size=0:h!==v&&b.start!==v&&t[h]&&(b.content=l(b,t[h].data,(t[s]||{}).data))),b.content&&oi(b.content,0),o[c]=b,a.push(b)}}(o,A,T,_,r,{},k,a),function(e,t,n){for(var r=0,i=0,o=0,a=0,s=0,l=n.length,c=[],u=[];r<l;++r)c[r]=u[r]=r,t[r]=n[r];for(;s<u.length;++s)i=e[r=u[s]].L,o=e[r].R,a=e[r].C,c[r]===r&&(-1!==i&&c[i]!==i&&(c[r]=c[i]),-1!==o&&c[o]!==o&&(c[r]=c[o])),-1!==a&&(c[a]=r),-1!==i&&r!=c[r]&&(c[i]=c[r],u.lastIndexOf(i)<s&&u.push(i)),-1!==o&&r!=c[r]&&(c[o]=c[r],u.lastIndexOf(o)<s&&u.push(o));for(r=1;r<l;++r)c[r]===r&&(-1!==o&&c[o]!==o?c[r]=c[o]:-1!==i&&c[i]!==i&&(c[r]=c[i]));for(r=1;r<l;++r)if(0!==e[r].type){if((s=r)!=c[s])do{s=c[s],t[r]=t[s]+"/"+t[r]}while(0!==s&&-1!==c[s]&&s!=c[s]);c[r]=-1}for(t[0]+="/",r=1;r<l;++r)2!==e[r].type&&(t[r]+="/")}(k,C,_),_.shift();var I={FileIndex:k,FullPaths:C};return t&&t.raw&&(I.raw={header:b,sectors:T}),I}function l(e,t,n){for(var r=e.start,i=e.size,o=[],a=r;n&&i>0&&a>=0;)o.push(t.slice(a*m,a*m+m)),i-=m,a=Qr(n,4*a);return 0===o.length?si(0):ft(o).slice(0,e.size)}function c(e,t,n,r,i){var o=v;if(e===v){if(0!==t)throw new Error("DIFAT chain shorter than expected")}else if(-1!==e){var a=n[e],s=(r>>>2)-1;if(!a)return;for(var l=0;l<s&&(o=Qr(a,4*l))!==v;++l)i.push(o);c(Qr(a,r-4),t-1,n,r,i)}}function u(e,t,n,r,i){var o=[],a=[];i||(i=[]);var s=r-1,l=0,c=0;for(l=t;l>=0;){i[l]=!0,o[o.length]=l,a.push(e[l]);var u=n[Math.floor(4*l/r)];if(r<4+(c=4*l&s))throw new Error("FAT boundary crossed: "+l+" 4 "+r);if(!e[u])break;l=Qr(e[u],c)}return{nodes:o,data:_r([a])}}function d(e,t){return new Date(1e3*(Xr(e,t+4)/1e7*Math.pow(2,32)+Xr(e,t)/1e7-11644473600))}function h(e,t){var n=t||{},r=n.root||"Root Entry";if(e.FullPaths||(e.FullPaths=[]),e.FileIndex||(e.FileIndex=[]),e.FullPaths.length!==e.FileIndex.length)throw new Error("inconsistent CFB structure");0===e.FullPaths.length&&(e.FullPaths[0]=r+"/",e.FileIndex[0]={name:r,type:5}),n.CLSID&&(e.FileIndex[0].clsid=n.CLSID),function(e){var t="\x01Sh33tJ5";if(un.find(e,"/"+t))return;var n=si(4);n[0]=55,n[1]=n[3]=50,n[2]=54,e.FileIndex.push({name:t,type:2,content:n,size:4,L:69,R:69,C:69}),e.FullPaths.push(e.FullPaths[0]+t),f(e)}(e)}function f(e,t){h(e);for(var i=!1,o=!1,a=e.FullPaths.length-1;a>=0;--a){var s=e.FileIndex[a];switch(s.type){case 0:o?i=!0:(e.FileIndex.pop(),e.FullPaths.pop());break;case 1:case 2:case 5:o=!0,isNaN(s.R*s.L*s.C)&&(i=!0),s.R>-1&&s.L>-1&&s.R==s.L&&(i=!0);break;default:i=!0}}if(i||t){var l=new Date(1987,1,19),c=0,u=Object.create?Object.create(null):{},d=[];for(a=0;a<e.FullPaths.length;++a)u[e.FullPaths[a]]=!0,0!==e.FileIndex[a].type&&d.push([e.FullPaths[a],e.FileIndex[a]]);for(a=0;a<d.length;++a){var f=n(d[a][0]);(o=u[f])||(d.push([f,{name:r(f).replace("/",""),type:1,clsid:w,ct:l,mt:l,content:null}]),u[f]=!0)}for(d.sort(function(e,t){return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0,o=0,a=Math.min(n.length,r.length);i<a;++i){if(o=n[i].length-r[i].length)return o;if(n[i]!=r[i])return n[i]<r[i]?-1:1}return n.length-r.length}(e[0],t[0])}),e.FullPaths=[],e.FileIndex=[],a=0;a<d.length;++a)e.FullPaths[a]=d[a][0],e.FileIndex[a]=d[a][1];for(a=0;a<d.length;++a){var p=e.FileIndex[a],g=e.FullPaths[a];if(p.name=r(g).replace("/",""),p.L=p.R=p.C=-(p.color=1),p.size=p.content?p.content.length:0,p.start=0,p.clsid=p.clsid||w,0===a)p.C=d.length>1?1:-1,p.size=0,p.type=5;else if("/"==g.slice(-1)){for(c=a+1;c<d.length&&n(e.FullPaths[c])!=g;++c);for(p.C=c>=d.length?-1:c,c=a+1;c<d.length&&n(e.FullPaths[c])!=n(g);++c);p.R=c>=d.length?-1:c,p.type=1}else n(e.FullPaths[a+1]||"")==n(g)&&(p.R=a+1),p.type=2}}}function p(e,t){var n=t||{};if("mad"==n.fileType)return function(e,t){for(var n=t||{},r=n.boundary||"SheetJS",i=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+(r="------="+r).slice(2)+'"',"","",""],o=e.FullPaths[0],a=o,s=e.FileIndex[0],l=1;l<e.FullPaths.length;++l)if(a=e.FullPaths[l].slice(o.length),(s=e.FileIndex[l]).size&&s.content&&"\x01Sh33tJ5"!=a){a=a.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(e){return"_x"+e.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(e){return"_u"+e.charCodeAt(0).toString(16)+"_"});for(var c=s.content,u=at&&Buffer.isBuffer(c)?c.toString("binary"):S(c),d=0,h=Math.min(1024,u.length),f=0,p=0;p<=h;++p)(f=u.charCodeAt(p))>=32&&f<128&&++d;var g=d>=4*h/5;i.push(r),i.push("Content-Location: "+(n.root||"file:///C:/SheetJS/")+a),i.push("Content-Transfer-Encoding: "+(g?"quoted-printable":"base64")),i.push("Content-Type: "+ae(s,a)),i.push(""),i.push(g?le(u):se(u))}return i.push(r+"--\r\n"),i.join("\r\n")}(e,n);if(f(e),"zip"===n.fileType)return function(e,t){var n=t||{},r=[],o=[],a=si(1),s=n.compression?8:0,l=0;0;var c=0,u=0,d=0,h=0,f=e.FullPaths[0],p=f,g=e.FileIndex[0],m=[],v=0;for(c=1;c<e.FullPaths.length;++c)if(p=e.FullPaths[c].slice(f.length),(g=e.FileIndex[c]).size&&g.content&&"\x01Sh33tJ5"!=p){var y=d,b=si(p.length);for(u=0;u<p.length;++u)b.write_shift(1,127&p.charCodeAt(u));b=b.slice(0,b.l),m[h]=cn.buf(g.content,0);var w=g.content;8==s&&(w=E(w)),(a=si(30)).write_shift(4,67324752),a.write_shift(2,20),a.write_shift(2,l),a.write_shift(2,s),g.mt?i(a,g.mt):a.write_shift(4,0),a.write_shift(-4,8&l?0:m[h]),a.write_shift(4,8&l?0:w.length),a.write_shift(4,8&l?0:g.content.length),a.write_shift(2,b.length),a.write_shift(2,0),d+=a.length,r.push(a),d+=b.length,r.push(b),d+=w.length,r.push(w),8&l&&((a=si(12)).write_shift(-4,m[h]),a.write_shift(4,w.length),a.write_shift(4,g.content.length),d+=a.l,r.push(a)),(a=si(46)).write_shift(4,33639248),a.write_shift(2,0),a.write_shift(2,20),a.write_shift(2,l),a.write_shift(2,s),a.write_shift(4,0),a.write_shift(-4,m[h]),a.write_shift(4,w.length),a.write_shift(4,g.content.length),a.write_shift(2,b.length),a.write_shift(2,0),a.write_shift(2,0),a.write_shift(2,0),a.write_shift(2,0),a.write_shift(4,0),a.write_shift(4,y),v+=a.l,o.push(a),v+=b.length,o.push(b),++h}return a=si(22),a.write_shift(4,101010256),a.write_shift(2,0),a.write_shift(2,0),a.write_shift(2,h),a.write_shift(2,h),a.write_shift(4,v),a.write_shift(4,d),a.write_shift(2,0),ft([ft(r),ft(o),a])}(e,n);var r=function(e){for(var t=0,n=0,r=0;r<e.FileIndex.length;++r){var i=e.FileIndex[r];if(i.content){var o=i.content.length;o>0&&(o<4096?t+=o+63>>6:n+=o+511>>9)}}for(var a=e.FullPaths.length+3>>2,s=t+127>>7,l=(t+7>>3)+n+a+s,c=l+127>>7,u=c<=109?0:Math.ceil((c-109)/127);l+c+u+127>>7>c;)u=++c<=109?0:Math.ceil((c-109)/127);var d=[1,u,c,s,a,n,t,0];return e.FileIndex[0].size=t<<6,d[7]=(e.FileIndex[0].start=d[0]+d[1]+d[2]+d[3]+d[4]+d[5])+(d[6]+7>>3),d}(e),o=si(r[7]<<9),a=0,s=0;for(a=0;a<8;++a)o.write_shift(1,b[a]);for(a=0;a<8;++a)o.write_shift(2,0);for(o.write_shift(2,62),o.write_shift(2,3),o.write_shift(2,65534),o.write_shift(2,9),o.write_shift(2,6),a=0;a<3;++a)o.write_shift(2,0);for(o.write_shift(4,0),o.write_shift(4,r[2]),o.write_shift(4,r[0]+r[1]+r[2]+r[3]-1),o.write_shift(4,0),o.write_shift(4,4096),o.write_shift(4,r[3]?r[0]+r[1]+r[2]-1:v),o.write_shift(4,r[3]),o.write_shift(-4,r[1]?r[0]-1:v),o.write_shift(4,r[1]),a=0;a<109;++a)o.write_shift(-4,a<r[2]?r[1]+a:-1);if(r[1])for(s=0;s<r[1];++s){for(;a<236+127*s;++a)o.write_shift(-4,a<r[2]?r[1]+a:-1);o.write_shift(-4,s===r[1]-1?v:s+1)}var l=function(e){for(s+=e;a<s-1;++a)o.write_shift(-4,a+1);e&&(++a,o.write_shift(-4,v))};for(s=a=0,s+=r[1];a<s;++a)o.write_shift(-4,x.DIFSECT);for(s+=r[2];a<s;++a)o.write_shift(-4,x.FATSECT);l(r[3]),l(r[4]);for(var c=0,u=0,d=e.FileIndex[0];c<e.FileIndex.length;++c)(d=e.FileIndex[c]).content&&((u=d.content.length)<4096||(d.start=s,l(u+511>>9)));for(l(r[6]+7>>3);511&o.l;)o.write_shift(-4,x.ENDOFCHAIN);for(s=a=0,c=0;c<e.FileIndex.length;++c)(d=e.FileIndex[c]).content&&(!(u=d.content.length)||u>=4096||(d.start=s,l(u+63>>6)));for(;511&o.l;)o.write_shift(-4,x.ENDOFCHAIN);for(a=0;a<r[4]<<2;++a){var h=e.FullPaths[a];if(h&&0!==h.length){d=e.FileIndex[a],0===a&&(d.start=d.size?d.start-1:v);var p=0===a&&n.root||d.name;if(u=2*(p.length+1),o.write_shift(64,p,"utf16le"),o.write_shift(2,u),o.write_shift(1,d.type),o.write_shift(1,d.color),o.write_shift(-4,d.L),o.write_shift(-4,d.R),o.write_shift(-4,d.C),d.clsid)o.write_shift(16,d.clsid,"hex");else for(c=0;c<4;++c)o.write_shift(4,0);o.write_shift(4,d.state||0),o.write_shift(4,0),o.write_shift(4,0),o.write_shift(4,0),o.write_shift(4,0),o.write_shift(4,d.start),o.write_shift(4,d.size),o.write_shift(4,0)}else{for(c=0;c<17;++c)o.write_shift(4,0);for(c=0;c<3;++c)o.write_shift(4,-1);for(c=0;c<12;++c)o.write_shift(4,0)}}for(a=1;a<e.FileIndex.length;++a)if((d=e.FileIndex[a]).size>=4096)if(o.l=d.start+1<<9,at&&Buffer.isBuffer(d.content))d.content.copy(o,o.l,0,d.size),o.l+=d.size+511&-512;else{for(c=0;c<d.size;++c)o.write_shift(1,d.content[c]);for(;511&c;++c)o.write_shift(1,0)}for(a=1;a<e.FileIndex.length;++a)if((d=e.FileIndex[a]).size>0&&d.size<4096)if(at&&Buffer.isBuffer(d.content))d.content.copy(o,o.l,0,d.size),o.l+=d.size+63&-64;else{for(c=0;c<d.size;++c)o.write_shift(1,d.content[c]);for(;63&c;++c)o.write_shift(1,0)}if(at)o.l=o.length;else for(;o.l<o.length;)o.write_shift(1,0);return o}t.version="1.2.1";var g,m=64,v=-2,y="d0cf11e0a1b11ae1",b=[208,207,17,224,161,177,26,225],w="00000000000000000000000000000000",x={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:v,FREESECT:-1,HEADER_SIGNATURE:y,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:w,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function S(e){for(var t=new Array(e.length),n=0;n<e.length;++n)t[n]=String.fromCharCode(e[n]);return t.join("")}function E(e){return g?g.deflateRawSync(e):Y(e)}var T=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],A=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],_=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function k(e){var t=139536&(e<<1|e<<11)|558144&(e<<5|e<<15);return 255&(t>>16|t>>8|t)}for(var C="undefined"!==typeof Uint8Array,I=C?new Uint8Array(256):[],R=0;R<256;++R)I[R]=k(R);function N(e,t){var n=I[255&e];return t<=8?n>>>8-t:(n=n<<8|I[e>>8&255],t<=16?n>>>16-t:(n=n<<8|I[e>>16&255])>>>24-t)}function O(e,t){var n=7&t,r=t>>>3;return(e[r]|(n<=6?0:e[r+1]<<8))>>>n&3}function D(e,t){var n=7&t,r=t>>>3;return(e[r]|(n<=5?0:e[r+1]<<8))>>>n&7}function P(e,t){var n=7&t,r=t>>>3;return(e[r]|(n<=3?0:e[r+1]<<8))>>>n&31}function L(e,t){var n=7&t,r=t>>>3;return(e[r]|(n<=1?0:e[r+1]<<8))>>>n&127}function j(e,t,n){var r=7&t,i=t>>>3,o=(1<<n)-1,a=e[i]>>>r;return n<8-r?a&o:(a|=e[i+1]<<8-r,n<16-r?a&o:(a|=e[i+2]<<16-r,n<24-r?a&o:(a|=e[i+3]<<24-r)&o))}function M(e,t,n){var r=7&t,i=t>>>3;return r<=5?e[i]|=(7&n)<<r:(e[i]|=n<<r&255,e[i+1]=(7&n)>>8-r),t+3}function F(e,t,n){return n=(1&n)<<(7&t),e[t>>>3]|=n,t+1}function U(e,t,n){var r=t>>>3;return n<<=7&t,e[r]|=255&n,n>>>=8,e[r+1]=n,t+8}function z(e,t,n){var r=t>>>3;return n<<=7&t,e[r]|=255&n,n>>>=8,e[r+1]=255&n,e[r+2]=n>>>8,t+16}function B(e,t){var n=e.length,r=2*n>t?2*n:t+5,i=0;if(n>=t)return e;if(at){var o=ct(r);if(e.copy)e.copy(o);else for(;i<e.length;++i)o[i]=e[i];return o}if(C){var a=new Uint8Array(r);if(a.set)a.set(e);else for(;i<n;++i)a[i]=e[i];return a}return e.length=r,e}function W(e){for(var t=new Array(e),n=0;n<e;++n)t[n]=0;return t}function V(e,t,n){var r=1,i=0,o=0,a=0,s=0,l=e.length,c=C?new Uint16Array(32):W(32);for(o=0;o<32;++o)c[o]=0;for(o=l;o<n;++o)e[o]=0;l=e.length;var u=C?new Uint16Array(l):W(l);for(o=0;o<l;++o)c[i=e[o]]++,r<i&&(r=i),u[o]=0;for(c[0]=0,o=1;o<=r;++o)c[o+16]=s=s+c[o-1]<<1;for(o=0;o<l;++o)0!=(s=e[o])&&(u[o]=c[s+16]++);var d=0;for(o=0;o<l;++o)if(0!=(d=e[o]))for(s=N(u[o],r)>>r-d,a=(1<<r+4-d)-1;a>=0;--a)t[s|a<<d]=15&d|o<<4;return r}var H=C?new Uint16Array(512):W(512),G=C?new Uint16Array(32):W(32);if(!C){for(var q=0;q<512;++q)H[q]=0;for(q=0;q<32;++q)G[q]=0}!function(){for(var e=[],t=0;t<32;t++)e.push(5);V(e,G,32);var n=[];for(t=0;t<=143;t++)n.push(8);for(;t<=255;t++)n.push(9);for(;t<=279;t++)n.push(7);for(;t<=287;t++)n.push(8);V(n,H,288)}();var K=function(){for(var e=C?new Uint8Array(32768):[],t=0,n=0;t<_.length-1;++t)for(;n<_[t+1];++n)e[n]=t;for(;n<32768;++n)e[n]=29;var r=C?new Uint8Array(259):[];for(t=0,n=0;t<A.length-1;++t)for(;n<A[t+1];++n)r[n]=t;return function(t,n){return t.length<8?function(e,t){for(var n=0;n<e.length;){var r=Math.min(65535,e.length-n),i=n+r==e.length;for(t.write_shift(1,+i),t.write_shift(2,r),t.write_shift(2,65535&~r);r-- >0;)t[t.l++]=e[n++]}return t.l}(t,n):function(t,n){for(var i=0,o=0,a=C?new Uint16Array(32768):[];o<t.length;){var s=Math.min(65535,t.length-o);if(s<10){for(7&(i=M(n,i,+!(o+s!=t.length)))&&(i+=8-(7&i)),n.l=i/8|0,n.write_shift(2,s),n.write_shift(2,65535&~s);s-- >0;)n[n.l++]=t[o++];i=8*n.l}else{i=M(n,i,+!(o+s!=t.length)+2);for(var l=0;s-- >0;){var c=t[o],u=-1,d=0;if((u=a[l=32767&(l<<5^c)])&&((u|=-32768&o)>o&&(u-=32768),u<o))for(;t[u+d]==t[o+d]&&d<250;)++d;if(d>2){(c=r[d])<=22?i=U(n,i,I[c+1]>>1)-1:(U(n,i,3),U(n,i+=5,I[c-23]>>5),i+=3);var h=c<8?0:c-4>>2;h>0&&(z(n,i,d-A[c]),i+=h),c=e[o-u],i=U(n,i,I[c]>>3),i-=3;var f=c<4?0:c-2>>1;f>0&&(z(n,i,o-u-_[c]),i+=f);for(var p=0;p<d;++p)a[l]=32767&o,l=32767&(l<<5^t[o]),++o;s-=d-1}else c<=143?c+=48:i=F(n,i,1),i=U(n,i,I[c]),a[l]=32767&o,++o}i=U(n,i,0)-1}}return n.l=(i+7)/8|0,n.l}(t,n)}}();function Y(e){var t=si(50+Math.floor(1.1*e.length)),n=K(e,t);return t.slice(0,n)}var $=C?new Uint16Array(32768):W(32768),X=C?new Uint16Array(32768):W(32768),Q=C?new Uint16Array(128):W(128),J=1,Z=1;function ee(e,t){var n=P(e,t)+257,r=P(e,t+=5)+1,i=function(e,t){var n=7&t,r=t>>>3;return(e[r]|(n<=4?0:e[r+1]<<8))>>>n&15}(e,t+=5)+4;t+=4;for(var o=0,a=C?new Uint8Array(19):W(19),s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],l=1,c=C?new Uint8Array(8):W(8),u=C?new Uint8Array(8):W(8),d=a.length,h=0;h<i;++h)a[T[h]]=o=D(e,t),l<o&&(l=o),c[o]++,t+=3;var f=0;for(c[0]=0,h=1;h<=l;++h)u[h]=f=f+c[h-1]<<1;for(h=0;h<d;++h)0!=(f=a[h])&&(s[h]=u[f]++);var p=0;for(h=0;h<d;++h)if(0!=(p=a[h])){f=I[s[h]]>>8-p;for(var g=(1<<7-p)-1;g>=0;--g)Q[f|g<<p]=7&p|h<<3}var m=[];for(l=1;m.length<n+r;)switch(t+=7&(f=Q[L(e,t)]),f>>>=3){case 16:for(o=3+O(e,t),t+=2,f=m[m.length-1];o-- >0;)m.push(f);break;case 17:for(o=3+D(e,t),t+=3;o-- >0;)m.push(0);break;case 18:for(o=11+L(e,t),t+=7;o-- >0;)m.push(0);break;default:m.push(f),l<f&&(l=f)}var v=m.slice(0,n),y=m.slice(n);for(h=n;h<286;++h)v[h]=0;for(h=r;h<30;++h)y[h]=0;return J=V(v,$,286),Z=V(y,X,30),t}function te(e,t){var n=function(e,t){if(3==e[0]&&!(3&e[1]))return[lt(t),2];for(var n=0,r=0,i=ct(t||1<<18),o=0,a=i.length>>>0,s=0,l=0;0==(1&r);)if(r=D(e,n),n+=3,r>>>1!=0)for(r>>1==1?(s=9,l=5):(n=ee(e,n),s=J,l=Z);;){!t&&a<o+32767&&(a=(i=B(i,o+32767)).length);var c=j(e,n,s),u=r>>>1==1?H[c]:$[c];if(n+=15&u,0===((u>>>=4)>>>8&255))i[o++]=u;else{if(256==u)break;var d=(u-=257)<8?0:u-4>>2;d>5&&(d=0);var h=o+A[u];d>0&&(h+=j(e,n,d),n+=d),c=j(e,n,l),n+=15&(u=r>>>1==1?G[c]:X[c]);var f=(u>>>=4)<4?0:u-2>>1,p=_[u];for(f>0&&(p+=j(e,n,f),n+=f),!t&&a<h&&(a=(i=B(i,h+100)).length);o<h;)i[o]=i[o-p],++o}}else{7&n&&(n+=8-(7&n));var g=e[n>>>3]|e[(n>>>3)+1]<<8;if(n+=32,g>0)for(!t&&a<o+g&&(a=(i=B(i,o+g)).length);g-- >0;)i[o++]=e[n>>>3],n+=8}return t?[i,n+7>>>3]:[i.slice(0,o),n+7>>>3]}(e.slice(e.l||0),t);return e.l+=n[1],n[0]}function ne(e,t){if(!e)throw new Error(t);"undefined"!==typeof console&&console.error(t)}function re(e,t){var n=e;oi(n,0);var r={FileIndex:[],FullPaths:[]};h(r,{root:t.root});for(var i=n.length-4;(80!=n[i]||75!=n[i+1]||5!=n[i+2]||6!=n[i+3])&&i>=0;)--i;n.l=i+4,n.l+=4;var a=n.read_shift(2);n.l+=6;var s=n.read_shift(4);for(n.l=s,i=0;i<a;++i){n.l+=20;var l=n.read_shift(4),c=n.read_shift(4),u=n.read_shift(2),d=n.read_shift(2),f=n.read_shift(2);n.l+=8;var p=n.read_shift(4),g=o(n.slice(n.l+u,n.l+u+d));n.l+=u+d+f;var m=n.l;n.l=p+4,ie(n,l,c,r,g),n.l=m}return r}function ie(e,t,n,r,i){e.l+=2;var a=e.read_shift(2),s=e.read_shift(2),l=function(e){var t=65535&e.read_shift(2),n=65535&e.read_shift(2),r=new Date,i=31&n,o=15&(n>>>=5);n>>>=4,r.setMilliseconds(0),r.setFullYear(n+1980),r.setMonth(o-1),r.setDate(i);var a=31&t,s=63&(t>>>=5);return t>>>=6,r.setHours(t),r.setMinutes(s),r.setSeconds(a<<1),r}(e);if(8257&a)throw new Error("Unsupported ZIP encryption");e.read_shift(4);for(var c=e.read_shift(4),u=e.read_shift(4),d=e.read_shift(2),h=e.read_shift(2),f="",p=0;p<d;++p)f+=String.fromCharCode(e[e.l++]);if(h){var m=o(e.slice(e.l,e.l+h));(m[21589]||{}).mt&&(l=m[21589].mt),((i||{})[21589]||{}).mt&&(l=i[21589].mt)}e.l+=h;var v=e.slice(e.l,e.l+c);switch(s){case 8:v=function(e,t){if(!g)return te(e,t);var n=new(0,g.InflateRaw),r=n._processChunk(e.slice(e.l),n._finishFlushFlag);return e.l+=n.bytesRead,r}(e,u);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+s)}var y=!1;8&a&&(134695760==e.read_shift(4)&&(e.read_shift(4),y=!0),c=e.read_shift(4),u=e.read_shift(4)),c!=t&&ne(y,"Bad compressed size: "+t+" != "+c),u!=n&&ne(y,"Bad uncompressed size: "+n+" != "+u),ue(r,f,v,{unsafe:!0,mt:l})}var oe={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function ae(e,t){if(e.ctype)return e.ctype;var n=e.name||"",r=n.match(/\.([^\.]+)$/);return r&&oe[r[1]]||t&&(r=(n=t).match(/[\.\\]([^\.\\])+$/))&&oe[r[1]]?oe[r[1]]:"application/octet-stream"}function se(e){for(var t=it(e),n=[],r=0;r<t.length;r+=76)n.push(t.slice(r,r+76));return n.join("\r\n")+"\r\n"}function le(e){var t=e.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(e){var t=e.charCodeAt(0).toString(16).toUpperCase();return"="+(1==t.length?"0"+t:t)});"\n"==(t=t.replace(/ $/gm,"=20").replace(/\t$/gm,"=09")).charAt(0)&&(t="=0D"+t.slice(1));for(var n=[],r=(t=t.replace(/\r(?!\n)/gm,"=0D").replace(/\n\n/gm,"\n=0A").replace(/([^\r\n])\n/gm,"$1=0A")).split("\r\n"),i=0;i<r.length;++i){var o=r[i];if(0!=o.length)for(var a=0;a<o.length;){var s=76,l=o.slice(a,a+s);"="==l.charAt(s-1)?s--:"="==l.charAt(s-2)?s-=2:"="==l.charAt(s-3)&&(s-=3),l=o.slice(a,a+s),(a+=s)<o.length&&(l+="="),n.push(l)}else n.push("")}return n.join("\r\n")}function ce(e,t,n){for(var r,i="",o="",a="",s=0;s<10;++s){var l=t[s];if(!l||l.match(/^\s*$/))break;var c=l.match(/^(.*?):\s*([^\s].*)$/);if(c)switch(c[1].toLowerCase()){case"content-location":i=c[2].trim();break;case"content-type":a=c[2].trim();break;case"content-transfer-encoding":o=c[2].trim()}}switch(++s,o.toLowerCase()){case"base64":r=ut(ot(t.slice(s).join("")));break;case"quoted-printable":r=function(e){for(var t=[],n=0;n<e.length;++n){for(var r=e[n];n<=e.length&&"="==r.charAt(r.length-1);)r=r.slice(0,r.length-1)+e[++n];t.push(r)}for(var i=0;i<t.length;++i)t[i]=t[i].replace(/[=][0-9A-Fa-f]{2}/g,function(e){return String.fromCharCode(parseInt(e.slice(1),16))});return ut(t.join("\r\n"))}(t.slice(s));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+o)}var u=ue(e,i.slice(n.length),r,{unsafe:!0});a&&(u.ctype=a)}function ue(e,t,n,i){var o=i&&i.unsafe;o||h(e);var a=!o&&un.find(e,t);if(!a){var s=e.FullPaths[0];t.slice(0,s.length)==s?s=t:("/"!=s.slice(-1)&&(s+="/"),s=(s+t).replace("//","/")),a={name:r(t),type:2},e.FileIndex.push(a),e.FullPaths.push(s),o||un.utils.cfb_gc(e)}return a.content=n,a.size=n?n.length:0,i&&(i.CLSID&&(a.clsid=i.CLSID),i.mt&&(a.mt=i.mt),i.ct&&(a.ct=i.ct)),a}return t.find=function(e,t){var n=e.FullPaths.map(function(e){return e.toUpperCase()}),r=n.map(function(e){var t=e.split("/");return t[t.length-("/"==e.slice(-1)?2:1)]}),i=!1;47===t.charCodeAt(0)?(i=!0,t=n[0].slice(0,-1)+t):i=-1!==t.indexOf("/");var o=t.toUpperCase(),a=!0===i?n.indexOf(o):r.indexOf(o);if(-1!==a)return e.FileIndex[a];var s=!o.match(gt);for(o=o.replace(pt,""),s&&(o=o.replace(gt,"!")),a=0;a<n.length;++a){if((s?n[a].replace(gt,"!"):n[a]).replace(pt,"")==o)return e.FileIndex[a];if((s?r[a].replace(gt,"!"):r[a]).replace(pt,"")==o)return e.FileIndex[a]}return null},t.read=function(t,n){var r=n&&n.type;switch(r||at&&Buffer.isBuffer(t)&&(r="buffer"),r||"base64"){case"file":return function(t,n){return a(),s(e.readFileSync(t),n)}(t,n);case"base64":return s(ut(ot(t)),n);case"binary":return s(ut(t),n)}return s(t,n)},t.parse=s,t.write=function(t,n){var r=p(t,n);switch(n&&n.type||"buffer"){case"file":return a(),e.writeFileSync(n.filename,r),r;case"binary":return"string"==typeof r?r:S(r);case"base64":return it("string"==typeof r?r:S(r));case"buffer":if(at)return Buffer.isBuffer(r)?r:st(r);case"array":return"string"==typeof r?ut(r):r}return r},t.writeFile=function(t,n,r){a();var i=p(t,r);e.writeFileSync(n,i)},t.utils={cfb_new:function(e){var t={};return h(t,e),t},cfb_add:ue,cfb_del:function(e,t){h(e);var n=un.find(e,t);if(n)for(var r=0;r<e.FileIndex.length;++r)if(e.FileIndex[r]==n)return e.FileIndex.splice(r,1),e.FullPaths.splice(r,1),!0;return!1},cfb_mov:function(e,t,n){h(e);var i=un.find(e,t);if(i)for(var o=0;o<e.FileIndex.length;++o)if(e.FileIndex[o]==i)return e.FileIndex[o].name=r(n),e.FullPaths[o]=n,!0;return!1},cfb_gc:function(e){f(e,!0)},ReadShift:Zr,CheckField:ii,prep_blob:oi,bconcat:ft,use_zlib:function(e){try{var t=new(0,e.InflateRaw);if(t._processChunk(new Uint8Array([3,0]),t._finishFlushFlag),!t.bytesRead)throw new Error("zlib does not expose bytesRead");g=e}catch(Yc){console.error("cannot use native zlib: "+(Yc.message||Yc))}},_deflateRaw:Y,_inflateRaw:te,consts:x},t}();let dn;function hn(e){return"string"===typeof e?dt(e):Array.isArray(e)?function(e){if("undefined"===typeof Uint8Array)throw new Error("Unsupported");return new Uint8Array(e)}(e):e}function fn(e,t,n){if("undefined"!==typeof dn&&dn.writeFileSync)return n?dn.writeFileSync(e,t,n):dn.writeFileSync(e,t);if("undefined"!==typeof Deno){if(n&&"string"==typeof t)switch(n){case"utf8":t=new TextEncoder(n).encode(t);break;case"binary":t=dt(t);break;default:throw new Error("Unsupported encoding "+n)}return Deno.writeFileSync(e,t)}var r="utf8"==n?Qn(t):t;if("undefined"!==typeof IE_SaveFile)return IE_SaveFile(r,e);if("undefined"!==typeof Blob){var i=new Blob([hn(r)],{type:"application/octet-stream"});if("undefined"!==typeof navigator&&navigator.msSaveBlob)return navigator.msSaveBlob(i,e);if("undefined"!==typeof saveAs)return saveAs(i,e);if("undefined"!==typeof URL&&"undefined"!==typeof document&&document.createElement&&URL.createObjectURL){var o=URL.createObjectURL(i);if("object"===typeof chrome&&"function"==typeof(chrome.downloads||{}).download)return URL.revokeObjectURL&&"undefined"!==typeof setTimeout&&setTimeout(function(){URL.revokeObjectURL(o)},6e4),chrome.downloads.download({url:o,filename:e,saveAs:!0});var a=document.createElement("a");if(null!=a.download)return a.download=e,a.href=o,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL&&"undefined"!==typeof setTimeout&&setTimeout(function(){URL.revokeObjectURL(o)},6e4),o}}if("undefined"!==typeof $&&"undefined"!==typeof File&&"undefined"!==typeof Folder)try{var s=File(e);return s.open("w"),s.encoding="binary",Array.isArray(t)&&(t=ht(t)),s.write(t),s.close(),t}catch(Yc){if(!Yc.message||!Yc.message.match(/onstruct/))throw Yc}throw new Error("cannot save file "+e)}function pn(e){for(var t=Object.keys(e),n=[],r=0;r<t.length;++r)Object.prototype.hasOwnProperty.call(e,t[r])&&n.push(t[r]);return n}function gn(e,t){for(var n=[],r=pn(e),i=0;i!==r.length;++i)null==n[e[r[i]][t]]&&(n[e[r[i]][t]]=r[i]);return n}function mn(e){for(var t=[],n=pn(e),r=0;r!==n.length;++r)t[e[n[r]]]=n[r];return t}function vn(e){for(var t=[],n=pn(e),r=0;r!==n.length;++r)t[e[n[r]]]=parseInt(n[r],10);return t}var yn=new Date(1899,11,30,0,0,0);function bn(e,t){var n=e.getTime();return t&&(n-=1263168e5),(n-(yn.getTime()+6e4*(e.getTimezoneOffset()-yn.getTimezoneOffset())))/864e5}var wn=new Date,xn=yn.getTime()+6e4*(wn.getTimezoneOffset()-yn.getTimezoneOffset()),Sn=wn.getTimezoneOffset();function En(e){var t=new Date;return t.setTime(24*e*60*60*1e3+xn),t.getTimezoneOffset()!==Sn&&t.setTime(t.getTime()+6e4*(t.getTimezoneOffset()-Sn)),t}var Tn=new Date("2017-02-19T19:06:09.000Z"),An=isNaN(Tn.getFullYear())?new Date("2/19/17"):Tn,_n=2017==An.getFullYear();function kn(e,t){var n=new Date(e);if(_n)return t>0?n.setTime(n.getTime()+60*n.getTimezoneOffset()*1e3):t<0&&n.setTime(n.getTime()-60*n.getTimezoneOffset()*1e3),n;if(e instanceof Date)return e;if(1917==An.getFullYear()&&!isNaN(n.getFullYear())){var r=n.getFullYear();return e.indexOf(""+r)>-1||n.setFullYear(n.getFullYear()+100),n}var i=e.match(/\d+/g)||["2017","2","19","0","0","0"],o=new Date(+i[0],+i[1]-1,+i[2],+i[3]||0,+i[4]||0,+i[5]||0);return e.indexOf("Z")>-1&&(o=new Date(o.getTime()-60*o.getTimezoneOffset()*1e3)),o}function Cn(e,t){if(at&&Buffer.isBuffer(e)){if(t){if(255==e[0]&&254==e[1])return Qn(e.slice(2).toString("utf16le"));if(254==e[1]&&255==e[2])return Qn(Ze(e.slice(2).toString("binary")))}return e.toString("binary")}if("undefined"!==typeof TextDecoder)try{if(t){if(255==e[0]&&254==e[1])return Qn(new TextDecoder("utf-16le").decode(e.slice(2)));if(254==e[0]&&255==e[1])return Qn(new TextDecoder("utf-16be").decode(e.slice(2)))}var n={"\u20ac":"\x80","\u201a":"\x82","\u0192":"\x83","\u201e":"\x84","\u2026":"\x85","\u2020":"\x86","\u2021":"\x87","\u02c6":"\x88","\u2030":"\x89","\u0160":"\x8a","\u2039":"\x8b","\u0152":"\x8c","\u017d":"\x8e","\u2018":"\x91","\u2019":"\x92","\u201c":"\x93","\u201d":"\x94","\u2022":"\x95","\u2013":"\x96","\u2014":"\x97","\u02dc":"\x98","\u2122":"\x99","\u0161":"\x9a","\u203a":"\x9b","\u0153":"\x9c","\u017e":"\x9e","\u0178":"\x9f"};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[\u20ac\u201a\u0192\u201e\u2026\u2020\u2021\u02c6\u2030\u0160\u2039\u0152\u017d\u2018\u2019\u201c\u201d\u2022\u2013\u2014\u02dc\u2122\u0161\u203a\u0153\u017e\u0178]/g,function(e){return n[e]||e})}catch(Yc){}for(var r=[],i=0;i!=e.length;++i)r.push(String.fromCharCode(e[i]));return r.join("")}function In(e){if("undefined"!=typeof JSON&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if("object"!=typeof e||null==e)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=In(e[n]));return t}function Rn(e,t){for(var n="";n.length<t;)n+=e;return n}function Nn(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var n=1,r=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return n*=100,""});return isNaN(t=Number(r))?(r=r.replace(/[(](.*)[)]/,function(e,t){return n=-n,t}),isNaN(t=Number(r))?t:t/n):t/n}var On=["january","february","march","april","may","june","july","august","september","october","november","december"];function Dn(e){var t=new Date(e),n=new Date(NaN),r=t.getYear(),i=t.getMonth(),o=t.getDate();if(isNaN(o))return n;var a=e.toLowerCase();if(a.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if((a=a.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,"")).length>3&&-1==On.indexOf(a))return n}else if(a.match(/[a-z]/))return n;return r<0||r>8099?n:(i>0||o>1)&&101!=r?t:e.match(/[^-0-9:,\/\\]/)?n:t}function Pn(e,t,n){if(e.FullPaths){var r;if("string"==typeof n)return r=at?st(n):function(e){for(var t=[],n=0,r=e.length+250,i=lt(e.length+255),o=0;o<e.length;++o){var a=e.charCodeAt(o);if(a<128)i[n++]=a;else if(a<2048)i[n++]=192|a>>6&31,i[n++]=128|63&a;else if(a>=55296&&a<57344){a=64+(1023&a);var s=1023&e.charCodeAt(++o);i[n++]=240|a>>8&7,i[n++]=128|a>>2&63,i[n++]=128|s>>6&15|(3&a)<<4,i[n++]=128|63&s}else i[n++]=224|a>>12&15,i[n++]=128|a>>6&63,i[n++]=128|63&a;n>r&&(t.push(i.slice(0,n)),n=0,i=lt(65535),r=65530)}return t.push(i.slice(0,n)),ft(t)}(n),un.utils.cfb_add(e,t,r);un.utils.cfb_add(e,t,n)}else e.file(t,n)}function Ln(){return un.utils.cfb_new()}var jn='<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n';var Mn={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},Fn=mn(Mn),Un=/[&<>'"]/g,zn=/[\u0000-\u0008\u000b-\u001f]/g;function Bn(e){return(e+"").replace(Un,function(e){return Fn[e]}).replace(zn,function(e){return"_x"+("000"+e.charCodeAt(0).toString(16)).slice(-4)+"_"})}function Wn(e){return Bn(e).replace(/ /g,"_x0020_")}var Vn=/[\u0000-\u001f]/g;function Hn(e){return(e+"").replace(Un,function(e){return Fn[e]}).replace(/\n/g,"<br/>").replace(Vn,function(e){return"&#x"+("000"+e.charCodeAt(0).toString(16)).slice(-4)+";"})}function Gn(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function qn(e){for(var t="",n=0,r=0,i=0,o=0,a=0,s=0;n<e.length;)(r=e.charCodeAt(n++))<128?t+=String.fromCharCode(r):(i=e.charCodeAt(n++),r>191&&r<224?(a=(31&r)<<6,a|=63&i,t+=String.fromCharCode(a)):(o=e.charCodeAt(n++),r<240?t+=String.fromCharCode((15&r)<<12|(63&i)<<6|63&o):(s=((7&r)<<18|(63&i)<<12|(63&o)<<6|63&(a=e.charCodeAt(n++)))-65536,t+=String.fromCharCode(55296+(s>>>10&1023)),t+=String.fromCharCode(56320+(1023&s)))));return t}function Kn(e){var t,n,r,i=lt(2*e.length),o=1,a=0,s=0;for(n=0;n<e.length;n+=o)o=1,(r=e.charCodeAt(n))<128?t=r:r<224?(t=64*(31&r)+(63&e.charCodeAt(n+1)),o=2):r<240?(t=4096*(15&r)+64*(63&e.charCodeAt(n+1))+(63&e.charCodeAt(n+2)),o=3):(o=4,t=262144*(7&r)+4096*(63&e.charCodeAt(n+1))+64*(63&e.charCodeAt(n+2))+(63&e.charCodeAt(n+3)),s=55296+((t-=65536)>>>10&1023),t=56320+(1023&t)),0!==s&&(i[a++]=255&s,i[a++]=s>>>8,s=0),i[a++]=t%256,i[a++]=t>>>8;return i.slice(0,a).toString("ucs2")}function Yn(e){return st(e,"binary").toString("utf8")}var $n="foo bar baz\xe2\x98\x83\xf0\x9f\x8d\xa3",Xn=at&&(Yn($n)==qn($n)&&Yn||Kn($n)==qn($n)&&Kn)||qn,Qn=at?function(e){return st(e,"utf8").toString("binary")}:function(e){for(var t=[],n=0,r=0,i=0;n<e.length;)switch(r=e.charCodeAt(n++),!0){case r<128:t.push(String.fromCharCode(r));break;case r<2048:t.push(String.fromCharCode(192+(r>>6))),t.push(String.fromCharCode(128+(63&r)));break;case r>=55296&&r<57344:r-=55296,i=e.charCodeAt(n++)-56320+(r<<10),t.push(String.fromCharCode(240+(i>>18&7))),t.push(String.fromCharCode(144+(i>>12&63))),t.push(String.fromCharCode(128+(i>>6&63))),t.push(String.fromCharCode(128+(63&i)));break;default:t.push(String.fromCharCode(224+(r>>12))),t.push(String.fromCharCode(128+(r>>6&63))),t.push(String.fromCharCode(128+(63&r)))}return t.join("")},Jn=function(){var e=[["nbsp"," "],["middot","\xb7"],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(e){return[new RegExp("&"+e[0]+";","ig"),e[1]]});return function(t){for(var n=t.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,"\n").replace(/<[^>]*>/g,""),r=0;r<e.length;++r)n=n.replace(e[r][0],e[r][1]);return n}}();var Zn=/(^\s|\s$|\n)/;function er(e,t){return"<"+e+(t.match(Zn)?' xml:space="preserve"':"")+">"+t+"</"+e+">"}function tr(e){return pn(e).map(function(t){return" "+t+'="'+e[t]+'"'}).join("")}function nr(e,t,n){return"<"+e+(null!=n?tr(n):"")+(null!=t?(t.match(Zn)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function rr(e,t){try{return e.toISOString().replace(/\.\d*/,"")}catch(Yc){if(t)throw Yc}return""}var ir="http://schemas.openxmlformats.org/package/2006/metadata/core-properties",or="http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",ar="http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",sr="http://schemas.openxmlformats.org/package/2006/content-types",lr="http://schemas.openxmlformats.org/package/2006/relationships",cr="http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",ur="http://purl.org/dc/elements/1.1/",dr="http://purl.org/dc/terms/",hr="http://purl.org/dc/dcmitype/",fr="http://schemas.openxmlformats.org/officeDocument/2006/relationships",pr="http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",gr="http://www.w3.org/2001/XMLSchema-instance",mr="http://www.w3.org/2001/XMLSchema",vr=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],yr="urn:schemas-microsoft-com:office:office",br="urn:schemas-microsoft-com:office:excel",wr="urn:schemas-microsoft-com:office:spreadsheet",xr="uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",Sr="http://macVmlSchemaUri",Er="urn:schemas-microsoft-com:vml",Tr="http://www.w3.org/TR/REC-html40";var Ar=function(e){for(var t=[],n=0;n<e[0].length;++n)if(e[0][n])for(var r=0,i=e[0][n].length;r<i;r+=10240)t.push.apply(t,e[0][n].slice(r,r+10240));return t},_r=at?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map(function(e){return Buffer.isBuffer(e)?e:st(e)})):Ar(e)}:Ar,kr=function(e,t,n){for(var r=[],i=t;i<n;i+=2)r.push(String.fromCharCode(Yr(e,i)));return r.join("").replace(pt,"")},Cr=at?function(e,t,n){return Buffer.isBuffer(e)?e.toString("utf16le",t,n).replace(pt,""):kr(e,t,n)}:kr,Ir=function(e,t,n){for(var r=[],i=t;i<t+n;++i)r.push(("0"+e[i].toString(16)).slice(-2));return r.join("")},Rr=at?function(e,t,n){return Buffer.isBuffer(e)?e.toString("hex",t,t+n):Ir(e,t,n)}:Ir,Nr=function(e,t,n){for(var r=[],i=t;i<n;i++)r.push(String.fromCharCode(Kr(e,i)));return r.join("")},Or=at?function(e,t,n){return Buffer.isBuffer(e)?e.toString("utf8",t,n):Nr(e,t,n)}:Nr,Dr=function(e,t){var n=Xr(e,t);return n>0?Or(e,t+4,t+4+n-1):""},Pr=Dr,Lr=function(e,t){var n=Xr(e,t);return n>0?Or(e,t+4,t+4+n-1):""},jr=Lr,Mr=function(e,t){var n=2*Xr(e,t);return n>0?Or(e,t+4,t+4+n-1):""},Fr=Mr,Ur=function(e,t){var n=Xr(e,t);return n>0?Cr(e,t+4,t+4+n):""},zr=Ur,Br=function(e,t){var n=Xr(e,t);return n>0?Or(e,t+4,t+4+n):""},Wr=Br,Vr=function(e,t){return function(e,t){for(var n=1-2*(e[t+7]>>>7),r=((127&e[t+7])<<4)+(e[t+6]>>>4&15),i=15&e[t+6],o=5;o>=0;--o)i=256*i+e[t+o];return 2047==r?0==i?n*(1/0):NaN:(0==r?r=-1022:(r-=1023,i+=Math.pow(2,52)),n*Math.pow(2,r-52)*i)}(e,t)},Hr=Vr,Gr=function(e){return Array.isArray(e)||"undefined"!==typeof Uint8Array&&e instanceof Uint8Array};function qr(){Cr=function(e,t,n){return et.utils.decode(1200,e.slice(t,n)).replace(pt,"")},Or=function(e,t,n){return et.utils.decode(65001,e.slice(t,n))},Pr=function(e,t){var n=Xr(e,t);return n>0?et.utils.decode(Ke,e.slice(t+4,t+4+n-1)):""},jr=function(e,t){var n=Xr(e,t);return n>0?et.utils.decode(qe,e.slice(t+4,t+4+n-1)):""},Fr=function(e,t){var n=2*Xr(e,t);return n>0?et.utils.decode(1200,e.slice(t+4,t+4+n-1)):""},zr=function(e,t){var n=Xr(e,t);return n>0?et.utils.decode(1200,e.slice(t+4,t+4+n)):""},Wr=function(e,t){var n=Xr(e,t);return n>0?et.utils.decode(65001,e.slice(t+4,t+4+n)):""}}at&&(Pr=function(e,t){if(!Buffer.isBuffer(e))return Dr(e,t);var n=e.readUInt32LE(t);return n>0?e.toString("utf8",t+4,t+4+n-1):""},jr=function(e,t){if(!Buffer.isBuffer(e))return Lr(e,t);var n=e.readUInt32LE(t);return n>0?e.toString("utf8",t+4,t+4+n-1):""},Fr=function(e,t){if(!Buffer.isBuffer(e))return Mr(e,t);var n=2*e.readUInt32LE(t);return e.toString("utf16le",t+4,t+4+n-1)},zr=function(e,t){if(!Buffer.isBuffer(e))return Ur(e,t);var n=e.readUInt32LE(t);return e.toString("utf16le",t+4,t+4+n)},Wr=function(e,t){if(!Buffer.isBuffer(e))return Br(e,t);var n=e.readUInt32LE(t);return e.toString("utf8",t+4,t+4+n)},Hr=function(e,t){return Buffer.isBuffer(e)?e.readDoubleLE(t):Vr(e,t)},Gr=function(e){return Buffer.isBuffer(e)||Array.isArray(e)||"undefined"!==typeof Uint8Array&&e instanceof Uint8Array}),"undefined"!==typeof et&&qr();var Kr=function(e,t){return e[t]},Yr=function(e,t){return 256*e[t+1]+e[t]},$r=function(e,t){var n=256*e[t+1]+e[t];return n<32768?n:-1*(65535-n+1)},Xr=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},Qr=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},Jr=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function Zr(e,t){var n,r,i,o,a,s,l="",c=[];switch(t){case"dbcs":if(s=this.l,at&&Buffer.isBuffer(this))l=this.slice(this.l,this.l+2*e).toString("utf16le");else for(a=0;a<e;++a)l+=String.fromCharCode(Yr(this,s)),s+=2;e*=2;break;case"utf8":l=Or(this,this.l,this.l+e);break;case"utf16le":e*=2,l=Cr(this,this.l,this.l+e);break;case"wstr":if("undefined"===typeof et)return Zr.call(this,e,"dbcs");l=et.utils.decode(qe,this.slice(this.l,this.l+2*e)),e*=2;break;case"lpstr-ansi":l=Pr(this,this.l),e=4+Xr(this,this.l);break;case"lpstr-cp":l=jr(this,this.l),e=4+Xr(this,this.l);break;case"lpwstr":l=Fr(this,this.l),e=4+2*Xr(this,this.l);break;case"lpp4":e=4+Xr(this,this.l),l=zr(this,this.l),2&e&&(e+=2);break;case"8lpp4":e=4+Xr(this,this.l),l=Wr(this,this.l),3&e&&(e+=4-(3&e));break;case"cstr":for(e=0,l="";0!==(i=Kr(this,this.l+e++));)c.push(tt(i));l=c.join("");break;case"_wstr":for(e=0,l="";0!==(i=Yr(this,this.l+e));)c.push(tt(i)),e+=2;e+=2,l=c.join("");break;case"dbcs-cont":for(l="",s=this.l,a=0;a<e;++a){if(this.lens&&-1!==this.lens.indexOf(s))return i=Kr(this,s),this.l=s+1,o=Zr.call(this,e-a,i?"dbcs-cont":"sbcs-cont"),c.join("")+o;c.push(tt(Yr(this,s))),s+=2}l=c.join(""),e*=2;break;case"cpstr":if("undefined"!==typeof et){l=et.utils.decode(qe,this.slice(this.l,this.l+e));break}case"sbcs-cont":for(l="",s=this.l,a=0;a!=e;++a){if(this.lens&&-1!==this.lens.indexOf(s))return i=Kr(this,s),this.l=s+1,o=Zr.call(this,e-a,i?"dbcs-cont":"sbcs-cont"),c.join("")+o;c.push(tt(Kr(this,s))),s+=1}l=c.join("");break;default:switch(e){case 1:return n=Kr(this,this.l),this.l++,n;case 2:return n=("i"===t?$r:Yr)(this,this.l),this.l+=2,n;case 4:case-4:return"i"===t||0===(128&this[this.l+3])?(n=(e>0?Qr:Jr)(this,this.l),this.l+=4,n):(r=Xr(this,this.l),this.l+=4,r);case 8:case-8:if("f"===t)return r=8==e?Hr(this,this.l):Hr([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,r;e=8;case 16:l=Rr(this,this.l,e)}}return this.l+=e,l}var ei=function(e,t,n){e[n]=255&t,e[n+1]=t>>>8&255,e[n+2]=t>>>16&255,e[n+3]=t>>>24&255},ti=function(e,t,n){e[n]=255&t,e[n+1]=t>>8&255,e[n+2]=t>>16&255,e[n+3]=t>>24&255},ni=function(e,t,n){e[n]=255&t,e[n+1]=t>>>8&255};function ri(e,t,n){var r=0,i=0;if("dbcs"===n){for(i=0;i!=t.length;++i)ni(this,t.charCodeAt(i),this.l+2*i);r=2*t.length}else if("sbcs"===n){if("undefined"!==typeof et&&874==Ke)for(i=0;i!=t.length;++i){var o=et.utils.encode(Ke,t.charAt(i));this[this.l+i]=o[0]}else for(t=t.replace(/[^\x00-\x7F]/g,"_"),i=0;i!=t.length;++i)this[this.l+i]=255&t.charCodeAt(i);r=t.length}else{if("hex"===n){for(;i<e;++i)this[this.l++]=parseInt(t.slice(2*i,2*i+2),16)||0;return this}if("utf16le"===n){var a=Math.min(this.l+e,this.length);for(i=0;i<Math.min(t.length,e);++i){var s=t.charCodeAt(i);this[this.l++]=255&s,this[this.l++]=s>>8}for(;this.l<a;)this[this.l++]=0;return this}switch(e){case 1:r=1,this[this.l]=255&t;break;case 2:r=2,this[this.l]=255&t,t>>>=8,this[this.l+1]=255&t;break;case 3:r=3,this[this.l]=255&t,t>>>=8,this[this.l+1]=255&t,t>>>=8,this[this.l+2]=255&t;break;case 4:r=4,ei(this,t,this.l);break;case 8:if(r=8,"f"===n){!function(e,t,n){var r=(t<0||1/t==-1/0?1:0)<<7,i=0,o=0,a=r?-t:t;isFinite(a)?0==a?i=o=0:(i=Math.floor(Math.log(a)/Math.LN2),o=a*Math.pow(2,52-i),i<=-1023&&(!isFinite(o)||o<Math.pow(2,52))?i=-1022:(o-=Math.pow(2,52),i+=1023)):(i=2047,o=isNaN(t)?26985:0);for(var s=0;s<=5;++s,o/=256)e[n+s]=255&o;e[n+6]=(15&i)<<4|15&o,e[n+7]=i>>4|r}(this,t,this.l);break}case 16:break;case-4:r=4,ti(this,t,this.l)}}return this.l+=r,this}function ii(e,t){var n=Rr(this,this.l,e.length>>1);if(n!==e)throw new Error(t+"Expected "+e+" saw "+n);this.l+=e.length>>1}function oi(e,t){e.l=t,e.read_shift=Zr,e.chk=ii,e.write_shift=ri}function ai(e,t){e.l+=t}function si(e){var t=lt(e);return oi(t,0),t}function li(){var e=[],t=at?256:2048,n=function(e){var t=si(e);return oi(t,0),t},r=n(t),i=function(){r&&(r.length>r.l&&((r=r.slice(0,r.l)).l=r.length),r.length>0&&e.push(r),r=null)},o=function(e){return r&&e<r.length-r.l?r:(i(),r=n(Math.max(e+1,t)))};return{next:o,push:function(e){i(),null==(r=e).l&&(r.l=r.length),o(t)},end:function(){return i(),ft(e)},_bufs:e}}function ci(e,t,n,r){var i,o=+t;if(!isNaN(o)){r||(r=Al[o].p||(n||[]).length||0),i=1+(o>=128?1:0)+1,r>=128&&++i,r>=16384&&++i,r>=2097152&&++i;var a=e.next(i);o<=127?a.write_shift(1,o):(a.write_shift(1,128+(127&o)),a.write_shift(1,o>>7));for(var s=0;4!=s;++s){if(!(r>=128)){a.write_shift(1,r);break}a.write_shift(1,128+(127&r)),r>>=7}r>0&&Gr(n)&&e.push(n)}}function ui(e,t,n){var r=In(e);if(t.s?(r.cRel&&(r.c+=t.s.c),r.rRel&&(r.r+=t.s.r)):(r.cRel&&(r.c+=t.c),r.rRel&&(r.r+=t.r)),!n||n.biff<12){for(;r.c>=256;)r.c-=256;for(;r.r>=65536;)r.r-=65536}return r}function di(e,t,n){var r=In(e);return r.s=ui(r.s,t.s,n),r.e=ui(r.e,t.s,n),r}function hi(e,t){if(e.cRel&&e.c<0)for(e=In(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=In(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var n=bi(e);return e.cRel||null==e.cRel||(n=n.replace(/^([A-Z])/,"$$$1")),e.rRel||null==e.rRel||(n=function(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}(n)),n}function fi(e,t){return 0!=e.s.r||e.s.rRel||e.e.r!=(t.biff>=12?1048575:t.biff>=8?65536:16384)||e.e.rRel?0!=e.s.c||e.s.cRel||e.e.c!=(t.biff>=12?16383:255)||e.e.cRel?hi(e.s,t.biff)+":"+hi(e.e,t.biff):(e.s.rRel?"":"$")+gi(e.s.r)+":"+(e.e.rRel?"":"$")+gi(e.e.r):(e.s.cRel?"":"$")+vi(e.s.c)+":"+(e.e.cRel?"":"$")+vi(e.e.c)}function pi(e){return parseInt(e.replace(/\$(\d+)$/,"$1"),10)-1}function gi(e){return""+(e+1)}function mi(e){for(var t=e.replace(/^\$([A-Z])/,"$1"),n=0,r=0;r!==t.length;++r)n=26*n+t.charCodeAt(r)-64;return n-1}function vi(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function yi(e){for(var t=0,n=0,r=0;r<e.length;++r){var i=e.charCodeAt(r);i>=48&&i<=57?t=10*t+(i-48):i>=65&&i<=90&&(n=26*n+(i-64))}return{c:n-1,r:t-1}}function bi(e){for(var t=e.c+1,n="";t;t=(t-1)/26|0)n=String.fromCharCode((t-1)%26+65)+n;return n+(e.r+1)}function wi(e){var t=e.indexOf(":");return-1==t?{s:yi(e),e:yi(e)}:{s:yi(e.slice(0,t)),e:yi(e.slice(t+1))}}function xi(e,t){return"undefined"===typeof t||"number"===typeof t?xi(e.s,e.e):("string"!==typeof e&&(e=bi(e)),"string"!==typeof t&&(t=bi(t)),e==t?e:e+":"+t)}function Si(e){var t={s:{c:0,r:0},e:{c:0,r:0}},n=0,r=0,i=0,o=e.length;for(n=0;r<o&&!((i=e.charCodeAt(r)-64)<1||i>26);++r)n=26*n+i;for(t.s.c=--n,n=0;r<o&&!((i=e.charCodeAt(r)-48)<0||i>9);++r)n=10*n+i;if(t.s.r=--n,r===o||10!=i)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++r,n=0;r!=o&&!((i=e.charCodeAt(r)-64)<1||i>26);++r)n=26*n+i;for(t.e.c=--n,n=0;r!=o&&!((i=e.charCodeAt(r)-48)<0||i>9);++r)n=10*n+i;return t.e.r=--n,t}function Ei(e,t){var n="d"==e.t&&t instanceof Date;if(null!=e.z)try{return e.w=rn(e.z,n?bn(t):t)}catch(Yc){}try{return e.w=rn((e.XF||{}).numFmtId||(n?14:0),n?bn(t):t)}catch(Yc){return""+t}}function Ti(e,t,n){return null==e||null==e.t||"z"==e.t?"":void 0!==e.w?e.w:("d"==e.t&&!e.z&&n&&n.dateNF&&(e.z=n.dateNF),"e"==e.t?oo[e.v]||e.v:Ei(e,void 0==t?e.v:t))}function Ai(e,t){var n=t&&t.sheet?t.sheet:"Sheet1",r={};return r[n]=e,{SheetNames:[n],Sheets:r}}function _i(e,t,n){var r=n||{},i=e?Array.isArray(e):r.dense;var o=e||(i?[]:{}),a=0,s=0;if(o&&null!=r.origin){if("number"==typeof r.origin)a=r.origin;else{var l="string"==typeof r.origin?yi(r.origin):r.origin;a=l.r,s=l.c}o["!ref"]||(o["!ref"]="A1:A1")}var c={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(o["!ref"]){var u=Si(o["!ref"]);c.s.c=u.s.c,c.s.r=u.s.r,c.e.c=Math.max(c.e.c,u.e.c),c.e.r=Math.max(c.e.r,u.e.r),-1==a&&(c.e.r=a=u.e.r+1)}for(var d=0;d!=t.length;++d)if(t[d]){if(!Array.isArray(t[d]))throw new Error("aoa_to_sheet expects an array of arrays");for(var h=0;h!=t[d].length;++h)if("undefined"!==typeof t[d][h]){var f={v:t[d][h]},p=a+d,g=s+h;if(c.s.r>p&&(c.s.r=p),c.s.c>g&&(c.s.c=g),c.e.r<p&&(c.e.r=p),c.e.c<g&&(c.e.c=g),!t[d][h]||"object"!==typeof t[d][h]||Array.isArray(t[d][h])||t[d][h]instanceof Date)if(Array.isArray(f.v)&&(f.f=t[d][h][1],f.v=f.v[0]),null===f.v)if(f.f)f.t="n";else if(r.nullError)f.t="e",f.v=0;else{if(!r.sheetStubs)continue;f.t="z"}else"number"===typeof f.v?f.t="n":"boolean"===typeof f.v?f.t="b":f.v instanceof Date?(f.z=r.dateNF||At[14],r.cellDates?(f.t="d",f.w=rn(f.z,bn(f.v))):(f.t="n",f.v=bn(f.v),f.w=rn(f.z,f.v))):f.t="s";else f=t[d][h];if(i)o[p]||(o[p]=[]),o[p][g]&&o[p][g].z&&(f.z=o[p][g].z),o[p][g]=f;else{var m=bi({c:g,r:p});o[m]&&o[m].z&&(f.z=o[m].z),o[m]=f}}}return c.s.c<1e7&&(o["!ref"]=xi(c)),o}function ki(e,t){return _i(null,e,t)}function Ci(e,t){return t||(t=si(4)),t.write_shift(4,e),t}function Ii(e){var t=e.read_shift(4);return 0===t?"":e.read_shift(t,"dbcs")}function Ri(e,t){var n=!1;return null==t&&(n=!0,t=si(4+2*e.length)),t.write_shift(4,e.length),e.length>0&&t.write_shift(0,e,"dbcs"),n?t.slice(0,t.l):t}function Ni(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function Oi(e,t){var n=e.l,r=e.read_shift(1),i=Ii(e),o=[],a={t:i,h:i};if(0!==(1&r)){for(var s=e.read_shift(4),l=0;l!=s;++l)o.push(Ni(e));a.r=o}else a.r=[{ich:0,ifnt:0}];return e.l=n+t,a}var Di=Oi;function Pi(e,t){var n=!1;return null==t&&(n=!0,t=si(23+4*e.t.length)),t.write_shift(1,1),Ri(e.t,t),t.write_shift(4,1),function(e,t){t||(t=si(4)),t.write_shift(2,e.ich||0),t.write_shift(2,e.ifnt||0)}({ich:0,ifnt:0},t),n?t.slice(0,t.l):t}function Li(e){var t=e.read_shift(4),n=e.read_shift(2);return n+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:n}}function ji(e,t){return null==t&&(t=si(8)),t.write_shift(-4,e.c),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}function Mi(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}function Fi(e,t){return null==t&&(t=si(4)),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}var Ui=Ii,zi=Ri;function Bi(e){var t=e.read_shift(4);return 0===t||4294967295===t?"":e.read_shift(t,"dbcs")}function Wi(e,t){var n=!1;return null==t&&(n=!0,t=si(127)),t.write_shift(4,e.length>0?e.length:4294967295),e.length>0&&t.write_shift(0,e,"dbcs"),n?t.slice(0,t.l):t}var Vi=Ii,Hi=Bi,Gi=Wi;function qi(e){var t=e.slice(e.l,e.l+4),n=1&t[0],r=2&t[0];e.l+=4;var i=0===r?Hr([0,0,0,0,252&t[0],t[1],t[2],t[3]],0):Qr(t,0)>>2;return n?i/100:i}function Ki(e,t){null==t&&(t=si(4));var n=0,r=0,i=100*e;if(e==(0|e)&&e>=-(1<<29)&&e<1<<29?r=1:i==(0|i)&&i>=-(1<<29)&&i<1<<29&&(r=1,n=1),!r)throw new Error("unsupported RkNumber "+e);t.write_shift(-4,((n?i:e)<<2)+(n+2))}function Yi(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}var $i=Yi,Xi=function(e,t){return t||(t=si(16)),t.write_shift(4,e.s.r),t.write_shift(4,e.e.r),t.write_shift(4,e.s.c),t.write_shift(4,e.e.c),t};function Qi(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function Ji(e,t){return(t||si(8)).write_shift(8,e,"f")}function Zi(e,t){if(t||(t=si(8)),!e||e.auto)return t.write_shift(4,0),t.write_shift(4,0),t;null!=e.index?(t.write_shift(1,2),t.write_shift(1,e.index)):null!=e.theme?(t.write_shift(1,6),t.write_shift(1,e.theme)):(t.write_shift(1,5),t.write_shift(1,0));var n=e.tint||0;if(n>0?n*=32767:n<0&&(n*=32768),t.write_shift(2,n),e.rgb&&null==e.theme){var r=e.rgb||"FFFFFF";"number"==typeof r&&(r=("000000"+r.toString(16)).slice(-6)),t.write_shift(1,parseInt(r.slice(0,2),16)),t.write_shift(1,parseInt(r.slice(2,4),16)),t.write_shift(1,parseInt(r.slice(4,6),16)),t.write_shift(1,255)}else t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);return t}var eo=80,to={1:{n:"CodePage",t:2},2:{n:"Category",t:eo},3:{n:"PresentationFormat",t:eo},4:{n:"ByteCount",t:3},5:{n:"LineCount",t:3},6:{n:"ParagraphCount",t:3},7:{n:"SlideCount",t:3},8:{n:"NoteCount",t:3},9:{n:"HiddenCount",t:3},10:{n:"MultimediaClipCount",t:3},11:{n:"ScaleCrop",t:11},12:{n:"HeadingPairs",t:4108},13:{n:"TitlesOfParts",t:4126},14:{n:"Manager",t:eo},15:{n:"Company",t:eo},16:{n:"LinksUpToDate",t:11},17:{n:"CharacterCount",t:3},19:{n:"SharedDoc",t:11},22:{n:"HyperlinksChanged",t:11},23:{n:"AppVersion",t:3,p:"version"},24:{n:"DigSig",t:65},26:{n:"ContentType",t:eo},27:{n:"ContentStatus",t:eo},28:{n:"Language",t:eo},29:{n:"Version",t:eo},255:{},2147483648:{n:"Locale",t:19},2147483651:{n:"Behavior",t:19},1919054434:{}},no={1:{n:"CodePage",t:2},2:{n:"Title",t:eo},3:{n:"Subject",t:eo},4:{n:"Author",t:eo},5:{n:"Keywords",t:eo},6:{n:"Comments",t:eo},7:{n:"Template",t:eo},8:{n:"LastAuthor",t:eo},9:{n:"RevNumber",t:eo},10:{n:"EditTime",t:64},11:{n:"LastPrinted",t:64},12:{n:"CreatedDate",t:64},13:{n:"ModifiedDate",t:64},14:{n:"PageCount",t:3},15:{n:"WordCount",t:3},16:{n:"CharCount",t:3},17:{n:"Thumbnail",t:71},18:{n:"Application",t:eo},19:{n:"DocSecurity",t:3},255:{},2147483648:{n:"Locale",t:19},2147483651:{n:"Behavior",t:19},1919054434:{}};function ro(e){return e.map(function(e){return[e>>16&255,e>>8&255,255&e]})}var io=In(ro([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])),oo={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},ao={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},so={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function lo(e,t){var n,r=function(e){for(var t=[],n=pn(e),r=0;r!==n.length;++r)null==t[e[n[r]]]&&(t[e[n[r]]]=[]),t[e[n[r]]].push(n[r]);return t}(ao),i=[];i[i.length]=jn,i[i.length]=nr("Types",null,{xmlns:sr,"xmlns:xsd":mr,"xmlns:xsi":gr}),i=i.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(e){return nr("Default",null,{Extension:e[0],ContentType:e[1]})}));var o=function(r){e[r]&&e[r].length>0&&(n=e[r][0],i[i.length]=nr("Override",null,{PartName:("/"==n[0]?"":"/")+n,ContentType:so[r][t.bookType]||so[r].xlsx}))},a=function(n){(e[n]||[]).forEach(function(e){i[i.length]=nr("Override",null,{PartName:("/"==e[0]?"":"/")+e,ContentType:so[n][t.bookType]||so[n].xlsx})})},s=function(t){(e[t]||[]).forEach(function(e){i[i.length]=nr("Override",null,{PartName:("/"==e[0]?"":"/")+e,ContentType:r[t][0]})})};return o("workbooks"),a("sheets"),a("charts"),s("themes"),["strs","styles"].forEach(o),["coreprops","extprops","custprops"].forEach(s),s("vba"),s("comments"),s("threadedcomments"),s("drawings"),a("metadata"),s("people"),i.length>2&&(i[i.length]="</Types>",i[1]=i[1].replace("/>",">")),i.join("")}var co={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function uo(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function ho(e){var t=[jn,nr("Relationships",null,{xmlns:lr})];return pn(e["!id"]).forEach(function(n){t[t.length]=nr("Relationship",null,e["!id"][n])}),t.length>2&&(t[t.length]="</Relationships>",t[1]=t[1].replace("/>",">")),t.join("")}function fo(e,t,n,r,i,o){if(i||(i={}),e["!id"]||(e["!id"]={}),e["!idx"]||(e["!idx"]=1),t<0)for(t=e["!idx"];e["!id"]["rId"+t];++t);if(e["!idx"]=t+1,i.Id="rId"+t,i.Type=r,i.Target=n,o?i.TargetMode=o:[co.HLINK,co.XPATH,co.XMISS].indexOf(i.Type)>-1&&(i.TargetMode="External"),e["!id"][i.Id])throw new Error("Cannot rewrite rId "+t);return e["!id"][i.Id]=i,e[("/"+i.Target).replace("//","/")]=i,t}function po(e,t,n){return['  <rdf:Description rdf:about="'+e+'">\n','    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(n||"odf")+"#"+t+'"/>\n',"  </rdf:Description>\n"].join("")}function go(e,t){return['  <rdf:Description rdf:about="'+e+'">\n','    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+t+'"/>\n',"  </rdf:Description>\n"].join("")}function mo(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+Ge.version+"</meta:generator></office:meta></office:document-meta>"}var vo=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]];function yo(e,t,n,r,i){null==i[e]&&null!=t&&""!==t&&(i[e]=t,t=Bn(t),r[r.length]=n?nr(e,t,n):er(e,t))}function bo(e,t){var n=t||{},r=[jn,nr("cp:coreProperties",null,{"xmlns:cp":ir,"xmlns:dc":ur,"xmlns:dcterms":dr,"xmlns:dcmitype":hr,"xmlns:xsi":gr})],i={};if(!e&&!n.Props)return r.join("");e&&(null!=e.CreatedDate&&yo("dcterms:created","string"===typeof e.CreatedDate?e.CreatedDate:rr(e.CreatedDate,n.WTF),{"xsi:type":"dcterms:W3CDTF"},r,i),null!=e.ModifiedDate&&yo("dcterms:modified","string"===typeof e.ModifiedDate?e.ModifiedDate:rr(e.ModifiedDate,n.WTF),{"xsi:type":"dcterms:W3CDTF"},r,i));for(var o=0;o!=vo.length;++o){var a=vo[o],s=n.Props&&null!=n.Props[a[1]]?n.Props[a[1]]:e?e[a[1]]:null;!0===s?s="1":!1===s?s="0":"number"==typeof s&&(s=String(s)),null!=s&&yo(a[0],s,null,r,i)}return r.length>2&&(r[r.length]="</cp:coreProperties>",r[1]=r[1].replace("/>",">")),r.join("")}var wo=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],xo=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function So(e){var t=[],n=nr;return e||(e={}),e.Application="SheetJS",t[t.length]=jn,t[t.length]=nr("Properties",null,{xmlns:ar,"xmlns:vt":pr}),wo.forEach(function(r){if(void 0!==e[r[1]]){var i;switch(r[2]){case"string":i=Bn(String(e[r[1]]));break;case"bool":i=e[r[1]]?"true":"false"}void 0!==i&&(t[t.length]=n(r[0],i))}}),t[t.length]=n("HeadingPairs",n("vt:vector",n("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+n("vt:variant",n("vt:i4",String(e.Worksheets))),{size:2,baseType:"variant"})),t[t.length]=n("TitlesOfParts",n("vt:vector",e.SheetNames.map(function(e){return"<vt:lpstr>"+Bn(e)+"</vt:lpstr>"}).join(""),{size:e.Worksheets,baseType:"lpstr"})),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}function Eo(e){var t=[jn,nr("Properties",null,{xmlns:or,"xmlns:vt":pr})];if(!e)return t.join("");var n=1;return pn(e).forEach(function(r){++n,t[t.length]=nr("property",function(e,t){switch(typeof e){case"string":var n=nr("vt:lpwstr",Bn(e));return t&&(n=n.replace(/&quot;/g,"_x0022_")),n;case"number":return nr((0|e)==e?"vt:i4":"vt:r8",Bn(String(e)));case"boolean":return nr("vt:bool",e?"true":"false")}if(e instanceof Date)return nr("vt:filetime",rr(e));throw new Error("Unable to serialize "+e)}(e[r],!0),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:n,name:Bn(r)})}),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var To={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"};function Ao(e,t){var n=si(4),r=si(4);switch(n.write_shift(4,80==e?31:e),e){case 3:r.write_shift(-4,t);break;case 5:(r=si(8)).write_shift(8,t,"f");break;case 11:r.write_shift(4,t?1:0);break;case 64:r=function(e){var t=("string"==typeof e?new Date(Date.parse(e)):e).getTime()/1e3+11644473600,n=t%Math.pow(2,32),r=(t-n)/Math.pow(2,32);r*=1e7;var i=(n*=1e7)/Math.pow(2,32)|0;i>0&&(n%=Math.pow(2,32),r+=i);var o=si(8);return o.write_shift(4,n),o.write_shift(4,r),o}(t);break;case 31:case 80:for((r=si(4+2*(t.length+1)+(t.length%2?0:2))).write_shift(4,t.length+1),r.write_shift(0,t,"dbcs");r.l!=r.length;)r.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+t)}return ft([n,r])}var _o=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function ko(e){switch(typeof e){case"boolean":return 11;case"number":return(0|e)==e?3:5;case"string":return 31;case"object":if(e instanceof Date)return 64}return-1}function Co(e,t,n){var r=si(8),i=[],o=[],a=8,s=0,l=si(8),c=si(8);if(l.write_shift(4,2),l.write_shift(4,1200),c.write_shift(4,1),o.push(l),i.push(c),a+=8+l.length,!t){(c=si(8)).write_shift(4,0),i.unshift(c);var u=[si(4)];for(u[0].write_shift(4,e.length),s=0;s<e.length;++s){var d=e[s][0];for((l=si(8+2*(d.length+1)+(d.length%2?0:2))).write_shift(4,s+2),l.write_shift(4,d.length+1),l.write_shift(0,d,"dbcs");l.l!=l.length;)l.write_shift(1,0);u.push(l)}l=ft(u),o.unshift(l),a+=8+l.length}for(s=0;s<e.length;++s)if((!t||t[e[s][0]])&&!(_o.indexOf(e[s][0])>-1||xo.indexOf(e[s][0])>-1)&&null!=e[s][1]){var h=e[s][1],f=0;if(t){var p=n[f=+t[e[s][0]]];if("version"==p.p&&"string"==typeof h){var g=h.split(".");h=(+g[0]<<16)+(+g[1]||0)}l=Ao(p.t,h)}else{var m=ko(h);-1==m&&(m=31,h=String(h)),l=Ao(m,h)}o.push(l),(c=si(8)).write_shift(4,t?f:2+s),i.push(c),a+=8+l.length}var v=8*(o.length+1);for(s=0;s<o.length;++s)i[s].write_shift(4,v),v+=o[s].length;return r.write_shift(4,a),r.write_shift(4,o.length),ft([r].concat(i).concat(o))}function Io(e,t,n,r,i,o){var a=si(i?68:48),s=[a];a.write_shift(2,65534),a.write_shift(2,0),a.write_shift(4,842412599),a.write_shift(16,un.utils.consts.HEADER_CLSID,"hex"),a.write_shift(4,i?2:1),a.write_shift(16,t,"hex"),a.write_shift(4,i?68:48);var l=Co(e,n,r);if(s.push(l),i){var c=Co(i,null,null);a.write_shift(16,o,"hex"),a.write_shift(4,68+l.length),s.push(c)}return ft(s)}function Ro(e,t){return 1===e.read_shift(t)}function No(e,t){return t||(t=si(2)),t.write_shift(2,+!!e),t}function Oo(e){return e.read_shift(2,"u")}function Do(e,t){return t||(t=si(2)),t.write_shift(2,e),t}function Po(e,t,n){return n||(n=si(2)),n.write_shift(1,"e"==t?+e:+!!e),n.write_shift(1,"e"==t?1:0),n}function Lo(e,t,n){var r=e.read_shift(n&&n.biff>=12?2:1),i="sbcs-cont",o=qe;(n&&n.biff>=8&&(qe=1200),n&&8!=n.biff)?12==n.biff&&(i="wstr"):e.read_shift(1)&&(i="dbcs-cont");n.biff>=2&&n.biff<=5&&(i="cpstr");var a=r?e.read_shift(r,i):"";return qe=o,a}function jo(e){var t=e.t||"",n=si(3);n.write_shift(2,t.length),n.write_shift(1,1);var r=si(2*t.length);return r.write_shift(2*t.length,t,"utf16le"),ft([n,r])}function Mo(e,t,n){if(n){if(n.biff>=2&&n.biff<=5)return e.read_shift(t,"cpstr");if(n.biff>=12)return e.read_shift(t,"dbcs-cont")}return 0===e.read_shift(1)?e.read_shift(t,"sbcs-cont"):e.read_shift(t,"dbcs-cont")}function Fo(e,t,n){var r=e.read_shift(n&&2==n.biff?1:2);return 0===r?(e.l++,""):Mo(e,r,n)}function Uo(e,t,n){if(n.biff>5)return Fo(e,0,n);var r=e.read_shift(1);return 0===r?(e.l++,""):e.read_shift(r,n.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function zo(e,t,n){return n||(n=si(3+2*e.length)),n.write_shift(2,e.length),n.write_shift(1,1),n.write_shift(31,e,"utf16le"),n}function Bo(e,t){t||(t=si(6+2*e.length)),t.write_shift(4,1+e.length);for(var n=0;n<e.length;++n)t.write_shift(2,e.charCodeAt(n));return t.write_shift(2,0),t}function Wo(e){var t=si(512),n=0,r=e.Target;"file://"==r.slice(0,7)&&(r=r.slice(7));var i=r.indexOf("#"),o=i>-1?31:23;switch(r.charAt(0)){case"#":o=28;break;case".":o&=-3}t.write_shift(4,2),t.write_shift(4,o);var a=[8,6815827,6619237,4849780,83];for(n=0;n<a.length;++n)t.write_shift(4,a[n]);if(28==o)Bo(r=r.slice(1),t);else if(2&o){for(a="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),n=0;n<a.length;++n)t.write_shift(1,parseInt(a[n],16));var s=i>-1?r.slice(0,i):r;for(t.write_shift(4,2*(s.length+1)),n=0;n<s.length;++n)t.write_shift(2,s.charCodeAt(n));t.write_shift(2,0),8&o&&Bo(i>-1?r.slice(i+1):"",t)}else{for(a="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),n=0;n<a.length;++n)t.write_shift(1,parseInt(a[n],16));for(var l=0;"../"==r.slice(3*l,3*l+3)||"..\\"==r.slice(3*l,3*l+3);)++l;for(t.write_shift(2,l),t.write_shift(4,r.length-3*l+1),n=0;n<r.length-3*l;++n)t.write_shift(1,255&r.charCodeAt(n+3*l));for(t.write_shift(1,0),t.write_shift(2,65535),t.write_shift(2,57005),n=0;n<6;++n)t.write_shift(4,0)}return t.slice(0,t.l)}function Vo(e,t,n,r){return r||(r=si(6)),r.write_shift(2,e),r.write_shift(2,t),r.write_shift(2,n||0),r}function Ho(e,t,n){var r=n.biff>8?4:2;return[e.read_shift(r),e.read_shift(r,"i"),e.read_shift(r,"i")]}function Go(e){var t=e.read_shift(2),n=e.read_shift(2);return{s:{c:e.read_shift(2),r:t},e:{c:e.read_shift(2),r:n}}}function qo(e,t){return t||(t=si(8)),t.write_shift(2,e.s.r),t.write_shift(2,e.e.r),t.write_shift(2,e.s.c),t.write_shift(2,e.e.c),t}function Ko(e,t,n){var r=1536,i=16;switch(n.bookType){case"biff8":case"xla":break;case"biff5":r=1280,i=8;break;case"biff4":r=4,i=6;break;case"biff3":r=3,i=6;break;case"biff2":r=2,i=4;break;default:throw new Error("unsupported BIFF version")}var o=si(i);return o.write_shift(2,r),o.write_shift(2,t),i>4&&o.write_shift(2,29282),i>6&&o.write_shift(2,1997),i>8&&(o.write_shift(2,49161),o.write_shift(2,1),o.write_shift(2,1798),o.write_shift(2,0)),o}function Yo(e,t){var n=!t||t.biff>=8?2:1,r=si(8+n*e.name.length);r.write_shift(4,e.pos),r.write_shift(1,e.hs||0),r.write_shift(1,e.dt),r.write_shift(1,e.name.length),t.biff>=8&&r.write_shift(1,1),r.write_shift(n*e.name.length,e.name,t.biff<8?"sbcs":"utf16le");var i=r.slice(0,r.l);return i.l=r.l,i}function $o(e,t,n,r){var i=n&&5==n.biff;r||(r=si(i?3+t.length:5+2*t.length)),r.write_shift(2,e),r.write_shift(i?1:2,t.length),i||r.write_shift(1,1),r.write_shift((i?1:2)*t.length,t,i?"sbcs":"utf16le");var o=r.length>r.l?r.slice(0,r.l):r;return null==o.l&&(o.l=o.length),o}function Xo(e,t,n,r){var i=n&&5==n.biff;r||(r=si(i?16:20)),r.write_shift(2,0),e.style?(r.write_shift(2,e.numFmtId||0),r.write_shift(2,65524)):(r.write_shift(2,e.numFmtId||0),r.write_shift(2,t<<4));var o=0;return e.numFmtId>0&&i&&(o|=1024),r.write_shift(4,o),r.write_shift(4,0),i||r.write_shift(4,0),r.write_shift(2,0),r}function Qo(e,t,n){if(n.biff<8)return function(e,t,n){3==e[e.l+1]&&e[e.l]++;var r=Lo(e,0,n);return 3==r.charCodeAt(0)?r.slice(1):r}(e,0,n);for(var r=[],i=e.l+t,o=e.read_shift(n.biff>8?4:2);0!==o--;)r.push(Ho(e,n.biff,n));if(e.l!=i)throw new Error("Bad ExternSheet: "+e.l+" != "+i);return r}function Jo(e){var t=si(24),n=yi(e[0]);t.write_shift(2,n.r),t.write_shift(2,n.r),t.write_shift(2,n.c),t.write_shift(2,n.c);for(var r="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),i=0;i<16;++i)t.write_shift(1,parseInt(r[i],16));return ft([t,Wo(e[1])])}function Zo(e){var t=e[1].Tooltip,n=si(10+2*(t.length+1));n.write_shift(2,2048);var r=yi(e[0]);n.write_shift(2,r.r),n.write_shift(2,r.r),n.write_shift(2,r.c),n.write_shift(2,r.c);for(var i=0;i<t.length;++i)n.write_shift(2,t.charCodeAt(i));return n.write_shift(2,0),n}function ea(e,t,n){if(!n.cellStyles)return ai(e,t);var r=n&&n.biff>=12?4:2,i=e.read_shift(r),o=e.read_shift(r),a=e.read_shift(r),s=e.read_shift(r),l=e.read_shift(2);2==r&&(e.l+=2);var c={s:i,e:o,w:a,ixfe:s,flags:l};return(n.biff>=5||!n.biff)&&(c.level=l>>8&7),c}var ta=function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=mn({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function n(t,n){var r=n||{};r.dateNF||(r.dateNF="yyyymmdd");var i=ki(function(t,n){var r=[],i=lt(1);switch(n.type){case"base64":i=ut(ot(t));break;case"binary":i=ut(t);break;case"buffer":case"array":i=t}oi(i,0);var o=i.read_shift(1),a=!!(136&o),s=!1,l=!1;switch(o){case 2:case 3:case 131:case 139:case 245:break;case 48:case 49:s=!0,a=!0;break;case 140:l=!0;break;default:throw new Error("DBF Unsupported Version: "+o.toString(16))}var c=0,u=521;2==o&&(c=i.read_shift(2)),i.l+=3,2!=o&&(c=i.read_shift(4)),c>1048576&&(c=1e6),2!=o&&(u=i.read_shift(2));var d=i.read_shift(2),h=n.codepage||1252;2!=o&&(i.l+=16,i.read_shift(1),0!==i[i.l]&&(h=e[i[i.l]]),i.l+=1,i.l+=2),l&&(i.l+=36);for(var f=[],p={},g=Math.min(i.length,2==o?521:u-10-(s?264:0)),m=l?32:11;i.l<g&&13!=i[i.l];)switch((p={}).name=et.utils.decode(h,i.slice(i.l,i.l+m)).replace(/[\u0000\r\n].*$/g,""),i.l+=m,p.type=String.fromCharCode(i.read_shift(1)),2==o||l||(p.offset=i.read_shift(4)),p.len=i.read_shift(1),2==o&&(p.offset=i.read_shift(2)),p.dec=i.read_shift(1),p.name.length&&f.push(p),2!=o&&(i.l+=l?13:14),p.type){case"B":s&&8==p.len||!n.WTF||console.log("Skipping "+p.name+":"+p.type);break;case"G":case"P":n.WTF&&console.log("Skipping "+p.name+":"+p.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+p.type)}if(13!==i[i.l]&&(i.l=u-1),13!==i.read_shift(1))throw new Error("DBF Terminator not found "+i.l+" "+i[i.l]);i.l=u;var v=0,y=0;for(r[0]=[],y=0;y!=f.length;++y)r[0][y]=f[y].name;for(;c-- >0;)if(42!==i[i.l])for(++i.l,r[++v]=[],y=0,y=0;y!=f.length;++y){var b=i.slice(i.l,i.l+f[y].len);i.l+=f[y].len,oi(b,0);var w=et.utils.decode(h,b);switch(f[y].type){case"C":w.trim().length&&(r[v][y]=w.replace(/\s+$/,""));break;case"D":8===w.length?r[v][y]=new Date(+w.slice(0,4),+w.slice(4,6)-1,+w.slice(6,8)):r[v][y]=w;break;case"F":r[v][y]=parseFloat(w.trim());break;case"+":case"I":r[v][y]=l?2147483648^b.read_shift(-4,"i"):b.read_shift(4,"i");break;case"L":switch(w.trim().toUpperCase()){case"Y":case"T":r[v][y]=!0;break;case"N":case"F":r[v][y]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+w+"|")}break;case"M":if(!a)throw new Error("DBF Unexpected MEMO for type "+o.toString(16));r[v][y]="##MEMO##"+(l?parseInt(w.trim(),10):b.read_shift(4));break;case"N":(w=w.replace(/\u0000/g,"").trim())&&"."!=w&&(r[v][y]=+w||0);break;case"@":r[v][y]=new Date(b.read_shift(-8,"f")-621356832e5);break;case"T":r[v][y]=new Date(864e5*(b.read_shift(4)-2440588)+b.read_shift(4));break;case"Y":r[v][y]=b.read_shift(4,"i")/1e4+b.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":r[v][y]=-b.read_shift(-8,"f");break;case"B":if(s&&8==f[y].len){r[v][y]=b.read_shift(8,"f");break}case"G":case"P":b.l+=f[y].len;break;case"0":if("_NullFlags"===f[y].name)break;default:throw new Error("DBF Unsupported data type "+f[y].type)}}else i.l+=d;if(2!=o&&i.l<i.length&&26!=i[i.l++])throw new Error("DBF EOF Marker missing "+(i.l-1)+" of "+i.length+" "+i[i.l-1].toString(16));return n&&n.sheetRows&&(r=r.slice(0,n.sheetRows)),n.DBF=f,r}(t,r),r);return i["!cols"]=r.DBF.map(function(e){return{wch:e.len,DBF:e}}),delete r.DBF,i}var r={B:8,C:250,L:1,D:8,"?":0,"":0};return{to_workbook:function(e,t){try{return Ai(n(e,t),t)}catch(Yc){if(t&&t.WTF)throw Yc}return{SheetNames:[],Sheets:{}}},to_sheet:n,from_sheet:function(e,n){var i=n||{};if(+i.codepage>=0&&Qe(+i.codepage),"string"==i.type)throw new Error("Cannot write DBF to JS string");var o=li(),a=xc(e,{header:1,raw:!0,cellDates:!0}),s=a[0],l=a.slice(1),c=e["!cols"]||[],u=0,d=0,h=0,f=1;for(u=0;u<s.length;++u)if(((c[u]||{}).DBF||{}).name)s[u]=c[u].DBF.name,++h;else if(null!=s[u]){if(++h,"number"===typeof s[u]&&(s[u]=s[u].toString(10)),"string"!==typeof s[u])throw new Error("DBF Invalid column name "+s[u]+" |"+typeof s[u]+"|");if(s.indexOf(s[u])!==u)for(d=0;d<1024;++d)if(-1==s.indexOf(s[u]+"_"+d)){s[u]+="_"+d;break}}var p=Si(e["!ref"]),g=[],m=[],v=[];for(u=0;u<=p.e.c-p.s.c;++u){var y="",b="",w=0,x=[];for(d=0;d<l.length;++d)null!=l[d][u]&&x.push(l[d][u]);if(0!=x.length&&null!=s[u]){for(d=0;d<x.length;++d){switch(typeof x[d]){case"number":b="B";break;case"string":default:b="C";break;case"boolean":b="L";break;case"object":b=x[d]instanceof Date?"D":"C"}w=Math.max(w,String(x[d]).length),y=y&&y!=b?"C":b}w>250&&(w=250),"C"==(b=((c[u]||{}).DBF||{}).type)&&c[u].DBF.len>w&&(w=c[u].DBF.len),"B"==y&&"N"==b&&(y="N",v[u]=c[u].DBF.dec,w=c[u].DBF.len),m[u]="C"==y||"N"==b?w:r[y]||0,f+=m[u],g[u]=y}else g[u]="?"}var S=o.next(32);for(S.write_shift(4,318902576),S.write_shift(4,l.length),S.write_shift(2,296+32*h),S.write_shift(2,f),u=0;u<4;++u)S.write_shift(4,0);for(S.write_shift(4,(+t[Ke]||3)<<8),u=0,d=0;u<s.length;++u)if(null!=s[u]){var E=o.next(32),T=(s[u].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);E.write_shift(1,T,"sbcs"),E.write_shift(1,"?"==g[u]?"C":g[u],"sbcs"),E.write_shift(4,d),E.write_shift(1,m[u]||r[g[u]]||0),E.write_shift(1,v[u]||0),E.write_shift(1,2),E.write_shift(4,0),E.write_shift(1,0),E.write_shift(4,0),E.write_shift(4,0),d+=m[u]||r[g[u]]||0}var A=o.next(264);for(A.write_shift(4,13),u=0;u<65;++u)A.write_shift(4,0);for(u=0;u<l.length;++u){var _=o.next(f);for(_.write_shift(1,0),d=0;d<s.length;++d)if(null!=s[d])switch(g[d]){case"L":_.write_shift(1,null==l[u][d]?63:l[u][d]?84:70);break;case"B":_.write_shift(8,l[u][d]||0,"f");break;case"N":var k="0";for("number"==typeof l[u][d]&&(k=l[u][d].toFixed(v[d]||0)),h=0;h<m[d]-k.length;++h)_.write_shift(1,32);_.write_shift(1,k,"sbcs");break;case"D":l[u][d]?(_.write_shift(4,("0000"+l[u][d].getFullYear()).slice(-4),"sbcs"),_.write_shift(2,("00"+(l[u][d].getMonth()+1)).slice(-2),"sbcs"),_.write_shift(2,("00"+l[u][d].getDate()).slice(-2),"sbcs")):_.write_shift(8,"00000000","sbcs");break;case"C":var C=String(null!=l[u][d]?l[u][d]:"").slice(0,m[d]);for(_.write_shift(1,C,"sbcs"),h=0;h<m[d]-C.length;++h)_.write_shift(1,32)}}return o.next(1).write_shift(1,26),o.end()}}}(),na=function(){var e={AA:"\xc0",BA:"\xc1",CA:"\xc2",DA:195,HA:"\xc4",JA:197,AE:"\xc8",BE:"\xc9",CE:"\xca",HE:"\xcb",AI:"\xcc",BI:"\xcd",CI:"\xce",HI:"\xcf",AO:"\xd2",BO:"\xd3",CO:"\xd4",DO:213,HO:"\xd6",AU:"\xd9",BU:"\xda",CU:"\xdb",HU:"\xdc",Aa:"\xe0",Ba:"\xe1",Ca:"\xe2",Da:227,Ha:"\xe4",Ja:229,Ae:"\xe8",Be:"\xe9",Ce:"\xea",He:"\xeb",Ai:"\xec",Bi:"\xed",Ci:"\xee",Hi:"\xef",Ao:"\xf2",Bo:"\xf3",Co:"\xf4",Do:245,Ho:"\xf6",Au:"\xf9",Bu:"\xfa",Cu:"\xfb",Hu:"\xfc",KC:"\xc7",Kc:"\xe7",q:"\xe6",z:"\u0153",a:"\xc6",j:"\u0152",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1bN("+pn(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),n=function(t,n){var r=e[n];return"number"==typeof r?nt(r):r},r=function(e,t,n){var r=t.charCodeAt(0)-32<<4|n.charCodeAt(0)-48;return 59==r?e:nt(r)};function i(e,i){var o,a=e.split(/[\n\r]+/),s=-1,l=-1,c=0,u=0,d=[],h=[],f=null,p={},g=[],m=[],v=[],y=0;for(+i.codepage>=0&&Qe(+i.codepage);c!==a.length;++c){y=0;var b,w=a[c].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,r).replace(t,n),x=w.replace(/;;/g,"\0").split(";").map(function(e){return e.replace(/\u0000/g,";")}),S=x[0];if(w.length>0)switch(S){case"ID":case"E":case"B":case"O":case"W":break;case"P":"P"==x[1].charAt(0)&&h.push(w.slice(3).replace(/;;/g,";"));break;case"C":var E=!1,T=!1,A=!1,_=!1,k=-1,C=-1;for(u=1;u<x.length;++u)switch(x[u].charAt(0)){case"A":case"G":break;case"X":l=parseInt(x[u].slice(1))-1,T=!0;break;case"Y":for(s=parseInt(x[u].slice(1))-1,T||(l=0),o=d.length;o<=s;++o)d[o]=[];break;case"K":'"'===(b=x[u].slice(1)).charAt(0)?b=b.slice(1,b.length-1):"TRUE"===b?b=!0:"FALSE"===b?b=!1:isNaN(Nn(b))?isNaN(Dn(b).getDate())||(b=kn(b)):(b=Nn(b),null!==f&&Zt(f)&&(b=En(b))),"undefined"!==typeof et&&"string"==typeof b&&"string"!=(i||{}).type&&(i||{}).codepage&&(b=et.utils.decode(i.codepage,b)),E=!0;break;case"E":_=!0;var I=Ka(x[u].slice(1),{r:s,c:l});d[s][l]=[d[s][l],I];break;case"S":A=!0,d[s][l]=[d[s][l],"S5S"];break;case"R":k=parseInt(x[u].slice(1))-1;break;case"C":C=parseInt(x[u].slice(1))-1;break;default:if(i&&i.WTF)throw new Error("SYLK bad record "+w)}if(E&&(d[s][l]&&2==d[s][l].length?d[s][l][0]=b:d[s][l]=b,f=null),A){if(_)throw new Error("SYLK shared formula cannot have own formula");var R=k>-1&&d[k][C];if(!R||!R[1])throw new Error("SYLK shared formula cannot find base");d[s][l][1]=Xa(R[1],{r:s-k,c:l-C})}break;case"F":var N=0;for(u=1;u<x.length;++u)switch(x[u].charAt(0)){case"X":l=parseInt(x[u].slice(1))-1,++N;break;case"Y":for(s=parseInt(x[u].slice(1))-1,o=d.length;o<=s;++o)d[o]=[];break;case"M":y=parseInt(x[u].slice(1))/20;break;case"F":case"G":case"S":case"D":case"N":break;case"P":f=h[parseInt(x[u].slice(1))];break;case"W":for(v=x[u].slice(1).split(" "),o=parseInt(v[0],10);o<=parseInt(v[1],10);++o)y=parseInt(v[2],10),m[o-1]=0===y?{hidden:!0}:{wch:y},ba(m[o-1]);break;case"C":m[l=parseInt(x[u].slice(1))-1]||(m[l]={});break;case"R":g[s=parseInt(x[u].slice(1))-1]||(g[s]={}),y>0?(g[s].hpt=y,g[s].hpx=Sa(y)):0===y&&(g[s].hidden=!0);break;default:if(i&&i.WTF)throw new Error("SYLK bad record "+w)}N<1&&(f=null);break;default:if(i&&i.WTF)throw new Error("SYLK bad record "+w)}}return g.length>0&&(p["!rows"]=g),m.length>0&&(p["!cols"]=m),i&&i.sheetRows&&(d=d.slice(0,i.sheetRows)),[d,p]}function o(e,t){var n=function(e,t){switch(t.type){case"base64":return i(ot(e),t);case"binary":return i(e,t);case"buffer":return i(at&&Buffer.isBuffer(e)?e.toString("binary"):ht(e),t);case"array":return i(Cn(e),t)}throw new Error("Unrecognized type "+t.type)}(e,t),r=n[0],o=n[1],a=ki(r,t);return pn(o).forEach(function(e){a[e]=o[e]}),a}function a(e,t,n,r){var i="C;Y"+(n+1)+";X"+(r+1)+";K";switch(e.t){case"n":i+=e.v||0,e.f&&!e.F&&(i+=";E"+$a(e.f,{r:n,c:r}));break;case"b":i+=e.v?"TRUE":"FALSE";break;case"e":i+=e.w||e.v;break;case"d":i+='"'+(e.w||e.v)+'"';break;case"s":i+='"'+e.v.replace(/"/g,"").replace(/;/g,";;")+'"'}return i}return e["|"]=254,{to_workbook:function(e,t){return Ai(o(e,t),t)},to_sheet:o,from_sheet:function(e,t){var n,r,i=["ID;PWXL;N;E"],o=[],s=Si(e["!ref"]),l=Array.isArray(e),c="\r\n";i.push("P;PGeneral"),i.push("F;P0;DG0G8;M255"),e["!cols"]&&(r=i,e["!cols"].forEach(function(e,t){var n="F;W"+(t+1)+" "+(t+1)+" ";e.hidden?n+="0":("number"!=typeof e.width||e.wpx||(e.wpx=ma(e.width)),"number"!=typeof e.wpx||e.wch||(e.wch=va(e.wpx)),"number"==typeof e.wch&&(n+=Math.round(e.wch)))," "!=n.charAt(n.length-1)&&r.push(n)})),e["!rows"]&&function(e,t){t.forEach(function(t,n){var r="F;";t.hidden?r+="M0;":t.hpt?r+="M"+20*t.hpt+";":t.hpx&&(r+="M"+20*xa(t.hpx)+";"),r.length>2&&e.push(r+"R"+(n+1))})}(i,e["!rows"]),i.push("B;Y"+(s.e.r-s.s.r+1)+";X"+(s.e.c-s.s.c+1)+";D"+[s.s.c,s.s.r,s.e.c,s.e.r].join(" "));for(var u=s.s.r;u<=s.e.r;++u)for(var d=s.s.c;d<=s.e.c;++d){var h=bi({r:u,c:d});(n=l?(e[u]||[])[d]:e[h])&&(null!=n.v||n.f&&!n.F)&&o.push(a(n,0,u,d))}return i.join(c)+c+o.join(c)+c+"E"+c}}}(),ra=function(){function e(e,t){for(var n=e.split("\n"),r=-1,i=-1,o=0,a=[];o!==n.length;++o)if("BOT"!==n[o].trim()){if(!(r<0)){for(var s=n[o].trim().split(","),l=s[0],c=s[1],u=n[++o]||"";1&(u.match(/["]/g)||[]).length&&o<n.length-1;)u+="\n"+n[++o];switch(u=u.trim(),+l){case-1:if("BOT"===u){a[++r]=[],i=0;continue}if("EOD"!==u)throw new Error("Unrecognized DIF special command "+u);break;case 0:"TRUE"===u?a[r][i]=!0:"FALSE"===u?a[r][i]=!1:isNaN(Nn(c))?isNaN(Dn(c).getDate())?a[r][i]=c:a[r][i]=kn(c):a[r][i]=Nn(c),++i;break;case 1:(u=(u=u.slice(1,u.length-1)).replace(/""/g,'"'))&&u.match(/^=".*"$/)&&(u=u.slice(2,-1)),a[r][i++]=""!==u?u:null}if("EOD"===u)break}}else a[++r]=[],i=0;return t&&t.sheetRows&&(a=a.slice(0,t.sheetRows)),a}function t(t,n){return ki(function(t,n){switch(n.type){case"base64":return e(ot(t),n);case"binary":return e(t,n);case"buffer":return e(at&&Buffer.isBuffer(t)?t.toString("binary"):ht(t),n);case"array":return e(Cn(t),n)}throw new Error("Unrecognized type "+n.type)}(t,n),n)}return{to_workbook:function(e,n){return Ai(t(e,n),n)},to_sheet:t,from_sheet:function(){var e=function(e,t,n,r,i){e.push(t),e.push(n+","+r),e.push('"'+i.replace(/"/g,'""')+'"')},t=function(e,t,n,r){e.push(t+","+n),e.push(1==t?'"'+r.replace(/"/g,'""')+'"':r)};return function(n){var r,i=[],o=Si(n["!ref"]),a=Array.isArray(n);e(i,"TABLE",0,1,"sheetjs"),e(i,"VECTORS",0,o.e.r-o.s.r+1,""),e(i,"TUPLES",0,o.e.c-o.s.c+1,""),e(i,"DATA",0,0,"");for(var s=o.s.r;s<=o.e.r;++s){t(i,-1,0,"BOT");for(var l=o.s.c;l<=o.e.c;++l){var c=bi({r:s,c:l});if(r=a?(n[s]||[])[l]:n[c])switch(r.t){case"n":var u=r.w;u||null==r.v||(u=r.v),null==u?r.f&&!r.F?t(i,1,0,"="+r.f):t(i,1,0,""):t(i,0,u,"V");break;case"b":t(i,0,r.v?1:0,r.v?"TRUE":"FALSE");break;case"s":t(i,1,0,isNaN(r.v)?r.v:'="'+r.v+'"');break;case"d":r.w||(r.w=rn(r.z||At[14],bn(kn(r.v)))),t(i,0,r.w,"V");break;default:t(i,1,0,"")}else t(i,1,0,"")}}t(i,-1,0,"EOD");return i.join("\r\n")}}()}}(),ia=function(){function e(e){return e.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,"\n")}function t(e){return e.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function n(t,n){return ki(function(t,n){for(var r=t.split("\n"),i=-1,o=-1,a=0,s=[];a!==r.length;++a){var l=r[a].trim().split(":");if("cell"===l[0]){var c=yi(l[1]);if(s.length<=c.r)for(i=s.length;i<=c.r;++i)s[i]||(s[i]=[]);switch(i=c.r,o=c.c,l[2]){case"t":s[i][o]=e(l[3]);break;case"v":s[i][o]=+l[3];break;case"vtf":var u=l[l.length-1];case"vtc":"nl"===l[3]?s[i][o]=!!+l[4]:s[i][o]=+l[4],"vtf"==l[2]&&(s[i][o]=[s[i][o],u])}}}return n&&n.sheetRows&&(s=s.slice(0,n.sheetRows)),s}(t,n),n)}var r=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join("\n"),i=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join("\n")+"\n",o=["# SocialCalc Spreadsheet Control Save","part:sheet"].join("\n"),a="--SocialCalcSpreadsheetControlSave--";function s(e){if(!e||!e["!ref"])return"";for(var n,r=[],i=[],o="",a=wi(e["!ref"]),s=Array.isArray(e),l=a.s.r;l<=a.e.r;++l)for(var c=a.s.c;c<=a.e.c;++c)if(o=bi({r:l,c:c}),(n=s?(e[l]||[])[c]:e[o])&&null!=n.v&&"z"!==n.t){switch(i=["cell",o,"t"],n.t){case"s":case"str":i.push(t(n.v));break;case"n":n.f?(i[2]="vtf",i[3]="n",i[4]=n.v,i[5]=t(n.f)):(i[2]="v",i[3]=n.v);break;case"b":i[2]="vt"+(n.f?"f":"c"),i[3]="nl",i[4]=n.v?"1":"0",i[5]=t(n.f||(n.v?"TRUE":"FALSE"));break;case"d":var u=bn(kn(n.v));i[2]="vtc",i[3]="nd",i[4]=""+u,i[5]=n.w||rn(n.z||At[14],u);break;case"e":continue}r.push(i.join(":"))}return r.push("sheet:c:"+(a.e.c-a.s.c+1)+":r:"+(a.e.r-a.s.r+1)+":tvf:1"),r.push("valueformat:1:text-wiki"),r.join("\n")}return{to_workbook:function(e,t){return Ai(n(e,t),t)},to_sheet:n,from_sheet:function(e){return[r,i,o,i,s(e),a].join("\n")}}}(),oa=function(){function e(e,t,n,r,i){i.raw?t[n][r]=e:""===e||("TRUE"===e?t[n][r]=!0:"FALSE"===e?t[n][r]=!1:isNaN(Nn(e))?isNaN(Dn(e).getDate())?t[n][r]=e:t[n][r]=kn(e):t[n][r]=Nn(e))}var t={44:",",9:"\t",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function r(e){for(var r={},i=!1,o=0,a=0;o<e.length;++o)34==(a=e.charCodeAt(o))?i=!i:!i&&a in t&&(r[a]=(r[a]||0)+1);for(o in a=[],r)Object.prototype.hasOwnProperty.call(r,o)&&a.push([r[o],o]);if(!a.length)for(o in r=n)Object.prototype.hasOwnProperty.call(r,o)&&a.push([r[o],o]);return a.sort(function(e,t){return e[0]-t[0]||n[e[1]]-n[t[1]]}),t[a.pop()[1]]||44}function i(e,t){var n=t||{},i="";var o=n.dense?[]:{},a={s:{c:0,r:0},e:{c:0,r:0}};"sep="==e.slice(0,4)?13==e.charCodeAt(5)&&10==e.charCodeAt(6)?(i=e.charAt(4),e=e.slice(7)):13==e.charCodeAt(5)||10==e.charCodeAt(5)?(i=e.charAt(4),e=e.slice(6)):i=r(e.slice(0,1024)):i=n&&n.FS?n.FS:r(e.slice(0,1024));var s=0,l=0,c=0,u=0,d=0,h=i.charCodeAt(0),f=!1,p=0,g=e.charCodeAt(0);e=e.replace(/\r\n/gm,"\n");var m=null!=n.dateNF?function(e){var t="number"==typeof e?At[e]:e;return t=t.replace(ln,"(\\d+)"),new RegExp("^"+t+"$")}(n.dateNF):null;function v(){var t=e.slice(u,d),r={};if('"'==t.charAt(0)&&'"'==t.charAt(t.length-1)&&(t=t.slice(1,-1).replace(/""/g,'"')),0===t.length)r.t="z";else if(n.raw)r.t="s",r.v=t;else if(0===t.trim().length)r.t="s",r.v=t;else if(61==t.charCodeAt(0))34==t.charCodeAt(1)&&34==t.charCodeAt(t.length-1)?(r.t="s",r.v=t.slice(2,-1).replace(/""/g,'"')):1!=t.length?(r.t="n",r.f=t.slice(1)):(r.t="s",r.v=t);else if("TRUE"==t)r.t="b",r.v=!0;else if("FALSE"==t)r.t="b",r.v=!1;else if(isNaN(c=Nn(t)))if(!isNaN(Dn(t).getDate())||m&&t.match(m)){r.z=n.dateNF||At[14];var i=0;m&&t.match(m)&&(t=function(e,t,n){var r=-1,i=-1,o=-1,a=-1,s=-1,l=-1;(t.match(ln)||[]).forEach(function(e,t){var c=parseInt(n[t+1],10);switch(e.toLowerCase().charAt(0)){case"y":r=c;break;case"d":o=c;break;case"h":a=c;break;case"s":l=c;break;case"m":a>=0?s=c:i=c}}),l>=0&&-1==s&&i>=0&&(s=i,i=-1);var c=(""+(r>=0?r:(new Date).getFullYear())).slice(-4)+"-"+("00"+(i>=1?i:1)).slice(-2)+"-"+("00"+(o>=1?o:1)).slice(-2);7==c.length&&(c="0"+c),8==c.length&&(c="20"+c);var u=("00"+(a>=0?a:0)).slice(-2)+":"+("00"+(s>=0?s:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2);return-1==a&&-1==s&&-1==l?c:-1==r&&-1==i&&-1==o?u:c+"T"+u}(0,n.dateNF,t.match(m)||[]),i=1),n.cellDates?(r.t="d",r.v=kn(t,i)):(r.t="n",r.v=bn(kn(t,i))),!1!==n.cellText&&(r.w=rn(r.z,r.v instanceof Date?bn(r.v):r.v)),n.cellNF||delete r.z}else r.t="s",r.v=t;else r.t="n",!1!==n.cellText&&(r.w=t),r.v=c;if("z"==r.t||(n.dense?(o[s]||(o[s]=[]),o[s][l]=r):o[bi({c:l,r:s})]=r),u=d+1,g=e.charCodeAt(u),a.e.c<l&&(a.e.c=l),a.e.r<s&&(a.e.r=s),p==h)++l;else if(l=0,++s,n.sheetRows&&n.sheetRows<=s)return!0}e:for(;d<e.length;++d)switch(p=e.charCodeAt(d)){case 34:34===g&&(f=!f);break;case h:case 10:case 13:if(!f&&v())break e}return d-u>0&&v(),o["!ref"]=xi(a),o}function o(t,n){return n&&n.PRN?n.FS||"sep="==t.slice(0,4)||t.indexOf("\t")>=0||t.indexOf(",")>=0||t.indexOf(";")>=0?i(t,n):ki(function(t,n){var r=n||{},i=[];if(!t||0===t.length)return i;for(var o=t.split(/[\r\n]/),a=o.length-1;a>=0&&0===o[a].length;)--a;for(var s=10,l=0,c=0;c<=a;++c)-1==(l=o[c].indexOf(" "))?l=o[c].length:l++,s=Math.max(s,l);for(c=0;c<=a;++c){i[c]=[];var u=0;for(e(o[c].slice(0,s).trim(),i,c,u,r),u=1;u<=(o[c].length-s)/10+1;++u)e(o[c].slice(s+10*(u-1),s+10*u).trim(),i,c,u,r)}return r.sheetRows&&(i=i.slice(0,r.sheetRows)),i}(t,n),n):i(t,n)}function a(e,t){var n="",r="string"==t.type?[0,0,0,0]:pc(e,t);switch(t.type){case"base64":n=ot(e);break;case"binary":case"string":n=e;break;case"buffer":n=65001==t.codepage?e.toString("utf8"):t.codepage&&"undefined"!==typeof et?et.utils.decode(t.codepage,e):at&&Buffer.isBuffer(e)?e.toString("binary"):ht(e);break;case"array":n=Cn(e);break;default:throw new Error("Unrecognized type "+t.type)}return 239==r[0]&&187==r[1]&&191==r[2]?n=Xn(n.slice(3)):"string"!=t.type&&"buffer"!=t.type&&65001==t.codepage?n=Xn(n):"binary"==t.type&&"undefined"!==typeof et&&t.codepage&&(n=et.utils.decode(t.codepage,et.utils.encode(28591,n))),"socialcalc:version:"==n.slice(0,19)?ia.to_sheet("string"==t.type?n:Xn(n),t):o(n,t)}return{to_workbook:function(e,t){return Ai(a(e,t),t)},to_sheet:a,from_sheet:function(e){for(var t,n=[],r=Si(e["!ref"]),i=Array.isArray(e),o=r.s.r;o<=r.e.r;++o){for(var a=[],s=r.s.c;s<=r.e.c;++s){var l=bi({r:o,c:s});if((t=i?(e[o]||[])[s]:e[l])&&null!=t.v){for(var c=(t.w||(Ti(t),t.w)||"").slice(0,10);c.length<10;)c+=" ";a.push(c+(0===s?" ":""))}else a.push("          ")}n.push(a.join(""))}return n.join("\n")}}}();var aa=function(){function e(e,t,n){if(e){oi(e,e.l||0);for(var r=n.Enum||v;e.l<e.length;){var i=e.read_shift(2),o=r[i]||r[65535],a=e.read_shift(2),s=e.l+a,l=o.f&&o.f(e,a,n);if(e.l=s,t(l,o,i))return}}}function t(t,n){if(!t)return t;var r=n||{};var i=r.dense?[]:{},o="Sheet1",a="",s=0,l={},c=[],u=[],d={s:{r:0,c:0},e:{r:0,c:0}},h=r.sheetRows||0;if(0==t[2]&&(8==t[3]||9==t[3])&&t.length>=16&&5==t[14]&&108===t[15])throw new Error("Unsupported Works 3 for Mac file");if(2==t[2])r.Enum=v,e(t,function(e,t,n){switch(n){case 0:r.vers=e,e>=4096&&(r.qpro=!0);break;case 6:d=e;break;case 204:e&&(a=e);break;case 222:a=e;break;case 15:case 51:r.qpro||(e[1].v=e[1].v.slice(1));case 13:case 14:case 16:14==n&&112==(112&e[2])&&(15&e[2])>1&&(15&e[2])<15&&(e[1].z=r.dateNF||At[14],r.cellDates&&(e[1].t="d",e[1].v=En(e[1].v))),r.qpro&&e[3]>s&&(i["!ref"]=xi(d),l[o]=i,c.push(o),i=r.dense?[]:{},d={s:{r:0,c:0},e:{r:0,c:0}},s=e[3],o=a||"Sheet"+(s+1),a="");var u=r.dense?(i[e[0].r]||[])[e[0].c]:i[bi(e[0])];if(u){u.t=e[1].t,u.v=e[1].v,null!=e[1].z&&(u.z=e[1].z),null!=e[1].f&&(u.f=e[1].f);break}r.dense?(i[e[0].r]||(i[e[0].r]=[]),i[e[0].r][e[0].c]=e[1]):i[bi(e[0])]=e[1]}},r);else{if(26!=t[2]&&14!=t[2])throw new Error("Unrecognized LOTUS BOF "+t[2]);r.Enum=y,14==t[2]&&(r.qpro=!0,t.l=0),e(t,function(e,t,n){switch(n){case 204:o=e;break;case 22:e[1].v=e[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(e[3]>s&&(i["!ref"]=xi(d),l[o]=i,c.push(o),i=r.dense?[]:{},d={s:{r:0,c:0},e:{r:0,c:0}},s=e[3],o="Sheet"+(s+1)),h>0&&e[0].r>=h)break;r.dense?(i[e[0].r]||(i[e[0].r]=[]),i[e[0].r][e[0].c]=e[1]):i[bi(e[0])]=e[1],d.e.c<e[0].c&&(d.e.c=e[0].c),d.e.r<e[0].r&&(d.e.r=e[0].r);break;case 27:e[14e3]&&(u[e[14e3][0]]=e[14e3][1]);break;case 1537:u[e[0]]=e[1],e[0]==s&&(o=e[1])}},r)}if(i["!ref"]=xi(d),l[a||o]=i,c.push(a||o),!u.length)return{SheetNames:c,Sheets:l};for(var f={},p=[],g=0;g<u.length;++g)l[c[g]]?(p.push(u[g]||c[g]),f[u[g]]=l[u[g]]||l[c[g]]):(p.push(u[g]),f[u[g]]={"!ref":"A1"});return{SheetNames:p,Sheets:f}}function n(e,t,n){var r=[{c:0,r:0},{t:"n",v:0},0,0];return n.qpro&&20768!=n.vers?(r[0].c=e.read_shift(1),r[3]=e.read_shift(1),r[0].r=e.read_shift(2),e.l+=2):(r[2]=e.read_shift(1),r[0].c=e.read_shift(2),r[0].r=e.read_shift(2)),r}function r(e,t,r){var i=e.l+t,o=n(e,0,r);if(o[1].t="s",20768==r.vers){e.l++;var a=e.read_shift(1);return o[1].v=e.read_shift(a,"utf8"),o}return r.qpro&&e.l++,o[1].v=e.read_shift(i-e.l,"cstr"),o}function i(e,t,n){var r=si(7+n.length);r.write_shift(1,255),r.write_shift(2,t),r.write_shift(2,e),r.write_shift(1,39);for(var i=0;i<r.length;++i){var o=n.charCodeAt(i);r.write_shift(1,o>=128?95:o)}return r.write_shift(1,0),r}function o(e,t,n){var r=si(7);return r.write_shift(1,255),r.write_shift(2,t),r.write_shift(2,e),r.write_shift(2,n,"i"),r}function a(e,t,n){var r=si(13);return r.write_shift(1,255),r.write_shift(2,t),r.write_shift(2,e),r.write_shift(8,n,"f"),r}function s(e,t,n){var r=32768&t;return t=(r?e:0)+((t&=-32769)>=8192?t-16384:t),(r?"":"$")+(n?vi(t):gi(t))}var l={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},c=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function u(e){var t=[{c:0,r:0},{t:"n",v:0},0];return t[0].r=e.read_shift(2),t[3]=e[e.l++],t[0].c=e[e.l++],t}function d(e,t,n,r){var i=si(6+r.length);i.write_shift(2,e),i.write_shift(1,n),i.write_shift(1,t),i.write_shift(1,39);for(var o=0;o<r.length;++o){var a=r.charCodeAt(o);i.write_shift(1,a>=128?95:a)}return i.write_shift(1,0),i}function h(e,t){var n=u(e),r=e.read_shift(4),i=e.read_shift(4),o=e.read_shift(2);if(65535==o)return 0===r&&3221225472===i?(n[1].t="e",n[1].v=15):0===r&&3489660928===i?(n[1].t="e",n[1].v=42):n[1].v=0,n;var a=32768&o;return o=(32767&o)-16446,n[1].v=(1-2*a)*(i*Math.pow(2,o+32)+r*Math.pow(2,o)),n}function f(e,t,n,r){var i=si(14);if(i.write_shift(2,e),i.write_shift(1,n),i.write_shift(1,t),0==r)return i.write_shift(4,0),i.write_shift(4,0),i.write_shift(2,65535),i;var o,a=0,s=0,l=0;return r<0&&(a=1,r=-r),s=0|Math.log2(r),0==(2147483648&(l=(r/=Math.pow(2,s-31))>>>0))&&(++s,l=(r/=2)>>>0),r-=l,l|=2147483648,l>>>=0,o=(r*=Math.pow(2,32))>>>0,i.write_shift(4,o),i.write_shift(4,l),s+=16383+(a?32768:0),i.write_shift(2,s),i}function p(e,t){var n=u(e),r=e.read_shift(8,"f");return n[1].v=r,n}function g(e,t){return 0==e[e.l+t-1]?e.read_shift(t,"cstr"):""}function m(e,t){var n=si(5+e.length);n.write_shift(2,14e3),n.write_shift(2,t);for(var r=0;r<e.length;++r){var i=e.charCodeAt(r);n[n.l++]=i>127?95:i}return n[n.l++]=0,n}var v={0:{n:"BOF",f:Oo},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:function(e,t,n){var r={s:{c:0,r:0},e:{c:0,r:0}};return 8==t&&n.qpro?(r.s.c=e.read_shift(1),e.l++,r.s.r=e.read_shift(2),r.e.c=e.read_shift(1),e.l++,r.e.r=e.read_shift(2),r):(r.s.c=e.read_shift(2),r.s.r=e.read_shift(2),12==t&&n.qpro&&(e.l+=2),r.e.c=e.read_shift(2),r.e.r=e.read_shift(2),12==t&&n.qpro&&(e.l+=2),65535==r.s.c&&(r.s.c=r.e.c=r.s.r=r.e.r=0),r)}},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:function(e,t,r){var i=n(e,0,r);return i[1].v=e.read_shift(2,"i"),i}},14:{n:"NUMBER",f:function(e,t,r){var i=n(e,0,r);return i[1].v=e.read_shift(8,"f"),i}},15:{n:"LABEL",f:r},16:{n:"FORMULA",f:function(e,t,r){var i=e.l+t,o=n(e,0,r);if(o[1].v=e.read_shift(8,"f"),r.qpro)e.l=i;else{var a=e.read_shift(2);!function(e,t){oi(e,0);var n=[],r=0,i="",o="",a="",u="";for(;e.l<e.length;){var d=e[e.l++];switch(d){case 0:n.push(e.read_shift(8,"f"));break;case 1:o=s(t[0].c,e.read_shift(2),!0),i=s(t[0].r,e.read_shift(2),!1),n.push(o+i);break;case 2:var h=s(t[0].c,e.read_shift(2),!0),f=s(t[0].r,e.read_shift(2),!1);o=s(t[0].c,e.read_shift(2),!0),i=s(t[0].r,e.read_shift(2),!1),n.push(h+f+":"+o+i);break;case 3:if(e.l<e.length)return void console.error("WK1 premature formula end");break;case 4:n.push("("+n.pop()+")");break;case 5:n.push(e.read_shift(2));break;case 6:for(var p="";d=e[e.l++];)p+=String.fromCharCode(d);n.push('"'+p.replace(/"/g,'""')+'"');break;case 8:n.push("-"+n.pop());break;case 23:n.push("+"+n.pop());break;case 22:n.push("NOT("+n.pop()+")");break;case 20:case 21:u=n.pop(),a=n.pop(),n.push(["AND","OR"][d-20]+"("+a+","+u+")");break;default:if(d<32&&c[d])u=n.pop(),a=n.pop(),n.push(a+c[d]+u);else{if(!l[d])return d<=7?console.error("WK1 invalid opcode "+d.toString(16)):d<=24?console.error("WK1 unsupported op "+d.toString(16)):d<=30?console.error("WK1 invalid opcode "+d.toString(16)):d<=115?console.error("WK1 unsupported function opcode "+d.toString(16)):console.error("WK1 unrecognized opcode "+d.toString(16));if(69==(r=l[d][1])&&(r=e[e.l++]),r>n.length)return void console.error("WK1 bad formula parse 0x"+d.toString(16)+":|"+n.join("|")+"|");var g=n.slice(-r);n.length-=r,n.push(l[d][0]+"("+g.join(",")+")")}}}1==n.length?t[1].f=""+n[0]:console.error("WK1 bad formula parse |"+n.join("|")+"|")}(e.slice(e.l,e.l+a),o),e.l+=a}return o}},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:r},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:g},222:{n:"SHEETNAMELP",f:function(e,t){var n=e[e.l++];n>t-1&&(n=t-1);for(var r="";r.length<n;)r+=String.fromCharCode(e[e.l++]);return r}},65535:{n:""}},y={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:function(e,t){var n=u(e);return n[1].t="s",n[1].v=e.read_shift(t-4,"cstr"),n}},23:{n:"NUMBER17",f:h},24:{n:"NUMBER18",f:function(e,t){var n=u(e);n[1].v=e.read_shift(2);var r=n[1].v>>1;if(1&n[1].v)switch(7&r){case 0:r=5e3*(r>>3);break;case 1:r=500*(r>>3);break;case 2:r=(r>>3)/20;break;case 3:r=(r>>3)/200;break;case 4:r=(r>>3)/2e3;break;case 5:r=(r>>3)/2e4;break;case 6:r=(r>>3)/16;break;case 7:r=(r>>3)/64}return n[1].v=r,n}},25:{n:"FORMULA19",f:function(e,t){var n=h(e);return e.l+=t-14,n}},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:function(e,t){for(var n={},r=e.l+t;e.l<r;){var i=e.read_shift(2);if(14e3==i){for(n[i]=[0,""],n[i][0]=e.read_shift(2);e[e.l];)n[i][1]+=String.fromCharCode(e[e.l]),e.l++;e.l++}}return n}},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:function(e,t){var n=u(e),r=e.read_shift(4);return n[1].v=r>>6,n}},38:{n:"??"},39:{n:"NUMBER27",f:p},40:{n:"FORMULA28",f:function(e,t){var n=p(e);return e.l+=t-10,n}},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:g},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:function(e,t,n){if(n.qpro&&!(t<21)){var r=e.read_shift(1);return e.l+=17,e.l+=1,e.l+=2,[r,e.read_shift(t-21,"cstr")]}}},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:function(e,t){var n=t||{};if(+n.codepage>=0&&Qe(+n.codepage),"string"==n.type)throw new Error("Cannot write WK1 to JS string");var r=li(),s=Si(e["!ref"]),l=Array.isArray(e),c=[];_l(r,0,function(e){var t=si(2);return t.write_shift(2,e),t}(1030)),_l(r,6,function(e){var t=si(8);return t.write_shift(2,e.s.c),t.write_shift(2,e.s.r),t.write_shift(2,e.e.c),t.write_shift(2,e.e.r),t}(s));for(var u=Math.min(s.e.r,8191),d=s.s.r;d<=u;++d)for(var h=gi(d),f=s.s.c;f<=s.e.c;++f){d===s.s.r&&(c[f]=vi(f));var p=c[f]+h,g=l?(e[d]||[])[f]:e[p];if(g&&"z"!=g.t)if("n"==g.t)(0|g.v)==g.v&&g.v>=-32768&&g.v<=32767?_l(r,13,o(d,f,g.v)):_l(r,14,a(d,f,g.v));else _l(r,15,i(d,f,Ti(g).slice(0,239)))}return _l(r,1),r.end()},book_to_wk3:function(e,t){var n=t||{};if(+n.codepage>=0&&Qe(+n.codepage),"string"==n.type)throw new Error("Cannot write WK3 to JS string");var r=li();_l(r,0,function(e){var t=si(26);t.write_shift(2,4096),t.write_shift(2,4),t.write_shift(4,0);for(var n=0,r=0,i=0,o=0;o<e.SheetNames.length;++o){var a=e.SheetNames[o],s=e.Sheets[a];if(s&&s["!ref"]){++i;var l=wi(s["!ref"]);n<l.e.r&&(n=l.e.r),r<l.e.c&&(r=l.e.c)}}n>8191&&(n=8191);return t.write_shift(2,n),t.write_shift(1,i),t.write_shift(1,r),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(1,1),t.write_shift(1,2),t.write_shift(4,0),t.write_shift(4,0),t}(e));for(var i=0,o=0;i<e.SheetNames.length;++i)(e.Sheets[e.SheetNames[i]]||{})["!ref"]&&_l(r,27,m(e.SheetNames[i],o++));var a=0;for(i=0;i<e.SheetNames.length;++i){var s=e.Sheets[e.SheetNames[i]];if(s&&s["!ref"]){for(var l=Si(s["!ref"]),c=Array.isArray(s),u=[],h=Math.min(l.e.r,8191),p=l.s.r;p<=h;++p)for(var g=gi(p),v=l.s.c;v<=l.e.c;++v){p===l.s.r&&(u[v]=vi(v));var y=u[v]+g,b=c?(s[p]||[])[v]:s[y];if(b&&"z"!=b.t)if("n"==b.t)_l(r,23,f(p,v,a,b.v));else _l(r,22,d(p,v,a,Ti(b).slice(0,239)))}++a}}return _l(r,1),r.end()},to_workbook:function(e,n){switch(n.type){case"base64":return t(ut(ot(e)),n);case"binary":return t(ut(e),n);case"buffer":case"array":return t(e,n)}throw"Unsupported type "+n.type}}}();var sa=/^\s|\s$|[\t\n\r]/;function la(e,t){if(!t.bookSST)return"";var n=[jn];n[n.length]=nr("sst",null,{xmlns:vr[0],count:e.Count,uniqueCount:e.Unique});for(var r=0;r!=e.length;++r)if(null!=e[r]){var i=e[r],o="<si>";i.r?o+=i.r:(o+="<t",i.t||(i.t=""),i.t.match(sa)&&(o+=' xml:space="preserve"'),o+=">"+Bn(i.t)+"</t>"),o+="</si>",n[n.length]=o}return n.length>2&&(n[n.length]="</sst>",n[1]=n[1].replace("/>",">")),n.join("")}var ca=function(e,t){var n=!1;return null==t&&(n=!0,t=si(15+4*e.t.length)),t.write_shift(1,0),Ri(e.t,t),n?t.slice(0,t.l):t};function ua(e){var t=li();ci(t,159,function(e,t){return t||(t=si(8)),t.write_shift(4,e.Count),t.write_shift(4,e.Unique),t}(e));for(var n=0;n<e.length;++n)ci(t,19,ca(e[n]));return ci(t,160),t.end()}function da(e){if("undefined"!==typeof et)return et.utils.encode(Ke,e);for(var t=[],n=e.split(""),r=0;r<n.length;++r)t[r]=n[r].charCodeAt(0);return t}function ha(e){var t,n,r=0,i=da(e),o=i.length+1;for((t=lt(o))[0]=i.length,n=1;n!=o;++n)t[n]=i[n-1];for(n=o-1;n>=0;--n)r=((0===(16384&r)?0:1)|r<<1&32767)^t[n];return 52811^r}var fa=function(){function e(e,n){switch(n.type){case"base64":return t(ot(e),n);case"binary":return t(e,n);case"buffer":return t(at&&Buffer.isBuffer(e)?e.toString("binary"):ht(e),n);case"array":return t(Cn(e),n)}throw new Error("Unrecognized type "+n.type)}function t(e,t){var n=(t||{}).dense?[]:{},r=e.match(/\\trowd.*?\\row\b/g);if(!r.length)throw new Error("RTF missing table");var i={s:{c:0,r:0},e:{c:0,r:r.length-1}};return r.forEach(function(e,t){Array.isArray(n)&&(n[t]=[]);for(var r,o=/\\\w+\b/g,a=0,s=-1;r=o.exec(e);){if("\\cell"===r[0]){var l=e.slice(a,o.lastIndex-r[0].length);if(" "==l[0]&&(l=l.slice(1)),++s,l.length){var c={v:l,t:"s"};Array.isArray(n)?n[t][s]=c:n[bi({r:t,c:s})]=c}}a=o.lastIndex}s>i.e.c&&(i.e.c=s)}),n["!ref"]=xi(i),n}return{to_workbook:function(t,n){return Ai(e(t,n),n)},to_sheet:e,from_sheet:function(e){for(var t,n=["{\\rtf1\\ansi"],r=Si(e["!ref"]),i=Array.isArray(e),o=r.s.r;o<=r.e.r;++o){n.push("\\trowd\\trautofit1");for(var a=r.s.c;a<=r.e.c;++a)n.push("\\cellx"+(a+1));for(n.push("\\pard\\intbl"),a=r.s.c;a<=r.e.c;++a){var s=bi({r:o,c:a});(t=i?(e[o]||[])[a]:e[s])&&(null!=t.v||t.f&&!t.F)&&(n.push(" "+(t.w||(Ti(t),t.w))),n.push("\\cell"))}n.push("\\pard\\intbl\\row")}return n.join("")+"}"}}}();function pa(e){for(var t=0,n=1;3!=t;++t)n=256*n+(e[t]>255?255:e[t]<0?0:e[t]);return n.toString(16).toUpperCase().slice(1)}var ga=6;function ma(e){return Math.floor((e+Math.round(128/ga)/256)*ga)}function va(e){return Math.floor((e-5)/ga*100+.5)/100}function ya(e){return Math.round((e*ga+5)/ga*256)/256}function ba(e){e.width?(e.wpx=ma(e.width),e.wch=va(e.wpx),e.MDW=ga):e.wpx?(e.wch=va(e.wpx),e.width=ya(e.wch),e.MDW=ga):"number"==typeof e.wch&&(e.width=ya(e.wch),e.wpx=ma(e.width),e.MDW=ga),e.customWidth&&delete e.customWidth}var wa=96;function xa(e){return 96*e/wa}function Sa(e){return e*wa/96}function Ea(e,t){var n,r=[jn,nr("styleSheet",null,{xmlns:vr[0],"xmlns:vt":pr})];return e.SSF&&null!=(n=function(e){var t=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var r=n[0];r<=n[1];++r)null!=e[r]&&(t[t.length]=nr("numFmt",null,{numFmtId:r,formatCode:Bn(e[r])}))}),1===t.length?"":(t[t.length]="</numFmts>",t[0]=nr("numFmts",null,{count:t.length-2}).replace("/>",">"),t.join(""))}(e.SSF))&&(r[r.length]=n),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=function(e){var t=[];return t[t.length]=nr("cellXfs",null),e.forEach(function(e){t[t.length]=nr("xf",null,e)}),t[t.length]="</cellXfs>",2===t.length?"":(t[0]=nr("cellXfs",null,{count:t.length-2}).replace("/>",">"),t.join(""))}(t.cellXfs))&&(r[r.length]=n),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function Ta(e,t,n){n||(n=si(6+4*t.length)),n.write_shift(2,e),Ri(t,n);var r=n.length>n.l?n.slice(0,n.l):n;return null==n.l&&(n.l=n.length),r}function Aa(e,t){t||(t=si(153)),t.write_shift(2,20*e.sz),function(e,t){t||(t=si(2));var n=(e.italic?2:0)|(e.strike?8:0)|(e.outline?16:0)|(e.shadow?32:0)|(e.condense?64:0)|(e.extend?128:0);t.write_shift(1,n),t.write_shift(1,0)}(e,t),t.write_shift(2,e.bold?700:400);var n=0;"superscript"==e.vertAlign?n=1:"subscript"==e.vertAlign&&(n=2),t.write_shift(2,n),t.write_shift(1,e.underline||0),t.write_shift(1,e.family||0),t.write_shift(1,e.charset||0),t.write_shift(1,0),Zi(e.color,t);var r=0;return"major"==e.scheme&&(r=1),"minor"==e.scheme&&(r=2),t.write_shift(1,r),Ri(e.name,t),t.length>t.l?t.slice(0,t.l):t}var _a,ka=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],Ca=ai;function Ia(e,t){t||(t=si(84)),_a||(_a=mn(ka));var n=_a[e.patternType];null==n&&(n=40),t.write_shift(4,n);var r=0;if(40!=n)for(Zi({auto:1},t),Zi({auto:1},t);r<12;++r)t.write_shift(4,0);else{for(;r<4;++r)t.write_shift(4,0);for(;r<12;++r)t.write_shift(4,0)}return t.length>t.l?t.slice(0,t.l):t}function Ra(e,t,n){n||(n=si(16)),n.write_shift(2,t||0),n.write_shift(2,e.numFmtId||0),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(1,0),n.write_shift(1,0);return n.write_shift(1,0),n.write_shift(1,0),n.write_shift(1,0),n.write_shift(1,0),n}function Na(e,t){return t||(t=si(10)),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(4,0),t}var Oa=ai;function Da(e){var t;ci(e,613,Ci(1)),ci(e,46,(t||(t=si(51)),t.write_shift(1,0),Na(0,t),Na(0,t),Na(0,t),Na(0,t),Na(0,t),t.length>t.l?t.slice(0,t.l):t)),ci(e,614)}function Pa(e){var t,n;ci(e,619,Ci(1)),ci(e,48,(t={xfId:0,builtinId:0,name:"Normal"},n||(n=si(52)),n.write_shift(4,t.xfId),n.write_shift(2,1),n.write_shift(1,+t.builtinId),n.write_shift(1,0),Wi(t.name||"",n),n.length>n.l?n.slice(0,n.l):n)),ci(e,620)}function La(e){ci(e,508,function(e,t,n){var r=si(2052);return r.write_shift(4,e),Wi(t,r),Wi(n,r),r.length>r.l?r.slice(0,r.l):r}(0,"TableStyleMedium9","PivotStyleMedium4")),ci(e,509)}function ja(e,t){var n=li();return ci(n,278),function(e,t){if(t){var n=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(e){for(var r=e[0];r<=e[1];++r)null!=t[r]&&++n}),0!=n&&(ci(e,615,Ci(n)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var r=n[0];r<=n[1];++r)null!=t[r]&&ci(e,44,Ta(r,t[r]))}),ci(e,616))}}(n,e.SSF),function(e){ci(e,611,Ci(1)),ci(e,43,Aa({sz:12,color:{theme:1},name:"Calibri",family:2,scheme:"minor"})),ci(e,612)}(n),function(e){ci(e,603,Ci(2)),ci(e,45,Ia({patternType:"none"})),ci(e,45,Ia({patternType:"gray125"})),ci(e,604)}(n),Da(n),function(e){ci(e,626,Ci(1)),ci(e,47,Ra({numFmtId:0,fontId:0,fillId:0,borderId:0},65535)),ci(e,627)}(n),function(e,t){ci(e,617,Ci(t.length)),t.forEach(function(t){ci(e,47,Ra(t,0))}),ci(e,618)}(n,t.cellXfs),Pa(n),function(e){ci(e,505,Ci(0)),ci(e,506)}(n),La(n),ci(n,279),n.end()}function Ma(e,t){if(t&&t.themeXLSX)return t.themeXLSX;if(e&&"string"==typeof e.raw)return e.raw;var n=[jn];return n[n.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',n[n.length]="<a:themeElements>",n[n.length]='<a:clrScheme name="Office">',n[n.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',n[n.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',n[n.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',n[n.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',n[n.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',n[n.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',n[n.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',n[n.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',n[n.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',n[n.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',n[n.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',n[n.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',n[n.length]="</a:clrScheme>",n[n.length]='<a:fontScheme name="Office">',n[n.length]="<a:majorFont>",n[n.length]='<a:latin typeface="Cambria"/>',n[n.length]='<a:ea typeface=""/>',n[n.length]='<a:cs typeface=""/>',n[n.length]='<a:font script="Jpan" typeface="\uff2d\uff33 \uff30\u30b4\u30b7\u30c3\u30af"/>',n[n.length]='<a:font script="Hang" typeface="\ub9d1\uc740 \uace0\ub515"/>',n[n.length]='<a:font script="Hans" typeface="\u5b8b\u4f53"/>',n[n.length]='<a:font script="Hant" typeface="\u65b0\u7d30\u660e\u9ad4"/>',n[n.length]='<a:font script="Arab" typeface="Times New Roman"/>',n[n.length]='<a:font script="Hebr" typeface="Times New Roman"/>',n[n.length]='<a:font script="Thai" typeface="Tahoma"/>',n[n.length]='<a:font script="Ethi" typeface="Nyala"/>',n[n.length]='<a:font script="Beng" typeface="Vrinda"/>',n[n.length]='<a:font script="Gujr" typeface="Shruti"/>',n[n.length]='<a:font script="Khmr" typeface="MoolBoran"/>',n[n.length]='<a:font script="Knda" typeface="Tunga"/>',n[n.length]='<a:font script="Guru" typeface="Raavi"/>',n[n.length]='<a:font script="Cans" typeface="Euphemia"/>',n[n.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',n[n.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',n[n.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',n[n.length]='<a:font script="Thaa" typeface="MV Boli"/>',n[n.length]='<a:font script="Deva" typeface="Mangal"/>',n[n.length]='<a:font script="Telu" typeface="Gautami"/>',n[n.length]='<a:font script="Taml" typeface="Latha"/>',n[n.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',n[n.length]='<a:font script="Orya" typeface="Kalinga"/>',n[n.length]='<a:font script="Mlym" typeface="Kartika"/>',n[n.length]='<a:font script="Laoo" typeface="DokChampa"/>',n[n.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',n[n.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',n[n.length]='<a:font script="Viet" typeface="Times New Roman"/>',n[n.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',n[n.length]='<a:font script="Geor" typeface="Sylfaen"/>',n[n.length]="</a:majorFont>",n[n.length]="<a:minorFont>",n[n.length]='<a:latin typeface="Calibri"/>',n[n.length]='<a:ea typeface=""/>',n[n.length]='<a:cs typeface=""/>',n[n.length]='<a:font script="Jpan" typeface="\uff2d\uff33 \uff30\u30b4\u30b7\u30c3\u30af"/>',n[n.length]='<a:font script="Hang" typeface="\ub9d1\uc740 \uace0\ub515"/>',n[n.length]='<a:font script="Hans" typeface="\u5b8b\u4f53"/>',n[n.length]='<a:font script="Hant" typeface="\u65b0\u7d30\u660e\u9ad4"/>',n[n.length]='<a:font script="Arab" typeface="Arial"/>',n[n.length]='<a:font script="Hebr" typeface="Arial"/>',n[n.length]='<a:font script="Thai" typeface="Tahoma"/>',n[n.length]='<a:font script="Ethi" typeface="Nyala"/>',n[n.length]='<a:font script="Beng" typeface="Vrinda"/>',n[n.length]='<a:font script="Gujr" typeface="Shruti"/>',n[n.length]='<a:font script="Khmr" typeface="DaunPenh"/>',n[n.length]='<a:font script="Knda" typeface="Tunga"/>',n[n.length]='<a:font script="Guru" typeface="Raavi"/>',n[n.length]='<a:font script="Cans" typeface="Euphemia"/>',n[n.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',n[n.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',n[n.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',n[n.length]='<a:font script="Thaa" typeface="MV Boli"/>',n[n.length]='<a:font script="Deva" typeface="Mangal"/>',n[n.length]='<a:font script="Telu" typeface="Gautami"/>',n[n.length]='<a:font script="Taml" typeface="Latha"/>',n[n.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',n[n.length]='<a:font script="Orya" typeface="Kalinga"/>',n[n.length]='<a:font script="Mlym" typeface="Kartika"/>',n[n.length]='<a:font script="Laoo" typeface="DokChampa"/>',n[n.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',n[n.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',n[n.length]='<a:font script="Viet" typeface="Arial"/>',n[n.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',n[n.length]='<a:font script="Geor" typeface="Sylfaen"/>',n[n.length]="</a:minorFont>",n[n.length]="</a:fontScheme>",n[n.length]='<a:fmtScheme name="Office">',n[n.length]="<a:fillStyleLst>",n[n.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:lin ang="16200000" scaled="1"/>',n[n.length]="</a:gradFill>",n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:lin ang="16200000" scaled="0"/>',n[n.length]="</a:gradFill>",n[n.length]="</a:fillStyleLst>",n[n.length]="<a:lnStyleLst>",n[n.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]="</a:lnStyleLst>",n[n.length]="<a:effectStyleLst>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]="</a:effectStyle>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]="</a:effectStyle>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',n[n.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',n[n.length]="</a:effectStyle>",n[n.length]="</a:effectStyleLst>",n[n.length]="<a:bgFillStyleLst>",n[n.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',n[n.length]="</a:gradFill>",n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',n[n.length]="</a:gradFill>",n[n.length]="</a:bgFillStyleLst>",n[n.length]="</a:fmtScheme>",n[n.length]="</a:themeElements>",n[n.length]="<a:objectDefaults>",n[n.length]="<a:spDef>",n[n.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',n[n.length]="</a:spDef>",n[n.length]="<a:lnDef>",n[n.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',n[n.length]="</a:lnDef>",n[n.length]="</a:objectDefaults>",n[n.length]="<a:extraClrSchemeLst/>",n[n.length]="</a:theme>",n.join("")}function Fa(){var e=li();return ci(e,332),ci(e,334,Ci(1)),ci(e,335,function(e){var t=si(12+2*e.name.length);return t.write_shift(4,e.flags),t.write_shift(4,e.version),Ri(e.name,t),t.slice(0,t.l)}({name:"XLDAPR",version:12e4,flags:3496657072})),ci(e,336),ci(e,339,function(e,t){var n=si(8+2*t.length);return n.write_shift(4,e),Ri(t,n),n.slice(0,n.l)}(1,"XLDAPR")),ci(e,52),ci(e,35,Ci(514)),ci(e,4096,Ci(0)),ci(e,4097,Do(1)),ci(e,36),ci(e,53),ci(e,340),ci(e,337,function(e,t){var n=si(8);return n.write_shift(4,e),n.write_shift(4,t?1:0),n}(1,!0)),ci(e,51,function(e){var t=si(4+8*e.length);t.write_shift(4,e.length);for(var n=0;n<e.length;++n)t.write_shift(4,e[n][0]),t.write_shift(4,e[n][1]);return t}([[1,0]])),ci(e,338),ci(e,333),e.end()}function Ua(){var e=[jn];return e.push('<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">\n  <metadataTypes count="1">\n    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>\n  </metadataTypes>\n  <futureMetadata name="XLDAPR" count="1">\n    <bk>\n      <extLst>\n        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">\n          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>\n        </ext>\n      </extLst>\n    </bk>\n  </futureMetadata>\n  <cellMetadata count="1">\n    <bk>\n      <rc t="1" v="0"/>\n    </bk>\n  </cellMetadata>\n</metadata>'),e.join("")}var za=1024;function Ba(e,t){for(var n=[21600,21600],r=["m0,0l0",n[1],n[0],n[1],n[0],"0xe"].join(","),i=[nr("xml",null,{"xmlns:v":Er,"xmlns:o":yr,"xmlns:x":br,"xmlns:mv":Sr}).replace(/\/>/,">"),nr("o:shapelayout",nr("o:idmap",null,{"v:ext":"edit",data:e}),{"v:ext":"edit"}),nr("v:shapetype",[nr("v:stroke",null,{joinstyle:"miter"}),nr("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:n.join(","),path:r})];za<1e3*e;)za+=1e3;return t.forEach(function(e){var t=yi(e[0]),n={color2:"#BEFF82",type:"gradient"};"gradient"==n.type&&(n.angle="-180");var r="gradient"==n.type?nr("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,o=nr("v:fill",r,n);++za,i=i.concat(["<v:shape"+tr({id:"_x0000_s"+za,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(e[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",o,nr("v:shadow",null,{on:"t",obscured:"t"}),nr("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",er("x:Anchor",[t.c+1,0,t.r+1,0,t.c+3,20,t.r+5,20].join(",")),er("x:AutoFill","False"),er("x:Row",String(t.r)),er("x:Column",String(t.c)),e[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),i.push("</xml>"),i.join("")}function Wa(e){var t=[jn,nr("comments",null,{xmlns:vr[0]})],n=[];return t.push("<authors>"),e.forEach(function(e){e[1].forEach(function(e){var r=Bn(e.a);-1==n.indexOf(r)&&(n.push(r),t.push("<author>"+r+"</author>")),e.T&&e.ID&&-1==n.indexOf("tc="+e.ID)&&(n.push("tc="+e.ID),t.push("<author>tc="+e.ID+"</author>"))})}),0==n.length&&(n.push("SheetJ5"),t.push("<author>SheetJ5</author>")),t.push("</authors>"),t.push("<commentList>"),e.forEach(function(e){var r=0,i=[];if(e[1][0]&&e[1][0].T&&e[1][0].ID?r=n.indexOf("tc="+e[1][0].ID):e[1].forEach(function(e){e.a&&(r=n.indexOf(Bn(e.a))),i.push(e.t||"")}),t.push('<comment ref="'+e[0]+'" authorId="'+r+'"><text>'),i.length<=1)t.push(er("t",Bn(i[0]||"")));else{for(var o="Comment:\n    "+i[0]+"\n",a=1;a<i.length;++a)o+="Reply:\n    "+i[a]+"\n";t.push(er("t",Bn(o)))}t.push("</text></comment>")}),t.push("</commentList>"),t.length>2&&(t[t.length]="</comments>",t[1]=t[1].replace("/>",">")),t.join("")}function Va(e,t,n){var r=[jn,nr("ThreadedComments",null,{xmlns:cr}).replace(/[\/]>/,">")];return e.forEach(function(e){var i="";(e[1]||[]).forEach(function(o,a){if(o.T){o.a&&-1==t.indexOf(o.a)&&t.push(o.a);var s={ref:e[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+n.tcid++).slice(-12)+"}"};0==a?i=s.id:s.parentId=i,o.ID=s.id,o.a&&(s.personId="{54EE7950-7262-4200-6969-"+("000000000000"+t.indexOf(o.a)).slice(-12)+"}"),r.push(nr("threadedComment",er("text",o.t||""),s))}else delete o.ID})}),r.push("</ThreadedComments>"),r.join("")}var Ha=Ii;function Ga(e){var t=li(),n=[];return ci(t,628),ci(t,630),e.forEach(function(e){e[1].forEach(function(e){n.indexOf(e.a)>-1||(n.push(e.a.slice(0,54)),ci(t,632,function(e){return Ri(e.slice(0,54))}(e.a)))})}),ci(t,631),ci(t,633),e.forEach(function(e){e[1].forEach(function(r){r.iauthor=n.indexOf(r.a);var i={s:yi(e[0]),e:yi(e[0])};ci(t,635,function(e,t){return null==t&&(t=si(36)),t.write_shift(4,e[1].iauthor),Xi(e[0],t),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t}([i,r])),r.t&&r.t.length>0&&ci(t,637,Pi(r)),ci(t,636),delete r.iauthor})}),ci(t,634),ci(t,629),t.end()}var qa=["xlsb","xlsm","xlam","biff8","xla"];var Ka=function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function n(e,n,r,i){var o=!1,a=!1;0==r.length?a=!0:"["==r.charAt(0)&&(a=!0,r=r.slice(1,-1)),0==i.length?o=!0:"["==i.charAt(0)&&(o=!0,i=i.slice(1,-1));var s=r.length>0?0|parseInt(r,10):0,l=i.length>0?0|parseInt(i,10):0;return o?l+=t.c:--l,a?s+=t.r:--s,n+(o?"":"$")+vi(l)+(a?"":"$")+gi(s)}return function(r,i){return t=i,r.replace(e,n)}}(),Ya=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,$a=function(){return function(e,t){return e.replace(Ya,function(e,n,r,i,o,a){var s=mi(i)-(r?0:t.c),l=pi(a)-(o?0:t.r);return n+"R"+(0==l?"":o?l+1:"["+l+"]")+"C"+(0==s?"":r?s+1:"["+s+"]")})}}();function Xa(e,t){return e.replace(Ya,function(e,n,r,i,o,a){return n+("$"==r?r+i:vi(mi(i)+t.c))+("$"==o?o+a:gi(pi(a)+t.r))})}function Qa(e){e.l+=1}function Ja(e,t){var n=e.read_shift(1==t?1:2);return[16383&n,n>>14&1,n>>15&1]}function Za(e,t,n){var r=2;if(n){if(n.biff>=2&&n.biff<=5)return es(e);12==n.biff&&(r=4)}var i=e.read_shift(r),o=e.read_shift(r),a=Ja(e,2),s=Ja(e,2);return{s:{r:i,c:a[0],cRel:a[1],rRel:a[2]},e:{r:o,c:s[0],cRel:s[1],rRel:s[2]}}}function es(e){var t=Ja(e,2),n=Ja(e,2),r=e.read_shift(1),i=e.read_shift(1);return{s:{r:t[0],c:r,cRel:t[1],rRel:t[2]},e:{r:n[0],c:i,cRel:n[1],rRel:n[2]}}}function ts(e,t,n){if(n&&n.biff>=2&&n.biff<=5)return function(e){var t=Ja(e,2),n=e.read_shift(1);return{r:t[0],c:n,cRel:t[1],rRel:t[2]}}(e);var r=e.read_shift(n&&12==n.biff?4:2),i=Ja(e,2);return{r:r,c:i[0],cRel:i[1],rRel:i[2]}}function ns(e){var t=e.read_shift(2),n=e.read_shift(2);return{r:t,c:255&n,fQuoted:!!(16384&n),cRel:n>>15,rRel:n>>15}}function rs(e){var t=1&e[e.l+1];return e.l+=4,[t,1]}function is(e){return[e.read_shift(1),e.read_shift(1)]}function os(e,t){var n=[e.read_shift(1)];if(12==t)switch(n[0]){case 2:n[0]=4;break;case 4:n[0]=16;break;case 0:n[0]=1;break;case 1:n[0]=2}switch(n[0]){case 4:n[1]=Ro(e,1)?"TRUE":"FALSE",12!=t&&(e.l+=7);break;case 37:case 16:n[1]=oo[e[e.l]],e.l+=12==t?4:8;break;case 0:e.l+=8;break;case 1:n[1]=Qi(e);break;case 2:n[1]=Uo(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+n[0])}return n}function as(e,t,n){for(var r=e.read_shift(12==n.biff?4:2),i=[],o=0;o!=r;++o)i.push((12==n.biff?$i:Go)(e,8));return i}function ss(e,t,n){var r=0,i=0;12==n.biff?(r=e.read_shift(4),i=e.read_shift(4)):(i=1+e.read_shift(1),r=1+e.read_shift(2)),n.biff>=2&&n.biff<8&&(--r,0==--i&&(i=256));for(var o=0,a=[];o!=r&&(a[o]=[]);++o)for(var s=0;s!=i;++s)a[o][s]=os(e,n.biff);return a}function ls(e,t,n){return e.l+=2,[ns(e)]}function cs(e){return e.l+=6,[]}function us(e){return e.l+=2,[Oo(e),1&e.read_shift(2)]}var ds=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];var hs={1:{n:"PtgExp",f:function(e,t,n){return e.l++,n&&12==n.biff?[e.read_shift(4,"i"),0]:[e.read_shift(2),e.read_shift(n&&2==n.biff?1:2)]}},2:{n:"PtgTbl",f:ai},3:{n:"PtgAdd",f:Qa},4:{n:"PtgSub",f:Qa},5:{n:"PtgMul",f:Qa},6:{n:"PtgDiv",f:Qa},7:{n:"PtgPower",f:Qa},8:{n:"PtgConcat",f:Qa},9:{n:"PtgLt",f:Qa},10:{n:"PtgLe",f:Qa},11:{n:"PtgEq",f:Qa},12:{n:"PtgGe",f:Qa},13:{n:"PtgGt",f:Qa},14:{n:"PtgNe",f:Qa},15:{n:"PtgIsect",f:Qa},16:{n:"PtgUnion",f:Qa},17:{n:"PtgRange",f:Qa},18:{n:"PtgUplus",f:Qa},19:{n:"PtgUminus",f:Qa},20:{n:"PtgPercent",f:Qa},21:{n:"PtgParen",f:Qa},22:{n:"PtgMissArg",f:Qa},23:{n:"PtgStr",f:function(e,t,n){return e.l++,Lo(e,0,n)}},26:{n:"PtgSheet",f:function(e,t,n){return e.l+=5,e.l+=2,e.l+=2==n.biff?1:4,["PTGSHEET"]}},27:{n:"PtgEndSheet",f:function(e,t,n){return e.l+=2==n.biff?4:5,["PTGENDSHEET"]}},28:{n:"PtgErr",f:function(e){return e.l++,oo[e.read_shift(1)]}},29:{n:"PtgBool",f:function(e){return e.l++,0!==e.read_shift(1)}},30:{n:"PtgInt",f:function(e){return e.l++,e.read_shift(2)}},31:{n:"PtgNum",f:function(e){return e.l++,Qi(e)}},32:{n:"PtgArray",f:function(e,t,n){var r=(96&e[e.l++])>>5;return e.l+=2==n.biff?6:12==n.biff?14:7,[r]}},33:{n:"PtgFunc",f:function(e,t,n){var r=(96&e[e.l])>>5;e.l+=1;var i=e.read_shift(n&&n.biff<=3?1:2);return[Ns[i],Rs[i],r]}},34:{n:"PtgFuncVar",f:function(e,t,n){var r=e[e.l++],i=e.read_shift(1),o=n&&n.biff<=3?[88==r?-1:0,e.read_shift(1)]:function(e){return[e[e.l+1]>>7,32767&e.read_shift(2)]}(e);return[i,(0===o[0]?Rs:Is)[o[1]]]}},35:{n:"PtgName",f:function(e,t,n){var r=e.read_shift(1)>>>5&3,i=!n||n.biff>=8?4:2,o=e.read_shift(i);switch(n.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12}return[r,0,o]}},36:{n:"PtgRef",f:function(e,t,n){var r=(96&e[e.l])>>5;return e.l+=1,[r,ts(e,0,n)]}},37:{n:"PtgArea",f:function(e,t,n){return[(96&e[e.l++])>>5,Za(e,n.biff>=2&&n.biff,n)]}},38:{n:"PtgMemArea",f:function(e,t,n){var r=e.read_shift(1)>>>5&3;return e.l+=n&&2==n.biff?3:4,[r,e.read_shift(n&&2==n.biff?1:2)]}},39:{n:"PtgMemErr",f:ai},40:{n:"PtgMemNoMem",f:ai},41:{n:"PtgMemFunc",f:function(e,t,n){return[e.read_shift(1)>>>5&3,e.read_shift(n&&2==n.biff?1:2)]}},42:{n:"PtgRefErr",f:function(e,t,n){var r=e.read_shift(1)>>>5&3;return e.l+=4,n.biff<8&&e.l--,12==n.biff&&(e.l+=2),[r]}},43:{n:"PtgAreaErr",f:function(e,t,n){var r=(96&e[e.l++])>>5;return e.l+=n&&n.biff>8?12:n.biff<8?6:8,[r]}},44:{n:"PtgRefN",f:function(e,t,n){var r=(96&e[e.l])>>5;e.l+=1;var i=function(e,t,n){var r=n&&n.biff?n.biff:8;if(r>=2&&r<=5)return function(e){var t=e.read_shift(2),n=e.read_shift(1),r=(32768&t)>>15,i=(16384&t)>>14;return t&=16383,1==r&&t>=8192&&(t-=16384),1==i&&n>=128&&(n-=256),{r:t,c:n,cRel:i,rRel:r}}(e);var i=e.read_shift(r>=12?4:2),o=e.read_shift(2),a=(16384&o)>>14,s=(32768&o)>>15;if(o&=16383,1==s)for(;i>524287;)i-=1048576;if(1==a)for(;o>8191;)o-=16384;return{r:i,c:o,cRel:a,rRel:s}}(e,0,n);return[r,i]}},45:{n:"PtgAreaN",f:function(e,t,n){var r=(96&e[e.l++])>>5,i=function(e,t,n){if(n.biff<8)return es(e);var r=e.read_shift(12==n.biff?4:2),i=e.read_shift(12==n.biff?4:2),o=Ja(e,2),a=Ja(e,2);return{s:{r:r,c:o[0],cRel:o[1],rRel:o[2]},e:{r:i,c:a[0],cRel:a[1],rRel:a[2]}}}(e,0,n);return[r,i]}},46:{n:"PtgMemAreaN",f:function(e){return[e.read_shift(1)>>>5&3,e.read_shift(2)]}},47:{n:"PtgMemNoMemN",f:function(e){return[e.read_shift(1)>>>5&3,e.read_shift(2)]}},57:{n:"PtgNameX",f:function(e,t,n){return 5==n.biff?function(e){var t=e.read_shift(1)>>>5&3,n=e.read_shift(2,"i");e.l+=8;var r=e.read_shift(2);return e.l+=12,[t,n,r]}(e):[e.read_shift(1)>>>5&3,e.read_shift(2),e.read_shift(4)]}},58:{n:"PtgRef3d",f:function(e,t,n){var r=(96&e[e.l])>>5;e.l+=1;var i=e.read_shift(2);return n&&5==n.biff&&(e.l+=12),[r,i,ts(e,0,n)]}},59:{n:"PtgArea3d",f:function(e,t,n){var r=(96&e[e.l++])>>5,i=e.read_shift(2,"i");if(n)switch(n.biff){case 5:e.l+=12;break;case 12:0}return[r,i,Za(e,0,n)]}},60:{n:"PtgRefErr3d",f:function(e,t,n){var r=(96&e[e.l++])>>5,i=e.read_shift(2),o=4;if(n)switch(n.biff){case 5:o=15;break;case 12:o=6}return e.l+=o,[r,i]}},61:{n:"PtgAreaErr3d",f:function(e,t,n){var r=(96&e[e.l++])>>5,i=e.read_shift(2),o=8;if(n)switch(n.biff){case 5:e.l+=12,o=6;break;case 12:o=12}return e.l+=o,[r,i]}},255:{}},fs={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},ps={1:{n:"PtgElfLel",f:us},2:{n:"PtgElfRw",f:ls},3:{n:"PtgElfCol",f:ls},6:{n:"PtgElfRwV",f:ls},7:{n:"PtgElfColV",f:ls},10:{n:"PtgElfRadical",f:ls},11:{n:"PtgElfRadicalS",f:cs},13:{n:"PtgElfColS",f:cs},15:{n:"PtgElfColSV",f:cs},16:{n:"PtgElfRadicalLel",f:us},25:{n:"PtgList",f:function(e){e.l+=2;var t=e.read_shift(2),n=e.read_shift(2),r=e.read_shift(4),i=e.read_shift(2),o=e.read_shift(2);return{ixti:t,coltype:3&n,rt:ds[n>>2&31],idx:r,c:i,C:o}}},29:{n:"PtgSxName",f:function(e){return e.l+=2,[e.read_shift(4)]}},255:{}},gs={0:{n:"PtgAttrNoop",f:function(e){return e.l+=4,[0,0]}},1:{n:"PtgAttrSemi",f:function(e,t,n){var r=255&e[e.l+1]?1:0;return e.l+=n&&2==n.biff?3:4,[r]}},2:{n:"PtgAttrIf",f:function(e,t,n){var r=255&e[e.l+1]?1:0;return e.l+=2,[r,e.read_shift(n&&2==n.biff?1:2)]}},4:{n:"PtgAttrChoose",f:function(e,t,n){e.l+=2;for(var r=e.read_shift(n&&2==n.biff?1:2),i=[],o=0;o<=r;++o)i.push(e.read_shift(n&&2==n.biff?1:2));return i}},8:{n:"PtgAttrGoto",f:function(e,t,n){var r=255&e[e.l+1]?1:0;return e.l+=2,[r,e.read_shift(n&&2==n.biff?1:2)]}},16:{n:"PtgAttrSum",f:function(e,t,n){e.l+=n&&2==n.biff?3:4}},32:{n:"PtgAttrBaxcel",f:rs},33:{n:"PtgAttrBaxcel",f:rs},64:{n:"PtgAttrSpace",f:function(e){return e.read_shift(2),is(e)}},65:{n:"PtgAttrSpaceSemi",f:function(e){return e.read_shift(2),is(e)}},128:{n:"PtgAttrIfError",f:function(e){var t=255&e[e.l+1]?1:0;return e.l+=2,[t,e.read_shift(2)]}},255:{}};function ms(e,t,n,r){if(r.biff<8)return ai(e,t);for(var i=e.l+t,o=[],a=0;a!==n.length;++a)switch(n[a][0]){case"PtgArray":n[a][1]=ss(e,0,r),o.push(n[a][1]);break;case"PtgMemArea":n[a][2]=as(e,n[a][1],r),o.push(n[a][2]);break;case"PtgExp":r&&12==r.biff&&(n[a][1][1]=e.read_shift(4),o.push(n[a][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+n[a][0]}return 0!==(t=i-e.l)&&o.push(ai(e,t)),o}function vs(e,t,n){for(var r,i,o=e.l+t,a=[];o!=e.l;)t=o-e.l,i=e[e.l],r=hs[i]||hs[fs[i]],24!==i&&25!==i||(r=(24===i?ps:gs)[e[e.l+1]]),r&&r.f?a.push([r.n,r.f(e,t,n)]):ai(e,t);return a}function ys(e){for(var t=[],n=0;n<e.length;++n){for(var r=e[n],i=[],o=0;o<r.length;++o){var a=r[o];if(a)if(2===a[0])i.push('"'+a[1].replace(/"/g,'""')+'"');else i.push(a[1]);else i.push("")}t.push(i.join(","))}return t.join(";")}var bs={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function ws(e,t,n){if(!e)return"SH33TJSERR0";if(n.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var r=e.XTI[t];if(n.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),0==t?"":e.XTI[t-1];if(!r)return"SH33TJSERR1";var i="";if(n.biff>8)switch(e[r[0]][0]){case 357:return i=-1==r[1]?"#REF":e.SheetNames[r[1]],r[1]==r[2]?i:i+":"+e.SheetNames[r[2]];case 358:return null!=n.SID?e.SheetNames[n.SID]:"SH33TJSSAME"+e[r[0]][0];default:return"SH33TJSSRC"+e[r[0]][0]}switch(e[r[0]][0][0]){case 1025:return i=-1==r[1]?"#REF":e.SheetNames[r[1]]||"SH33TJSERR3",r[1]==r[2]?i:i+":"+e.SheetNames[r[2]];case 14849:return e[r[0]].slice(1).map(function(e){return e.Name}).join(";;");default:return e[r[0]][0][3]?(i=-1==r[1]?"#REF":e[r[0]][0][3][r[1]]||"SH33TJSERR4",r[1]==r[2]?i:i+":"+e[r[0]][0][3][r[2]]):"SH33TJSERR2"}}function xs(e,t,n){var r=ws(e,t,n);return"#REF"==r?r:function(e,t){if(!e&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}(r,n)}function Ss(e,t,n,r,i){var o,a,s,l,c=i&&i.biff||8,u={s:{c:0,r:0},e:{c:0,r:0}},d=[],h=0,f=0,p="";if(!e[0]||!e[0][0])return"";for(var g=-1,m="",v=0,y=e[0].length;v<y;++v){var b=e[0][v];switch(b[0]){case"PtgUminus":d.push("-"+d.pop());break;case"PtgUplus":d.push("+"+d.pop());break;case"PtgPercent":d.push(d.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(o=d.pop(),a=d.pop(),g>=0){switch(e[0][g][1][0]){case 0:m=Rn(" ",e[0][g][1][1]);break;case 1:m=Rn("\r",e[0][g][1][1]);break;default:if(m="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][g][1][0])}a+=m,g=-1}d.push(a+bs[b[0]]+o);break;case"PtgIsect":o=d.pop(),a=d.pop(),d.push(a+" "+o);break;case"PtgUnion":o=d.pop(),a=d.pop(),d.push(a+","+o);break;case"PtgRange":o=d.pop(),a=d.pop(),d.push(a+":"+o);break;case"PtgAttrChoose":case"PtgAttrGoto":case"PtgAttrIf":case"PtgAttrIfError":case"PtgAttrBaxcel":case"PtgAttrSemi":case"PtgMemArea":case"PtgTbl":case"PtgMemErr":case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":case"PtgMemFunc":case"PtgMemNoMem":break;case"PtgRef":s=ui(b[1][1],u,i),d.push(hi(s,c));break;case"PtgRefN":s=n?ui(b[1][1],n,i):b[1][1],d.push(hi(s,c));break;case"PtgRef3d":h=b[1][1],s=ui(b[1][2],u,i);p=xs(r,h,i);d.push(p+"!"+hi(s,c));break;case"PtgFunc":case"PtgFuncVar":var w=b[1][0],x=b[1][1];w||(w=0);var S=0==(w&=127)?[]:d.slice(-w);d.length-=w,"User"===x&&(x=S.shift()),d.push(x+"("+S.join(",")+")");break;case"PtgBool":d.push(b[1]?"TRUE":"FALSE");break;case"PtgInt":case"PtgErr":d.push(b[1]);break;case"PtgNum":d.push(String(b[1]));break;case"PtgStr":d.push('"'+b[1].replace(/"/g,'""')+'"');break;case"PtgAreaN":l=di(b[1][1],n?{s:n}:u,i),d.push(fi(l,i));break;case"PtgArea":l=di(b[1][1],u,i),d.push(fi(l,i));break;case"PtgArea3d":h=b[1][1],l=b[1][2],p=xs(r,h,i),d.push(p+"!"+fi(l,i));break;case"PtgAttrSum":d.push("SUM("+d.pop()+")");break;case"PtgName":f=b[1][2];var E=(r.names||[])[f-1]||(r[0]||[])[f],T=E?E.Name:"SH33TJSNAME"+String(f);T&&"_xlfn."==T.slice(0,6)&&!i.xlfn&&(T=T.slice(6)),d.push(T);break;case"PtgNameX":var A,_=b[1][1];if(f=b[1][2],!(i.biff<=5)){var k="";if(14849==((r[_]||[])[0]||[])[0]||(1025==((r[_]||[])[0]||[])[0]?r[_][f]&&r[_][f].itab>0&&(k=r.SheetNames[r[_][f].itab-1]+"!"):k=r.SheetNames[f-1]+"!"),r[_]&&r[_][f])k+=r[_][f].Name;else if(r[0]&&r[0][f])k+=r[0][f].Name;else{var C=(ws(r,_,i)||"").split(";;");C[f-1]?k=C[f-1]:k+="SH33TJSERRX"}d.push(k);break}_<0&&(_=-_),r[_]&&(A=r[_][f]),A||(A={Name:"SH33TJSERRY"}),d.push(A.Name);break;case"PtgParen":var I="(",R=")";if(g>=0){switch(m="",e[0][g][1][0]){case 2:I=Rn(" ",e[0][g][1][1])+I;break;case 3:I=Rn("\r",e[0][g][1][1])+I;break;case 4:R=Rn(" ",e[0][g][1][1])+R;break;case 5:R=Rn("\r",e[0][g][1][1])+R;break;default:if(i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][g][1][0])}g=-1}d.push(I+d.pop()+R);break;case"PtgRefErr":case"PtgRefErr3d":case"PtgAreaErr":case"PtgAreaErr3d":d.push("#REF!");break;case"PtgExp":s={c:b[1][1],r:b[1][0]};var N={c:n.c,r:n.r};if(r.sharedf[bi(s)]){var O=r.sharedf[bi(s)];d.push(Ss(O,u,N,r,i))}else{var D=!1;for(o=0;o!=r.arrayf.length;++o)if(a=r.arrayf[o],!(s.c<a[0].s.c||s.c>a[0].e.c)&&!(s.r<a[0].s.r||s.r>a[0].e.r)){d.push(Ss(a[1],u,N,r,i)),D=!0;break}D||d.push(b[1])}break;case"PtgArray":d.push("{"+ys(b[1])+"}");break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":g=v;break;case"PtgMissArg":d.push("");break;case"PtgList":d.push("Table"+b[1].idx+"[#"+b[1].rt+"]");break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");default:throw new Error("Unrecognized Formula Token: "+String(b))}if(3!=i.biff&&g>=0&&-1==["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"].indexOf(e[0][v][0])){var P=!0;switch((b=e[0][g])[1][0]){case 4:P=!1;case 0:m=Rn(" ",b[1][1]);break;case 5:P=!1;case 1:m=Rn("\r",b[1][1]);break;default:if(m="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+b[1][0])}d.push((P?m:"")+d.pop()+(P?"":m)),g=-1}}if(d.length>1&&i.WTF)throw new Error("bad formula stack");return d[0]}function Es(e,t,n,r,i){var o=Vo(t,n,i),a=function(e){if(null==e){var t=si(8);return t.write_shift(1,3),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,65535),t}return Ji("number"==typeof e?e:0)}(e.v),s=si(6);s.write_shift(2,33),s.write_shift(4,0);for(var l=si(e.bf.length),c=0;c<e.bf.length;++c)l[c]=e.bf[c];return ft([o,a,s,l])}function Ts(e,t,n){var r=e.read_shift(4),i=vs(e,r,n),o=e.read_shift(4);return[i,o>0?ms(e,o,i,n):null]}var As=Ts,_s=Ts,ks=Ts,Cs=Ts,Is={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},Rs={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},Ns={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function Os(e){return("of:="+e.replace(Ya,"$1[.$2$3$4$5]").replace(/\]:\[/g,":")).replace(/;/g,"|").replace(/,/g,";")}function Ds(e){return e.replace(/\./,"!")}var Ps="undefined"!==typeof Map;function Ls(e,t,n){var r=0,i=e.length;if(n){if(Ps?n.has(t):Object.prototype.hasOwnProperty.call(n,t))for(var o=Ps?n.get(t):n[t];r<o.length;++r)if(e[o[r]].t===t)return e.Count++,o[r]}else for(;r<i;++r)if(e[r].t===t)return e.Count++,r;return e[i]={t:t},e.Count++,e.Unique++,n&&(Ps?(n.has(t)||n.set(t,[]),n.get(t).push(i)):(Object.prototype.hasOwnProperty.call(n,t)||(n[t]=[]),n[t].push(i))),i}function js(e,t){var n={min:e+1,max:e+1},r=-1;return t.MDW&&(ga=t.MDW),null!=t.width?n.customWidth=1:null!=t.wpx?r=va(t.wpx):null!=t.wch&&(r=t.wch),r>-1?(n.width=ya(r),n.customWidth=1):null!=t.width&&(n.width=t.width),t.hidden&&(n.hidden=!0),null!=t.level&&(n.outlineLevel=n.level=t.level),n}function Ms(e,t){if(e){var n=[.7,.7,.75,.75,.3,.3];"xlml"==t&&(n=[1,1,1,1,.5,.5]),null==e.left&&(e.left=n[0]),null==e.right&&(e.right=n[1]),null==e.top&&(e.top=n[2]),null==e.bottom&&(e.bottom=n[3]),null==e.header&&(e.header=n[4]),null==e.footer&&(e.footer=n[5])}}function Fs(e,t,n){var r=n.revssf[null!=t.z?t.z:"General"],i=60,o=e.length;if(null==r&&n.ssf)for(;i<392;++i)if(null==n.ssf[i]){on(t.z,i),n.ssf[i]=t.z,n.revssf[t.z]=r=i;break}for(i=0;i!=o;++i)if(e[i].numFmtId===r)return i;return e[o]={numFmtId:r,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},o}function Us(e,t,n){if(e&&e["!ref"]){var r=Si(e["!ref"]);if(r.e.c<r.s.c||r.e.r<r.s.r)throw new Error("Bad range ("+n+"): "+e["!ref"])}}var zs=["objects","scenarios","selectLockedCells","selectUnlockedCells"],Bs=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function Ws(e,t,n,r){if(e.c&&n["!comments"].push([t,e.c]),void 0===e.v&&"string"!==typeof e.f||"z"===e.t&&!e.f)return"";var i="",o=e.t,a=e.v;if("z"!==e.t)switch(e.t){case"b":i=e.v?"1":"0";break;case"n":i=""+e.v;break;case"e":i=oo[e.v];break;case"d":r&&r.cellDates?i=kn(e.v,-1).toISOString():((e=In(e)).t="n",i=""+(e.v=bn(kn(e.v)))),"undefined"===typeof e.z&&(e.z=At[14]);break;default:i=e.v}var s=er("v",Bn(i)),l={r:t},c=Fs(r.cellXfs,e,r);switch(0!==c&&(l.s=c),e.t){case"n":case"z":break;case"d":l.t="d";break;case"b":l.t="b";break;case"e":l.t="e";break;default:if(null==e.v){delete e.t;break}if(e.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(r&&r.bookSST){s=er("v",""+Ls(r.Strings,e.v,r.revStrings)),l.t="s";break}l.t="str"}if(e.t!=o&&(e.t=o,e.v=a),"string"==typeof e.f&&e.f){var u=e.F&&e.F.slice(0,t.length)==t?{t:"array",ref:e.F}:null;s=nr("f",Bn(e.f),u)+(null!=e.v?s:"")}return e.l&&n["!links"].push([t,e.l]),e.D&&(l.cm=1),nr("c",s,l)}function Vs(e,t,n,r){var i,o=[jn,nr("worksheet",null,{xmlns:vr[0],"xmlns:r":fr})],a=n.SheetNames[e],s="",l=n.Sheets[a];null==l&&(l={});var c=l["!ref"]||"A1",u=Si(c);if(u.e.c>16383||u.e.r>1048575){if(t.WTF)throw new Error("Range "+c+" exceeds format limit A1:XFD1048576");u.e.c=Math.min(u.e.c,16383),u.e.r=Math.min(u.e.c,1048575),c=xi(u)}r||(r={}),l["!comments"]=[];var d=[];!function(e,t,n,r,i){var o=!1,a={},s=null;if("xlsx"!==r.bookType&&t.vbaraw){var l=t.SheetNames[n];try{t.Workbook&&(l=t.Workbook.Sheets[n].CodeName||l)}catch(Yc){}o=!0,a.codeName=Qn(Bn(l))}if(e&&e["!outline"]){var c={summaryBelow:1,summaryRight:1};e["!outline"].above&&(c.summaryBelow=0),e["!outline"].left&&(c.summaryRight=0),s=(s||"")+nr("outlinePr",null,c)}(o||s)&&(i[i.length]=nr("sheetPr",s,a))}(l,n,e,t,o),o[o.length]=nr("dimension",null,{ref:c}),o[o.length]=function(e,t,n,r){var i={workbookViewId:"0"};return(((r||{}).Workbook||{}).Views||[])[0]&&(i.rightToLeft=r.Workbook.Views[0].RTL?"1":"0"),nr("sheetViews",nr("sheetView",null,i),{})}(0,0,0,n),t.sheetFormat&&(o[o.length]=nr("sheetFormatPr",null,{defaultRowHeight:t.sheetFormat.defaultRowHeight||"16",baseColWidth:t.sheetFormat.baseColWidth||"10",outlineLevelRow:t.sheetFormat.outlineLevelRow||"7"})),null!=l["!cols"]&&l["!cols"].length>0&&(o[o.length]=function(e,t){for(var n,r=["<cols>"],i=0;i!=t.length;++i)(n=t[i])&&(r[r.length]=nr("col",null,js(i,n)));return r[r.length]="</cols>",r.join("")}(0,l["!cols"])),o[i=o.length]="<sheetData/>",l["!links"]=[],null!=l["!ref"]&&(s=function(e,t){var n,r,i=[],o=[],a=Si(e["!ref"]),s="",l="",c=[],u=0,d=0,h=e["!rows"],f=Array.isArray(e),p={r:l},g=-1;for(d=a.s.c;d<=a.e.c;++d)c[d]=vi(d);for(u=a.s.r;u<=a.e.r;++u){for(o=[],l=gi(u),d=a.s.c;d<=a.e.c;++d){n=c[d]+l;var m=f?(e[u]||[])[d]:e[n];void 0!==m&&null!=(s=Ws(m,n,e,t))&&o.push(s)}(o.length>0||h&&h[u])&&(p={r:l},h&&h[u]&&((r=h[u]).hidden&&(p.hidden=1),g=-1,r.hpx?g=xa(r.hpx):r.hpt&&(g=r.hpt),g>-1&&(p.ht=g,p.customHeight=1),r.level&&(p.outlineLevel=r.level)),i[i.length]=nr("row",o.join(""),p))}if(h)for(;u<h.length;++u)h&&h[u]&&(p={r:u+1},(r=h[u]).hidden&&(p.hidden=1),g=-1,r.hpx?g=xa(r.hpx):r.hpt&&(g=r.hpt),g>-1&&(p.ht=g,p.customHeight=1),r.level&&(p.outlineLevel=r.level),i[i.length]=nr("row","",p));return i.join("")}(l,t,0,0),s.length>0&&(o[o.length]=s)),o.length>i+1&&(o[o.length]="</sheetData>",o[i]=o[i].replace("/>",">")),l["!protect"]&&(o[o.length]=function(e){var t={sheet:1};return zs.forEach(function(n){null!=e[n]&&e[n]&&(t[n]="1")}),Bs.forEach(function(n){null==e[n]||e[n]||(t[n]="0")}),e.password&&(t.password=ha(e.password).toString(16).toUpperCase()),nr("sheetProtection",null,t)}(l["!protect"])),null!=l["!autofilter"]&&(o[o.length]=function(e,t,n,r){var i="string"==typeof e.ref?e.ref:xi(e.ref);n.Workbook||(n.Workbook={Sheets:[]}),n.Workbook.Names||(n.Workbook.Names=[]);var o=n.Workbook.Names,a=wi(i);a.s.r==a.e.r&&(a.e.r=wi(t["!ref"]).e.r,i=xi(a));for(var s=0;s<o.length;++s){var l=o[s];if("_xlnm._FilterDatabase"==l.Name&&l.Sheet==r){l.Ref="'"+n.SheetNames[r]+"'!"+i;break}}return s==o.length&&o.push({Name:"_xlnm._FilterDatabase",Sheet:r,Ref:"'"+n.SheetNames[r]+"'!"+i}),nr("autoFilter",null,{ref:i})}(l["!autofilter"],l,n,e)),null!=l["!merges"]&&l["!merges"].length>0&&(o[o.length]=function(e){if(0===e.length)return"";for(var t='<mergeCells count="'+e.length+'">',n=0;n!=e.length;++n)t+='<mergeCell ref="'+xi(e[n])+'"/>';return t+"</mergeCells>"}(l["!merges"]));var h,f,p=-1,g=-1;return l["!links"].length>0&&(o[o.length]="<hyperlinks>",l["!links"].forEach(function(e){e[1].Target&&(h={ref:e[0]},"#"!=e[1].Target.charAt(0)&&(g=fo(r,-1,Bn(e[1].Target).replace(/#.*$/,""),co.HLINK),h["r:id"]="rId"+g),(p=e[1].Target.indexOf("#"))>-1&&(h.location=Bn(e[1].Target.slice(p+1))),e[1].Tooltip&&(h.tooltip=Bn(e[1].Tooltip)),o[o.length]=nr("hyperlink",null,h))}),o[o.length]="</hyperlinks>"),delete l["!links"],null!=l["!margins"]&&(o[o.length]=(Ms(f=l["!margins"]),nr("pageMargins",null,f))),t&&!t.ignoreEC&&void 0!=t.ignoreEC||(o[o.length]=er("ignoredErrors",nr("ignoredError",null,{numberStoredAsText:1,sqref:c}))),d.length>0&&(g=fo(r,-1,"../drawings/drawing"+(e+1)+".xml",co.DRAW),o[o.length]=nr("drawing",null,{"r:id":"rId"+g}),l["!drawing"]=d),l["!comments"].length>0&&(g=fo(r,-1,"../drawings/vmlDrawing"+(e+1)+".vml",co.VML),o[o.length]=nr("legacyDrawing",null,{"r:id":"rId"+g}),l["!legacy"]=g),o.length>1&&(o[o.length]="</worksheet>",o[1]=o[1].replace("/>",">")),o.join("")}function Hs(e,t,n,r){var i=function(e,t,n){var r=si(145),i=(n["!rows"]||[])[e]||{};r.write_shift(4,e),r.write_shift(4,0);var o=320;i.hpx?o=20*xa(i.hpx):i.hpt&&(o=20*i.hpt),r.write_shift(2,o),r.write_shift(1,0);var a=0;i.level&&(a|=i.level),i.hidden&&(a|=16),(i.hpx||i.hpt)&&(a|=32),r.write_shift(1,a),r.write_shift(1,0);var s=0,l=r.l;r.l+=4;for(var c={r:e,c:0},u=0;u<16;++u)if(!(t.s.c>u+1<<10||t.e.c<u<<10)){for(var d=-1,h=-1,f=u<<10;f<u+1<<10;++f)c.c=f,(Array.isArray(n)?(n[c.r]||[])[c.c]:n[bi(c)])&&(d<0&&(d=f),h=f);d<0||(++s,r.write_shift(4,d),r.write_shift(4,h))}var p=r.l;return r.l=l,r.write_shift(4,s),r.l=p,r.length>r.l?r.slice(0,r.l):r}(r,n,t);(i.length>17||(t["!rows"]||[])[r])&&ci(e,0,i)}var Gs=$i,qs=Xi;function Ks(e){return[Mi(e),Qi(e),"n"]}var Ys=$i,$s=Xi;var Xs=["left","right","top","bottom","header","footer"];function Qs(e,t,n,r,i,o,a){if(void 0===t.v)return!1;var s="";switch(t.t){case"b":s=t.v?"1":"0";break;case"d":(t=In(t)).z=t.z||At[14],t.v=bn(kn(t.v)),t.t="n";break;case"n":case"e":s=""+t.v;break;default:s=t.v}var l={r:n,c:r};switch(l.s=Fs(i.cellXfs,t,i),t.l&&o["!links"].push([bi(l),t.l]),t.c&&o["!comments"].push([bi(l),t.c]),t.t){case"s":case"str":return i.bookSST?(s=Ls(i.Strings,t.v,i.revStrings),l.t="s",l.v=s,a?ci(e,18,function(e,t,n){return null==n&&(n=si(8)),Fi(t,n),n.write_shift(4,t.v),n}(0,l)):ci(e,7,function(e,t,n){return null==n&&(n=si(12)),ji(t,n),n.write_shift(4,t.v),n}(0,l))):(l.t="str",a?ci(e,17,function(e,t,n){return null==n&&(n=si(8+4*e.v.length)),Fi(t,n),Ri(e.v,n),n.length>n.l?n.slice(0,n.l):n}(t,l)):ci(e,6,function(e,t,n){return null==n&&(n=si(12+4*e.v.length)),ji(t,n),Ri(e.v,n),n.length>n.l?n.slice(0,n.l):n}(t,l))),!0;case"n":return t.v==(0|t.v)&&t.v>-1e3&&t.v<1e3?a?ci(e,13,function(e,t,n){return null==n&&(n=si(8)),Fi(t,n),Ki(e.v,n),n}(t,l)):ci(e,2,function(e,t,n){return null==n&&(n=si(12)),ji(t,n),Ki(e.v,n),n}(t,l)):a?ci(e,16,function(e,t,n){return null==n&&(n=si(12)),Fi(t,n),Ji(e.v,n),n}(t,l)):ci(e,5,function(e,t,n){return null==n&&(n=si(16)),ji(t,n),Ji(e.v,n),n}(t,l)),!0;case"b":return l.t="b",a?ci(e,15,function(e,t,n){return null==n&&(n=si(5)),Fi(t,n),n.write_shift(1,e.v?1:0),n}(t,l)):ci(e,4,function(e,t,n){return null==n&&(n=si(9)),ji(t,n),n.write_shift(1,e.v?1:0),n}(t,l)),!0;case"e":return l.t="e",a?ci(e,14,function(e,t,n){return null==n&&(n=si(8)),Fi(t,n),n.write_shift(1,e.v),n.write_shift(2,0),n.write_shift(1,0),n}(t,l)):ci(e,3,function(e,t,n){return null==n&&(n=si(9)),ji(t,n),n.write_shift(1,e.v),n}(t,l)),!0}return a?ci(e,12,function(e,t,n){return null==n&&(n=si(4)),Fi(t,n)}(0,l)):ci(e,1,function(e,t,n){return null==n&&(n=si(8)),ji(t,n)}(0,l)),!0}function Js(e,t){var n,r;t&&t["!merges"]&&(ci(e,177,(n=t["!merges"].length,null==r&&(r=si(4)),r.write_shift(4,n),r)),t["!merges"].forEach(function(t){ci(e,176,$s(t))}),ci(e,178))}function Zs(e,t){t&&t["!cols"]&&(ci(e,390),t["!cols"].forEach(function(t,n){t&&ci(e,60,function(e,t,n){null==n&&(n=si(18));var r=js(e,t);n.write_shift(-4,e),n.write_shift(-4,e),n.write_shift(4,256*(r.width||10)),n.write_shift(4,0);var i=0;return t.hidden&&(i|=1),"number"==typeof r.width&&(i|=2),t.level&&(i|=t.level<<8),n.write_shift(2,i),n}(n,t))}),ci(e,391))}function el(e,t){t&&t["!ref"]&&(ci(e,648),ci(e,649,function(e){var t=si(24);return t.write_shift(4,4),t.write_shift(4,1),Xi(e,t),t}(Si(t["!ref"]))),ci(e,650))}function tl(e,t,n){t["!links"].forEach(function(t){if(t[1].Target){var r=fo(n,-1,t[1].Target.replace(/#.*$/,""),co.HLINK);ci(e,494,function(e,t){var n=si(50+4*(e[1].Target.length+(e[1].Tooltip||"").length));Xi({s:yi(e[0]),e:yi(e[0])},n),Gi("rId"+t,n);var r=e[1].Target.indexOf("#");return Ri((-1==r?"":e[1].Target.slice(r+1))||"",n),Ri(e[1].Tooltip||"",n),Ri("",n),n.slice(0,n.l)}(t,r))}}),delete t["!links"]}function nl(e,t,n){ci(e,133),ci(e,137,function(e,t,n){null==n&&(n=si(30));var r=924;return(((t||{}).Views||[])[0]||{}).RTL&&(r|=32),n.write_shift(2,r),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(1,0),n.write_shift(1,0),n.write_shift(2,0),n.write_shift(2,100),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(4,0),n}(0,n)),ci(e,138),ci(e,134)}function rl(e,t){var n,r;t["!protect"]&&ci(e,535,(n=t["!protect"],null==r&&(r=si(66)),r.write_shift(2,n.password?ha(n.password):0),r.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(e){e[1]?r.write_shift(4,null==n[e[0]]||n[e[0]]?0:1):r.write_shift(4,null!=n[e[0]]&&n[e[0]]?0:1)}),r))}function il(e,t,n,r){var i=li(),o=n.SheetNames[e],a=n.Sheets[o]||{},s=o;try{n&&n.Workbook&&(s=n.Workbook.Sheets[e].CodeName||s)}catch(Yc){}var l,c,u=Si(a["!ref"]||"A1");if(u.e.c>16383||u.e.r>1048575){if(t.WTF)throw new Error("Range "+(a["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");u.e.c=Math.min(u.e.c,16383),u.e.r=Math.min(u.e.c,1048575)}return a["!links"]=[],a["!comments"]=[],ci(i,129),(n.vbaraw||a["!outline"])&&ci(i,147,function(e,t,n){null==n&&(n=si(84+4*e.length));var r=192;t&&(t.above&&(r&=-65),t.left&&(r&=-129)),n.write_shift(1,r);for(var i=1;i<3;++i)n.write_shift(1,0);return Zi({auto:1},n),n.write_shift(-4,-1),n.write_shift(-4,-1),zi(e,n),n.slice(0,n.l)}(s,a["!outline"])),ci(i,148,qs(u)),nl(i,0,n.Workbook),Zs(i,a),function(e,t,n,r){var i,o=Si(t["!ref"]||"A1"),a="",s=[];ci(e,145);var l=Array.isArray(t),c=o.e.r;t["!rows"]&&(c=Math.max(o.e.r,t["!rows"].length-1));for(var u=o.s.r;u<=c;++u){a=gi(u),Hs(e,t,o,u);var d=!1;if(u<=o.e.r)for(var h=o.s.c;h<=o.e.c;++h){u===o.s.r&&(s[h]=vi(h)),i=s[h]+a;var f=l?(t[u]||[])[h]:t[i];d=!!f&&Qs(e,f,u,h,r,t,d)}}ci(e,146)}(i,a,0,t),rl(i,a),function(e,t,n,r){if(t["!autofilter"]){var i=t["!autofilter"],o="string"===typeof i.ref?i.ref:xi(i.ref);n.Workbook||(n.Workbook={Sheets:[]}),n.Workbook.Names||(n.Workbook.Names=[]);var a=n.Workbook.Names,s=wi(o);s.s.r==s.e.r&&(s.e.r=wi(t["!ref"]).e.r,o=xi(s));for(var l=0;l<a.length;++l){var c=a[l];if("_xlnm._FilterDatabase"==c.Name&&c.Sheet==r){c.Ref="'"+n.SheetNames[r]+"'!"+o;break}}l==a.length&&a.push({Name:"_xlnm._FilterDatabase",Sheet:r,Ref:"'"+n.SheetNames[r]+"'!"+o}),ci(e,161,Xi(Si(o))),ci(e,162)}}(i,a,n,e),Js(i,a),tl(i,a,r),a["!margins"]&&ci(i,476,(l=a["!margins"],null==c&&(c=si(48)),Ms(l),Xs.forEach(function(e){Ji(l[e],c)}),c)),t&&!t.ignoreEC&&void 0!=t.ignoreEC||el(i,a),function(e,t,n,r){if(t["!comments"].length>0){var i=fo(r,-1,"../drawings/vmlDrawing"+(n+1)+".vml",co.VML);ci(e,551,Gi("rId"+i)),t["!legacy"]=i}}(i,a,e,r),ci(i,130),i.end()}var ol=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]];var al="][*?/\\".split("");function sl(e,t){if(e.length>31){if(t)return!1;throw new Error("Sheet names cannot exceed 31 chars")}var n=!0;return al.forEach(function(r){if(-1!=e.indexOf(r)){if(!t)throw new Error("Sheet name cannot contain : \\ / ? * [ ]");n=!1}}),n}function ll(e){if(!e||!e.SheetNames||!e.Sheets)throw new Error("Invalid Workbook");if(!e.SheetNames.length)throw new Error("Workbook is empty");var t,n,r,i=e.Workbook&&e.Workbook.Sheets||[];t=e.SheetNames,n=i,r=!!e.vbaraw,t.forEach(function(e,i){sl(e);for(var o=0;o<i;++o)if(e==t[o])throw new Error("Duplicate Sheet Name: "+e);if(r){var a=n&&n[i]&&n[i].CodeName||e;if(95==a.charCodeAt(0)&&a.length>22)throw new Error("Bad Code Name: Worksheet"+a)}});for(var o=0;o<e.SheetNames.length;++o)Us(e.Sheets[e.SheetNames[o]],e.SheetNames[o],o)}function cl(e){var t=[jn];t[t.length]=nr("workbook",null,{xmlns:vr[0],"xmlns:r":fr});var n=e.Workbook&&(e.Workbook.Names||[]).length>0,r={codeName:"ThisWorkbook"};e.Workbook&&e.Workbook.WBProps&&(ol.forEach(function(t){null!=e.Workbook.WBProps[t[0]]&&e.Workbook.WBProps[t[0]]!=t[1]&&(r[t[0]]=e.Workbook.WBProps[t[0]])}),e.Workbook.WBProps.CodeName&&(r.codeName=e.Workbook.WBProps.CodeName,delete r.CodeName)),t[t.length]=nr("workbookPr",null,r);var i=e.Workbook&&e.Workbook.Sheets||[],o=0;if(i&&i[0]&&i[0].Hidden){for(t[t.length]="<bookViews>",o=0;o!=e.SheetNames.length&&i[o]&&i[o].Hidden;++o);o==e.SheetNames.length&&(o=0),t[t.length]='<workbookView firstSheet="'+o+'" activeTab="'+o+'"/>',t[t.length]="</bookViews>"}for(t[t.length]="<sheets>",o=0;o!=e.SheetNames.length;++o){var a={name:Bn(e.SheetNames[o].slice(0,31))};if(a.sheetId=""+(o+1),a["r:id"]="rId"+(o+1),i[o])switch(i[o].Hidden){case 1:a.state="hidden";break;case 2:a.state="veryHidden"}t[t.length]=nr("sheet",null,a)}return t[t.length]="</sheets>",n&&(t[t.length]="<definedNames>",e.Workbook&&e.Workbook.Names&&e.Workbook.Names.forEach(function(e){var n={name:e.Name};e.Comment&&(n.comment=e.Comment),null!=e.Sheet&&(n.localSheetId=""+e.Sheet),e.Hidden&&(n.hidden="1"),e.Ref&&(t[t.length]=nr("definedName",Bn(e.Ref),n))}),t[t.length]="</definedNames>"),t.length>2&&(t[t.length]="</workbook>",t[1]=t[1].replace("/>",">")),t.join("")}function ul(e,t){return t||(t=si(127)),t.write_shift(4,e.Hidden),t.write_shift(4,e.iTabID),Gi(e.strRelID,t),Ri(e.name.slice(0,31),t),t.length>t.l?t.slice(0,t.l):t}function dl(e,t){if(t.Workbook&&t.Workbook.Sheets){for(var n,r,i=t.Workbook.Sheets,o=0,a=-1,s=-1;o<i.length;++o)!i[o]||!i[o].Hidden&&-1==a?a=o:1==i[o].Hidden&&-1==s&&(s=o);if(!(s>a))ci(e,135),ci(e,158,(n=a,r||(r=si(29)),r.write_shift(-4,0),r.write_shift(-4,460),r.write_shift(4,28800),r.write_shift(4,17600),r.write_shift(4,500),r.write_shift(4,n),r.write_shift(4,n),r.write_shift(1,120),r.length>r.l?r.slice(0,r.l):r)),ci(e,136)}}function hl(e,t){var n=li();return ci(n,131),ci(n,128,function(e,t){t||(t=si(127));for(var n=0;4!=n;++n)t.write_shift(4,0);return Ri("SheetJS",t),Ri(Ge.version,t),Ri(Ge.version,t),Ri("7262",t),t.length>t.l?t.slice(0,t.l):t}()),ci(n,153,function(e,t){t||(t=si(72));var n=0;return e&&e.filterPrivacy&&(n|=8),t.write_shift(4,n),t.write_shift(4,0),zi(e&&e.CodeName||"ThisWorkbook",t),t.slice(0,t.l)}(e.Workbook&&e.Workbook.WBProps||null)),dl(n,e),function(e,t){ci(e,143);for(var n=0;n!=t.SheetNames.length;++n)ci(e,156,ul({Hidden:t.Workbook&&t.Workbook.Sheets&&t.Workbook.Sheets[n]&&t.Workbook.Sheets[n].Hidden||0,iTabID:n+1,strRelID:"rId"+(n+1),name:t.SheetNames[n]}));ci(e,144)}(n,e),ci(n,132),n.end()}function fl(e,t,n,r,i){return(".bin"===t.slice(-4)?il:Vs)(e,n,r,i)}function pl(e,t,n){return(".bin"===t.slice(-4)?Ga:Wa)(e,n)}function gl(e,t){var n=[];return e.Props&&n.push(function(e,t){var n=[];return pn(To).map(function(e){for(var t=0;t<vo.length;++t)if(vo[t][1]==e)return vo[t];for(t=0;t<wo.length;++t)if(wo[t][1]==e)return wo[t];throw e}).forEach(function(r){if(null!=e[r[1]]){var i=t&&t.Props&&null!=t.Props[r[1]]?t.Props[r[1]]:e[r[1]];"date"===r[2]&&(i=new Date(i).toISOString().replace(/\.\d*Z/,"Z")),"number"==typeof i?i=String(i):!0===i||!1===i?i=i?"1":"0":i instanceof Date&&(i=new Date(i).toISOString().replace(/\.\d*Z/,"")),n.push(er(To[r[1]]||r[1],i))}}),nr("DocumentProperties",n.join(""),{xmlns:yr})}(e.Props,t)),e.Custprops&&n.push(function(e,t){var n=["Worksheets","SheetNames"],r="CustomDocumentProperties",i=[];return e&&pn(e).forEach(function(t){if(Object.prototype.hasOwnProperty.call(e,t)){for(var r=0;r<vo.length;++r)if(t==vo[r][1])return;for(r=0;r<wo.length;++r)if(t==wo[r][1])return;for(r=0;r<n.length;++r)if(t==n[r])return;var o=e[t],a="string";"number"==typeof o?(a="float",o=String(o)):!0===o||!1===o?(a="boolean",o=o?"1":"0"):o=String(o),i.push(nr(Wn(t),o,{"dt:dt":a}))}}),t&&pn(t).forEach(function(n){if(Object.prototype.hasOwnProperty.call(t,n)&&(!e||!Object.prototype.hasOwnProperty.call(e,n))){var r=t[n],o="string";"number"==typeof r?(o="float",r=String(r)):!0===r||!1===r?(o="boolean",r=r?"1":"0"):r instanceof Date?(o="dateTime.tz",r=r.toISOString()):r=String(r),i.push(nr(Wn(n),r,{"dt:dt":o}))}}),"<"+r+' xmlns="'+yr+'">'+i.join("")+"</"+r+">"}(e.Props,e.Custprops)),n.join("")}function ml(e){return nr("NamedRange",null,{"ss:Name":e.Name,"ss:RefersTo":"="+$a(e.Ref,{r:0,c:0})})}function vl(e,t,n,r,i,o,a){if(!e||void 0==e.v&&void 0==e.f)return"";var s={};if(e.f&&(s["ss:Formula"]="="+Bn($a(e.f,a))),e.F&&e.F.slice(0,t.length)==t){var l=yi(e.F.slice(t.length+1));s["ss:ArrayRange"]="RC:R"+(l.r==a.r?"":"["+(l.r-a.r)+"]")+"C"+(l.c==a.c?"":"["+(l.c-a.c)+"]")}if(e.l&&e.l.Target&&(s["ss:HRef"]=Bn(e.l.Target),e.l.Tooltip&&(s["x:HRefScreenTip"]=Bn(e.l.Tooltip))),n["!merges"])for(var c=n["!merges"],u=0;u!=c.length;++u)c[u].s.c==a.c&&c[u].s.r==a.r&&(c[u].e.c>c[u].s.c&&(s["ss:MergeAcross"]=c[u].e.c-c[u].s.c),c[u].e.r>c[u].s.r&&(s["ss:MergeDown"]=c[u].e.r-c[u].s.r));var d="",h="";switch(e.t){case"z":if(!r.sheetStubs)return"";break;case"n":d="Number",h=String(e.v);break;case"b":d="Boolean",h=e.v?"1":"0";break;case"e":d="Error",h=oo[e.v];break;case"d":d="DateTime",h=new Date(e.v).toISOString(),null==e.z&&(e.z=e.z||At[14]);break;case"s":d="String",h=((e.v||"")+"").replace(Un,function(e){return Fn[e]}).replace(Vn,function(e){return"&#x"+e.charCodeAt(0).toString(16).toUpperCase()+";"})}var f=Fs(r.cellXfs,e,r);s["ss:StyleID"]="s"+(21+f),s["ss:Index"]=a.c+1;var p=null!=e.v?h:"",g="z"==e.t?"":'<Data ss:Type="'+d+'">'+p+"</Data>";return(e.c||[]).length>0&&(g+=e.c.map(function(e){var t=nr("ss:Data",(e.t||"").replace(/(\r\n|[\r\n])/g,"&#10;"),{xmlns:"http://www.w3.org/TR/REC-html40"});return nr("Comment",t,{"ss:Author":e.a})}).join("")),nr("Cell",g,s)}function yl(e,t){var n='<Row ss:Index="'+(e+1)+'"';return t&&(t.hpt&&!t.hpx&&(t.hpx=Sa(t.hpt)),t.hpx&&(n+=' ss:AutoFitHeight="0" ss:Height="'+t.hpx+'"'),t.hidden&&(n+=' ss:Hidden="1"')),n+">"}function bl(e,t,n){var r=[],i=n.SheetNames[e],o=n.Sheets[i],a=o?function(e,t,n,r){if(!e)return"";if(!((r||{}).Workbook||{}).Names)return"";for(var i=r.Workbook.Names,o=[],a=0;a<i.length;++a){var s=i[a];s.Sheet==n&&(s.Name.match(/^_xlfn\./)||o.push(ml(s)))}return o.join("")}(o,0,e,n):"";return a.length>0&&r.push("<Names>"+a+"</Names>"),a=o?function(e,t){if(!e["!ref"])return"";var n=Si(e["!ref"]),r=e["!merges"]||[],i=0,o=[];e["!cols"]&&e["!cols"].forEach(function(e,t){ba(e);var n=!!e.width,r=js(t,e),i={"ss:Index":t+1};n&&(i["ss:Width"]=ma(r.width)),e.hidden&&(i["ss:Hidden"]="1"),o.push(nr("Column",null,i))});for(var a=Array.isArray(e),s=n.s.r;s<=n.e.r;++s){for(var l=[yl(s,(e["!rows"]||[])[s])],c=n.s.c;c<=n.e.c;++c){var u=!1;for(i=0;i!=r.length;++i)if(!(r[i].s.c>c)&&!(r[i].s.r>s)&&!(r[i].e.c<c)&&!(r[i].e.r<s)){r[i].s.c==c&&r[i].s.r==s||(u=!0);break}if(!u){var d={r:s,c:c},h=bi(d),f=a?(e[s]||[])[c]:e[h];l.push(vl(f,h,e,t,0,0,d))}}l.push("</Row>"),l.length>2&&o.push(l.join(""))}return o.join("")}(o,t):"",a.length>0&&r.push("<Table>"+a+"</Table>"),r.push(function(e,t,n,r){if(!e)return"";var i=[];if(e["!margins"]&&(i.push("<PageSetup>"),e["!margins"].header&&i.push(nr("Header",null,{"x:Margin":e["!margins"].header})),e["!margins"].footer&&i.push(nr("Footer",null,{"x:Margin":e["!margins"].footer})),i.push(nr("PageMargins",null,{"x:Bottom":e["!margins"].bottom||"0.75","x:Left":e["!margins"].left||"0.7","x:Right":e["!margins"].right||"0.7","x:Top":e["!margins"].top||"0.75"})),i.push("</PageSetup>")),r&&r.Workbook&&r.Workbook.Sheets&&r.Workbook.Sheets[n])if(r.Workbook.Sheets[n].Hidden)i.push(nr("Visible",1==r.Workbook.Sheets[n].Hidden?"SheetHidden":"SheetVeryHidden",{}));else{for(var o=0;o<n&&(!r.Workbook.Sheets[o]||r.Workbook.Sheets[o].Hidden);++o);o==n&&i.push("<Selected/>")}return((((r||{}).Workbook||{}).Views||[])[0]||{}).RTL&&i.push("<DisplayRightToLeft/>"),e["!protect"]&&(i.push(er("ProtectContents","True")),e["!protect"].objects&&i.push(er("ProtectObjects","True")),e["!protect"].scenarios&&i.push(er("ProtectScenarios","True")),null==e["!protect"].selectLockedCells||e["!protect"].selectLockedCells?null==e["!protect"].selectUnlockedCells||e["!protect"].selectUnlockedCells||i.push(er("EnableSelection","UnlockedCells")):i.push(er("EnableSelection","NoSelection")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(t){e["!protect"][t[0]]&&i.push("<"+t[1]+"/>")})),0==i.length?"":nr("WorksheetOptions",i.join(""),{xmlns:br})}(o,0,e,n)),r.join("")}function wl(e,t){t||(t={}),e.SSF||(e.SSF=In(At)),e.SSF&&(sn(),an(e.SSF),t.revssf=vn(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF,t.cellXfs=[],Fs(t.cellXfs,{},{revssf:{General:0}}));var n=[];n.push(gl(e,t)),n.push(""),n.push(""),n.push("");for(var r=0;r<e.SheetNames.length;++r)n.push(nr("Worksheet",bl(r,t,e),{"ss:Name":Bn(e.SheetNames[r])}));return n[2]=function(e,t){var n=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return t.cellXfs.forEach(function(e,t){var r=[];r.push(nr("NumberFormat",null,{"ss:Format":Bn(At[e.numFmtId])}));var i={"ss:ID":"s"+(21+t)};n.push(nr("Style",r.join(""),i))}),nr("Styles",n.join(""))}(0,t),n[3]=function(e){if(!((e||{}).Workbook||{}).Names)return"";for(var t=e.Workbook.Names,n=[],r=0;r<t.length;++r){var i=t[r];null==i.Sheet&&(i.Name.match(/^_xlfn\./)||n.push(ml(i)))}return nr("Names",n.join(""))}(e),jn+nr("Workbook",n.join(""),{xmlns:wr,"xmlns:o":yr,"xmlns:x":br,"xmlns:ss":wr,"xmlns:dt":xr,"xmlns:html":Tr})}var xl="e0859ff2f94f6810ab9108002b27b3d9",Sl="02d5cdd59c2e1b10939708002b2cf9ae",El="05d5cdd59c2e1b10939708002b2cf9ae";function Tl(e,t){var n=t||{},r=un.utils.cfb_new({root:"R"}),i="/Workbook";switch(n.bookType||"xls"){case"xls":n.bookType="biff8";case"xla":n.bookType||(n.bookType="xla");case"biff8":i="/Workbook",n.biff=8;break;case"biff5":i="/Book",n.biff=5;break;default:throw new Error("invalid type "+n.bookType+" for XLS CFB")}return un.utils.cfb_add(r,i,Ll(e,n)),8==n.biff&&(e.Props||e.Custprops)&&function(e,t){var n,r=[],i=[],o=[],a=0,s=gn(to,"n"),l=gn(no,"n");if(e.Props)for(n=pn(e.Props),a=0;a<n.length;++a)(Object.prototype.hasOwnProperty.call(s,n[a])?r:Object.prototype.hasOwnProperty.call(l,n[a])?i:o).push([n[a],e.Props[n[a]]]);if(e.Custprops)for(n=pn(e.Custprops),a=0;a<n.length;++a)Object.prototype.hasOwnProperty.call(e.Props||{},n[a])||(Object.prototype.hasOwnProperty.call(s,n[a])?r:Object.prototype.hasOwnProperty.call(l,n[a])?i:o).push([n[a],e.Custprops[n[a]]]);var c=[];for(a=0;a<o.length;++a)_o.indexOf(o[a][0])>-1||xo.indexOf(o[a][0])>-1||null!=o[a][1]&&c.push(o[a]);i.length&&un.utils.cfb_add(t,"/\x05SummaryInformation",Io(i,xl,l,no)),(r.length||c.length)&&un.utils.cfb_add(t,"/\x05DocumentSummaryInformation",Io(r,Sl,s,to,c.length?c:null,El))}(e,r),8==n.biff&&e.vbaraw&&function(e,t){t.FullPaths.forEach(function(n,r){if(0!=r){var i=n.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");"/"!==i.slice(-1)&&un.utils.cfb_add(e,i,t.FileIndex[r].content)}})}(r,un.read(e.vbaraw,{type:"string"==typeof e.vbaraw?"binary":"buffer"})),r}var Al={0:{f:function(e,t){var n={},r=e.l+t;n.r=e.read_shift(4),e.l+=4;var i=e.read_shift(2);e.l+=1;var o=e.read_shift(1);return e.l=r,7&o&&(n.level=7&o),16&o&&(n.hidden=!0),32&o&&(n.hpt=i/20),n}},1:{f:function(e){return[Li(e)]}},2:{f:function(e){return[Li(e),qi(e),"n"]}},3:{f:function(e){return[Li(e),e.read_shift(1),"e"]}},4:{f:function(e){return[Li(e),e.read_shift(1),"b"]}},5:{f:function(e){return[Li(e),Qi(e),"n"]}},6:{f:function(e){return[Li(e),Ii(e),"str"]}},7:{f:function(e){return[Li(e),e.read_shift(4),"s"]}},8:{f:function(e,t,n){var r=e.l+t,i=Li(e);i.r=n["!row"];var o=[i,Ii(e),"str"];if(n.cellFormula){e.l+=2;var a=_s(e,r-e.l,n);o[3]=Ss(a,0,i,n.supbooks,n)}else e.l=r;return o}},9:{f:function(e,t,n){var r=e.l+t,i=Li(e);i.r=n["!row"];var o=[i,Qi(e),"n"];if(n.cellFormula){e.l+=2;var a=_s(e,r-e.l,n);o[3]=Ss(a,0,i,n.supbooks,n)}else e.l=r;return o}},10:{f:function(e,t,n){var r=e.l+t,i=Li(e);i.r=n["!row"];var o=[i,e.read_shift(1),"b"];if(n.cellFormula){e.l+=2;var a=_s(e,r-e.l,n);o[3]=Ss(a,0,i,n.supbooks,n)}else e.l=r;return o}},11:{f:function(e,t,n){var r=e.l+t,i=Li(e);i.r=n["!row"];var o=[i,e.read_shift(1),"e"];if(n.cellFormula){e.l+=2;var a=_s(e,r-e.l,n);o[3]=Ss(a,0,i,n.supbooks,n)}else e.l=r;return o}},12:{f:function(e){return[Mi(e)]}},13:{f:function(e){return[Mi(e),qi(e),"n"]}},14:{f:function(e){return[Mi(e),e.read_shift(1),"e"]}},15:{f:function(e){return[Mi(e),e.read_shift(1),"b"]}},16:{f:Ks},17:{f:function(e){return[Mi(e),Ii(e),"str"]}},18:{f:function(e){return[Mi(e),e.read_shift(4),"s"]}},19:{f:Oi},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:function(e,t,n){var r=e.l+t;e.l+=4,e.l+=1;var i=e.read_shift(4),o=Vi(e),a=ks(e,0,n),s=Bi(e);e.l=r;var l={Name:o,Ptg:a};return i<268435455&&(l.Sheet=i),s&&(l.Comment=s),l}},40:{},42:{},43:{f:function(e,t,n){var r={};r.sz=e.read_shift(2)/20;var i=function(e){var t=e.read_shift(1);return e.l++,{fBold:1&t,fItalic:2&t,fUnderline:4&t,fStrikeout:8&t,fOutline:16&t,fShadow:32&t,fCondense:64&t,fExtend:128&t}}(e);switch(i.fItalic&&(r.italic=1),i.fCondense&&(r.condense=1),i.fExtend&&(r.extend=1),i.fShadow&&(r.shadow=1),i.fOutline&&(r.outline=1),i.fStrikeout&&(r.strike=1),700===e.read_shift(2)&&(r.bold=1),e.read_shift(2)){case 1:r.vertAlign="superscript";break;case 2:r.vertAlign="subscript"}var o=e.read_shift(1);0!=o&&(r.underline=o);var a=e.read_shift(1);a>0&&(r.family=a);var s=e.read_shift(1);switch(s>0&&(r.charset=s),e.l++,r.color=function(e){var t={},n=e.read_shift(1)>>>1,r=e.read_shift(1),i=e.read_shift(2,"i"),o=e.read_shift(1),a=e.read_shift(1),s=e.read_shift(1);switch(e.l++,n){case 0:t.auto=1;break;case 1:t.index=r;var l=io[r];l&&(t.rgb=pa(l));break;case 2:t.rgb=pa([o,a,s]);break;case 3:t.theme=r}return 0!=i&&(t.tint=i>0?i/32767:i/32768),t}(e),e.read_shift(1)){case 1:r.scheme="major";break;case 2:r.scheme="minor"}return r.name=Ii(e),r}},44:{f:function(e,t){return[e.read_shift(2),Ii(e)]}},45:{f:Ca},46:{f:Oa},47:{f:function(e,t){var n=e.l+t,r=e.read_shift(2),i=e.read_shift(2);return e.l=n,{ixfe:r,numFmtId:i}}},48:{},49:{f:function(e){return e.read_shift(4,"i")}},50:{},51:{f:function(e){for(var t=[],n=e.read_shift(4);n-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:ea},62:{f:function(e){return[Li(e),Oi(e),"is"]}},63:{f:function(e){var t={};t.i=e.read_shift(4);var n={};n.r=e.read_shift(4),n.c=e.read_shift(4),t.r=bi(n);var r=e.read_shift(1);return 2&r&&(t.l="1"),8&r&&(t.a="1"),t}},64:{f:function(){}},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:ai,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:function(e){var t=e.read_shift(2);return e.l+=28,{RTL:32&t}}},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:function(e,t){var n={},r=e[e.l];return++e.l,n.above=!(64&r),n.left=!(128&r),e.l+=18,n.name=Ui(e,t-19),n}},148:{f:Gs,p:16},151:{f:function(){}},152:{},153:{f:function(e,t){var n={},r=e.read_shift(4);n.defaultThemeVersion=e.read_shift(4);var i=t>8?Ii(e):"";return i.length>0&&(n.CodeName=i),n.autoCompressPictures=!!(65536&r),n.backupFile=!!(64&r),n.checkCompatibility=!!(4096&r),n.date1904=!!(1&r),n.filterPrivacy=!!(8&r),n.hidePivotFieldList=!!(1024&r),n.promptedSolutions=!!(16&r),n.publishItems=!!(2048&r),n.refreshAllConnections=!!(262144&r),n.saveExternalLinkValues=!!(128&r),n.showBorderUnselectedTables=!!(4&r),n.showInkAnnotation=!!(32&r),n.showObjects=["all","placeholders","none"][r>>13&3],n.showPivotChartFilter=!!(32768&r),n.updateLinks=["userSet","never","always"][r>>8&3],n}},154:{},155:{},156:{f:function(e,t){var n={};return n.Hidden=e.read_shift(4),n.iTabID=e.read_shift(4),n.strRelID=Hi(e,t-8),n.name=Ii(e),n}},157:{},158:{},159:{T:1,f:function(e){return[e.read_shift(4),e.read_shift(4)]}},160:{T:-1},161:{T:1,f:$i},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:Ys},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:function(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:Ii(e)}}},336:{T:-1},337:{f:function(e){return e.l+=4,0!=e.read_shift(4)},T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:Hi},357:{},358:{},359:{},360:{T:1},361:{},362:{f:Qo},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:function(e,t,n){var r=e.l+t,i=Yi(e),o=e.read_shift(1),a=[i];if(a[2]=o,n.cellFormula){var s=As(e,r-e.l,n);a[1]=s}else e.l=r;return a}},427:{f:function(e,t,n){var r=e.l+t,i=[$i(e,16)];if(n.cellFormula){var o=Cs(e,r-e.l,n);i[1]=o,e.l=r}else e.l=r;return i}},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:function(e){var t={};return Xs.forEach(function(n){t[n]=Qi(e)}),t}},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:function(){}},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:function(e,t){var n=e.l+t,r=$i(e,16),i=Bi(e),o=Ii(e),a=Ii(e),s=Ii(e);e.l=n;var l={rfx:r,relId:i,loc:o,display:s};return a&&(l.Tooltip=a),l}},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:Hi},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:Ha},633:{T:1},634:{T:-1},635:{T:1,f:function(e){var t={};t.iauthor=e.read_shift(4);var n=$i(e,16);return t.rfx=n.s,t.ref=bi(n.s),e.l+=16,t}},636:{T:-1},637:{f:Di},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:function(e,t){return e.l+=10,{name:Ii(e)}}},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:function(){}},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}};function _l(e,t,n,r){var i=t;if(!isNaN(i)){var o=r||(n||[]).length||0,a=e.next(4);a.write_shift(2,i),a.write_shift(2,o),o>0&&Gr(n)&&e.push(n)}}function kl(e,t,n){return e||(e=si(7)),e.write_shift(2,t),e.write_shift(2,n),e.write_shift(2,0),e.write_shift(1,0),e}function Cl(e,t,n,r){if(null!=t.v)switch(t.t){case"d":case"n":var i="d"==t.t?bn(kn(t.v)):t.v;return void(i==(0|i)&&i>=0&&i<65536?_l(e,2,function(e,t,n){var r=si(9);return kl(r,e,t),r.write_shift(2,n),r}(n,r,i)):_l(e,3,function(e,t,n){var r=si(15);return kl(r,e,t),r.write_shift(8,n,"f"),r}(n,r,i)));case"b":case"e":return void _l(e,5,function(e,t,n,r){var i=si(9);return kl(i,e,t),Po(n,r||"b",i),i}(n,r,t.v,t.t));case"s":case"str":return void _l(e,4,function(e,t,n){var r=si(8+2*n.length);return kl(r,e,t),r.write_shift(1,n.length),r.write_shift(n.length,n,"sbcs"),r.l<r.length?r.slice(0,r.l):r}(n,r,(t.v||"").slice(0,255)))}_l(e,1,kl(null,n,r))}function Il(e,t){var n=t||{};for(var r=li(),i=0,o=0;o<e.SheetNames.length;++o)e.SheetNames[o]==n.sheet&&(i=o);if(0==i&&n.sheet&&e.SheetNames[0]!=n.sheet)throw new Error("Sheet not found: "+n.sheet);return _l(r,4==n.biff?1033:3==n.biff?521:9,Ko(0,16,n)),function(e,t,n,r){var i,o=Array.isArray(t),a=Si(t["!ref"]||"A1"),s="",l=[];if(a.e.c>255||a.e.r>16383){if(r.WTF)throw new Error("Range "+(t["!ref"]||"A1")+" exceeds format limit A1:IV16384");a.e.c=Math.min(a.e.c,255),a.e.r=Math.min(a.e.c,16383),i=xi(a)}for(var c=a.s.r;c<=a.e.r;++c){s=gi(c);for(var u=a.s.c;u<=a.e.c;++u){c===a.s.r&&(l[u]=vi(u)),i=l[u]+s;var d=o?(t[c]||[])[u]:t[i];d&&Cl(e,d,c,u)}}}(r,e.Sheets[e.SheetNames[i]],0,n),_l(r,10),r.end()}function Rl(e,t,n){_l(e,49,function(e,t){var n=e.name||"Arial",r=t&&5==t.biff,i=si(r?15+n.length:16+2*n.length);return i.write_shift(2,20*(e.sz||12)),i.write_shift(4,0),i.write_shift(2,400),i.write_shift(4,0),i.write_shift(2,0),i.write_shift(1,n.length),r||i.write_shift(1,1),i.write_shift((r?1:2)*n.length,n,r?"sbcs":"utf16le"),i}({sz:12,color:{theme:1},name:"Arial",family:2,scheme:"minor"},n))}function Nl(e,t){if(t){var n=0;t.forEach(function(t,r){++n<=256&&t&&_l(e,125,function(e,t){var n=si(12);n.write_shift(2,t),n.write_shift(2,t),n.write_shift(2,256*e.width),n.write_shift(2,0);var r=0;return e.hidden&&(r|=1),n.write_shift(1,r),r=e.level||0,n.write_shift(1,r),n.write_shift(2,0),n}(js(r,t),r))})}}function Ol(e,t,n,r,i){var o=16+Fs(i.cellXfs,t,i);if(null!=t.v||t.bf)if(t.bf)_l(e,6,Es(t,n,r,0,o));else switch(t.t){case"d":case"n":_l(e,515,function(e,t,n,r){var i=si(14);return Vo(e,t,r,i),Ji(n,i),i}(n,r,"d"==t.t?bn(kn(t.v)):t.v,o));break;case"b":case"e":_l(e,517,function(e,t,n,r,i,o){var a=si(8);return Vo(e,t,r,a),Po(n,o,a),a}(n,r,t.v,o,0,t.t));break;case"s":case"str":if(i.bookSST)_l(e,253,function(e,t,n,r){var i=si(10);return Vo(e,t,r,i),i.write_shift(4,n),i}(n,r,Ls(i.Strings,t.v,i.revStrings),o));else _l(e,516,function(e,t,n,r,i){var o=!i||8==i.biff,a=si(+o+8+(1+o)*n.length);return Vo(e,t,r,a),a.write_shift(2,n.length),o&&a.write_shift(1,1),a.write_shift((1+o)*n.length,n,o?"utf16le":"sbcs"),a}(n,r,(t.v||"").slice(0,255),o,i));break;default:_l(e,513,Vo(n,r,o))}else _l(e,513,Vo(n,r,o))}function Dl(e,t,n){var r,i=li(),o=n.SheetNames[e],a=n.Sheets[o]||{},s=(n||{}).Workbook||{},l=(s.Sheets||[])[e]||{},c=Array.isArray(a),u=8==t.biff,d="",h=[],f=Si(a["!ref"]||"A1"),p=u?65536:16384;if(f.e.c>255||f.e.r>=p){if(t.WTF)throw new Error("Range "+(a["!ref"]||"A1")+" exceeds format limit A1:IV16384");f.e.c=Math.min(f.e.c,255),f.e.r=Math.min(f.e.c,p-1)}_l(i,2057,Ko(0,16,t)),_l(i,13,Do(1)),_l(i,12,Do(100)),_l(i,15,No(!0)),_l(i,17,No(!1)),_l(i,16,Ji(.001)),_l(i,95,No(!0)),_l(i,42,No(!1)),_l(i,43,No(!1)),_l(i,130,Do(1)),_l(i,128,function(e){var t=si(8);return t.write_shift(4,0),t.write_shift(2,e[0]?e[0]+1:0),t.write_shift(2,e[1]?e[1]+1:0),t}([0,0])),_l(i,131,No(!1)),_l(i,132,No(!1)),u&&Nl(i,a["!cols"]),_l(i,512,function(e,t){var n=8!=t.biff&&t.biff?2:4,r=si(2*n+6);return r.write_shift(n,e.s.r),r.write_shift(n,e.e.r+1),r.write_shift(2,e.s.c),r.write_shift(2,e.e.c+1),r.write_shift(2,0),r}(f,t)),u&&(a["!links"]=[]);for(var g=f.s.r;g<=f.e.r;++g){d=gi(g);for(var m=f.s.c;m<=f.e.c;++m){g===f.s.r&&(h[m]=vi(m)),r=h[m]+d;var v=c?(a[g]||[])[m]:a[r];v&&(Ol(i,v,g,m,t),u&&v.l&&a["!links"].push([r,v.l]))}}var y=l.CodeName||l.name||o;return u&&_l(i,574,function(e){var t=si(18),n=1718;return e&&e.RTL&&(n|=64),t.write_shift(2,n),t.write_shift(4,0),t.write_shift(4,64),t.write_shift(4,0),t.write_shift(4,0),t}((s.Views||[])[0])),u&&(a["!merges"]||[]).length&&_l(i,229,function(e){var t=si(2+8*e.length);t.write_shift(2,e.length);for(var n=0;n<e.length;++n)qo(e[n],t);return t}(a["!merges"])),u&&function(e,t){for(var n=0;n<t["!links"].length;++n){var r=t["!links"][n];_l(e,440,Jo(r)),r[1].Tooltip&&_l(e,2048,Zo(r))}delete t["!links"]}(i,a),_l(i,442,zo(y)),u&&function(e,t){var n=si(19);n.write_shift(4,2151),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(2,3),n.write_shift(1,1),n.write_shift(4,0),_l(e,2151,n),(n=si(39)).write_shift(4,2152),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(2,3),n.write_shift(1,0),n.write_shift(4,0),n.write_shift(2,1),n.write_shift(4,4),n.write_shift(2,0),qo(Si(t["!ref"]||"A1"),n),n.write_shift(4,4),_l(e,2152,n)}(i,a),_l(i,10),i.end()}function Pl(e,t,n){var r=li(),i=(e||{}).Workbook||{},o=i.Sheets||[],a=i.WBProps||{},s=8==n.biff,l=5==n.biff;(_l(r,2057,Ko(0,5,n)),"xla"==n.bookType&&_l(r,135),_l(r,225,s?Do(1200):null),_l(r,193,function(e,t){t||(t=si(e));for(var n=0;n<e;++n)t.write_shift(1,0);return t}(2)),l&&_l(r,191),l&&_l(r,192),_l(r,226),_l(r,92,function(e,t){var n=!t||8==t.biff,r=si(n?112:54);for(r.write_shift(8==t.biff?2:1,7),n&&r.write_shift(1,0),r.write_shift(4,859007059),r.write_shift(4,5458548|(n?0:536870912));r.l<r.length;)r.write_shift(1,n?0:32);return r}(0,n)),_l(r,66,Do(s?1200:1252)),s&&_l(r,353,Do(0)),s&&_l(r,448),_l(r,317,function(e){for(var t=si(2*e),n=0;n<e;++n)t.write_shift(2,n+1);return t}(e.SheetNames.length)),s&&e.vbaraw&&_l(r,211),s&&e.vbaraw)&&_l(r,442,zo(a.CodeName||"ThisWorkbook"));_l(r,156,Do(17)),_l(r,25,No(!1)),_l(r,18,No(!1)),_l(r,19,Do(0)),s&&_l(r,431,No(!1)),s&&_l(r,444,Do(0)),_l(r,61,function(){var e=si(18);return e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,29280),e.write_shift(2,17600),e.write_shift(2,56),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,1),e.write_shift(2,500),e}()),_l(r,64,No(!1)),_l(r,141,Do(0)),_l(r,34,No("true"==function(e){return e.Workbook&&e.Workbook.WBProps&&Gn(e.Workbook.WBProps.date1904)?"true":"false"}(e))),_l(r,14,No(!0)),s&&_l(r,439,No(!1)),_l(r,218,Do(0)),Rl(r,0,n),function(e,t,n){t&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var i=r[0];i<=r[1];++i)null!=t[i]&&_l(e,1054,$o(i,t[i],n))})}(r,e.SSF,n),function(e,t){for(var n=0;n<16;++n)_l(e,224,Xo({numFmtId:0,style:!0},0,t));t.cellXfs.forEach(function(n){_l(e,224,Xo(n,0,t))})}(r,n),s&&_l(r,352,No(!1));var c,u=r.end(),d=li();s&&_l(d,140,(c||(c=si(4)),c.write_shift(2,1),c.write_shift(2,1),c)),s&&n.Strings&&function(e,t,n,r){var i=r||(n||[]).length||0;if(i<=8224)return _l(e,t,n,i);var o=t;if(!isNaN(o)){for(var a=n.parts||[],s=0,l=0,c=0;c+(a[s]||8224)<=8224;)c+=a[s]||8224,s++;var u=e.next(4);for(u.write_shift(2,o),u.write_shift(2,c),e.push(n.slice(l,l+c)),l+=c;l<i;){for((u=e.next(4)).write_shift(2,60),c=0;c+(a[s]||8224)<=8224;)c+=a[s]||8224,s++;u.write_shift(2,c),e.push(n.slice(l,l+c)),l+=c}}}(d,252,function(e){var t=si(8);t.write_shift(4,e.Count),t.write_shift(4,e.Unique);for(var n=[],r=0;r<e.length;++r)n[r]=jo(e[r]);var i=ft([t].concat(n));return i.parts=[t.length].concat(n.map(function(e){return e.length})),i}(n.Strings)),_l(d,10);var h=d.end(),f=li(),p=0,g=0;for(g=0;g<e.SheetNames.length;++g)p+=(s?12:11)+(s?2:1)*e.SheetNames[g].length;var m=u.length+p+h.length;for(g=0;g<e.SheetNames.length;++g){_l(f,133,Yo({pos:m,hs:(o[g]||{}).Hidden||0,dt:0,name:e.SheetNames[g]},n)),m+=t[g].length}var v=f.end();if(p!=v.length)throw new Error("BS8 "+p+" != "+v.length);var y=[];return u.length&&y.push(u),v.length&&y.push(v),h.length&&y.push(h),ft(y)}function Ll(e,t){for(var n=0;n<=e.SheetNames.length;++n){var r=e.Sheets[e.SheetNames[n]];if(r&&r["!ref"])wi(r["!ref"]).e.c>255&&"undefined"!=typeof console&&console.error&&console.error("Worksheet '"+e.SheetNames[n]+"' extends beyond column IV (255).  Data may be lost.")}var i=t||{};switch(i.biff||2){case 8:case 5:return function(e,t){var n=t||{},r=[];e&&!e.SSF&&(e.SSF=In(At)),e&&e.SSF&&(sn(),an(e.SSF),n.revssf=vn(e.SSF),n.revssf[e.SSF[65535]]=0,n.ssf=e.SSF),n.Strings=[],n.Strings.Count=0,n.Strings.Unique=0,dc(n),n.cellXfs=[],Fs(n.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});for(var i=0;i<e.SheetNames.length;++i)r[r.length]=Dl(i,n,e);return r.unshift(Pl(e,r,n)),ft(r)}(e,t);case 4:case 3:case 2:return Il(e,t)}throw new Error("invalid type "+i.bookType+" for BIFF")}function jl(e,t,n,r){for(var i=e["!merges"]||[],o=[],a=t.s.c;a<=t.e.c;++a){for(var s=0,l=0,c=0;c<i.length;++c)if(!(i[c].s.r>n||i[c].s.c>a)&&!(i[c].e.r<n||i[c].e.c<a)){if(i[c].s.r<n||i[c].s.c<a){s=-1;break}s=i[c].e.r-i[c].s.r+1,l=i[c].e.c-i[c].s.c+1;break}if(!(s<0)){var u=bi({r:n,c:a}),d=r.dense?(e[n]||[])[a]:e[u],h=d&&null!=d.v&&(d.h||Hn(d.w||(Ti(d),d.w)||""))||"",f={};s>1&&(f.rowspan=s),l>1&&(f.colspan=l),r.editable?h='<span contenteditable="true">'+h+"</span>":d&&(f["data-t"]=d&&d.t||"z",null!=d.v&&(f["data-v"]=d.v),null!=d.z&&(f["data-z"]=d.z),d.l&&"#"!=(d.l.Target||"#").charAt(0)&&(h='<a href="'+d.l.Target+'">'+h+"</a>")),f.id=(r.id||"sjs")+"-"+u,o.push(nr("td",h,f))}}return"<tr>"+o.join("")+"</tr>"}var Ml='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',Fl="</body></html>";function Ul(e,t,n){return[].join("")+"<table"+(n&&n.id?' id="'+n.id+'"':"")+">"}function zl(e,t){var n=t||{},r=null!=n.header?n.header:Ml,i=null!=n.footer?n.footer:Fl,o=[r],a=wi(e["!ref"]);n.dense=Array.isArray(e),o.push(Ul(0,0,n));for(var s=a.s.r;s<=a.e.r;++s)o.push(jl(e,a,s,n));return o.push("</table>"+i),o.join("")}function Bl(e,t,n){var r=n||{};var i=0,o=0;if(null!=r.origin)if("number"==typeof r.origin)i=r.origin;else{var a="string"==typeof r.origin?yi(r.origin):r.origin;i=a.r,o=a.c}var s=t.getElementsByTagName("tr"),l=Math.min(r.sheetRows||1e7,s.length),c={s:{r:0,c:0},e:{r:i,c:o}};if(e["!ref"]){var u=wi(e["!ref"]);c.s.r=Math.min(c.s.r,u.s.r),c.s.c=Math.min(c.s.c,u.s.c),c.e.r=Math.max(c.e.r,u.e.r),c.e.c=Math.max(c.e.c,u.e.c),-1==i&&(c.e.r=i=u.e.r+1)}var d=[],h=0,f=e["!rows"]||(e["!rows"]=[]),p=0,g=0,m=0,v=0,y=0,b=0;for(e["!cols"]||(e["!cols"]=[]);p<s.length&&g<l;++p){var w=s[p];if(Vl(w)){if(r.display)continue;f[g]={hidden:!0}}var x=w.children;for(m=v=0;m<x.length;++m){var S=x[m];if(!r.display||!Vl(S)){var E=S.hasAttribute("data-v")?S.getAttribute("data-v"):S.hasAttribute("v")?S.getAttribute("v"):Jn(S.innerHTML),T=S.getAttribute("data-z")||S.getAttribute("z");for(h=0;h<d.length;++h){var A=d[h];A.s.c==v+o&&A.s.r<g+i&&g+i<=A.e.r&&(v=A.e.c+1-o,h=-1)}b=+S.getAttribute("colspan")||1,((y=+S.getAttribute("rowspan")||1)>1||b>1)&&d.push({s:{r:g+i,c:v+o},e:{r:g+i+(y||1)-1,c:v+o+(b||1)-1}});var _={t:"s",v:E},k=S.getAttribute("data-t")||S.getAttribute("t")||"";null!=E&&(0==E.length?_.t=k||"z":r.raw||0==E.trim().length||"s"==k||("TRUE"===E?_={t:"b",v:!0}:"FALSE"===E?_={t:"b",v:!1}:isNaN(Nn(E))?isNaN(Dn(E).getDate())||(_={t:"d",v:kn(E)},r.cellDates||(_={t:"n",v:bn(_.v)}),_.z=r.dateNF||At[14]):_={t:"n",v:Nn(E)})),void 0===_.z&&null!=T&&(_.z=T);var C="",I=S.getElementsByTagName("A");if(I&&I.length)for(var R=0;R<I.length&&(!I[R].hasAttribute("href")||"#"==(C=I[R].getAttribute("href")).charAt(0));++R);C&&"#"!=C.charAt(0)&&(_.l={Target:C}),r.dense?(e[g+i]||(e[g+i]=[]),e[g+i][v+o]=_):e[bi({c:v+o,r:g+i})]=_,c.e.c<v+o&&(c.e.c=v+o),v+=b}}++g}return d.length&&(e["!merges"]=(e["!merges"]||[]).concat(d)),c.e.r=Math.max(c.e.r,g-1+i),e["!ref"]=xi(c),g>=l&&(e["!fullref"]=xi((c.e.r=s.length-p+g-1+i,c))),e}function Wl(e,t){return Bl((t||{}).dense?[]:{},e,t)}function Vl(e){var t="",n=function(e){return e.ownerDocument.defaultView&&"function"===typeof e.ownerDocument.defaultView.getComputedStyle?e.ownerDocument.defaultView.getComputedStyle:"function"===typeof getComputedStyle?getComputedStyle:null}(e);return n&&(t=n(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),"none"===t}var Hl=function(){var e=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),t="<office:document-styles "+tr({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+e+"</office:document-styles>";return function(){return jn+t}}(),Gl=function(){var e=function(e){return Bn(e).replace(/  +/g,function(e){return'<text:s text:c="'+e.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},t="          <table:table-cell />\n",n=function(n,r,i){var o=[];o.push('      <table:table table:name="'+Bn(r.SheetNames[i])+'" table:style-name="ta1">\n');var a=0,s=0,l=wi(n["!ref"]||"A1"),c=n["!merges"]||[],u=0,d=Array.isArray(n);if(n["!cols"])for(s=0;s<=l.e.c;++s)o.push("        <table:table-column"+(n["!cols"][s]?' table:style-name="co'+n["!cols"][s].ods+'"':"")+"></table:table-column>\n");var h="",f=n["!rows"]||[];for(a=0;a<l.s.r;++a)h=f[a]?' table:style-name="ro'+f[a].ods+'"':"",o.push("        <table:table-row"+h+"></table:table-row>\n");for(;a<=l.e.r;++a){for(h=f[a]?' table:style-name="ro'+f[a].ods+'"':"",o.push("        <table:table-row"+h+">\n"),s=0;s<l.s.c;++s)o.push(t);for(;s<=l.e.c;++s){var p=!1,g={},m="";for(u=0;u!=c.length;++u)if(!(c[u].s.c>s)&&!(c[u].s.r>a)&&!(c[u].e.c<s)&&!(c[u].e.r<a)){c[u].s.c==s&&c[u].s.r==a||(p=!0),g["table:number-columns-spanned"]=c[u].e.c-c[u].s.c+1,g["table:number-rows-spanned"]=c[u].e.r-c[u].s.r+1;break}if(p)o.push("          <table:covered-table-cell/>\n");else{var v=bi({r:a,c:s}),y=d?(n[a]||[])[s]:n[v];if(y&&y.f&&(g["table:formula"]=Bn(Os(y.f)),y.F&&y.F.slice(0,v.length)==v)){var b=wi(y.F);g["table:number-matrix-columns-spanned"]=b.e.c-b.s.c+1,g["table:number-matrix-rows-spanned"]=b.e.r-b.s.r+1}if(y){switch(y.t){case"b":m=y.v?"TRUE":"FALSE",g["office:value-type"]="boolean",g["office:boolean-value"]=y.v?"true":"false";break;case"n":m=y.w||String(y.v||0),g["office:value-type"]="float",g["office:value"]=y.v||0;break;case"s":case"str":m=null==y.v?"":y.v,g["office:value-type"]="string";break;case"d":m=y.w||kn(y.v).toISOString(),g["office:value-type"]="date",g["office:date-value"]=kn(y.v).toISOString(),g["table:style-name"]="ce1";break;default:o.push(t);continue}var w=e(m);if(y.l&&y.l.Target){var x=y.l.Target;"#"==(x="#"==x.charAt(0)?"#"+Ds(x.slice(1)):x).charAt(0)||x.match(/^\w+:/)||(x="../"+x),w=nr("text:a",w,{"xlink:href":x.replace(/&/g,"&amp;")})}o.push("          "+nr("table:table-cell",nr("text:p",w,{}),g)+"\n")}else o.push(t)}}o.push("        </table:table-row>\n")}return o.push("      </table:table>\n"),o.join("")};return function(e,t){var r=[jn],i=tr({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),o=tr({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});"fods"==t.bookType?(r.push("<office:document"+i+o+">\n"),r.push(mo().replace(/office:document-meta/g,"office:meta"))):r.push("<office:document-content"+i+">\n"),function(e,t){e.push(" <office:automatic-styles>\n"),e.push('  <number:date-style style:name="N37" number:automatic-order="true">\n'),e.push('   <number:month number:style="long"/>\n'),e.push("   <number:text>/</number:text>\n"),e.push('   <number:day number:style="long"/>\n'),e.push("   <number:text>/</number:text>\n"),e.push("   <number:year/>\n"),e.push("  </number:date-style>\n");var n=0;t.SheetNames.map(function(e){return t.Sheets[e]}).forEach(function(t){if(t&&t["!cols"])for(var r=0;r<t["!cols"].length;++r)if(t["!cols"][r]){var i=t["!cols"][r];if(null==i.width&&null==i.wpx&&null==i.wch)continue;ba(i),i.ods=n;var o=t["!cols"][r].wpx+"px";e.push('  <style:style style:name="co'+n+'" style:family="table-column">\n'),e.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+o+'"/>\n'),e.push("  </style:style>\n"),++n}});var r=0;t.SheetNames.map(function(e){return t.Sheets[e]}).forEach(function(t){if(t&&t["!rows"])for(var n=0;n<t["!rows"].length;++n)if(t["!rows"][n]){t["!rows"][n].ods=r;var i=t["!rows"][n].hpx+"px";e.push('  <style:style style:name="ro'+r+'" style:family="table-row">\n'),e.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+i+'"/>\n'),e.push("  </style:style>\n"),++r}}),e.push('  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">\n'),e.push('   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>\n'),e.push("  </style:style>\n"),e.push('  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>\n'),e.push(" </office:automatic-styles>\n")}(r,e),r.push("  <office:body>\n"),r.push("    <office:spreadsheet>\n");for(var a=0;a!=e.SheetNames.length;++a)r.push(n(e.Sheets[e.SheetNames[a]],e,a));return r.push("    </office:spreadsheet>\n"),r.push("  </office:body>\n"),"fods"==t.bookType?r.push("</office:document>"):r.push("</office:document-content>"),r.join("")}}();function ql(e,t){if("fods"==t.bookType)return Gl(e,t);var n=Ln(),r="",i=[],o=[];return Pn(n,r="mimetype","application/vnd.oasis.opendocument.spreadsheet"),Pn(n,r="content.xml",Gl(e,t)),i.push([r,"text/xml"]),o.push([r,"ContentFile"]),Pn(n,r="styles.xml",Hl(e,t)),i.push([r,"text/xml"]),o.push([r,"StylesFile"]),Pn(n,r="meta.xml",jn+mo()),i.push([r,"text/xml"]),o.push([r,"MetadataFile"]),Pn(n,r="manifest.rdf",function(e){var t=[jn];t.push('<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">\n');for(var n=0;n!=e.length;++n)t.push(po(e[n][0],e[n][1])),t.push(go("",e[n][0]));return t.push(po("","Document","pkg")),t.push("</rdf:RDF>"),t.join("")}(o)),i.push([r,"application/rdf+xml"]),Pn(n,r="META-INF/manifest.xml",function(e){var t=[jn];t.push('<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">\n'),t.push('  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>\n');for(var n=0;n<e.length;++n)t.push('  <manifest:file-entry manifest:full-path="'+e[n][0]+'" manifest:media-type="'+e[n][1]+'"/>\n');return t.push("</manifest:manifest>"),t.join("")}(i)),n}function Kl(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function Yl(e){return"undefined"!=typeof TextEncoder?(new TextEncoder).encode(e):ut(Qn(e))}function $l(e){var t=e.reduce(function(e,t){return e+t.length},0),n=new Uint8Array(t),r=0;return e.forEach(function(e){n.set(e,r),r+=e.length}),n}function Xl(e,t){var n=t?t[0]:0,r=127&e[n];e:if(e[n++]>=128){if(r|=(127&e[n])<<7,e[n++]<128)break e;if(r|=(127&e[n])<<14,e[n++]<128)break e;if(r|=(127&e[n])<<21,e[n++]<128)break e;if(r+=(127&e[n])*Math.pow(2,28),++n,e[n++]<128)break e;if(r+=(127&e[n])*Math.pow(2,35),++n,e[n++]<128)break e;if(r+=(127&e[n])*Math.pow(2,42),++n,e[n++]<128)break e}return t&&(t[0]=n),r}function Ql(e){var t=new Uint8Array(7);t[0]=127&e;var n=1;e:if(e>127){if(t[n-1]|=128,t[n]=e>>7&127,++n,e<=16383)break e;if(t[n-1]|=128,t[n]=e>>14&127,++n,e<=2097151)break e;if(t[n-1]|=128,t[n]=e>>21&127,++n,e<=268435455)break e;if(t[n-1]|=128,t[n]=e/256>>>21&127,++n,e<=34359738367)break e;if(t[n-1]|=128,t[n]=e/65536>>>21&127,++n,e<=4398046511103)break e;t[n-1]|=128,t[n]=e/16777216>>>21&127,++n}return t.slice(0,n)}function Jl(e){var t=0,n=127&e[t];e:if(e[t++]>=128){if(n|=(127&e[t])<<7,e[t++]<128)break e;if(n|=(127&e[t])<<14,e[t++]<128)break e;if(n|=(127&e[t])<<21,e[t++]<128)break e;n|=(127&e[t])<<28}return n}function Zl(e){for(var t=[],n=[0];n[0]<e.length;){var r,i=n[0],o=Xl(e,n),a=7&o,s=0;if(0==(o=Math.floor(o/8)))break;switch(a){case 0:for(var l=n[0];e[n[0]++]>=128;);r=e.slice(l,n[0]);break;case 5:s=4,r=e.slice(n[0],n[0]+s),n[0]+=s;break;case 1:s=8,r=e.slice(n[0],n[0]+s),n[0]+=s;break;case 2:s=Xl(e,n),r=e.slice(n[0],n[0]+s),n[0]+=s;break;default:throw new Error("PB Type ".concat(a," for Field ").concat(o," at offset ").concat(i))}var c={data:r,type:a};null==t[o]?t[o]=[c]:t[o].push(c)}return t}function ec(e){var t=[];return e.forEach(function(e,n){e.forEach(function(e){e.data&&(t.push(Ql(8*n+e.type)),2==e.type&&t.push(Ql(e.data.length)),t.push(e.data))})}),$l(t)}function tc(e){for(var t,n=[],r=[0];r[0]<e.length;){var i=Xl(e,r),o=Zl(e.slice(r[0],r[0]+i));r[0]+=i;var a={id:Jl(o[1][0].data),messages:[]};o[2].forEach(function(t){var n=Zl(t.data),i=Jl(n[3][0].data);a.messages.push({meta:n,data:e.slice(r[0],r[0]+i)}),r[0]+=i}),(null==(t=o[3])?void 0:t[0])&&(a.merge=Jl(o[3][0].data)>>>0>0),n.push(a)}return n}function nc(e){var t=[];return e.forEach(function(e){var n=[];n[1]=[{data:Ql(e.id),type:0}],n[2]=[],null!=e.merge&&(n[3]=[{data:Ql(+!!e.merge),type:0}]);var r=[];e.messages.forEach(function(e){r.push(e.data),e.meta[3]=[{type:0,data:Ql(e.data.length)}],n[2].push({data:ec(e.meta),type:2})});var i=ec(n);t.push(Ql(i.length)),t.push(i),r.forEach(function(e){return t.push(e)})}),$l(t)}function rc(e,t){if(0!=e)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var n=[0],r=Xl(t,n),i=[];n[0]<t.length;){var o=3&t[n[0]];if(0!=o){var a=0,s=0;if(1==o?(s=4+(t[n[0]]>>2&7),a=(224&t[n[0]++])<<3,a|=t[n[0]++]):(s=1+(t[n[0]++]>>2),2==o?(a=t[n[0]]|t[n[0]+1]<<8,n[0]+=2):(a=(t[n[0]]|t[n[0]+1]<<8|t[n[0]+2]<<16|t[n[0]+3]<<24)>>>0,n[0]+=4)),i=[$l(i)],0==a)throw new Error("Invalid offset 0");if(a>i[0].length)throw new Error("Invalid offset beyond length");if(s>=a)for(i.push(i[0].slice(-a)),s-=a;s>=i[i.length-1].length;)i.push(i[i.length-1]),s-=i[i.length-1].length;i.push(i[0].slice(-a,-a+s))}else{var l=t[n[0]++]>>2;if(l<60)++l;else{var c=l-59;l=t[n[0]],c>1&&(l|=t[n[0]+1]<<8),c>2&&(l|=t[n[0]+2]<<16),c>3&&(l|=t[n[0]+3]<<24),l>>>=0,l++,n[0]+=c}i.push(t.slice(n[0],n[0]+l)),n[0]+=l}}var u=$l(i);if(u.length!=r)throw new Error("Unexpected length: ".concat(u.length," != ").concat(r));return u}function ic(e){for(var t=[],n=0;n<e.length;){var r=e[n++],i=e[n]|e[n+1]<<8|e[n+2]<<16;n+=3,t.push(rc(r,e.slice(n,n+i))),n+=i}if(n!==e.length)throw new Error("data is not a valid framed stream!");return $l(t)}function oc(e){for(var t=[],n=0;n<e.length;){var r=Math.min(e.length-n,268435455),i=new Uint8Array(4);t.push(i);var o=Ql(r),a=o.length;t.push(o),r<=60?(a++,t.push(new Uint8Array([r-1<<2]))):r<=256?(a+=2,t.push(new Uint8Array([240,r-1&255]))):r<=65536?(a+=3,t.push(new Uint8Array([244,r-1&255,r-1>>8&255]))):r<=16777216?(a+=4,t.push(new Uint8Array([248,r-1&255,r-1>>8&255,r-1>>16&255]))):r<=4294967296&&(a+=5,t.push(new Uint8Array([252,r-1&255,r-1>>8&255,r-1>>16&255,r-1>>>24&255]))),t.push(e.slice(n,n+r)),a+=r,i[0]=0,i[1]=255&a,i[2]=a>>8&255,i[3]=a>>16&255,n+=r}return $l(t)}function ac(e,t){var n=new Uint8Array(32),r=Kl(n),i=12,o=0;switch(n[0]=5,e.t){case"n":n[1]=2,function(e,t,n){var r=Math.floor(0==n?0:Math.LOG10E*Math.log(Math.abs(n)))+6176-20,i=n/Math.pow(10,r-6176);e[t+15]|=r>>7,e[t+14]|=(127&r)<<1;for(var o=0;i>=1;++o,i/=256)e[t+o]=255&i;e[t+15]|=n>=0?0:128}(n,i,e.v),o|=1,i+=16;break;case"b":n[1]=6,r.setFloat64(i,e.v?1:0,!0),o|=2,i+=8;break;case"s":if(-1==t.indexOf(e.v))throw new Error("Value ".concat(e.v," missing from SST!"));n[1]=3,r.setUint32(i,t.indexOf(e.v),!0),o|=8,i+=4;break;default:throw"unsupported cell type "+e.t}return r.setUint32(8,o,!0),n.slice(0,i)}function sc(e,t){var n=new Uint8Array(32),r=Kl(n),i=12,o=0;switch(n[0]=3,e.t){case"n":n[2]=2,r.setFloat64(i,e.v,!0),o|=32,i+=8;break;case"b":n[2]=6,r.setFloat64(i,e.v?1:0,!0),o|=32,i+=8;break;case"s":if(-1==t.indexOf(e.v))throw new Error("Value ".concat(e.v," missing from SST!"));n[2]=3,r.setUint32(i,t.indexOf(e.v),!0),o|=16,i+=4;break;default:throw"unsupported cell type "+e.t}return r.setUint32(4,o,!0),n.slice(0,i)}function lc(e){return Xl(Zl(e)[1][0].data)}function cc(e,t,n){var r,i,o,a;if(!(null==(r=e[6])?void 0:r[0])||!(null==(i=e[7])?void 0:i[0]))throw"Mutation only works on post-BNC storages!";if((null==(a=null==(o=e[8])?void 0:o[0])?void 0:a.data)&&Jl(e[8][0].data)>0||!1)throw"Math only works with normal offsets";for(var s=0,l=Kl(e[7][0].data),c=0,u=[],d=Kl(e[4][0].data),h=0,f=[],p=0;p<t.length;++p)if(null!=t[p]){var g,m;switch(l.setUint16(2*p,c,!0),d.setUint16(2*p,h,!0),typeof t[p]){case"string":g=ac({t:"s",v:t[p]},n),m=sc({t:"s",v:t[p]},n);break;case"number":g=ac({t:"n",v:t[p]},n),m=sc({t:"n",v:t[p]},n);break;case"boolean":g=ac({t:"b",v:t[p]},n),m=sc({t:"b",v:t[p]},n);break;default:throw new Error("Unsupported value "+t[p])}u.push(g),c+=g.length,f.push(m),h+=m.length,++s}else l.setUint16(2*p,65535,!0),d.setUint16(2*p,65535);for(e[2][0].data=Ql(s);p<e[7][0].data.length/2;++p)l.setUint16(2*p,65535,!0),d.setUint16(2*p,65535,!0);return e[6][0].data=$l(u),e[3][0].data=$l(f),s}function uc(e){return function(t){for(var n=0;n!=e.length;++n){var r=e[n];void 0===t[r[0]]&&(t[r[0]]=r[1]),"n"===r[2]&&(t[r[0]]=Number(t[r[0]]))}}}function dc(e){uc([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(e)}function hc(e,t){return"ods"==t.bookType?ql(e,t):"numbers"==t.bookType?function(e,t){if(!t||!t.numbers)throw new Error("Must pass a `numbers` option -- check the README");var n=e.Sheets[e.SheetNames[0]];e.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var r=wi(n["!ref"]);r.s.r=r.s.c=0;var i=!1;r.e.c>9&&(i=!0,r.e.c=9),r.e.r>49&&(i=!0,r.e.r=49),i&&console.error("The Numbers writer is currently limited to ".concat(xi(r)));var o=xc(n,{range:r,header:1}),a=["~Sh33tJ5~"];o.forEach(function(e){return e.forEach(function(e){"string"==typeof e&&a.push(e)})});var s={},l=[],c=un.read(t.numbers,{type:"base64"});c.FileIndex.map(function(e,t){return[e,c.FullPaths[t]]}).forEach(function(e){var t=e[0],n=e[1];2==t.type&&t.name.match(/\.iwa/)&&tc(ic(t.content)).forEach(function(e){l.push(e.id),s[e.id]={deps:[],location:n,type:Jl(e.messages[0].meta[1][0].data)}})}),l.sort(function(e,t){return e-t});var u=l.filter(function(e){return e>1}).map(function(e){return[e,Ql(e)]});c.FileIndex.map(function(e,t){return[e,c.FullPaths[t]]}).forEach(function(e){var t=e[0];e[1],t.name.match(/\.iwa/)&&tc(ic(t.content)).forEach(function(e){e.messages.forEach(function(t){u.forEach(function(t){e.messages.some(function(e){return 11006!=Jl(e.meta[1][0].data)&&function(e,t){e:for(var n=0;n<=e.length-t.length;++n){for(var r=0;r<t.length;++r)if(e[n+r]!=t[r])continue e;return!0}return!1}(e.data,t[1])})&&s[t[0]].deps.push(e.id)})})})});for(var d,h=un.find(c,s[1].location),f=tc(ic(h.content)),p=0;p<f.length;++p){var g=f[p];1==g.id&&(d=g)}var m=lc(Zl(d.messages[0].data)[1][0].data);for(f=tc(ic((h=un.find(c,s[m].location)).content)),p=0;p<f.length;++p)(g=f[p]).id==m&&(d=g);for(m=lc(Zl(d.messages[0].data)[2][0].data),f=tc(ic((h=un.find(c,s[m].location)).content)),p=0;p<f.length;++p)(g=f[p]).id==m&&(d=g);for(m=lc(Zl(d.messages[0].data)[2][0].data),f=tc(ic((h=un.find(c,s[m].location)).content)),p=0;p<f.length;++p)(g=f[p]).id==m&&(d=g);var v=Zl(d.messages[0].data);v[6][0].data=Ql(r.e.r+1),v[7][0].data=Ql(r.e.c+1);for(var y=lc(v[46][0].data),b=un.find(c,s[y].location),w=tc(ic(b.content)),x=0;x<w.length&&w[x].id!=y;++x);if(w[x].id!=y)throw"Bad ColumnRowUIDMapArchive";var S=Zl(w[x].messages[0].data);S[1]=[],S[2]=[],S[3]=[];for(var E=0;E<=r.e.c;++E){var T=[];T[1]=T[2]=[{type:0,data:Ql(E+420690)}],S[1].push({type:2,data:ec(T)}),S[2].push({type:0,data:Ql(E)}),S[3].push({type:0,data:Ql(E)})}S[4]=[],S[5]=[],S[6]=[];for(var A=0;A<=r.e.r;++A)(T=[])[1]=T[2]=[{type:0,data:Ql(A+726270)}],S[4].push({type:2,data:ec(T)}),S[5].push({type:0,data:Ql(A)}),S[6].push({type:0,data:Ql(A)});w[x].messages[0].data=ec(S),b.content=oc(nc(w)),b.size=b.content.length,delete v[46];var _=Zl(v[4][0].data);_[7][0].data=Ql(r.e.r+1);var k=lc(Zl(_[1][0].data)[2][0].data);if((w=tc(ic((b=un.find(c,s[k].location)).content)))[0].id!=k)throw"Bad HeaderStorageBucket";var C=Zl(w[0].messages[0].data);for(A=0;A<o.length;++A){var I=Zl(C[2][0].data);I[1][0].data=Ql(A),I[4][0].data=Ql(o[A].length),C[2][A]={type:C[2][0].type,data:ec(I)}}w[0].messages[0].data=ec(C),b.content=oc(nc(w)),b.size=b.content.length;var R=lc(_[2][0].data);if((w=tc(ic((b=un.find(c,s[R].location)).content)))[0].id!=R)throw"Bad HeaderStorageBucket";for(C=Zl(w[0].messages[0].data),E=0;E<=r.e.c;++E)(I=Zl(C[2][0].data))[1][0].data=Ql(E),I[4][0].data=Ql(r.e.r+1),C[2][E]={type:C[2][0].type,data:ec(I)};w[0].messages[0].data=ec(C),b.content=oc(nc(w)),b.size=b.content.length;var N=lc(_[4][0].data);!function(){for(var e,t=un.find(c,s[N].location),n=tc(ic(t.content)),r=0;r<n.length;++r){var i=n[r];i.id==N&&(e=i)}var o=Zl(e.messages[0].data);o[3]=[];var l=[];a.forEach(function(e,t){l[1]=[{type:0,data:Ql(t)}],l[2]=[{type:0,data:Ql(1)}],l[3]=[{type:2,data:Yl(e)}],o[3].push({type:2,data:ec(l)})}),e.messages[0].data=ec(o);var u=oc(nc(n));t.content=u,t.size=t.content.length}();var O=Zl(_[3][0].data),D=O[1][0];delete O[2];var P=Zl(D.data),L=lc(P[2][0].data);!function(){for(var e,t=un.find(c,s[L].location),n=tc(ic(t.content)),i=0;i<n.length;++i){var l=n[i];l.id==L&&(e=l)}var u=Zl(e.messages[0].data);delete u[6],delete O[7];var d=new Uint8Array(u[5][0].data);u[5]=[];for(var h=0,f=0;f<=r.e.r;++f){var p=Zl(d);h+=cc(p,o[f],a),p[1][0].data=Ql(f),u[5].push({data:ec(p),type:2})}u[1]=[{type:0,data:Ql(r.e.c+1)}],u[2]=[{type:0,data:Ql(r.e.r+1)}],u[3]=[{type:0,data:Ql(h)}],u[4]=[{type:0,data:Ql(r.e.r+1)}],e.messages[0].data=ec(u);var g=oc(nc(n));t.content=g,t.size=t.content.length}(),D.data=ec(P),_[3][0].data=ec(O),v[4][0].data=ec(_),d.messages[0].data=ec(v);var j=oc(nc(f));return h.content=j,h.size=h.content.length,c}(e,t):"xlsb"==t.bookType?function(e,t){za=1024,e&&!e.SSF&&(e.SSF=In(At));e&&e.SSF&&(sn(),an(e.SSF),t.revssf=vn(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF);t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,Ps?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var n="xlsb"==t.bookType?"bin":"xml",r=qa.indexOf(t.bookType)>-1,i={workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""};dc(t=t||{});var o=Ln(),a="",s=0;t.cellXfs=[],Fs(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});if(Pn(o,a="docProps/core.xml",bo(e.Props,t)),i.coreprops.push(a),fo(t.rels,2,a,co.CORE_PROPS),a="docProps/app.xml",e.Props&&e.Props.SheetNames);else if(e.Workbook&&e.Workbook.Sheets){for(var l=[],c=0;c<e.SheetNames.length;++c)2!=(e.Workbook.Sheets[c]||{}).Hidden&&l.push(e.SheetNames[c]);e.Props.SheetNames=l}else e.Props.SheetNames=e.SheetNames;e.Props.Worksheets=e.Props.SheetNames.length,Pn(o,a,So(e.Props)),i.extprops.push(a),fo(t.rels,3,a,co.EXT_PROPS),e.Custprops!==e.Props&&pn(e.Custprops||{}).length>0&&(Pn(o,a="docProps/custom.xml",Eo(e.Custprops)),i.custprops.push(a),fo(t.rels,4,a,co.CUST_PROPS));for(s=1;s<=e.SheetNames.length;++s){var u={"!id":{}},d=e.Sheets[e.SheetNames[s-1]];(d||{})["!type"];if(Pn(o,a="xl/worksheets/sheet"+s+"."+n,fl(s-1,a,t,e,u)),i.sheets.push(a),fo(t.wbrels,-1,"worksheets/sheet"+s+"."+n,co.WS[0]),d){var h=d["!comments"],f=!1,p="";h&&h.length>0&&(Pn(o,p="xl/comments"+s+"."+n,pl(h,p,t)),i.comments.push(p),fo(u,-1,"../comments"+s+"."+n,co.CMNT),f=!0),d["!legacy"]&&f&&Pn(o,"xl/drawings/vmlDrawing"+s+".vml",Ba(s,d["!comments"])),delete d["!comments"],delete d["!legacy"]}u["!id"].rId1&&Pn(o,uo(a),ho(u))}null!=t.Strings&&t.Strings.length>0&&(Pn(o,a="xl/sharedStrings."+n,function(e,t,n){return(".bin"===t.slice(-4)?ua:la)(e,n)}(t.Strings,a,t)),i.strs.push(a),fo(t.wbrels,-1,"sharedStrings."+n,co.SST));Pn(o,a="xl/workbook."+n,function(e,t,n){return(".bin"===t.slice(-4)?hl:cl)(e,n)}(e,a,t)),i.workbooks.push(a),fo(t.rels,1,a,co.WB),Pn(o,a="xl/theme/theme1.xml",Ma(e.Themes,t)),i.themes.push(a),fo(t.wbrels,-1,"theme/theme1.xml",co.THEME),Pn(o,a="xl/styles."+n,function(e,t,n){return(".bin"===t.slice(-4)?ja:Ea)(e,n)}(e,a,t)),i.styles.push(a),fo(t.wbrels,-1,"styles."+n,co.STY),e.vbaraw&&r&&(Pn(o,a="xl/vbaProject.bin",e.vbaraw),i.vba.push(a),fo(t.wbrels,-1,"vbaProject.bin",co.VBA));return Pn(o,a="xl/metadata."+n,function(e){return(".bin"===e.slice(-4)?Fa:Ua)()}(a)),i.metadata.push(a),fo(t.wbrels,-1,"metadata."+n,co.XLMETA),Pn(o,"[Content_Types].xml",lo(i,t)),Pn(o,"_rels/.rels",ho(t.rels)),Pn(o,"xl/_rels/workbook."+n+".rels",ho(t.wbrels)),delete t.revssf,delete t.ssf,o}(e,t):fc(e,t)}function fc(e,t){za=1024,e&&!e.SSF&&(e.SSF=In(At)),e&&e.SSF&&(sn(),an(e.SSF),t.revssf=vn(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,Ps?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var n="xml",r=qa.indexOf(t.bookType)>-1,i={workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""};dc(t=t||{});var o=Ln(),a="",s=0;if(t.cellXfs=[],Fs(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),Pn(o,a="docProps/core.xml",bo(e.Props,t)),i.coreprops.push(a),fo(t.rels,2,a,co.CORE_PROPS),a="docProps/app.xml",e.Props&&e.Props.SheetNames);else if(e.Workbook&&e.Workbook.Sheets){for(var l=[],c=0;c<e.SheetNames.length;++c)2!=(e.Workbook.Sheets[c]||{}).Hidden&&l.push(e.SheetNames[c]);e.Props.SheetNames=l}else e.Props.SheetNames=e.SheetNames;e.Props.Worksheets=e.Props.SheetNames.length,Pn(o,a,So(e.Props)),i.extprops.push(a),fo(t.rels,3,a,co.EXT_PROPS),e.Custprops!==e.Props&&pn(e.Custprops||{}).length>0&&(Pn(o,a="docProps/custom.xml",Eo(e.Custprops)),i.custprops.push(a),fo(t.rels,4,a,co.CUST_PROPS));var u=["SheetJ5"];for(t.tcid=0,s=1;s<=e.SheetNames.length;++s){var d={"!id":{}},h=e.Sheets[e.SheetNames[s-1]];(h||{})["!type"];if(Pn(o,a="xl/worksheets/sheet"+s+"."+n,Vs(s-1,t,e,d)),i.sheets.push(a),fo(t.wbrels,-1,"worksheets/sheet"+s+"."+n,co.WS[0]),h){var f=h["!comments"],p=!1,g="";if(f&&f.length>0){var m=!1;f.forEach(function(e){e[1].forEach(function(e){1==e.T&&(m=!0)})}),m&&(Pn(o,g="xl/threadedComments/threadedComment"+s+"."+n,Va(f,u,t)),i.threadedcomments.push(g),fo(d,-1,"../threadedComments/threadedComment"+s+"."+n,co.TCMNT)),Pn(o,g="xl/comments"+s+"."+n,Wa(f)),i.comments.push(g),fo(d,-1,"../comments"+s+"."+n,co.CMNT),p=!0}h["!legacy"]&&p&&Pn(o,"xl/drawings/vmlDrawing"+s+".vml",Ba(s,h["!comments"])),delete h["!comments"],delete h["!legacy"]}d["!id"].rId1&&Pn(o,uo(a),ho(d))}return null!=t.Strings&&t.Strings.length>0&&(Pn(o,a="xl/sharedStrings."+n,la(t.Strings,t)),i.strs.push(a),fo(t.wbrels,-1,"sharedStrings."+n,co.SST)),Pn(o,a="xl/workbook."+n,cl(e)),i.workbooks.push(a),fo(t.rels,1,a,co.WB),Pn(o,a="xl/theme/theme1.xml",Ma(e.Themes,t)),i.themes.push(a),fo(t.wbrels,-1,"theme/theme1.xml",co.THEME),Pn(o,a="xl/styles."+n,Ea(e,t)),i.styles.push(a),fo(t.wbrels,-1,"styles."+n,co.STY),e.vbaraw&&r&&(Pn(o,a="xl/vbaProject.bin",e.vbaraw),i.vba.push(a),fo(t.wbrels,-1,"vbaProject.bin",co.VBA)),Pn(o,a="xl/metadata."+n,Ua()),i.metadata.push(a),fo(t.wbrels,-1,"metadata."+n,co.XLMETA),u.length>1&&(Pn(o,a="xl/persons/person.xml",function(e){var t=[jn,nr("personList",null,{xmlns:cr,"xmlns:x":vr[0]}).replace(/[\/]>/,">")];return e.forEach(function(e,n){t.push(nr("person",null,{displayName:e,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:e,providerId:"None"}))}),t.push("</personList>"),t.join("")}(u)),i.people.push(a),fo(t.wbrels,-1,"persons/person.xml",co.PEOPLE)),Pn(o,"[Content_Types].xml",lo(i,t)),Pn(o,"_rels/.rels",ho(t.rels)),Pn(o,"xl/_rels/workbook.xml.rels",ho(t.wbrels)),delete t.revssf,delete t.ssf,o}function pc(e,t){var n="";switch((t||{}).type||"base64"){case"buffer":case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":n=ot(e.slice(0,12));break;case"binary":n=e;break;default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[n.charCodeAt(0),n.charCodeAt(1),n.charCodeAt(2),n.charCodeAt(3),n.charCodeAt(4),n.charCodeAt(5),n.charCodeAt(6),n.charCodeAt(7)]}function gc(e,t){switch(t.type){case"base64":case"binary":break;case"buffer":case"array":t.type="";break;case"file":return fn(t.file,un.write(e,{type:at?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");default:throw new Error("Unrecognized type "+t.type)}return un.write(e,t)}function mc(e,t){var n={},r=at?"nodebuffer":"undefined"!==typeof Uint8Array?"array":"string";if(t.compression&&(n.compression="DEFLATE"),t.password)n.type=r;else switch(t.type){case"base64":n.type="base64";break;case"binary":n.type="string";break;case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");case"buffer":case"file":n.type=r;break;default:throw new Error("Unrecognized type "+t.type)}var i=e.FullPaths?un.write(e,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[n.type]||n.type,compression:!!t.compression}):e.generate(n);if("undefined"!==typeof Deno&&"string"==typeof i){if("binary"==t.type||"base64"==t.type)return i;i=new Uint8Array(dt(i))}return t.password&&"undefined"!==typeof encrypt_agile?gc(encrypt_agile(i,t.password),t):"file"===t.type?fn(t.file,i):"string"==t.type?Xn(i):i}function vc(e,t,n){n||(n="");var r=n+e;switch(t.type){case"base64":return it(Qn(r));case"binary":return Qn(r);case"string":return e;case"file":return fn(t.file,r,"utf8");case"buffer":return at?st(r,"utf8"):"undefined"!==typeof TextEncoder?(new TextEncoder).encode(r):vc(r,{type:"binary"}).split("").map(function(e){return e.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function yc(e,t){switch(t.type){case"string":case"base64":case"binary":for(var n="",r=0;r<e.length;++r)n+=String.fromCharCode(e[r]);return"base64"==t.type?it(n):"string"==t.type?Xn(n):n;case"file":return fn(t.file,e);case"buffer":return e;default:throw new Error("Unrecognized type "+t.type)}}function bc(e,t){Je(),ll(e);var n=In(t||{});if(n.cellStyles&&(n.cellNF=!0,n.sheetStubs=!0),"array"==n.type){n.type="binary";var r=bc(e,n);return n.type="array",dt(r)}var i=0;if(n.sheet&&(i="number"==typeof n.sheet?n.sheet:e.SheetNames.indexOf(n.sheet),!e.SheetNames[i]))throw new Error("Sheet not found: "+n.sheet+" : "+typeof n.sheet);switch(n.bookType||"xlsb"){case"xml":case"xlml":return vc(wl(e,n),n);case"slk":case"sylk":return vc(na.from_sheet(e.Sheets[e.SheetNames[i]],n),n);case"htm":case"html":return vc(zl(e.Sheets[e.SheetNames[i]],n),n);case"txt":return function(e,t){switch(t.type){case"base64":return it(e);case"binary":case"string":return e;case"file":return fn(t.file,e,"binary");case"buffer":return at?st(e,"binary"):e.split("").map(function(e){return e.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}(Ac(e.Sheets[e.SheetNames[i]],n),n);case"csv":return vc(Tc(e.Sheets[e.SheetNames[i]],n),n,"\ufeff");case"dif":return vc(ra.from_sheet(e.Sheets[e.SheetNames[i]],n),n);case"dbf":return yc(ta.from_sheet(e.Sheets[e.SheetNames[i]],n),n);case"prn":return vc(oa.from_sheet(e.Sheets[e.SheetNames[i]],n),n);case"rtf":return vc(fa.from_sheet(e.Sheets[e.SheetNames[i]],n),n);case"eth":return vc(ia.from_sheet(e.Sheets[e.SheetNames[i]],n),n);case"fods":return vc(ql(e,n),n);case"wk1":return yc(aa.sheet_to_wk1(e.Sheets[e.SheetNames[i]],n),n);case"wk3":return yc(aa.book_to_wk3(e,n),n);case"biff2":n.biff||(n.biff=2);case"biff3":n.biff||(n.biff=3);case"biff4":return n.biff||(n.biff=4),yc(Ll(e,n),n);case"biff5":n.biff||(n.biff=5);case"biff8":case"xla":case"xls":return n.biff||(n.biff=8),function(e,t){var n=t||{};return gc(Tl(e,n),n)}(e,n);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return function(e,t){var n=In(t||{});return mc(hc(e,n),n)}(e,n);default:throw new Error("Unrecognized bookType |"+n.bookType+"|")}}function wc(e,t,n,r,i,o,a,s){var l=gi(n),c=s.defval,u=s.raw||!Object.prototype.hasOwnProperty.call(s,"raw"),d=!0,h=1===i?[]:{};if(1!==i)if(Object.defineProperty)try{Object.defineProperty(h,"__rowNum__",{value:n,enumerable:!1})}catch(Yc){h.__rowNum__=n}else h.__rowNum__=n;if(!a||e[n])for(var f=t.s.c;f<=t.e.c;++f){var p=a?e[n][f]:e[r[f]+l];if(void 0!==p&&void 0!==p.t){var g=p.v;switch(p.t){case"z":if(null==g)break;continue;case"e":g=0==g?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+p.t)}if(null!=o[f]){if(null==g)if("e"==p.t&&null===g)h[o[f]]=null;else if(void 0!==c)h[o[f]]=c;else{if(!u||null!==g)continue;h[o[f]]=null}else h[o[f]]=u&&("n"!==p.t||"n"===p.t&&!1!==s.rawNumbers)?g:Ti(p,g,s);null!=g&&(d=!1)}}else{if(void 0===c)continue;null!=o[f]&&(h[o[f]]=c)}}return{row:h,isempty:d}}function xc(e,t){if(null==e||null==e["!ref"])return[];var n={t:"n",v:0},r=0,i=1,o=[],a=0,s="",l={s:{r:0,c:0},e:{r:0,c:0}},c=t||{},u=null!=c.range?c.range:e["!ref"];switch(1===c.header?r=1:"A"===c.header?r=2:Array.isArray(c.header)?r=3:null==c.header&&(r=0),typeof u){case"string":l=Si(u);break;case"number":(l=Si(e["!ref"])).s.r=u;break;default:l=u}r>0&&(i=0);var d=gi(l.s.r),h=[],f=[],p=0,g=0,m=Array.isArray(e),v=l.s.r,y=0,b={};m&&!e[v]&&(e[v]=[]);var w=c.skipHidden&&e["!cols"]||[],x=c.skipHidden&&e["!rows"]||[];for(y=l.s.c;y<=l.e.c;++y)if(!(w[y]||{}).hidden)switch(h[y]=vi(y),n=m?e[v][y]:e[h[y]+d],r){case 1:o[y]=y-l.s.c;break;case 2:o[y]=h[y];break;case 3:o[y]=c.header[y-l.s.c];break;default:if(null==n&&(n={w:"__EMPTY",t:"s"}),s=a=Ti(n,null,c),g=b[a]||0){do{s=a+"_"+g++}while(b[s]);b[a]=g,b[s]=1}else b[a]=1;o[y]=s}for(v=l.s.r+i;v<=l.e.r;++v)if(!(x[v]||{}).hidden){var S=wc(e,l,v,h,r,o,m,c);(!1===S.isempty||(1===r?!1!==c.blankrows:c.blankrows))&&(f[p++]=S.row)}return f.length=p,f}var Sc=/"/g;function Ec(e,t,n,r,i,o,a,s){for(var l=!0,c=[],u="",d=gi(n),h=t.s.c;h<=t.e.c;++h)if(r[h]){var f=s.dense?(e[n]||[])[h]:e[r[h]+d];if(null==f)u="";else if(null!=f.v){l=!1,u=""+(s.rawNumbers&&"n"==f.t?f.v:Ti(f,null,s));for(var p=0,g=0;p!==u.length;++p)if((g=u.charCodeAt(p))===i||g===o||34===g||s.forceQuotes){u='"'+u.replace(Sc,'""')+'"';break}"ID"==u&&(u='"ID"')}else null==f.f||f.F?u="":(l=!1,(u="="+f.f).indexOf(",")>=0&&(u='"'+u.replace(Sc,'""')+'"'));c.push(u)}return!1===s.blankrows&&l?null:c.join(a)}function Tc(e,t){var n=[],r=null==t?{}:t;if(null==e||null==e["!ref"])return"";var i=Si(e["!ref"]),o=void 0!==r.FS?r.FS:",",a=o.charCodeAt(0),s=void 0!==r.RS?r.RS:"\n",l=s.charCodeAt(0),c=new RegExp(("|"==o?"\\|":o)+"+$"),u="",d=[];r.dense=Array.isArray(e);for(var h=r.skipHidden&&e["!cols"]||[],f=r.skipHidden&&e["!rows"]||[],p=i.s.c;p<=i.e.c;++p)(h[p]||{}).hidden||(d[p]=vi(p));for(var g=0,m=i.s.r;m<=i.e.r;++m)(f[m]||{}).hidden||null!=(u=Ec(e,i,m,d,a,l,o,r))&&(r.strip&&(u=u.replace(c,"")),(u||!1!==r.blankrows)&&n.push((g++?s:"")+u));return delete r.dense,n.join("")}function Ac(e,t){t||(t={}),t.FS="\t",t.RS="\n";var n=Tc(e,t);if("undefined"==typeof et||"string"==t.type)return n;var r=et.utils.encode(1200,n,"str");return String.fromCharCode(255)+String.fromCharCode(254)+r}function _c(e,t,n){var r,i=n||{},o=+!i.skipHeader,a=e||{},s=0,l=0;if(a&&null!=i.origin)if("number"==typeof i.origin)s=i.origin;else{var c="string"==typeof i.origin?yi(i.origin):i.origin;s=c.r,l=c.c}var u={s:{c:0,r:0},e:{c:l,r:s+t.length-1+o}};if(a["!ref"]){var d=Si(a["!ref"]);u.e.c=Math.max(u.e.c,d.e.c),u.e.r=Math.max(u.e.r,d.e.r),-1==s&&(s=d.e.r+1,u.e.r=s+t.length-1+o)}else-1==s&&(s=0,u.e.r=t.length-1+o);var h=i.header||[],f=0;t.forEach(function(e,t){pn(e).forEach(function(n){-1==(f=h.indexOf(n))&&(h[f=h.length]=n);var c=e[n],u="z",d="",p=bi({c:l+f,r:s+t+o});r=kc(a,p),!c||"object"!==typeof c||c instanceof Date?("number"==typeof c?u="n":"boolean"==typeof c?u="b":"string"==typeof c?u="s":c instanceof Date?(u="d",i.cellDates||(u="n",c=bn(c)),d=i.dateNF||At[14]):null===c&&i.nullError&&(u="e",c=0),r?(r.t=u,r.v=c,delete r.w,delete r.R,d&&(r.z=d)):a[p]=r={t:u,v:c},d&&(r.z=d)):a[p]=c})}),u.e.c=Math.max(u.e.c,l+h.length-1);var p=gi(s);if(o)for(f=0;f<h.length;++f)a[vi(f+l)+p]={t:"s",v:h[f]};return a["!ref"]=xi(u),a}function kc(e,t,n){if("string"==typeof t){if(Array.isArray(e)){var r=yi(t);return e[r.r]||(e[r.r]=[]),e[r.r][r.c]||(e[r.r][r.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return kc(e,bi("number"!=typeof t?t:{r:t,c:n||0}))}function Cc(){return{SheetNames:[],Sheets:{}}}function Ic(e,t,n,r){var i=1;if(!n)for(;i<=65535&&-1!=e.SheetNames.indexOf(n="Sheet"+i);++i,n=void 0);if(!n||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(r&&e.SheetNames.indexOf(n)>=0){var o=n.match(/(^.*?)(\d+)$/);i=o&&+o[2]||0;var a=o&&o[1]||n;for(++i;i<=65535&&-1!=e.SheetNames.indexOf(n=a+i);++i);}if(sl(n),e.SheetNames.indexOf(n)>=0)throw new Error("Worksheet with name |"+n+"| already exists!");return e.SheetNames.push(n),e.Sheets[n]=t,n}function Rc(e,t,n){return t?(e.l={Target:t},n&&(e.l.Tooltip=n)):delete e.l,e}var Nc={encode_col:vi,encode_row:gi,encode_cell:bi,encode_range:xi,decode_col:mi,decode_row:pi,split_cell:function(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")},decode_cell:yi,decode_range:wi,format_cell:Ti,sheet_add_aoa:_i,sheet_add_json:_c,sheet_add_dom:Bl,aoa_to_sheet:ki,json_to_sheet:function(e,t){return _c(null,e,t)},table_to_sheet:Wl,table_to_book:function(e,t){return Ai(Wl(e,t),t)},sheet_to_csv:Tc,sheet_to_txt:Ac,sheet_to_json:xc,sheet_to_html:zl,sheet_to_formulae:function(e){var t,n="",r="";if(null==e||null==e["!ref"])return[];var i,o=Si(e["!ref"]),a="",s=[],l=[],c=Array.isArray(e);for(i=o.s.c;i<=o.e.c;++i)s[i]=vi(i);for(var u=o.s.r;u<=o.e.r;++u)for(a=gi(u),i=o.s.c;i<=o.e.c;++i)if(n=s[i]+a,r="",void 0!==(t=c?(e[u]||[])[i]:e[n])){if(null!=t.F){if(n=t.F,!t.f)continue;r=t.f,-1==n.indexOf(":")&&(n=n+":"+n)}if(null!=t.f)r=t.f;else{if("z"==t.t)continue;if("n"==t.t&&null!=t.v)r=""+t.v;else if("b"==t.t)r=t.v?"TRUE":"FALSE";else if(void 0!==t.w)r="'"+t.w;else{if(void 0===t.v)continue;r="s"==t.t?"'"+t.v:""+t.v}}l[l.length]=n+"="+r}return l},sheet_to_row_object_array:xc,sheet_get_cell:kc,book_new:Cc,book_append_sheet:Ic,book_set_sheet_visibility:function(e,t,n){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var r=function(e,t){if("number"==typeof t){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}if("string"==typeof t){var n=e.SheetNames.indexOf(t);if(n>-1)return n;throw new Error("Cannot find sheet name |"+t+"|")}throw new Error("Cannot find sheet |"+t+"|")}(e,t);switch(e.Workbook.Sheets[r]||(e.Workbook.Sheets[r]={}),n){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+n)}e.Workbook.Sheets[r].Hidden=n},cell_set_number_format:function(e,t){return e.z=t,e},cell_set_hyperlink:Rc,cell_set_internal_link:function(e,t,n){return Rc(e,"#"+t,n)},cell_add_comment:function(e,t,n){e.c||(e.c=[]),e.c.push({t:t,a:n||"SheetJS"})},sheet_set_array_formula:function(e,t,n,r){for(var i="string"!=typeof t?t:Si(t),o="string"==typeof t?t:xi(t),a=i.s.r;a<=i.e.r;++a)for(var s=i.s.c;s<=i.e.c;++s){var l=kc(e,a,s);l.t="n",l.F=o,delete l.v,a==i.s.r&&s==i.s.c&&(l.f=n,r&&(l.D=!0))}return e},consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};Ge.version;function Oc(e){var t;let{user:r,profile:o}=e;const[a,s]=(0,i.useState)([]),[l,c]=(0,i.useState)(!0),[u,d]=(0,i.useState)([]),[h,f]=(0,i.useState)("todos"),[p,g]=(0,i.useState)(!1),[m,v]=(0,i.useState)(""),[y,b]=(0,i.useState)(!1),[w,x]=(0,i.useState)([]),[S,E]=(0,i.useState)(new Set),[T,A]=(0,i.useState)(null),[_,k]=(0,i.useState)(null),[C,I]=(0,i.useState)(!1),[R,N]=(0,i.useState)(new Set),[O,D]=(0,i.useState)([]),[P,L]=(0,i.useState)(""),[j,M]=(0,i.useState)(""),F=(()=>{const e=new Date,t=new Date(e.getFullYear(),e.getMonth(),1),n=new Date(e.getFullYear(),e.getMonth()+1,0),r=e=>{const t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0");return"".concat(t,"-").concat(n,"-").concat(r)};return{from:r(t),to:r(n)}})(),[U,z]=(0,i.useState)(F.from),[B,W]=(0,i.useState)(F.to),[V,H]=(0,i.useState)([]);re();(0,i.useEffect)(()=>{null!==r&&void 0!==r&&r.uid&&(q(),G(),null!==o&&void 0!==o&&o.isAdmin&&ne())},[r,o]),(0,i.useEffect)(()=>{Z()},[a,U,B,h]),(0,i.useEffect)(()=>{if(null!==o&&void 0!==o&&o.isAdmin&&a.length>0){const e=new Date;if(1===e.getDate()){const t=e.getMonth(),n=e.getFullYear(),r="autoDownload_".concat(n,"_").concat(t);localStorage.getItem(r)||setTimeout(()=>{te(!0),localStorage.setItem(r,"true")},2e3)}}},[a,o]);const G=async()=>{try{const e=await(0,Pe.mz)();d(e)}catch(e){console.error("Error cargando socios:",e)}};(0,i.useEffect)(()=>{const e=(0,Pe.HG)(D,!0);return()=>e&&e()},[]);const q=async()=>{c(!0);try{const e=await(0,Pe.ws)({isAdmin:(null===o||void 0===o?void 0:o.isAdmin)||!1}),t=null!==o&&void 0!==o&&o.isAdmin?e:e.filter(e=>e.userId===(null===r||void 0===r?void 0:r.uid)||e.uid===(null===r||void 0===r?void 0:r.uid));s(t)}catch(e){console.error("Error cargando gastos:",e)}finally{c(!1)}},K=async e=>{if(window.confirm("\xbfEst\xe1s seguro de que quieres eliminar este ticket?"))try{await(0,Pe.Wz)(e),alert("Ticket eliminado correctamente"),q()}catch(t){console.error("Error eliminando ticket:",t),alert("Error al eliminar el ticket")}},Y=async e=>{var t;const n=new Set(S);n.add(e.id),E(n);const r=(null!==(t=e.date)&&void 0!==t&&t.toDate?e.date.toDate():new Date(e.date)).toISOString().slice(0,16),i={},o={};let a=0;"sociedad"===e.category&&(e.participantes&&Array.isArray(e.participantes)?e.participantes.forEach(e=>{i[e.uid]=!0,o[e.uid]=e.attendees||1,a+=e.attendees||1}):(i[e.uid]=!0,o[e.uid]=e.attendees||1,a=e.attendees||0));const s={productLines:(e.productLines||[]).map(e=>(0,De.A)({},e)),dateInput:r,category:e.category||"venta",attendees:a,eventoTexto:e.eventoTexto||"",selectedSocios:i,attendeesCount:o,originalUid:e.uid};k(s),A(e.id)},$=()=>{A(null),k(null)},X=async()=>{if(T)try{const t=new Date(_.dateInput),n=_.productLines||[],r=n.reduce((e,t)=>e+Number(t.price||0)*Number(t.qty||1),0),i=n.map(e=>"".concat(e.qty,"x ").concat(e.label)).join(", ");if("sociedad"===_.category){var e;const o=Object.entries(_.selectedSocios||{}).filter(e=>{let[t,n]=e;return n}).map(e=>{let[t,n]=e;return t});if(console.log("\ud83d\udcca C\xc1LCULO DE REPARTO:"),console.log("   Socios seleccionados:",o),console.log("   attendeesCount:",_.attendeesCount),0===o.length)return void alert("Debes seleccionar al menos un socio");const a=o.reduce((e,t)=>{const n=Number(_.attendeesCount[t]||1);return console.log("   Socio ".concat(t,": ").concat(n," asistentes")),e+n},0);console.log("   Total de asistentes:",a),console.log("   Gasto total:",r);const s=r/a;console.log("   Precio por asistente:",s.toFixed(2));const l=o.map(e=>{var t;const n=Number(_.attendeesCount[e]||1),r=s*n,i=u.find(t=>t.id===e);return console.log("   \u2192 Socio ".concat(e," paga: ").concat(r.toFixed(2),"\u20ac (").concat(n," \xd7 ").concat(s.toFixed(2),")")),{uid:e,email:(null===i||void 0===i?void 0:i.email)||"",nombre:(null===i||void 0===i?void 0:i.nombre)||(null===i||void 0===i||null===(t=i.email)||void 0===t?void 0:t.split("@")[0])||"Socio",attendees:n,amount:r}}),c=(null===(e=_.eventoTexto)||void 0===e?void 0:e.trim())||"Gasto conjunto";await(0,Pe.eY)(T,{productLines:n,amount:r,item:"[SOCIEDAD - ".concat(c,"] ").concat(i," (").concat(a," asistente").concat(a>1?"s":"",")"),date:t,category:"sociedad",participantes:l,eventoTexto:c,totalGeneral:r,amountPerAttendee:s,totalAttendees:a}),alert("Ticket actualizado con "+l.length+" participantes")}else await(0,Pe.eY)(T,{productLines:n,amount:r,item:i,date:t,category:_.category,attendees:null,eventoTexto:null,totalGeneral:null,amountPerAttendee:null,totalAttendees:null}),alert("Ticket actualizado");A(null),k(null),q()}catch(t){console.error("Error actualizando ticket:",t),alert("Error al actualizar el ticket")}},Q=()=>{k(e=>(0,De.A)((0,De.A)({},e),{},{productLines:[...e.productLines||[],{label:"",price:0,qty:1}]}))},J=(e,t)=>{k(n=>(0,De.A)((0,De.A)({},n),{},{productLines:n.productLines.map((n,r)=>r===e?(0,De.A)((0,De.A)({},n),t):n)}))},Z=()=>{let e=[...a];if(null!==o&&void 0!==o&&o.isAdmin&&"todos"!==h&&(e=e.filter(e=>e.uid===h)),m){const t=m.toLowerCase();e=e.filter(e=>{const n=oe(e.date).toLowerCase(),r=(e.userEmail||"").toLowerCase(),i=(e.productLines||[]).map(e=>(e.label||"").toLowerCase()).join(" ");return n.includes(t)||r.includes(t)||i.includes(t)})}if(U){const t=new Date(U);t.setHours(0,0,0,0),e=e.filter(e=>{var n;return(null!==(n=e.date)&&void 0!==n&&n.toDate?e.date.toDate():new Date(e.date))>=t})}if(B){const t=new Date(B);t.setHours(23,59,59,999),e=e.filter(e=>{var n;return(null!==(n=e.date)&&void 0!==n&&n.toDate?e.date.toDate():new Date(e.date))<=t})}e.sort((e,t)=>{var n,r;const i=null!==(n=e.date)&&void 0!==n&&n.toDate?e.date.toDate():new Date(e.date);return(null!==(r=t.date)&&void 0!==r&&r.toDate?t.date.toDate():new Date(t.date))-i}),H(e)},ee=(()=>{let e=0,t=0,n=0;const i={},a=null===o||void 0===o?void 0:o.isAdmin,s=null===r||void 0===r?void 0:r.uid;return V.forEach(r=>{let o=0;if("sociedad"===r.category&&r.participantes&&Array.isArray(r.participantes))return void r.participantes.forEach(n=>{const r=Number(n.amount||0);if(!a&&n.uid!==s)return;t+=r,e+=r;const o=n.uid,l=n.email||"Sin email";i[o]||(i[o]={email:l,totalPersonal:0,totalSociedad:0,total:0}),i[o].totalSociedad+=r,i[o].total+=r});if("sociedad"===r.category)o=Number(r.amount||0);else{(r.productLines||[]).forEach(e=>{const t=Number(e.qty||1),n=Number(e.price||0);o+=t*n})}if(!a&&r.uid!==s&&r.userId!==s)return;e+=o;const l=r.uid,c=r.userEmail||"Sin email";i[l]||(i[l]={email:c,totalPersonal:0,totalSociedad:0,total:0}),"sociedad"===r.category?(t+=o,i[l].totalSociedad+=o):(n+=o,i[l].totalPersonal+=o),i[l].total+=o}),{totalTickets:V.length,totalAmount:e.toFixed(2),totalSociedad:t.toFixed(2),totalPersonal:n.toFixed(2),sociosDesglose:Object.entries(i).map(e=>{let[t,n]=e;return{id:t,email:n.email,totalPersonal:n.totalPersonal.toFixed(2),totalSociedad:n.totalSociedad.toFixed(2),total:n.total.toFixed(2)}}).sort((e,t)=>parseFloat(t.total)-parseFloat(e.total))}})(),te=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=new Date,r=new Date(t.getFullYear(),t.getMonth()-1,1),i=new Date(t.getFullYear(),t.getMonth(),0),o=a.filter(e=>{var t;const n=null!==(t=e.date)&&void 0!==t&&t.toDate?e.date.toDate():new Date(e.date);return n>=r&&n<=i});if(0===o.length)return void(e||alert("No hay datos del mes anterior para exportar"));const{db:s}=await Promise.resolve().then(n.bind(n,791)),{collection:l,getDocs:c}=await Promise.resolve().then(n.bind(n,32)),u=await c(l(s,"users")),d={};u.docs.forEach(e=>{d[e.id]=e.data().name||e.data().email||"Sin nombre"});const h={};o.forEach(e=>{const t=e.uid,n=d[t]||"Socio Desconocido";h[t]||(h[t]={nombre:n,gastoTPV:0,gastoSociedad:0,total:0,asistentesSociedad:0});const r=e.productLines||[];let i=0;r.forEach(e=>{const t=Number(e.qty||1),n=Number(e.price||0);i+=t*n}),"sociedad"===e.category?(h[t].gastoSociedad+=i,h[t].asistentesSociedad+=Number(e.attendees||0)):h[t].gastoTPV+=i,h[t].total+=i});const f=Object.entries(h).map(e=>{let[t,n]=e;return{"Nombre Socio":n.nombre,"Gasto TPV":parseFloat(n.gastoTPV.toFixed(2)),"Gasto Sociedad":parseFloat(n.gastoSociedad.toFixed(2)),Asistentes:n.asistentesSociedad||"",Total:parseFloat(n.total.toFixed(2))}}).sort((e,t)=>t.Total-e.Total),p=f.reduce((e,t)=>e+(t.Asistentes||0),0),g={"Nombre Socio":"SUBTOTALES","Gasto TPV":parseFloat(f.reduce((e,t)=>e+t["Gasto TPV"],0).toFixed(2)),"Gasto Sociedad":parseFloat(f.reduce((e,t)=>e+t["Gasto Sociedad"],0).toFixed(2)),Asistentes:p,Total:parseFloat(f.reduce((e,t)=>e+t.Total,0).toFixed(2))},m=[...f,{},g],v=Nc.json_to_sheet(m,{skipHeader:!1});v["!cols"]=[{wch:30},{wch:12},{wch:15},{wch:12},{wch:12}];const y=Nc.book_new();Nc.book_append_sheet(y,v,"Resumen Mensual");const b=bc(y,{bookType:"xlsx",type:"array"}),w=new Blob([b],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),x=r.toLocaleDateString("es-ES",{month:"2-digit",year:"numeric"}),S="resumen_".concat(x.replace("/","-"),".xlsx");try{const t=r.getFullYear(),n=(0,He.KR)(Pe.IG,"resumen-mensual/".concat(t,"/").concat(S));await(0,He.D)(n,w);const i=await(0,He.qk)(n);ie(S,g,e,i),e||alert("Excel guardado en la nube: ".concat(S,'\n\nPuedes descargarlo desde "Ver Historial"'))}catch(E){console.error("Error al subir archivo a Firebase:",E),e||alert("Error al guardar el archivo en la nube")}},ne=async()=>{try{const{db:e}=await Promise.resolve().then(n.bind(n,791)),{collection:t,query:r,orderBy:i,getDocs:o}=await Promise.resolve().then(n.bind(n,32)),a=r(t(e,"historial-resumenes"),i("fecha","desc")),s=(await o(a)).docs.map(e=>{var t,n,r;return{id:e.id,fecha:(null===(t=e.data().fecha)||void 0===t||null===(n=t.toDate)||void 0===n||null===(r=n.call(t))||void 0===r?void 0:r.toLocaleString("es-ES"))||e.data().fecha,archivo:e.data().nombreArchivo,gastoTPV:e.data().totalTPV,gastoSociedad:e.data().totalSociedad,total:e.data().totalGeneral,tipo:"automatico"===e.data().tipo?"Autom\xe1tico":"Manual",url:e.data().url,anio:e.data().anio}});x(s);const l=[...new Set(s.map(e=>e.anio))];N(new Set(l))}catch(e){console.error("Error cargando historial:",e);const t=localStorage.getItem("historialDescargas");t&&x(JSON.parse(t))}},ie=async(e,t,r,i)=>{try{const o=e.match(/(\d{4})/),a=o?parseInt(o[1]):(new Date).getFullYear(),s=e.match(/resumen_(\d{2})/),l=s?parseInt(s[1]):(new Date).getMonth()+1,c=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"][l-1],{db:u}=await Promise.resolve().then(n.bind(n,791)),{collection:d,addDoc:h}=await Promise.resolve().then(n.bind(n,32));await h(d(u,"historial-resumenes"),{fecha:new Date,nombreArchivo:e,mes:c,anio:a,totalTPV:t.gastoTPV,totalSociedad:t.gastoSociedad,totalGeneral:t.total,url:i,tipo:r?"automatico":"manual",rutaStorage:"resumen-mensual/".concat(a,"/").concat(e)}),await ne()}catch(o){console.error("Error guardando en historial:",o);const n={id:Date.now(),fecha:(new Date).toLocaleString("es-ES"),archivo:e,gastoTPV:t.gastoTPV,gastoSociedad:t.gastoSociedad,total:t.total,tipo:r?"Autom\xe1tico":"Manual",url:i},a=JSON.parse(localStorage.getItem("historialDescargas")||"[]");a.unshift(n),localStorage.setItem("historialDescargas",JSON.stringify(a)),x(a)}},oe=e=>{if(!e)return"";return(e.toDate?e.toDate():new Date(e)).toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})};return r?l?(0,Le.jsx)("div",{style:{padding:20,textAlign:"center"},children:(0,Le.jsx)("h2",{children:"Cargando gastos..."})}):(0,Le.jsxs)("div",{style:{padding:20,maxWidth:1200,margin:"0 auto"},children:[(0,Le.jsx)("h2",{style:{marginBottom:24,fontSize:28,fontWeight:700,color:"#111827"},children:"\ud83d\udcca Listados TPV"}),(0,Le.jsxs)("div",{style:{background:"#fff",padding:24,borderRadius:16,boxShadow:"0 2px 8px rgba(0,0,0,0.1)",marginBottom:32},children:[(0,Le.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[(0,Le.jsx)("h3",{style:{margin:0,fontSize:18,fontWeight:600,color:"#374151"},children:"Filtros"}),(0,Le.jsxs)("div",{style:{display:"flex",gap:12},children:[(0,Le.jsx)("button",{onClick:()=>b(!0),style:{padding:"10px 20px",fontSize:14,fontWeight:600,color:"#fff",backgroundColor:"#8b5cf6",border:"none",borderRadius:8,cursor:"pointer",transition:"all 0.2s"},onMouseEnter:e=>e.target.style.backgroundColor="#7c3aed",onMouseLeave:e=>e.target.style.backgroundColor="#8b5cf6",children:"\ud83d\udcc2 Ver Historial"}),(0,Le.jsx)("button",{onClick:()=>{0!==V.length?I(!0):alert("No hay datos para exportar")},disabled:0===V.length,style:{padding:"10px 20px",fontSize:14,fontWeight:600,color:"#fff",backgroundColor:0===V.length?"#9ca3af":"#10b981",border:"none",borderRadius:8,cursor:0===V.length?"not-allowed":"pointer",transition:"all 0.2s"},children:"\ud83d\udce5 Exportar a Excel"})]})]}),(0,Le.jsxs)("div",{style:{display:"grid",gridTemplateColumns:null!==o&&void 0!==o&&o.isAdmin?"1fr 1fr 1fr":"1fr 1fr",gap:20,alignItems:"end"},children:[(0,Le.jsxs)("div",{children:[(0,Le.jsx)("label",{style:{display:"block",marginBottom:8,fontSize:14,fontWeight:500,color:"#6b7280"},children:"Desde"}),(0,Le.jsx)("input",{type:"date",value:U,onChange:e=>z(e.target.value),style:{width:"100%",padding:"10px 14px",fontSize:14,border:"1px solid #d1d5db",borderRadius:8,outline:"none",transition:"border-color 0.2s",boxSizing:"border-box"}})]}),(0,Le.jsxs)("div",{children:[(0,Le.jsx)("label",{style:{display:"block",marginBottom:8,fontSize:14,fontWeight:500,color:"#6b7280"},children:"Hasta"}),(0,Le.jsx)("input",{type:"date",value:B,onChange:e=>W(e.target.value),style:{width:"100%",padding:"10px 14px",fontSize:14,border:"1px solid #d1d5db",borderRadius:8,outline:"none",transition:"border-color 0.2s",boxSizing:"border-box"}})]}),(null===o||void 0===o?void 0:o.isAdmin)&&(0,Le.jsxs)("div",{children:[(0,Le.jsx)("label",{style:{display:"block",marginBottom:8,fontSize:14,fontWeight:500,color:"#6b7280"},children:"Socio"}),(0,Le.jsxs)("select",{value:h,onChange:e=>f(e.target.value),style:{width:"100%",padding:"10px 14px",fontSize:14,border:"1px solid #d1d5db",borderRadius:8,outline:"none",backgroundColor:"#fff",cursor:"pointer"},children:[(0,Le.jsx)("option",{value:"todos",children:"Todos los socios"}),u.map(e=>(0,Le.jsxs)("option",{value:e.id,children:[e.name," ",e.surname," (",e.email,")"]},e.id))]})]})]})]}),V.length>0&&(0,Le.jsxs)(Le.Fragment,{children:[(0,Le.jsxs)("div",{style:{marginBottom:16,textAlign:"center"},children:[(0,Le.jsxs)("h3",{style:{margin:0,marginBottom:8,fontSize:18,fontWeight:600,color:"#374151",textTransform:"uppercase",letterSpacing:"0.5px"},children:["GASTOS TOTALES DE: ",(null===o||void 0===o?void 0:o.nombre)||(null===o||void 0===o?void 0:o.name)||(null===r||void 0===r||null===(t=r.email)||void 0===t?void 0:t.split("@")[0])||"Usuario"]}),(0,Le.jsxs)("div",{style:{fontSize:14,color:"#6b7280",fontWeight:500},children:["\ud83d\udcc5 ",new Date(U).toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric"})," - ",new Date(B).toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric"})]})]}),(0,Le.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:20,marginBottom:32},children:[(0,Le.jsxs)("div",{style:{background:"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",color:"#fff",padding:24,borderRadius:16,boxShadow:"0 4px 12px rgba(245, 158, 11, 0.3)"},children:[(0,Le.jsx)("div",{style:{fontSize:14,opacity:.9,marginBottom:8},children:"Gastos Sociedad"}),(0,Le.jsxs)("div",{style:{fontSize:32,fontWeight:700},children:[ee.totalSociedad,"\u20ac"]})]}),(0,Le.jsxs)("div",{style:{background:"linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%)",color:"#fff",padding:24,borderRadius:16,boxShadow:"0 4px 12px rgba(139, 92, 246, 0.3)"},children:[(0,Le.jsx)("div",{style:{fontSize:14,opacity:.9,marginBottom:8},children:"Gastos Personales"}),(0,Le.jsxs)("div",{style:{fontSize:32,fontWeight:700},children:[ee.totalPersonal,"\u20ac"]})]}),(0,Le.jsxs)("div",{style:{background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",color:"#fff",padding:24,borderRadius:16,boxShadow:"0 4px 12px rgba(16, 185, 129, 0.3)"},children:[(0,Le.jsx)("div",{style:{fontSize:14,opacity:.9,marginBottom:8},children:"Total General"}),(0,Le.jsxs)("div",{style:{fontSize:32,fontWeight:700},children:[ee.totalAmount,"\u20ac"]})]})]})]}),(null===o||void 0===o?void 0:o.isAdmin)&&V.length>0&&ee.sociosDesglose&&ee.sociosDesglose.length>0&&(0,Le.jsxs)("div",{style:{background:"#fff",padding:24,borderRadius:16,boxShadow:"0 2px 8px rgba(0,0,0,0.1)",marginBottom:32},children:[(0,Le.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:20},children:[(0,Le.jsx)("h3",{style:{margin:0,fontSize:20,fontWeight:600,color:"#111827"},children:"\ud83d\udcb0 Resumen Detallado por Socio"}),(0,Le.jsxs)("div",{style:{fontSize:14,color:"#6b7280",fontStyle:"italic"},children:["Periodo: ",new Date(U).toLocaleDateString("es-ES")," - ",new Date(B).toLocaleDateString("es-ES")]})]}),(0,Le.jsx)("div",{style:{fontSize:14,color:"#6b7280",marginBottom:16},children:"Desglose de gastos personales (TPV) y gastos de sociedad por cada socio"}),(0,Le.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[(0,Le.jsx)("thead",{children:(0,Le.jsxs)("tr",{style:{borderBottom:"2px solid #e5e7eb",backgroundColor:"#f9fafb"},children:[(0,Le.jsx)("th",{style:{textAlign:"left",padding:"12px 16px",fontSize:14,fontWeight:600,color:"#374151"},children:"Socio"}),(0,Le.jsx)("th",{style:{textAlign:"right",padding:"12px 16px",fontSize:14,fontWeight:600,color:"#374151"},children:"TPV (Personal)"}),(0,Le.jsx)("th",{style:{textAlign:"right",padding:"12px 16px",fontSize:14,fontWeight:600,color:"#374151"},children:"Sociedad"}),(0,Le.jsx)("th",{style:{textAlign:"right",padding:"12px 16px",fontSize:14,fontWeight:600,color:"#374151"},children:"Total"})]})}),(0,Le.jsxs)("tbody",{children:[ee.sociosDesglose.map((e,t)=>(0,Le.jsxs)("tr",{style:{borderBottom:"1px solid #e5e7eb"},children:[(0,Le.jsx)("td",{style:{padding:"12px 16px",fontSize:14,color:"#111827"},children:e.email}),(0,Le.jsxs)("td",{style:{padding:"12px 16px",fontSize:14,color:"#8b5cf6",textAlign:"right"},children:[e.totalPersonal,"\u20ac"]}),(0,Le.jsxs)("td",{style:{padding:"12px 16px",fontSize:14,color:"#f59e0b",textAlign:"right"},children:[e.totalSociedad,"\u20ac"]}),(0,Le.jsxs)("td",{style:{padding:"12px 16px",fontSize:16,fontWeight:600,color:"#059669",textAlign:"right"},children:[e.total,"\u20ac"]})]},e.id)),(0,Le.jsxs)("tr",{style:{borderTop:"2px solid #374151",backgroundColor:"#f9fafb",fontWeight:700},children:[(0,Le.jsx)("td",{style:{padding:"16px",fontSize:16,color:"#111827"},children:"TOTAL"}),(0,Le.jsxs)("td",{style:{padding:"16px",fontSize:18,fontWeight:700,color:"#8b5cf6",textAlign:"right"},children:[ee.totalPersonal,"\u20ac"]}),(0,Le.jsxs)("td",{style:{padding:"16px",fontSize:18,fontWeight:700,color:"#f59e0b",textAlign:"right"},children:[ee.totalSociedad,"\u20ac"]}),(0,Le.jsxs)("td",{style:{padding:"16px",fontSize:20,fontWeight:700,color:"#059669",textAlign:"right"},children:[ee.totalAmount,"\u20ac"]})]})]})]})]}),(0,Le.jsxs)("div",{style:{background:"#fff",padding:24,borderRadius:16,boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[(0,Le.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:20},children:[(0,Le.jsx)("h3",{style:{margin:0,fontSize:20,fontWeight:600,color:"#111827"},children:"\ud83d\udcdd Hist\xf3rico de Tickets"}),(0,Le.jsx)("button",{onClick:()=>g(!p),style:{padding:"8px 16px",fontSize:14,fontWeight:600,color:"#fff",backgroundColor:"#3b82f6",border:"none",borderRadius:8,cursor:"pointer"},children:p?"\u25bc Ocultar":"\u25b6 Mostrar"})]}),p&&(0,Le.jsxs)("div",{children:[(0,Le.jsx)("div",{style:{marginBottom:20},children:(0,Le.jsx)("input",{type:"text",placeholder:"Buscar por socio, fecha o producto...",value:m,onChange:e=>v(e.target.value),style:{width:"100%",padding:"10px 14px",fontSize:14,border:"1px solid #d1d5db",borderRadius:8,outline:"none",boxSizing:"border-box"}})}),l?(0,Le.jsx)("div",{style:{textAlign:"center",padding:40,color:"#6b7280"},children:"Cargando..."}):0===V.length?(0,Le.jsx)("div",{style:{textAlign:"center",padding:40,color:"#6b7280"},children:"No hay tickets para mostrar"}):(0,Le.jsxs)(Le.Fragment,{children:[(0,Le.jsx)("div",{className:"tpv-history-table",style:{overflowX:"auto"},children:(0,Le.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:14},children:[(0,Le.jsx)("thead",{children:(0,Le.jsxs)("tr",{style:{borderBottom:"2px solid #e5e7eb",backgroundColor:"#f9fafb"},children:[(0,Le.jsx)("th",{style:{textAlign:"left",padding:"12px 16px",fontSize:13,fontWeight:600,color:"#374151",whiteSpace:"nowrap"},children:"#"}),(0,Le.jsx)("th",{style:{textAlign:"left",padding:"12px 16px",fontSize:13,fontWeight:600,color:"#374151",whiteSpace:"nowrap"},children:"Fecha / Hora"}),(null===o||void 0===o?void 0:o.isAdmin)&&(0,Le.jsx)("th",{style:{textAlign:"left",padding:"12px 16px",fontSize:13,fontWeight:600,color:"#374151",whiteSpace:"nowrap"},children:"Usuario"}),(0,Le.jsx)("th",{style:{textAlign:"left",padding:"12px 16px",fontSize:13,fontWeight:600,color:"#374151"},children:"Productos"}),(0,Le.jsx)("th",{style:{textAlign:"center",padding:"12px 16px",fontSize:13,fontWeight:600,color:"#374151",whiteSpace:"nowrap"},children:"Tipo"}),(0,Le.jsx)("th",{style:{textAlign:"right",padding:"12px 16px",fontSize:13,fontWeight:600,color:"#374151",whiteSpace:"nowrap"},children:"Total"}),(0,Le.jsx)("th",{style:{textAlign:"center",padding:"12px 16px",fontSize:13,fontWeight:600,color:"#374151"},children:"Acciones"})]})}),(0,Le.jsx)("tbody",{children:V.map((e,t)=>{var n;const a=e.productLines||[];let s=0,l=0;if("sociedad"===e.category&&e.participantes&&Array.isArray(e.participantes)){s=Number(e.totalGeneral||e.amount||0);const t=e.participantes.find(e=>e.uid===(null===r||void 0===r?void 0:r.uid));l=t?Number(t.amount||0):0}else"sociedad"===e.category?(s=Number(e.amount||0),l=s):(s=a.reduce((e,t)=>e+Number(t.qty||1)*Number(t.price||0),0),l=s);const c=null!==(n=e.date)&&void 0!==n&&n.toDate?e.date.toDate():new Date(e.date),d=c.toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric"}),h=c.toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"}),f=S.has(e.id);let p=[];return"sociedad"===e.category&&e.participantes&&Array.isArray(e.participantes)&&(p=e.participantes.map(e=>{var t;return{nombre:e.nombre||(null===(t=e.email)||void 0===t?void 0:t.split("@")[0])||"Socio",asistentes:e.attendees||1}})),(0,Le.jsxs)(i.Fragment,{children:[(0,Le.jsxs)("tr",{style:{borderBottom:"1px solid #e5e7eb",backgroundColor:t%2===0?"#fff":"#f9fafb",cursor:"pointer"},onClick:()=>(e=>{const t=new Set(S);t.has(e)?t.delete(e):t.add(e),E(t)})(e.id),children:[(0,Le.jsx)("td",{style:{padding:"12px 16px",fontSize:14,fontWeight:600,color:"#6b7280"},children:(0,Le.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,Le.jsx)("span",{style:{fontSize:16},children:f?"\u25bc":"\u25b6"}),"#",t+1]})}),(0,Le.jsxs)("td",{style:{padding:"12px 16px",fontSize:13,color:"#374151",whiteSpace:"nowrap"},children:[(0,Le.jsx)("div",{style:{fontWeight:500},children:d}),(0,Le.jsx)("div",{style:{fontSize:12,color:"#6b7280"},children:h})]}),(null===o||void 0===o?void 0:o.isAdmin)&&(0,Le.jsx)("td",{style:{padding:"12px 16px",fontSize:13,color:"#374151"},children:e.userEmail||"-"}),(0,Le.jsxs)("td",{style:{padding:"12px 16px",fontSize:13,color:"#374151"},children:[a.length," producto",1!==a.length?"s":""]}),(0,Le.jsx)("td",{style:{padding:"12px 16px",textAlign:"center"},children:"sociedad"===e.category?(0,Le.jsxs)("span",{style:{display:"inline-block",padding:"4px 8px",borderRadius:12,fontSize:11,fontWeight:600,backgroundColor:"#fff3cd",color:"#856404",border:"1px solid #ffc107",whiteSpace:"nowrap"},children:["\ud83c\udfdb\ufe0f Sociedad",p.length>0&&(0,Le.jsx)("div",{style:{fontSize:10,marginTop:4},children:p.map((e,t)=>(0,Le.jsxs)("div",{children:[e.nombre," (",e.asistentes,")"]},t))})]}):(0,Le.jsx)("span",{style:{display:"inline-block",padding:"4px 8px",borderRadius:12,fontSize:11,fontWeight:600,backgroundColor:"#e0e7ff",color:"#3730a3",whiteSpace:"nowrap"},children:"Personal"})}),(0,Le.jsxs)("td",{style:{padding:"12px 16px",fontSize:16,fontWeight:700,color:"#059669",textAlign:"right",whiteSpace:"nowrap"},children:[null!==o&&void 0!==o&&o.isAdmin?s.toFixed(2):l.toFixed(2),"\u20ac"]}),(0,Le.jsx)("td",{style:{padding:"12px 16px",textAlign:"center"},onClick:e=>e.stopPropagation(),children:(0,Le.jsxs)("div",{style:{display:"flex",gap:8,justifyContent:"center"},children:[((null===o||void 0===o?void 0:o.isAdmin)||e.userId===(null===r||void 0===r?void 0:r.uid)||e.uid===(null===r||void 0===r?void 0:r.uid))&&(0,Le.jsx)("button",{className:"btn-small",onClick:()=>{console.log("BOT\xd3N EDITAR CLICKEADO - Versi\xf3n 2.1.2"),T===e.id?$():Y(e)},style:{minWidth:"40px"},children:T===e.id?"\u2716\ufe0f":"\u270f\ufe0f"}),(null===o||void 0===o?void 0:o.isAdmin)&&(0,Le.jsx)("button",{className:"btn-ghost",onClick:()=>K(e.id),children:"\ud83d\uddd1\ufe0f"})]})})]}),f&&(0,Le.jsx)("tr",{style:{backgroundColor:"#f8fafc",borderBottom:"2px solid #e5e7eb"},children:(0,Le.jsx)("td",{colSpan:null!==o&&void 0!==o&&o.isAdmin?7:6,style:{padding:"20px 16px"},children:T===e.id&&_?(0,Le.jsxs)("div",{style:{backgroundColor:"#fff",borderRadius:8,padding:20,border:"2px solid #3b82f6",maxWidth:"100%",overflow:"hidden"},children:[(0,Le.jsx)("h4",{style:{margin:"0 0 16px 0",fontSize:16,fontWeight:600,color:"#111827"},children:"\u270f\ufe0f Editando ticket"}),(0,Le.jsxs)("div",{style:{marginBottom:16},children:[(0,Le.jsx)("label",{style:{display:"block",fontSize:13,fontWeight:500,marginBottom:4,color:"#374151"},children:"Fecha y hora"}),(0,Le.jsx)("input",{type:"datetime-local",value:_.dateInput,onChange:e=>k(t=>(0,De.A)((0,De.A)({},t),{},{dateInput:e.target.value})),className:"full-input"})]}),(0,Le.jsxs)("div",{style:{marginBottom:16},children:[(0,Le.jsx)("label",{style:{display:"block",fontSize:13,fontWeight:500,marginBottom:4,color:"#374151"},children:"Tipo de gasto"}),(0,Le.jsxs)("select",{value:_.category,onChange:e=>k(t=>(0,De.A)((0,De.A)({},t),{},{category:e.target.value})),className:"full-input",children:[(0,Le.jsx)("option",{value:"venta",children:"Personal"}),(0,Le.jsx)("option",{value:"sociedad",children:"Sociedad"})]})]}),"sociedad"===_.category&&(0,Le.jsxs)(Le.Fragment,{children:[(0,Le.jsxs)("div",{style:{marginBottom:16},children:[(0,Le.jsx)("label",{style:{display:"block",fontSize:13,fontWeight:500,marginBottom:4,color:"#374151"},children:"Evento (opcional)"}),(0,Le.jsx)("input",{type:"text",placeholder:"Nombre del evento",value:_.eventoTexto,onChange:e=>k(t=>(0,De.A)((0,De.A)({},t),{},{eventoTexto:e.target.value})),className:"full-input"})]}),(0,Le.jsxs)("div",{style:{marginBottom:16},children:[(0,Le.jsx)("label",{style:{display:"block",fontSize:13,fontWeight:500,marginBottom:8,color:"#374151"},children:"Socios participantes"}),(0,Le.jsx)("div",{style:{maxHeight:200,overflowY:"auto",border:"1px solid #d1d5db",borderRadius:6,padding:12,backgroundColor:"#f9fafb"},children:u.map(e=>{var t,n,r;return(0,Le.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:12,marginBottom:8,padding:8,backgroundColor:"#fff",borderRadius:6,border:"1px solid #e5e7eb"},children:[(0,Le.jsx)("input",{type:"checkbox",checked:(null===(t=_.selectedSocios)||void 0===t?void 0:t[e.id])||!1,onChange:t=>{const n=(0,De.A)((0,De.A)({},_.selectedSocios),{},{[e.id]:t.target.checked}),r=(0,De.A)({},_.attendeesCount);t.target.checked&&!r[e.id]&&(r[e.id]=1),k(e=>(0,De.A)((0,De.A)({},e),{},{selectedSocios:n,attendeesCount:r}))},style:{cursor:"pointer"}}),(0,Le.jsx)("span",{style:{flex:1,fontSize:13,color:"#111827"},children:e.nombre||e.email}),(null===(n=_.selectedSocios)||void 0===n?void 0:n[e.id])&&(0,Le.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:4},children:[(0,Le.jsx)("span",{style:{fontSize:12,color:"#6b7280"},children:"Asist.:"}),(0,Le.jsx)("input",{type:"number",min:"1",value:(null===(r=_.attendeesCount)||void 0===r?void 0:r[e.id])||1,onChange:t=>{const n=(0,De.A)((0,De.A)({},_.attendeesCount),{},{[e.id]:Number(t.target.value)||1});k(e=>(0,De.A)((0,De.A)({},e),{},{attendeesCount:n}))},style:{width:60,padding:"4px 8px",fontSize:13,border:"1px solid #d1d5db",borderRadius:4}})]})]},e.id)})})]})]}),(0,Le.jsxs)("div",{style:{marginBottom:16},children:[(0,Le.jsxs)("div",{style:{marginBottom:12},children:[(0,Le.jsx)("label",{style:{fontSize:13,fontWeight:500,color:"#374151",display:"block",marginBottom:8},children:"A\xf1adir productos"}),(0,Le.jsxs)("div",{style:{display:"flex",gap:8,alignItems:"center",marginBottom:8},children:[(0,Le.jsxs)("select",{value:P,onChange:e=>{L(e.target.value),M("")},style:{minWidth:200,padding:"8px 12px",fontSize:14,border:"1px solid #d1d5db",borderRadius:6,backgroundColor:"#fff",cursor:"pointer"},children:[(0,Le.jsx)("option",{value:"",children:"Seleccionar categor\xeda..."}),(()=>{const e=new Set;return O.forEach(t=>{const n=t.category||"Sin categor\xeda";e.add(n)}),Array.from(e).sort((e,t)=>e.localeCompare(t)).map(e=>(0,Le.jsx)("option",{value:e,children:e},e))})()]}),(0,Le.jsxs)("select",{value:j,onChange:e=>M(e.target.value),disabled:!P,style:{minWidth:300,flex:1,padding:"8px 12px",fontSize:14,border:"1px solid #d1d5db",borderRadius:6,backgroundColor:P?"#fff":"#f3f4f6",cursor:P?"pointer":"not-allowed"},children:[(0,Le.jsx)("option",{value:"",children:"Seleccionar producto..."}),P&&O.filter(e=>(e.category||"Sin categor\xeda")===P).sort((e,t)=>(e.label||"").localeCompare(t.label||"")).map(e=>(0,Le.jsxs)("option",{value:e.id,children:[e.label||"Sin nombre"," - ",Number(e.price||0).toFixed(2),"\u20ac"]},e.id))]}),(0,Le.jsx)("button",{onClick:()=>{if(j){const e=O.find(e=>e.id===j);if(e){const t=[..._.productLines||[],{label:e.label,price:Number(e.price||0),qty:1,productId:e.id}];k((0,De.A)((0,De.A)({},_),{},{productLines:t})),M("")}}},disabled:!j,style:{padding:"8px 16px",fontSize:13,fontWeight:600,color:"#fff",backgroundColor:j?"#10b981":"#9ca3af",border:"none",borderRadius:6,cursor:j?"pointer":"not-allowed",whiteSpace:"nowrap"},children:"+ A\xf1adir"}),(0,Le.jsx)("button",{onClick:Q,style:{padding:"8px 16px",fontSize:13,fontWeight:600,color:"#fff",backgroundColor:"#6366f1",border:"none",borderRadius:6,cursor:"pointer",whiteSpace:"nowrap"},children:"+ Manual"})]})]}),(0,Le.jsx)("div",{children:(0,Le.jsx)("label",{style:{fontSize:13,fontWeight:500,color:"#374151",display:"block",marginBottom:8},children:"Productos en el ticket"})}),(_.productLines||[]).map((e,t)=>(0,Le.jsxs)("div",{style:{display:"flex",gap:8,alignItems:"center",marginBottom:8},children:[(0,Le.jsx)("input",{className:"small-input",placeholder:"Producto",value:e.label,onChange:e=>J(t,{label:e.target.value}),style:{flex:1}}),(0,Le.jsx)("input",{className:"small-input",type:"number",step:"0.01",placeholder:"Precio",value:e.price,onChange:e=>J(t,{price:Number(e.target.value)||0}),style:{width:100}}),(0,Le.jsx)("input",{className:"small-input",type:"number",placeholder:"Cant.",value:e.qty,min:"1",onChange:e=>J(t,{qty:Number(e.target.value)||1}),style:{width:70}}),(0,Le.jsx)("button",{onClick:()=>(e=>{k(t=>(0,De.A)((0,De.A)({},t),{},{productLines:t.productLines.filter((t,n)=>n!==e)}))})(t),style:{padding:"8px 12px",fontSize:13,fontWeight:600,color:"#fff",backgroundColor:"#ef4444",border:"none",borderRadius:6,cursor:"pointer"},children:"\ud83d\uddd1\ufe0f"})]},t)),(0,Le.jsxs)("div",{style:{marginTop:12,paddingTop:12,borderTop:"2px solid #e5e7eb",fontSize:16,fontWeight:600,color:"#059669",textAlign:"right"},children:["Total: ",(_.productLines||[]).reduce((e,t)=>e+Number(t.price||0)*Number(t.qty||1),0).toFixed(2),"\u20ac"]})]}),(0,Le.jsxs)("div",{style:{display:"flex",gap:12,justifyContent:"flex-end"},children:[(0,Le.jsx)("button",{onClick:$,style:{padding:"10px 20px",fontSize:14,fontWeight:600,color:"#374151",backgroundColor:"#f3f4f6",border:"none",borderRadius:8,cursor:"pointer"},children:"Cancelar"}),(0,Le.jsx)("button",{onClick:X,style:{padding:"10px 20px",fontSize:14,fontWeight:600,color:"#fff",backgroundColor:"#3b82f6",border:"none",borderRadius:8,cursor:"pointer"},children:"Guardar cambios"})]})]}):(0,Le.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:20},children:[(0,Le.jsxs)("div",{children:[(0,Le.jsx)("h4",{style:{margin:"0 0 12px 0",fontSize:14,fontWeight:600,color:"#374151"},children:"\ud83d\udce6 Productos"}),(0,Le.jsxs)("div",{style:{backgroundColor:"#fff",borderRadius:8,padding:12,border:"1px solid #e5e7eb"},children:[a.map((e,t)=>(0,Le.jsxs)("div",{style:{padding:"8px 0",borderBottom:t<a.length-1?"1px solid #f3f4f6":"none",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,Le.jsxs)("div",{children:[(0,Le.jsx)("div",{style:{fontSize:13,fontWeight:500,color:"#111827"},children:e.label}),(0,Le.jsxs)("div",{style:{fontSize:12,color:"#6b7280"},children:[e.qty," \xd7 ",Number(e.price||0).toFixed(2),"\u20ac"]})]}),(0,Le.jsxs)("div",{style:{fontSize:14,fontWeight:600,color:"#059669"},children:[(Number(e.qty||1)*Number(e.price||0)).toFixed(2),"\u20ac"]})]},t)),(0,Le.jsxs)("div",{style:{marginTop:12,paddingTop:12,borderTop:"2px solid #e5e7eb",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,Le.jsx)("span",{style:{fontSize:14,fontWeight:600,color:"#374151"},children:"Total:"}),(0,Le.jsxs)("span",{style:{fontSize:18,fontWeight:700,color:"#059669"},children:[s.toFixed(2),"\u20ac"]})]})]})]}),(0,Le.jsxs)("div",{children:[(0,Le.jsx)("h4",{style:{margin:"0 0 12px 0",fontSize:14,fontWeight:600,color:"#374151"},children:"\u2139\ufe0f Informaci\xf3n"}),(0,Le.jsxs)("div",{style:{backgroundColor:"#fff",borderRadius:8,padding:12,border:"1px solid #e5e7eb"},children:[(0,Le.jsxs)("div",{style:{marginBottom:12},children:[(0,Le.jsx)("div",{style:{fontSize:11,color:"#6b7280",marginBottom:4},children:"Tipo de gasto"}),(0,Le.jsx)("div",{style:{fontSize:13,fontWeight:500,color:"#111827"},children:"sociedad"===e.category?"\ud83c\udfdb\ufe0f Sociedad":"\ud83d\udc64 Personal"})]}),"sociedad"===e.category&&e.attendees&&(0,Le.jsxs)("div",{style:{marginBottom:12},children:[(0,Le.jsx)("div",{style:{fontSize:11,color:"#6b7280",marginBottom:4},children:"Asistentes"}),(0,Le.jsxs)("div",{style:{fontSize:13,fontWeight:500,color:"#111827"},children:["\ud83d\udc65 ",e.attendees," persona",1!==e.attendees?"s":""]})]}),"sociedad"===e.category&&e.totalGeneral&&(0,Le.jsxs)("div",{style:{marginBottom:12,padding:12,backgroundColor:"#fef3c7",borderRadius:6,border:"1px solid #fbbf24"},children:[(0,Le.jsx)("div",{style:{fontSize:11,color:"#92400e",marginBottom:8,fontWeight:600},children:"\ud83d\udcb0 Reparto del gasto"}),(0,Le.jsxs)("div",{style:{fontSize:12,color:"#78350f",marginBottom:4},children:[(0,Le.jsx)("strong",{children:"Total general:"})," ",e.totalGeneral.toFixed(2),"\u20ac"]}),(0,Le.jsxs)("div",{style:{fontSize:12,color:"#78350f",marginBottom:4},children:[(0,Le.jsx)("strong",{children:"Total asistentes:"})," ",e.totalAttendees," persona",1!==e.totalAttendees?"s":""]}),(0,Le.jsxs)("div",{style:{fontSize:12,color:"#78350f",marginBottom:4},children:[(0,Le.jsx)("strong",{children:"Por asistente:"})," ",e.amountPerAttendee.toFixed(2),"\u20ac"]}),(0,Le.jsxs)("div",{style:{fontSize:13,color:"#78350f",marginTop:8,paddingTop:8,borderTop:"1px solid #fbbf24",fontWeight:600},children:[(0,Le.jsxs)("strong",{children:["Tu parte (",e.attendees," asist.):"]})," ",e.amount.toFixed(2),"\u20ac"]}),e.participantes&&e.participantes.length>0&&(0,Le.jsxs)("div",{style:{marginTop:12,paddingTop:12,borderTop:"1px solid #fbbf24"},children:[(0,Le.jsx)("div",{style:{fontSize:11,color:"#92400e",marginBottom:6,fontWeight:600},children:"\ud83d\udc65 Lista de asistentes:"}),e.participantes.map((e,t)=>(0,Le.jsxs)("div",{style:{fontSize:12,color:"#78350f",marginBottom:3,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,Le.jsxs)("span",{children:["\u2022 ",e.nombre||e.email,e.attendees>1&&" (".concat(e.attendees," asist.)")]}),(0,Le.jsxs)("span",{style:{fontWeight:600},children:[e.amount.toFixed(2),"\u20ac"]})]},t))]})]}),"sociedad"===e.category&&e.eventoTexto&&(0,Le.jsxs)("div",{style:{marginBottom:12},children:[(0,Le.jsx)("div",{style:{fontSize:11,color:"#6b7280",marginBottom:4},children:"Evento"}),(0,Le.jsxs)("div",{style:{fontSize:13,fontWeight:500,color:"#111827"},children:["\ud83d\udcc5 ",e.eventoTexto]})]}),(0,Le.jsxs)("div",{style:{marginBottom:12},children:[(0,Le.jsx)("div",{style:{fontSize:11,color:"#6b7280",marginBottom:4},children:"Fecha y hora"}),(0,Le.jsxs)("div",{style:{fontSize:13,fontWeight:500,color:"#111827"},children:["\ud83d\udd52 ",c.toLocaleString("es-ES")]})]}),(null===o||void 0===o?void 0:o.isAdmin)&&(0,Le.jsxs)("div",{children:[(0,Le.jsx)("div",{style:{fontSize:11,color:"#6b7280",marginBottom:4},children:"Usuario"}),(0,Le.jsx)("div",{style:{fontSize:13,fontWeight:500,color:"#111827"},children:e.userEmail||"-"})]}),e.item&&(0,Le.jsxs)("div",{style:{marginTop:12,paddingTop:12,borderTop:"1px solid #f3f4f6"},children:[(0,Le.jsx)("div",{style:{fontSize:11,color:"#6b7280",marginBottom:4},children:"Descripci\xf3n"}),(0,Le.jsx)("div",{style:{fontSize:12,color:"#6b7280",fontStyle:"italic"},children:e.item})]})]})]})]})})})]},e.id)})})]})}),(0,Le.jsx)("div",{className:"tpv-history-mobile",children:V.map((e,t)=>{var n;const i=e.productLines||[],a=null!==(n=e.date)&&void 0!==n&&n.toDate?e.date.toDate():new Date(e.date),s=a.toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric"}),l=a.toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"});let c=0,u=0;if("sociedad"===e.category&&e.participantes&&Array.isArray(e.participantes)){c=i.reduce((e,t)=>e+Number(t.qty||0)*Number(t.price||0),0);const t=e.participantes.find(e=>e.uid===(null===r||void 0===r?void 0:r.uid));u=t?Number(t.amount||0):0}else c=i.reduce((e,t)=>e+Number(t.qty||0)*Number(t.price||0),0),u=c;return(0,Le.jsxs)("div",{style:{background:"#fff",border:"1px solid #e5e7eb",borderRadius:10,padding:12,marginBottom:10,boxShadow:"0 1px 3px rgba(0,0,0,0.08)"},children:[(0,Le.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:8},children:[(0,Le.jsxs)("div",{style:{flex:1},children:[(0,Le.jsx)("div",{style:{fontSize:12,color:"#6b7280",marginBottom:2},children:s}),(0,Le.jsx)("div",{style:{fontSize:11,color:"#9ca3af"},children:l})]}),(0,Le.jsxs)("div",{style:{fontSize:16,fontWeight:700,color:"#059669"},children:[null!==o&&void 0!==o&&o.isAdmin?c.toFixed(2):u.toFixed(2),"\u20ac"]})]}),(0,Le.jsx)("div",{style:{marginBottom:8},children:i.map((e,t)=>(0,Le.jsxs)("div",{style:{fontSize:11,color:"#374151",marginBottom:2},children:[(0,Le.jsxs)("span",{style:{fontWeight:600},children:[e.qty,"\xd7"]})," ",e.label,(0,Le.jsxs)("span",{style:{color:"#6b7280"},children:[" (",Number(e.price||0).toFixed(2),"\u20ac)"]})]},t))}),(0,Le.jsx)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:8},children:"sociedad"===e.category?(0,Le.jsx)("span",{style:{padding:"2px 6px",borderRadius:6,fontSize:9,fontWeight:600,backgroundColor:"#fff3cd",color:"#856404"},children:"\ud83c\udfdb\ufe0f Sociedad"}):(0,Le.jsx)("span",{style:{padding:"2px 6px",borderRadius:6,fontSize:9,fontWeight:600,backgroundColor:"#e0e7ff",color:"#3730a3"},children:"Personal"})}),(0,Le.jsxs)("div",{style:{display:"flex",gap:6},children:[((null===o||void 0===o?void 0:o.isAdmin)||e.userId===(null===r||void 0===r?void 0:r.uid)||e.uid===(null===r||void 0===r?void 0:r.uid))&&(0,Le.jsx)("button",{className:"btn-small",onClick:()=>Y(e),style:{flex:1,fontSize:11},children:"\u270f\ufe0f Editar"}),(null===o||void 0===o?void 0:o.isAdmin)&&(0,Le.jsx)("button",{className:"btn-ghost",onClick:()=>K(e.id),style:{flex:1,fontSize:11},children:"\ud83d\uddd1\ufe0f Eliminar"})]})]},e.id)})})]})]})]}),y&&(0,Le.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:(0,Le.jsxs)("div",{style:{background:"#fff",borderRadius:16,padding:32,maxWidth:900,width:"90%",maxHeight:"80vh",overflow:"auto",boxShadow:"0 20px 60px rgba(0,0,0,0.3)"},children:[(0,Le.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:24},children:[(0,Le.jsx)("h2",{style:{margin:0,fontSize:24,fontWeight:700,color:"#111827"},children:"\ud83d\udcc2 Historial de Descargas"}),(0,Le.jsx)("button",{onClick:()=>b(!1),style:{padding:"8px 16px",fontSize:14,fontWeight:600,color:"#6b7280",backgroundColor:"#f3f4f6",border:"none",borderRadius:8,cursor:"pointer"},children:"\u2715 Cerrar"})]}),0===w.length?(0,Le.jsx)("div",{style:{textAlign:"center",padding:40,color:"#6b7280"},children:"No hay descargas registradas a\xfan"}):(0,Le.jsx)("div",{style:{overflow:"auto"},children:(()=>{const e={};w.forEach(t=>{const n=t.archivo.match(/(\d{4})/),r=n?n[1]:"Sin a\xf1o";e[r]||(e[r]=[]),e[r].push(t)});return Object.keys(e).sort((e,t)=>t-e).map(t=>(0,Le.jsxs)("div",{style:{marginBottom:32},children:[(0,Le.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[(0,Le.jsxs)("button",{onClick:()=>{const e=new Set(R);e.has(t)?e.delete(t):e.add(t),N(e)},style:{margin:0,fontSize:18,fontWeight:700,color:"#374151",padding:"8px 16px",backgroundColor:"#f9fafb",borderRadius:8,borderLeft:"4px solid #3b82f6",flex:1,border:"none",cursor:"pointer",textAlign:"left",display:"flex",alignItems:"center",gap:8,transition:"background-color 0.2s"},onMouseEnter:e=>e.target.style.backgroundColor="#f3f4f6",onMouseLeave:e=>e.target.style.backgroundColor="#f9fafb",children:[(0,Le.jsx)("span",{style:{fontSize:14},children:R.has(t)?"\u25bc":"\u25b6"}),"\ud83d\udcc5 A\xf1o ",t]}),(null===o||void 0===o?void 0:o.isAdmin)&&"Sin a\xf1o"!==t&&(0,Le.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("\xbfEst\xe1s seguro de eliminar TODOS los archivos del a\xf1o ".concat(e,"?\n\nEsta acci\xf3n NO se puede deshacer.")))try{const t=(0,He.KR)(Pe.IG,"resumen-mensual/".concat(e)),r=(await(0,He._w)(t)).items.map(e=>(0,He.XR)(e));await Promise.all(r);const{db:i}=await Promise.resolve().then(n.bind(n,791)),{collection:o,query:a,where:s,getDocs:l,deleteDoc:c,doc:u}=await Promise.resolve().then(n.bind(n,32)),d=a(o(i,"historial-resumenes"),s("anio","==",parseInt(e))),h=(await l(d)).docs.map(e=>c(u(i,"historial-resumenes",e.id)));await Promise.all(h),await ne(),alert("Todos los archivos del a\xf1o ".concat(e," han sido eliminados"))}catch(t){console.error("Error al eliminar carpeta:",t),alert("Error al eliminar la carpeta. Algunos archivos pueden no haberse eliminado.")}})(t),style:{padding:"8px 16px",fontSize:13,fontWeight:600,color:"#fff",backgroundColor:"#dc2626",border:"none",borderRadius:6,cursor:"pointer",marginLeft:12,transition:"background-color 0.2s"},onMouseEnter:e=>e.target.style.backgroundColor="#b91c1c",onMouseLeave:e=>e.target.style.backgroundColor="#dc2626",children:"\ud83d\uddd1\ufe0f Eliminar a\xf1o completo"})]}),R.has(t)&&(0,Le.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",marginBottom:16},children:[(0,Le.jsx)("thead",{children:(0,Le.jsxs)("tr",{style:{borderBottom:"2px solid #e5e7eb",backgroundColor:"#f9fafb"},children:[(0,Le.jsx)("th",{style:{textAlign:"left",padding:"12px 16px",fontSize:14,fontWeight:600,color:"#374151"},children:"Fecha Descarga"}),(0,Le.jsx)("th",{style:{textAlign:"left",padding:"12px 16px",fontSize:14,fontWeight:600,color:"#374151"},children:"Archivo"}),(0,Le.jsx)("th",{style:{textAlign:"center",padding:"12px 16px",fontSize:14,fontWeight:600,color:"#374151"},children:"Tipo"}),(0,Le.jsx)("th",{style:{textAlign:"right",padding:"12px 16px",fontSize:14,fontWeight:600,color:"#374151"},children:"TPV"}),(0,Le.jsx)("th",{style:{textAlign:"right",padding:"12px 16px",fontSize:14,fontWeight:600,color:"#374151"},children:"Sociedad"}),(0,Le.jsx)("th",{style:{textAlign:"right",padding:"12px 16px",fontSize:14,fontWeight:600,color:"#374151"},children:"Total"}),(0,Le.jsx)("th",{style:{textAlign:"center",padding:"12px 16px",fontSize:14,fontWeight:600,color:"#374151"},children:"Acciones"})]})}),(0,Le.jsx)("tbody",{children:e[t].map(e=>(0,Le.jsxs)("tr",{style:{borderBottom:"1px solid #e5e7eb"},children:[(0,Le.jsx)("td",{style:{padding:"12px 16px",fontSize:13,color:"#6b7280"},children:e.fecha}),(0,Le.jsx)("td",{style:{padding:"12px 16px",fontSize:14,color:"#111827",fontWeight:500},children:e.archivo}),(0,Le.jsx)("td",{style:{padding:"12px 16px",textAlign:"center"},children:(0,Le.jsx)("span",{style:{display:"inline-block",padding:"4px 12px",borderRadius:12,fontSize:11,fontWeight:600,backgroundColor:"Autom\xe1tico"===e.tipo?"#dbeafe":"#f3e8ff",color:"Autom\xe1tico"===e.tipo?"#1e40af":"#6b21a8"},children:e.tipo})}),(0,Le.jsxs)("td",{style:{padding:"12px 16px",fontSize:14,color:"#8b5cf6",textAlign:"right",fontWeight:500},children:[null!=e.gastoTPV?e.gastoTPV.toFixed(2):"0.00","\u20ac"]}),(0,Le.jsxs)("td",{style:{padding:"12px 16px",fontSize:14,color:"#f59e0b",textAlign:"right",fontWeight:500},children:[null!=e.gastoSociedad?e.gastoSociedad.toFixed(2):"0.00","\u20ac"]}),(0,Le.jsxs)("td",{style:{padding:"12px 16px",fontSize:15,color:"#059669",textAlign:"right",fontWeight:700},children:[null!=e.total?e.total.toFixed(2):"0.00","\u20ac"]}),(0,Le.jsx)("td",{style:{padding:"12px 16px",textAlign:"center"},children:(0,Le.jsxs)("div",{style:{display:"flex",gap:8,justifyContent:"center"},children:[e.url?(0,Le.jsx)("a",{href:e.url,download:!0,target:"_blank",rel:"noopener noreferrer",style:{display:"inline-block",padding:"6px 12px",fontSize:13,fontWeight:600,color:"#fff",backgroundColor:"#10b981",border:"none",borderRadius:6,textDecoration:"none",cursor:"pointer"},children:"\ud83d\udce5"}):(0,Le.jsx)("span",{style:{fontSize:12,color:"#9ca3af"},children:"-"}),(null===o||void 0===o?void 0:o.isAdmin)&&(0,Le.jsx)("button",{onClick:()=>(async e=>{if(window.confirm('\xbfEst\xe1s seguro de eliminar el archivo "'.concat(e.archivo,'"?')))try{if(e.url){const t=e.archivo.match(/(\d{4})/),n=t?t[1]:"";if(n){const t=(0,He.KR)(Pe.IG,"resumen-mensual/".concat(n,"/").concat(e.archivo));await(0,He.XR)(t)}}const{db:t}=await Promise.resolve().then(n.bind(n,791)),{doc:r,deleteDoc:i}=await Promise.resolve().then(n.bind(n,32));await i(r(t,"historial-resumenes",e.id)),await ne(),alert("Archivo eliminado correctamente")}catch(t){console.error("Error al eliminar archivo:",t),alert("Error al eliminar el archivo. Puede que ya no exista en el servidor.");const n=JSON.parse(localStorage.getItem("historialDescargas")||"[]").filter(t=>t.id!==e.id);localStorage.setItem("historialDescargas",JSON.stringify(n)),x(n)}})(e),style:{padding:"6px 12px",fontSize:13,fontWeight:600,color:"#fff",backgroundColor:"#ef4444",border:"none",borderRadius:6,cursor:"pointer",transition:"background-color 0.2s"},onMouseEnter:e=>e.target.style.backgroundColor="#dc2626",onMouseLeave:e=>e.target.style.backgroundColor="#ef4444",children:"\ud83d\uddd1\ufe0f"})]})})]},e.id))})]})]},t))})()}),(0,Le.jsxs)("div",{style:{marginTop:24,padding:16,backgroundColor:"#f0f9ff",borderRadius:12,border:"1px solid #bfdbfe"},children:[(0,Le.jsx)("div",{style:{fontSize:14,color:"#1e40af",marginBottom:8,fontWeight:600},children:"\u2139\ufe0f Informaci\xf3n"}),(0,Le.jsxs)("div",{style:{fontSize:13,color:"#1e3a8a",lineHeight:1.6},children:["\u2022 Los archivos se generan autom\xe1ticamente el d\xeda 1 de cada mes",(0,Le.jsx)("br",{}),"\u2022 Los archivos se guardan en formato ",(0,Le.jsx)("strong",{children:"Excel (.xlsx)"})," en Firebase Storage organizados por a\xf1o (ej: /2025/resumen_01-2025.xlsx)",(0,Le.jsx)("br",{}),'\u2022 Puedes descargar cualquier archivo desde esta ventana haciendo clic en "Descargar"',(0,Le.jsx)("br",{}),"\u2022 El historial guarda TODOS los registros sin l\xedmite de tiempo"]})]})]})}),C&&(0,Le.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},children:(0,Le.jsxs)("div",{style:{backgroundColor:"#fff",borderRadius:16,padding:32,maxWidth:500,width:"90%",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.3)"},children:[(0,Le.jsx)("h3",{style:{margin:0,marginBottom:16,fontSize:24,fontWeight:700,color:"#111827",textAlign:"center"},children:"\ud83d\udcca Exportar a Excel"}),(0,Le.jsx)("p",{style:{margin:0,marginBottom:32,fontSize:15,color:"#6b7280",textAlign:"center",lineHeight:1.6},children:"Selecciona el formato de exportaci\xf3n que deseas:"}),(0,Le.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:16},children:[(0,Le.jsxs)("div",{style:{border:"2px solid #e5e7eb",borderRadius:12,padding:16,backgroundColor:"#f9fafb"},children:[(0,Le.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",gap:12,marginBottom:12},children:[(0,Le.jsxs)("div",{style:{flex:1},children:[(0,Le.jsx)("div",{style:{fontSize:16,fontWeight:600,color:"#111827",marginBottom:4},children:"\ud83d\udccb Exportaci\xf3n DETALLADA"}),(0,Le.jsx)("div",{style:{fontSize:13,color:"#6b7280"},children:"Todas las l\xedneas con productos y totales por usuario"})]}),(0,Le.jsx)("button",{onClick:e=>{e.stopPropagation(),alert(null!==o&&void 0!==o&&o.isAdmin?"\ud83d\udccb EXPORTACI\xd3N DETALLADA (ADMIN)\n\n\u2705 Incluye TODOS los tickets de TODOS los socios\n\u2705 Cada fila muestra: Usuario, Fecha, Tipo de gasto, Producto, Cantidad, Precio, Total\n\u2705 Ordenado por usuario y fecha\n\u2705 Ideal para an\xe1lisis detallado completo de la sociedad":"\ud83d\udccb EXPORTACI\xd3N DETALLADA (USUARIO)\n\n\u2705 Incluye SOLO TUS tickets\n\u2705 Gastos personales + tus participaciones en gastos de sociedad\n\u2705 Cada fila muestra: Fecha, Tipo de gasto, Producto, Cantidad, Precio, Total\n\u2705 Ordenado por fecha\n\u2705 Ideal para tu an\xe1lisis personal detallado")},style:{padding:"6px 12px",fontSize:14,fontWeight:600,color:"#3b82f6",backgroundColor:"#dbeafe",border:"1px solid #93c5fd",borderRadius:8,cursor:"pointer",whiteSpace:"nowrap"},title:"Ver informaci\xf3n sobre este tipo de exportaci\xf3n",children:"\u2139\ufe0f Info"})]}),(0,Le.jsx)("button",{onClick:()=>{I(!1),(()=>{const e={};u.forEach(t=>{const n="".concat(t.name||""," ").concat(t.surname||"").trim()||t.email;e[t.id]=n,e[t.email]=n});const t=[...V].sort((t,n)=>{var r,i;const o=e[t.uid]||e[t.userEmail]||t.userEmail||"Sin usuario",a=e[n.uid]||e[n.userEmail]||n.userEmail||"Sin usuario",s=o.localeCompare(a);return 0!==s?s:(null!==(r=t.date)&&void 0!==r&&r.toDate?t.date.toDate():new Date(t.date))-(null!==(i=n.date)&&void 0!==i&&i.toDate?n.date.toDate():new Date(n.date))}),n=[];n.push({Fecha:"Per\xedodo: ".concat(U," al ").concat(B),Usuario:"",Tipo:"",Producto:"",Cantidad:"","Precio Unit.":"",Subtotal:""}),n.push({Fecha:"",Usuario:"",Tipo:"",Producto:"",Cantidad:"","Precio Unit.":"",Subtotal:""});let r=null,i=0;t.forEach(t=>{var o;const a=t.productLines||[],s=(null!==(o=t.date)&&void 0!==o&&o.toDate?t.date.toDate():new Date(t.date)).toLocaleDateString("es-ES"),l=e[t.uid]||e[t.userEmail]||t.userEmail||"Sin usuario";r&&r!==l&&(n.push({Fecha:"",Usuario:"",Tipo:"",Producto:"TOTAL ".concat(r),Cantidad:"","Precio Unit.":"",Subtotal:parseFloat(i.toFixed(2))}),n.push({Fecha:"",Usuario:"",Tipo:"",Producto:"",Cantidad:"","Precio Unit.":"",Subtotal:""}),i=0),r=l,a.forEach((e,r)=>{const o=Number(e.qty||1),a=Number(e.price||0),c=o*a;i+=c,n.push({Fecha:s,Usuario:l,Tipo:"sociedad"===t.category?"SOCIEDAD":"Personal",Producto:e.label||"",Cantidad:o,"Precio Unit.":parseFloat(a.toFixed(2)),Subtotal:parseFloat(c.toFixed(2))})})}),r&&n.push({Fecha:"",Usuario:"",Tipo:"",Producto:"TOTAL ".concat(r),Cantidad:"","Precio Unit.":"",Subtotal:parseFloat(i.toFixed(2))}),n.push({Fecha:"",Usuario:"",Tipo:"",Producto:"",Cantidad:"","Precio Unit.":"",Subtotal:""});const o=V.reduce((e,t)=>e+(t.productLines||[]).reduce((e,t)=>e+Number(t.qty||1)*Number(t.price||0),0),0);n.push({Fecha:"",Usuario:"",Tipo:"",Producto:"TOTAL GENERAL",Cantidad:"","Precio Unit.":"",Subtotal:parseFloat(o.toFixed(2))});const a=Nc.json_to_sheet(n,{skipHeader:!1});a["!cols"]=[{wch:12},{wch:30},{wch:12},{wch:35},{wch:10},{wch:12},{wch:12}];const s=Nc.book_new();Nc.book_append_sheet(s,a,"Gastos Detalle");const l=bc(s,{bookType:"xlsx",type:"array"}),c=new Blob([l],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),d=document.createElement("a"),h=URL.createObjectURL(c),f="gastos_detalle_".concat(U,"_").concat(B,".xlsx");d.setAttribute("href",h),d.setAttribute("download",f),d.style.visibility="hidden",document.body.appendChild(d),d.click(),document.body.removeChild(d)})()},style:{width:"100%",padding:"12px 24px",fontSize:15,fontWeight:600,color:"#fff",backgroundColor:"#3b82f6",border:"none",borderRadius:8,cursor:"pointer",transition:"all 0.2s"},onMouseEnter:e=>{e.target.style.backgroundColor="#2563eb"},onMouseLeave:e=>{e.target.style.backgroundColor="#3b82f6"},children:"Exportar Detallada"})]}),(0,Le.jsxs)("div",{style:{border:"2px solid #e5e7eb",borderRadius:12,padding:16,backgroundColor:"#f9fafb"},children:[(0,Le.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",gap:12,marginBottom:12},children:[(0,Le.jsxs)("div",{style:{flex:1},children:[(0,Le.jsx)("div",{style:{fontSize:16,fontWeight:600,color:"#111827",marginBottom:4},children:"\ud83d\udcca Exportaci\xf3n SIMPLE"}),(0,Le.jsx)("div",{style:{fontSize:13,color:"#6b7280"},children:"Solo una l\xednea por socio con su total"})]}),(0,Le.jsx)("button",{onClick:e=>{e.stopPropagation(),alert(null!==o&&void 0!==o&&o.isAdmin?"\ud83d\udcca EXPORTACI\xd3N SIMPLE (ADMIN)\n\n\u2705 Incluye TODOS los socios\n\u2705 Una fila por socio con su total\n\u2705 Columnas: Usuario, Gastos Personales, Gastos Sociedad, Total\n\u2705 Ideal para resumen r\xe1pido de cobros/pagos":"\ud83d\udcca EXPORTACI\xd3N SIMPLE (USUARIO)\n\n\u2705 Incluye SOLO TU informaci\xf3n\n\u2705 Una fila con tus totales\n\u2705 Columnas: Tu nombre, Gastos Personales, Gastos Sociedad, Total\n\u2705 Ideal para resumen r\xe1pido de tus gastos")},style:{padding:"6px 12px",fontSize:14,fontWeight:600,color:"#10b981",backgroundColor:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:8,cursor:"pointer",whiteSpace:"nowrap"},title:"Ver informaci\xf3n sobre este tipo de exportaci\xf3n",children:"\u2139\ufe0f Info"})]}),(0,Le.jsx)("button",{onClick:()=>{I(!1),(()=>{const e={};u.forEach(t=>{const n="".concat(t.name||""," ").concat(t.surname||"").trim()||t.email;e[t.id]=n,e[t.email]=n});const t={};V.forEach(n=>{const r=e[n.uid]||e[n.userEmail]||n.userEmail||"Sin usuario";t[r]||(t[r]={individual:0,comun:0});const i=(n.productLines||[]).reduce((e,t)=>e+Number(t.qty||1)*Number(t.price||0),0);"sociedad"===n.category?t[r].comun+=i:t[r].individual+=i});const n=new Date(U).toLocaleDateString("es-ES",{month:"long",year:"numeric"}),r=[];r.push({Mes:n.charAt(0).toUpperCase()+n.slice(1),Nombre:"","Gasto Individual":"","Gasto Com\xfan":"",Total:""}),r.push({Mes:"",Nombre:"","Gasto Individual":"","Gasto Com\xfan":"",Total:""}),Object.entries(t).sort((e,t)=>{let[n]=e,[r]=t;return n.localeCompare(r)}).forEach(e=>{let[t,i]=e;const o=i.individual+i.comun;r.push({Mes:n.charAt(0).toUpperCase()+n.slice(1),Nombre:t,"Gasto Individual":parseFloat(i.individual.toFixed(2)),"Gasto Com\xfan":parseFloat(i.comun.toFixed(2)),Total:parseFloat(o.toFixed(2))})});const i=Object.values(t).reduce((e,t)=>e+t.individual,0),o=Object.values(t).reduce((e,t)=>e+t.comun,0),a=i+o;r.push({Mes:"",Nombre:"","Gasto Individual":"","Gasto Com\xfan":"",Total:""}),r.push({Mes:"",Nombre:"TOTAL","Gasto Individual":parseFloat(i.toFixed(2)),"Gasto Com\xfan":parseFloat(o.toFixed(2)),Total:parseFloat(a.toFixed(2))});const s=Nc.json_to_sheet(r,{skipHeader:!1});s["!cols"]=[{wch:20},{wch:30},{wch:18},{wch:18},{wch:15}];const l=Nc.book_new();Nc.book_append_sheet(l,s,"Gastos Simple");const c=bc(l,{bookType:"xlsx",type:"array"}),d=new Blob([c],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),h=document.createElement("a"),f=URL.createObjectURL(d),p="gastos_simple_".concat(U,"_").concat(B,".xlsx");h.setAttribute("href",f),h.setAttribute("download",p),h.style.visibility="hidden",document.body.appendChild(h),h.click(),document.body.removeChild(h)})()},style:{width:"100%",padding:"12px 24px",fontSize:15,fontWeight:600,color:"#fff",backgroundColor:"#10b981",border:"none",borderRadius:8,cursor:"pointer",transition:"all 0.2s"},onMouseEnter:e=>{e.target.style.backgroundColor="#059669"},onMouseLeave:e=>{e.target.style.backgroundColor="#10b981"},children:"Exportar Simple"})]}),(0,Le.jsx)("button",{onClick:()=>I(!1),style:{padding:"12px 24px",fontSize:15,fontWeight:500,color:"#6b7280",backgroundColor:"transparent",border:"2px solid #d1d5db",borderRadius:12,cursor:"pointer",transition:"all 0.2s",marginTop:8},onMouseEnter:e=>{e.target.style.borderColor="#9ca3af",e.target.style.color="#374151"},onMouseLeave:e=>{e.target.style.borderColor="#d1d5db",e.target.style.color="#6b7280"},children:"Cancelar"})]})]})})]}):(0,Le.jsx)("div",{style:{padding:20},children:"No autenticado"})}function Dc(e){let{profile:t}=e;const[n,r]=(0,i.useState)([]),[o,a]=(0,i.useState)(!0),[s,l]=(0,i.useState)(null),[c,u]=(0,i.useState)({label:"",category:"",price:0,active:!0}),[d,h]=(0,i.useState)({label:"",category:"",price:0,active:!0}),[f,p]=(0,i.useState)(""),[g,m]=(0,i.useState)("label"),[v,y]=(0,i.useState)("asc"),[b,w]=(0,i.useState)(!1);re();(0,i.useEffect)(()=>{const e=(0,Pe.HG)(e=>{r(e),a(!1)},!1);return()=>e&&e()},[]);const x=()=>{l(null),u({label:"",category:"",price:0,active:!0})},S=e=>{g===e?y("asc"===v?"desc":"asc"):(m(e),y("asc"))},E=n.filter(e=>{const t=f.toLowerCase();return(e.label||"").toLowerCase().includes(t)||(e.category||"").toLowerCase().includes(t)}).sort((e,t)=>{let n,r;return"price"===g?(n=Number(e.price||0),r=Number(t.price||0)):"active"===g?(n=e.active?1:0,r=t.active?1:0):(n=(e[g]||"").toString().toLowerCase(),r=(t[g]||"").toString().toLowerCase()),n<r?"asc"===v?-1:1:n>r?"asc"===v?1:-1:0}),T=[...new Set(n.map(e=>e.category).filter(Boolean))].sort();return(0,Le.jsxs)("div",{style:{padding:12},children:[(0,Le.jsx)("div",{style:{background:"linear-gradient(135deg, #1976d2 0%, #1565c0 100%)",color:"#fff",padding:"16px 20px",borderRadius:"12px",marginBottom:20,boxShadow:"0 4px 12px rgba(25, 118, 210, 0.3)"},children:(0,Le.jsx)("h3",{style:{margin:0,fontSize:24,fontWeight:700},children:"Gesti\xf3n de Productos"})}),(0,Le.jsxs)("div",{style:{marginBottom:12},children:[(0,Le.jsx)("div",{style:{background:"linear-gradient(135deg, #1976d2 0%, #1565c0 100%)",color:"#fff",padding:"12px 16px",borderRadius:"8px",marginBottom:12},children:(0,Le.jsx)("h4",{style:{margin:0,fontSize:18,fontWeight:600},children:"A\xf1adir producto"})}),(0,Le.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:8},children:[(0,Le.jsx)("input",{className:"full-input",placeholder:"Nombre",value:d.label,onChange:e=>h(t=>(0,De.A)((0,De.A)({},t),{},{label:e.target.value}))}),b?(0,Le.jsxs)("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[(0,Le.jsx)("input",{className:"full-input",placeholder:"Nueva categor\xeda",value:d.category,onChange:e=>h(t=>(0,De.A)((0,De.A)({},t),{},{category:e.target.value})),autoFocus:!0}),(0,Le.jsx)("button",{className:"btn-ghost",onClick:()=>{w(!1),h(e=>(0,De.A)((0,De.A)({},e),{},{category:""}))},style:{whiteSpace:"nowrap"},children:"Cancelar"})]}):(0,Le.jsxs)("select",{className:"full-input",value:d.category,onChange:e=>{var t;"__NEW__"===(t=e.target.value)?(w(!0),h(e=>(0,De.A)((0,De.A)({},e),{},{category:""}))):(w(!1),h(e=>(0,De.A)((0,De.A)({},e),{},{category:t})))},style:{padding:"8px",fontSize:14,border:"1px solid #ddd",borderRadius:4},children:[(0,Le.jsx)("option",{value:"",children:"Seleccionar categor\xeda..."}),T.map(e=>(0,Le.jsx)("option",{value:e,children:e},e)),(0,Le.jsx)("option",{value:"__NEW__",style:{fontWeight:"bold",color:"#1976d2"},children:"+ Nueva categor\xeda..."})]}),(0,Le.jsx)("input",{className:"full-input",placeholder:"Precio",type:"number",step:"0.01",value:d.price,onChange:e=>h(t=>(0,De.A)((0,De.A)({},t),{},{price:e.target.value}))}),(0,Le.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,Le.jsx)("input",{type:"checkbox",checked:d.active,onChange:e=>h(t=>(0,De.A)((0,De.A)({},t),{},{active:e.target.checked}))}),"Activo"]}),(0,Le.jsx)("button",{className:"btn-primary full",onClick:async()=>{if(d.label)try{await(0,Pe.Bj)({label:d.label,category:d.category,price:Number(d.price||0),active:!!d.active}),h({label:"",category:"",price:0,active:!0}),alert("Producto a\xf1adido")}catch(e){console.error("addProduct error:",e),alert("Error a\xf1adiendo producto: "+(e.message||e))}else alert("Introduce nombre")},children:"A\xf1adir producto"})]})]}),o?(0,Le.jsx)("div",{children:"Cargando..."}):(0,Le.jsxs)(Le.Fragment,{children:[(0,Le.jsxs)("div",{style:{marginBottom:16},children:[(0,Le.jsx)("input",{type:"text",placeholder:"\ud83d\udd0d Buscar por nombre o categor\xeda...",value:f,onChange:e=>p(e.target.value),style:{width:"100%",padding:"12px 16px",fontSize:14,border:"2px solid #e5e7eb",borderRadius:8,outline:"none",transition:"border-color 0.2s"},onFocus:e=>e.target.style.borderColor="#1976d2",onBlur:e=>e.target.style.borderColor="#e5e7eb"}),(0,Le.jsxs)("div",{style:{marginTop:8,fontSize:13,color:"#6b7280"},children:["Mostrando ",E.length," de ",n.length," productos"]})]}),(0,Le.jsx)("div",{style:{overflowX:"auto"},children:(0,Le.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[(0,Le.jsx)("thead",{children:(0,Le.jsxs)("tr",{style:{background:"linear-gradient(135deg, #1976d2 0%, #1565c0 100%)",color:"#fff !important"},children:[(0,Le.jsxs)("th",{onClick:()=>S("label"),style:{textAlign:"left",padding:12,fontWeight:600,color:"#fff",borderBottom:"none",cursor:"pointer",userSelect:"none"},children:["Nombre ","label"===g&&("asc"===v?"\u2191":"\u2193")]}),(0,Le.jsxs)("th",{onClick:()=>S("category"),style:{textAlign:"left",padding:12,fontWeight:600,color:"#fff",borderBottom:"none",cursor:"pointer",userSelect:"none"},children:["Categor\xeda ","category"===g&&("asc"===v?"\u2191":"\u2193")]}),(0,Le.jsxs)("th",{onClick:()=>S("price"),style:{textAlign:"right",padding:12,fontWeight:600,color:"#fff",borderBottom:"none",cursor:"pointer",userSelect:"none"},children:["Precio ","price"===g&&("asc"===v?"\u2191":"\u2193")]}),(0,Le.jsxs)("th",{onClick:()=>S("active"),style:{textAlign:"center",padding:12,fontWeight:600,color:"#fff",borderBottom:"none",cursor:"pointer",userSelect:"none"},children:["Activo ","active"===g&&("asc"===v?"\u2191":"\u2193")]}),(0,Le.jsx)("th",{style:{textAlign:"left",padding:12,fontWeight:600,color:"#fff",borderBottom:"none"},children:"Acciones"})]})}),(0,Le.jsx)("tbody",{children:E.map(e=>(0,Le.jsxs)("tr",{style:{borderTop:"1px solid #eee"},children:[(0,Le.jsx)("td",{style:{padding:8},children:s===e.id?(0,Le.jsx)("input",{className:"full-input",value:c.label,onChange:e=>u(t=>(0,De.A)((0,De.A)({},t),{},{label:e.target.value}))}):e.label}),(0,Le.jsx)("td",{style:{padding:8},children:s===e.id?(0,Le.jsx)("input",{className:"full-input",value:c.category,onChange:e=>u(t=>(0,De.A)((0,De.A)({},t),{},{category:e.target.value}))}):e.category||"\u2014"}),(0,Le.jsx)("td",{style:{padding:8,textAlign:"right"},children:s===e.id?(0,Le.jsx)("input",{className:"small-input",type:"number",step:"0.01",value:c.price,onChange:e=>u(t=>(0,De.A)((0,De.A)({},t),{},{price:e.target.value}))}):Number(e.price||0).toFixed(2)+" \u20ac"}),(0,Le.jsx)("td",{style:{padding:8,textAlign:"center"},children:s===e.id?(0,Le.jsx)("input",{type:"checkbox",checked:c.active,onChange:e=>u(t=>(0,De.A)((0,De.A)({},t),{},{active:e.target.checked}))}):e.active?"S\xed":"No"}),(0,Le.jsx)("td",{style:{padding:8},children:s===e.id?(0,Le.jsxs)(Le.Fragment,{children:[(0,Le.jsx)("button",{className:"btn-primary",onClick:()=>(async e=>{try{await(0,Pe.vc)(e,{label:c.label,category:c.category,price:Number(c.price||0),active:c.active}),x(),alert("Producto actualizado")}catch(t){console.error("updateProduct error:",t),alert("Error actualizando producto: "+(t.message||t))}})(e.id),children:"Guardar"}),(0,Le.jsx)("button",{className:"btn-ghost",onClick:x,style:{marginLeft:8},children:"Cancelar"})]}):(0,Le.jsxs)(Le.Fragment,{children:[(0,Le.jsx)("button",{className:"btn-small",onClick:()=>(e=>{l(e.id),u({label:e.label||"",category:e.category||"",price:Number(e.price||0),active:!!e.active})})(e),children:"Editar"}),(0,Le.jsx)("button",{className:"btn-ghost",onClick:()=>(async e=>{if(confirm('Borrar producto "'.concat(e.label,'"?')))try{await(0,Pe.DD)(e.id),alert("Producto borrado")}catch(t){console.error("deleteProduct error:",t),alert("Error borrando producto: "+(t.message||t))}})(e),style:{marginLeft:8},children:"Borrar"})]})})]},e.id))})]})})]})]})}const Pc=["id","email"];function Lc(e){let{user:t,profile:n}=e;const[r,o]=(0,i.useState)([]),[a,s]=(0,i.useState)(!0),[l,c]=(0,i.useState)(""),[u,d]=(0,i.useState)(null),[h,f]=(0,i.useState)("");re();(0,i.useEffect)(()=>{p()},[]);const p=async()=>{try{s(!0);const e=await(0,Pe.gU)();o(e)}catch(e){console.error("Error cargando usuarios:",e),f("Error cargando usuarios: "+e.message)}finally{s(!1)}},g=r.filter(e=>{const t=l.toLowerCase();return(e.name||"").toLowerCase().includes(t)||(e.lastName||"").toLowerCase().includes(t)||(e.email||"").toLowerCase().includes(t)||(e.phone||"").toLowerCase().includes(t)}),m=e=>{if(!e)return"N/A";try{return(e.toDate?e.toDate():new Date(e)).toLocaleDateString("es-ES")}catch(t){return"N/A"}};return a?(0,Le.jsx)("div",{style:{padding:16},children:"Cargando usuarios..."}):(0,Le.jsxs)("div",{style:{padding:16},children:[(0,Le.jsx)("h2",{children:"Gesti\xf3n de Socios"}),h&&(0,Le.jsxs)("div",{style:{padding:12,margin:"12px 0",backgroundColor:h.includes("Error")?"#ffebee":"#e8f5e8",color:h.includes("Error")?"#c62828":"#2e7d32",borderRadius:4,border:"1px solid ".concat(h.includes("Error")?"#ffcdd2":"#c8e6c9")},children:[h,(0,Le.jsx)("button",{onClick:()=>f(""),style:{float:"right",background:"none",border:"none",cursor:"pointer",fontSize:16},children:"\xd7"})]}),(0,Le.jsx)("div",{style:{marginBottom:16},children:(0,Le.jsx)("input",{type:"text",placeholder:"Buscar por nombre, apellidos, email o tel\xe9fono...",value:l,onChange:e=>c(e.target.value),style:{width:"100%",maxWidth:400,padding:8,border:"1px solid #ddd",borderRadius:4}})}),(0,Le.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:12,marginBottom:20},children:[(0,Le.jsxs)("div",{style:{padding:12,backgroundColor:"#f5f5f5",borderRadius:6,textAlign:"center"},children:[(0,Le.jsx)("div",{style:{fontSize:24,fontWeight:"bold",color:"#1976d2"},children:g.length}),(0,Le.jsxs)("div",{style:{fontSize:12,color:"#666"},children:["Socios",l?" (filtrados)":""]})]}),(0,Le.jsxs)("div",{style:{padding:12,backgroundColor:"#f5f5f5",borderRadius:6,textAlign:"center"},children:[(0,Le.jsx)("div",{style:{fontSize:24,fontWeight:"bold",color:"#388e3c"},children:g.filter(e=>e.isAdmin).length}),(0,Le.jsx)("div",{style:{fontSize:12,color:"#666"},children:"Administradores"})]})]}),(0,Le.jsx)("div",{style:{overflowX:"auto"},children:(0,Le.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",backgroundColor:"#fff",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[(0,Le.jsx)("thead",{children:(0,Le.jsxs)("tr",{style:{backgroundColor:"#f8f9fa"},children:[(0,Le.jsx)("th",{style:{padding:12,textAlign:"left",borderBottom:"2px solid #dee2e6"},children:"Usuario"}),(0,Le.jsx)("th",{style:{padding:12,textAlign:"left",borderBottom:"2px solid #dee2e6"},children:"Contacto"}),(0,Le.jsx)("th",{style:{padding:12,textAlign:"left",borderBottom:"2px solid #dee2e6"},children:"Rol"}),(0,Le.jsx)("th",{style:{padding:12,textAlign:"left",borderBottom:"2px solid #dee2e6"},children:"Registro"}),(0,Le.jsx)("th",{style:{padding:12,textAlign:"center",borderBottom:"2px solid #dee2e6"},children:"Acciones"})]})}),(0,Le.jsx)("tbody",{children:g.map(e=>(0,Le.jsxs)("tr",{style:{borderBottom:"1px solid #dee2e6"},children:[(0,Le.jsxs)("td",{style:{padding:12},children:[(0,Le.jsxs)("div",{style:{fontWeight:"bold"},children:[e.name||"Sin nombre"," ",e.lastName||""]}),(0,Le.jsx)("div",{style:{fontSize:12,color:"#666"},children:e.email})]}),(0,Le.jsxs)("td",{style:{padding:12},children:[(0,Le.jsx)("div",{children:e.phone||"Sin tel\xe9fono"}),(0,Le.jsxs)("div",{style:{fontSize:12,color:"#666"},children:["Nacimiento: ",e.birthDate||"N/A"]})]}),(0,Le.jsx)("td",{style:{padding:12},children:(0,Le.jsx)("span",{style:{padding:"4px 8px",borderRadius:12,fontSize:12,backgroundColor:e.isAdmin?"#e3f2fd":"#f3e5f5",color:e.isAdmin?"#1565c0":"#7b1fa2"},children:e.isAdmin?"Admin":"Usuario"})}),(0,Le.jsx)("td",{style:{padding:12},children:(0,Le.jsx)("div",{style:{fontSize:12,color:"#666"},children:m(e.createdAt)})}),(0,Le.jsx)("td",{style:{padding:12,textAlign:"center"},children:(0,Le.jsxs)("div",{style:{display:"flex",gap:4,justifyContent:"center",flexWrap:"wrap"},children:[(0,Le.jsx)("button",{onClick:()=>(e=>{d({id:e.id,name:e.name||"",lastName:e.lastName||"",phone:e.phone||"",birthDate:e.birthDate||"",isAdmin:e.isAdmin||!1,email:e.email||""})})(e),style:{padding:"4px 8px",fontSize:12,backgroundColor:"#1976d2",color:"#fff",border:"none",borderRadius:4,cursor:"pointer"},children:"Editar"}),(0,Le.jsx)("button",{onClick:()=>(async(e,t)=>{try{const n=await(0,Pe.cw)(e);n.success?f("Email de restablecimiento enviado a ".concat(t," (").concat(e,")")):f("Error: ".concat(n.message))}catch(n){console.error("Error restableciendo contrase\xf1a:",n),f("Error enviando email de restablecimiento")}})(e.email,e.name||"usuario"),style:{padding:"4px 8px",fontSize:12,backgroundColor:"#f57c00",color:"#fff",border:"none",borderRadius:4,cursor:"pointer"},children:"Reset Pass"}),(0,Le.jsx)("button",{onClick:()=>(async(e,t,n)=>{if(window.confirm("\xbfEst\xe1s seguro de que quieres eliminar a ".concat(t," (").concat(n,")?\n\nEsta acci\xf3n NO se puede deshacer.")))try{await(0,Pe.hG)(e),f("Usuario ".concat(t," eliminado correctamente")),p()}catch(r){console.error("Error eliminando usuario:",r),f("Error eliminando usuario: ".concat(r.message))}})(e.id,e.name||"usuario",e.email),style:{padding:"4px 8px",fontSize:12,backgroundColor:"#d32f2f",color:"#fff",border:"none",borderRadius:4,cursor:"pointer"},children:"Borrar"})]})})]},e.id))})]})}),0===g.length&&(0,Le.jsx)("div",{style:{textAlign:"center",padding:40,color:"#666"},children:l?"No se encontraron usuarios que coincidan con la b\xfasqueda":"No hay usuarios registrados"}),u&&(0,Le.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:(0,Le.jsxs)("div",{style:{backgroundColor:"#fff",padding:24,borderRadius:8,maxWidth:500,width:"90%",maxHeight:"90vh",overflow:"auto"},children:[(0,Le.jsx)("h3",{children:"Editar Usuario"}),(0,Le.jsxs)("div",{style:{marginBottom:12},children:[(0,Le.jsx)("label",{style:{display:"block",marginBottom:4,fontWeight:"bold"},children:"Email (no editable):"}),(0,Le.jsx)("input",{type:"email",value:u.email,disabled:!0,style:{width:"100%",padding:8,border:"1px solid #ddd",borderRadius:4,backgroundColor:"#f5f5f5"}})]}),(0,Le.jsxs)("div",{style:{marginBottom:12},children:[(0,Le.jsx)("label",{style:{display:"block",marginBottom:4,fontWeight:"bold"},children:"Nombre:"}),(0,Le.jsx)("input",{type:"text",value:u.name,onChange:e=>d((0,De.A)((0,De.A)({},u),{},{name:e.target.value})),style:{width:"100%",padding:8,border:"1px solid #ddd",borderRadius:4}})]}),(0,Le.jsxs)("div",{style:{marginBottom:12},children:[(0,Le.jsx)("label",{style:{display:"block",marginBottom:4,fontWeight:"bold"},children:"Apellidos:"}),(0,Le.jsx)("input",{type:"text",value:u.lastName,onChange:e=>d((0,De.A)((0,De.A)({},u),{},{lastName:e.target.value})),style:{width:"100%",padding:8,border:"1px solid #ddd",borderRadius:4}})]}),(0,Le.jsxs)("div",{style:{marginBottom:12},children:[(0,Le.jsx)("label",{style:{display:"block",marginBottom:4,fontWeight:"bold"},children:"Tel\xe9fono:"}),(0,Le.jsx)("input",{type:"tel",value:u.phone,onChange:e=>d((0,De.A)((0,De.A)({},u),{},{phone:e.target.value})),style:{width:"100%",padding:8,border:"1px solid #ddd",borderRadius:4}})]}),(0,Le.jsxs)("div",{style:{marginBottom:12},children:[(0,Le.jsx)("label",{style:{display:"block",marginBottom:4,fontWeight:"bold"},children:"Fecha de Nacimiento:"}),(0,Le.jsx)("input",{type:"date",value:u.birthDate,onChange:e=>d((0,De.A)((0,De.A)({},u),{},{birthDate:e.target.value})),style:{width:"100%",padding:8,border:"1px solid #ddd",borderRadius:4}})]}),(0,Le.jsx)("div",{style:{marginBottom:20},children:(0,Le.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,Le.jsx)("input",{type:"checkbox",checked:u.isAdmin,onChange:e=>d((0,De.A)((0,De.A)({},u),{},{isAdmin:e.target.checked}))}),(0,Le.jsx)("span",{style:{fontWeight:"bold"},children:"Es Administrador"})]})}),(0,Le.jsxs)("div",{style:{display:"flex",gap:12,justifyContent:"flex-end"},children:[(0,Le.jsx)("button",{onClick:()=>d(null),style:{padding:"8px 16px",backgroundColor:"#666",color:"#fff",border:"none",borderRadius:4,cursor:"pointer"},children:"Cancelar"}),(0,Le.jsx)("button",{onClick:async()=>{try{if(!u)return;const{id:e,email:t}=u,n=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(u,Pc);await(0,Pe.eg)(e,n),f("Usuario actualizado correctamente"),d(null),p()}catch(e){console.error("Error actualizando usuario:",e),f("Error actualizando usuario: "+e.message)}},style:{padding:"8px 16px",backgroundColor:"#1976d2",color:"#fff",border:"none",borderRadius:4,cursor:"pointer"},children:"Guardar"})]})]})})]})}function jc(e){var t,n;let{user:r,profile:o,onProfileUpdate:a}=e;const[s,l]=(0,i.useState)(!1),[c,u]=(0,i.useState)({name:"",surname:"",phone:"",dob:"",alias:""}),[d,h]=(0,i.useState)(!1),[f,p]=(0,i.useState)(!1),[g,m]=(0,i.useState)(!1);re();(0,i.useEffect)(()=>{o&&u({name:o.name||"",surname:o.surname||"",phone:o.phone||"",dob:o.dob||"",alias:o.alias||""})},[o]);const v=e=>{u((0,De.A)((0,De.A)({},c),{},{[e.target.name]:e.target.value}))},y=!(null!==o&&void 0!==o&&o.name)||!(null!==o&&void 0!==o&&o.surname)||!(null!==o&&void 0!==o&&o.phone)||!(null!==o&&void 0!==o&&o.dob);return(0,Le.jsxs)("div",{style:{padding:16,maxWidth:600,margin:"0 auto"},children:[(0,Le.jsx)("div",{style:{display:"flex",alignItems:"center",gap:12,marginBottom:24},children:(0,Le.jsx)("h2",{style:{margin:0},children:"Mi Perfil"})}),y&&(0,Le.jsxs)("div",{style:{background:"#fff3cd",border:"2px solid #ffc107",borderRadius:"8px",padding:"16px",marginBottom:20,color:"#856404"},children:[(0,Le.jsx)("strong",{children:"\u26a0\ufe0f Perfil incompleto"}),(0,Le.jsx)("p",{style:{margin:"8px 0 0 0",fontSize:14},children:"Debes completar todos los campos de tu perfil para poder usar la aplicaci\xf3n."})]}),s?(0,Le.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),c.name&&c.surname&&c.phone&&c.dob){h(!0);try{await(0,Pe.eg)(r.uid,c),alert("Perfil actualizado correctamente"),l(!1),a&&a()}catch(t){console.error("Error actualizando perfil:",t),alert("Error actualizando perfil: "+(t.message||t))}finally{h(!1)}}else alert("Todos los campos son obligatorios. Por favor, completa tu perfil.")},className:"card",style:{padding:20},children:[(0,Le.jsxs)("div",{style:{marginBottom:16},children:[(0,Le.jsx)("label",{style:{display:"block",fontSize:13,marginBottom:4,color:"#666"},children:"Email (no editable)"}),(0,Le.jsx)("input",{type:"text",value:null===r||void 0===r?void 0:r.email,disabled:!0,className:"full-input",style:{background:"#f5f5f5",cursor:"not-allowed"}})]}),(0,Le.jsxs)("div",{style:{marginBottom:16},children:[(0,Le.jsx)("label",{style:{display:"block",fontSize:13,marginBottom:4},children:"Nombre *"}),(0,Le.jsx)("input",{type:"text",name:"name",value:c.name,onChange:v,required:!0,className:"full-input",placeholder:"Introduce tu nombre"})]}),(0,Le.jsxs)("div",{style:{marginBottom:16},children:[(0,Le.jsx)("label",{style:{display:"block",fontSize:13,marginBottom:4},children:"Apellidos *"}),(0,Le.jsx)("input",{type:"text",name:"surname",value:c.surname,onChange:v,required:!0,className:"full-input",placeholder:"Introduce tus apellidos"})]}),(0,Le.jsxs)("div",{style:{marginBottom:16},children:[(0,Le.jsx)("label",{style:{display:"block",fontSize:13,marginBottom:4},children:"Alias (nombre corto)"}),(0,Le.jsx)("input",{type:"text",name:"alias",value:c.alias,onChange:v,className:"full-input",placeholder:"Ej: Pepe, Juan, Ana...",maxLength:"15"}),(0,Le.jsx)("small",{style:{fontSize:11,color:"#666",display:"block",marginTop:4},children:"Nombre corto para mostrarse en listas"})]}),(0,Le.jsxs)("div",{style:{marginBottom:16},children:[(0,Le.jsx)("label",{style:{display:"block",fontSize:13,marginBottom:4},children:"Tel\xe9fono *"}),(0,Le.jsx)("input",{type:"tel",name:"phone",value:c.phone,onChange:v,required:!0,className:"full-input",placeholder:"Introduce tu tel\xe9fono"})]}),(0,Le.jsxs)("div",{style:{marginBottom:20},children:[(0,Le.jsx)("label",{style:{display:"block",fontSize:13,marginBottom:4},children:"Fecha de nacimiento *"}),(0,Le.jsx)("input",{type:"date",name:"dob",value:c.dob,onChange:v,required:!0,className:"full-input"})]}),(0,Le.jsxs)("div",{style:{display:"flex",gap:8},children:[(0,Le.jsx)("button",{type:"submit",className:"btn-primary",disabled:d,style:{flex:1},children:d?"Guardando...":"\ud83d\udcbe Guardar cambios"}),(0,Le.jsx)("button",{type:"button",className:"btn-ghost",onClick:()=>{u({name:(null===o||void 0===o?void 0:o.name)||"",surname:(null===o||void 0===o?void 0:o.surname)||"",phone:(null===o||void 0===o?void 0:o.phone)||"",dob:(null===o||void 0===o?void 0:o.dob)||"",alias:(null===o||void 0===o?void 0:o.alias)||""}),l(!1)},disabled:d,style:{flex:1},children:"\u274c Cancelar"})]})]}):(0,Le.jsxs)("div",{className:"card",style:{padding:20},children:[(0,Le.jsxs)("div",{style:{marginBottom:24,textAlign:"center"},children:[(0,Le.jsx)("div",{style:{width:120,height:120,borderRadius:"50%",overflow:"hidden",margin:"0 auto 16px",background:null!==o&&void 0!==o&&o.photoURL?"transparent":"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",display:"flex",alignItems:"center",justifyContent:"center",border:"4px solid #e5e7eb",cursor:null!==o&&void 0!==o&&o.photoURL?"pointer":"default"},onClick:()=>(null===o||void 0===o?void 0:o.photoURL)&&m(!0),children:null!==o&&void 0!==o&&o.photoURL?(0,Le.jsx)("img",{src:o.photoURL,alt:"Foto de perfil",style:{width:"100%",height:"100%",objectFit:"cover"}}):(0,Le.jsx)("span",{style:{fontSize:48,color:"#fff"},children:(null===o||void 0===o||null===(t=o.name)||void 0===t||null===(n=t.charAt(0))||void 0===n?void 0:n.toUpperCase())||"\ud83d\udc64"})}),(0,Le.jsxs)("div",{style:{display:"flex",gap:8,justifyContent:"center",flexWrap:"wrap"},children:[(0,Le.jsxs)("label",{style:{padding:"8px 16px",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"#fff",borderRadius:8,cursor:f?"not-allowed":"pointer",fontSize:14,fontWeight:600,opacity:f?.6:1},children:[f?"\u23f3 Subiendo...":"\ud83d\udcf7 Cambiar foto",(0,Le.jsx)("input",{type:"file",accept:"image/*",capture:"user",onChange:async e=>{var t;const n=null===(t=e.target.files)||void 0===t?void 0:t[0];if(n)if(n.size>5242880)alert("La imagen no puede superar los 5MB");else if(n.type.startsWith("image/")){p(!0);try{await(0,Pe.F6)(r.uid,n),alert("Foto actualizada correctamente"),a&&a()}catch(i){console.error("Error subiendo foto:",i),alert("Error al subir la foto: "+(i.message||i))}finally{p(!1)}}else alert("Solo se permiten archivos de imagen")},disabled:f,style:{display:"none"}})]}),(null===o||void 0===o?void 0:o.photoURL)&&(0,Le.jsx)("button",{onClick:async()=>{if(window.confirm("\xbfEst\xe1s seguro de que quieres eliminar tu foto de perfil?")){p(!0);try{await(0,Pe.FJ)(r.uid),alert("Foto eliminada correctamente"),a&&a()}catch(e){console.error("Error eliminando foto:",e),alert("Error al eliminar la foto: "+(e.message||e))}finally{p(!1)}}},disabled:f,style:{padding:"8px 16px",background:"#ef4444",color:"#fff",border:"none",borderRadius:8,cursor:f?"not-allowed":"pointer",fontSize:14,fontWeight:600,opacity:f?.6:1},children:"\ud83d\uddd1\ufe0f Eliminar"})]})]}),(0,Le.jsxs)("div",{style:{marginBottom:20},children:[(0,Le.jsx)("div",{style:{fontSize:13,color:"#666",marginBottom:4},children:"Email"}),(0,Le.jsx)("div",{style:{fontSize:16,fontWeight:600},children:null===r||void 0===r?void 0:r.email})]}),(0,Le.jsxs)("div",{style:{marginBottom:20},children:[(0,Le.jsx)("div",{style:{fontSize:13,color:"#666",marginBottom:4},children:"Nombre"}),(0,Le.jsx)("div",{style:{fontSize:16,fontWeight:600},children:(null===o||void 0===o?void 0:o.name)||"Sin nombre"})]}),(0,Le.jsxs)("div",{style:{marginBottom:20},children:[(0,Le.jsx)("div",{style:{fontSize:13,color:"#666",marginBottom:4},children:"Apellidos"}),(0,Le.jsx)("div",{style:{fontSize:16,fontWeight:600},children:(null===o||void 0===o?void 0:o.surname)||"Sin apellidos"})]}),(0,Le.jsxs)("div",{style:{marginBottom:20},children:[(0,Le.jsx)("div",{style:{fontSize:13,color:"#666",marginBottom:4},children:"Alias (nombre corto)"}),(0,Le.jsx)("div",{style:{fontSize:16,fontWeight:600},children:(null===o||void 0===o?void 0:o.alias)||"Sin alias"})]}),(0,Le.jsxs)("div",{style:{marginBottom:20},children:[(0,Le.jsx)("div",{style:{fontSize:13,color:"#666",marginBottom:4},children:"Tel\xe9fono"}),(0,Le.jsx)("div",{style:{fontSize:16,fontWeight:600},children:(null===o||void 0===o?void 0:o.phone)||"Sin tel\xe9fono"})]}),(0,Le.jsxs)("div",{style:{marginBottom:20},children:[(0,Le.jsx)("div",{style:{fontSize:13,color:"#666",marginBottom:4},children:"Fecha de nacimiento"}),(0,Le.jsx)("div",{style:{fontSize:16,fontWeight:600},children:null!==o&&void 0!==o&&o.dob?new Date(o.dob).toLocaleDateString():"Sin fecha"})]}),!y&&(0,Le.jsx)("button",{className:"btn-primary full",onClick:()=>l(!0),style:{marginTop:20},children:"\u270f\ufe0f Editar perfil"}),y&&(0,Le.jsx)("button",{className:"btn-primary full",onClick:()=>l(!0),style:{marginTop:20,background:"#ffc107",color:"#000"},children:"\u26a0\ufe0f Completar perfil obligatorio"})]}),g&&(null===o||void 0===o?void 0:o.photoURL)&&(0,Le.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.9)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999,padding:20,cursor:"pointer"},onClick:()=>m(!1),children:(0,Le.jsx)("img",{src:o.photoURL,alt:"Foto de perfil ampliada",style:{maxWidth:"90%",maxHeight:"90%",objectFit:"contain",borderRadius:8,boxShadow:"0 8px 32px rgba(0, 0, 0, 0.5)"}})})]})}var Mc=n(626);const Fc=["RESERVAR MESA","CUMPLEA\xd1OS MES","FIESTAS DE ESTELLA","FERIAS","LOTERIA NAVIDAD","COTILLON DE REYES"];function Uc(e){let{user:t,profile:r}=e;const[o,a]=(0,i.useState)(""),[s,l]=(0,i.useState)(""),[c,u]=(0,i.useState)(""),[d,h]=(0,i.useState)(1),[f,p]=(0,i.useState)(0),[g,m]=(0,i.useState)(""),[v,y]=(0,i.useState)(1),[b,w]=(0,i.useState)(1),[x,S]=(0,i.useState)(""),[E,T]=(0,i.useState)(""),[A,_]=(0,i.useState)(!1),[k,C]=(0,i.useState)([]),[I,R]=(0,i.useState)([]),[N,O]=(0,i.useState)(null),[D,P]=(0,i.useState)(!1),[L,j]=(0,i.useState)(""),M=re();if(null!==r&&void 0!==r&&r.isAdmin)return(0,Le.jsxs)("div",{style:{padding:20,textAlign:"center"},children:[(0,Le.jsx)("h2",{children:"Acceso no permitido"}),(0,Le.jsx)("p",{children:"Los administradores no pueden inscribirse a eventos."}),(0,Le.jsx)("button",{className:"btn-primary",onClick:()=>M("/menu"),children:"Volver al Men\xfa"})]});const F=e=>{if(!e)return"";return["Domingo","Lunes","Martes","Mi\xe9rcoles","Jueves","Viernes","S\xe1bado"][new Date(e+"T00:00:00").getDay()]},U=e=>{if(!e)return!0;let t;if(e.match(/^\d{4}-\d{2}-\d{2}$/))t=new Date(e+"T00:00:00");else{const n=e.match(/(\d{1,2})\/(\d{1,2})\/(\d{4})/);if(!n)return!1;{const e=parseInt(n[1],10),r=parseInt(n[2],10)-1,i=parseInt(n[3],10);t=new Date(i,r,e)}}const n=new Date;return n.setHours(0,0,0,0),t.setHours(0,0,0,0),t<n},z=e=>{if(!e)return"";if(e.match(/\d{1,2}\/\d{1,2}\/\d{4}/))return e;if(e.match(/^\d{4}-\d{2}-\d{2}$/)){const t=new Date(e+"T00:00:00"),n=t.getDate(),r=t.getMonth()+1,i=t.getFullYear(),o=["Domingo","Lunes","Martes","Mi\xe9rcoles","Jueves","Viernes","S\xe1bado"][t.getDay()];return"".concat(o," ").concat(n,"/").concat(r,"/").concat(i)}return e};(0,i.useEffect)(()=>{null!==t&&void 0!==t&&t.uid&&(B(),W())},[t]);const B=async()=>{try{const e=await(0,Pe.is)(),n=e.filter(e=>e.uid===t.uid),r=e.filter(e=>e.uid!==t.uid);C(n),R(r)}catch(e){console.error("Error cargando inscripciones:",e)}},W=async()=>{try{const{getEventConfig:e}=await Promise.resolve().then(n.bind(n,791)),t=await e("CUMPLEA\xd1OS MES");null!==t&&void 0!==t&&t.fechaCena&&T(t.fechaCena)}catch(e){console.error("Error cargando fecha de cena:",e)}};return t?(0,Le.jsxs)("div",{style:{padding:20,maxWidth:800,margin:"0 auto"},children:[(0,Le.jsx)("h2",{style:{marginBottom:24,fontSize:28,fontWeight:700,color:"#111827"},children:"\ud83d\udcc5 Eventos"}),(0,Le.jsxs)("div",{style:{background:"#fff",padding:24,borderRadius:16,boxShadow:"0 2px 8px rgba(0,0,0,0.1)",marginBottom:32},children:[(0,Le.jsx)("h3",{style:{marginTop:0,marginBottom:20,fontSize:20,fontWeight:600},children:N?"\u270f\ufe0f Editar inscripci\xf3n":"\u2795 Nueva inscripci\xf3n"}),(0,Le.jsx)("form",{onSubmit:async e=>{if(e.preventDefault(),o){if("RESERVAR MESA"===o){if(!s||!v)return void alert("Por favor completa todos los campos obligatorios")}else if("CUMPLEA\xd1OS MES"===o){if(!d||0===Number(d))return void alert("Por favor indica al menos 1 adulto")}else if("LOTERIA NAVIDAD"===o){if(!b)return void alert("Por favor indica el n\xfamero de d\xe9cimos")}else if("FIESTAS DE ESTELLA"===o&&!s)return void alert("Por favor selecciona una fecha");_(!0);try{const e={uid:t.uid,userEmail:t.email,userName:(null===r||void 0===r?void 0:r.name)||t.email,eventType:o,fecha:["LOTERIA NAVIDAD","CUMPLEA\xd1OS MES"].includes(o)?null:s,hora:c||null,adultos:["CUMPLEA\xd1OS MES","FIESTAS DE ESTELLA","FERIAS","COTILLON DE REYES"].includes(o)?Number(d):0,ninos:["CUMPLEA\xd1OS MES","FIESTAS DE ESTELLA","FERIAS","COTILLON DE REYES"].includes(o)?Number(f):0,comensales:"RESERVAR MESA"===o?Number(v):0,observaciones:"RESERVAR MESA"===o?g:"",decimos:"LOTERIA NAVIDAD"===o?Number(b):0,diaSemana:"FIESTAS DE ESTELLA"===o?F(s):""};N?(await(0,Pe.VK)(N,e),alert("Inscripci\xf3n actualizada correctamente"),O(null)):(await(0,Pe.xi)(e),alert("Inscripci\xf3n registrada correctamente")),a(""),l(""),u(""),h(1),p(0),m(""),y(1),w(1),S(""),B()}catch(n){console.error("Error guardando inscripci\xf3n:",n),alert("Error al guardar la inscripci\xf3n: "+(n.message||n))}finally{_(!1)}}else alert("Por favor selecciona un tipo de evento")},children:(0,Le.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:16},children:[(0,Le.jsxs)("div",{children:[(0,Le.jsx)("label",{style:{display:"block",marginBottom:8,fontWeight:600,fontSize:14},children:"Tipo de evento *"}),(0,Le.jsxs)("select",{value:o,onChange:e=>a(e.target.value),required:!0,style:{width:"100%",padding:"12px",fontSize:15,border:"1px solid #d1d5db",borderRadius:8,background:"#fff"},children:[(0,Le.jsx)("option",{value:"",children:"-- Selecciona un evento --"}),Fc.map(e=>(0,Le.jsx)("option",{value:e,children:e},e))]})]}),"RESERVAR MESA"===o&&(0,Le.jsxs)(Le.Fragment,{children:[(0,Le.jsxs)("div",{children:[(0,Le.jsx)("label",{style:{display:"block",marginBottom:8,fontWeight:600,fontSize:14},children:"Fecha *"}),(0,Le.jsx)("input",{type:"date",value:s,onChange:e=>l(e.target.value),required:!0,style:{width:"100%",padding:"12px",fontSize:15,border:"1px solid #d1d5db",borderRadius:8}})]}),(0,Le.jsxs)("div",{children:[(0,Le.jsx)("label",{style:{display:"block",marginBottom:8,fontWeight:600,fontSize:14},children:"Hora (opcional)"}),(0,Le.jsx)("input",{type:"time",value:c,onChange:e=>u(e.target.value),style:{width:"100%",padding:"12px",fontSize:15,border:"1px solid #d1d5db",borderRadius:8}})]}),(0,Le.jsxs)("div",{children:[(0,Le.jsx)("label",{style:{display:"block",marginBottom:8,fontWeight:600,fontSize:14},children:"Observaciones"}),(0,Le.jsx)("textarea",{value:g,onChange:e=>m(e.target.value),placeholder:"Indica cualquier preferencia o comentario...",rows:3,style:{width:"100%",padding:"12px",fontSize:15,border:"1px solid #d1d5db",borderRadius:8,fontFamily:"inherit",resize:"vertical"}})]}),(0,Le.jsxs)("div",{children:[(0,Le.jsx)("label",{style:{display:"block",marginBottom:8,fontWeight:600,fontSize:14},children:"N\xfamero de comensales *"}),(0,Le.jsx)("input",{type:"number",min:"1",value:v,onChange:e=>y(e.target.value),required:!0,style:{width:"100%",padding:"12px",fontSize:15,border:"1px solid #d1d5db",borderRadius:8}})]})]}),"CUMPLEA\xd1OS MES"===o&&(0,Le.jsxs)(Le.Fragment,{children:[(0,Le.jsxs)("div",{style:{padding:16,background:E&&!U(E)?"#dbeafe":"#fee2e2",borderRadius:8,border:E&&!U(E)?"2px solid #3b82f6":"2px solid #ef4444",marginBottom:16},children:[(0,Le.jsx)("div",{style:{fontSize:14,fontWeight:700,color:E&&!U(E)?"#1e40af":"#991b1b",marginBottom:4},children:"\ud83d\udcc5 FECHA PR\xd3XIMA CENA:"}),(0,Le.jsx)("div",{style:{fontSize:16,fontWeight:600,color:E&&!U(E)?"#1e3a8a":"#7f1d1d"},children:E&&!U(E)?z(E):"NO HAY FECHA ESTABLECIDA"})]}),(0,Le.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16},children:[(0,Le.jsxs)("div",{children:[(0,Le.jsx)("label",{style:{display:"block",marginBottom:8,fontWeight:600,fontSize:14},children:"Adultos *"}),(0,Le.jsx)("input",{type:"number",min:"0",value:d,onChange:e=>h(e.target.value),required:!0,style:{width:"100%",padding:"12px",fontSize:15,border:"1px solid #d1d5db",borderRadius:8}})]}),(0,Le.jsxs)("div",{children:[(0,Le.jsx)("label",{style:{display:"block",marginBottom:8,fontWeight:600,fontSize:14},children:"Ni\xf1os"}),(0,Le.jsx)("input",{type:"number",min:"0",value:f,onChange:e=>p(e.target.value),style:{width:"100%",padding:"12px",fontSize:15,border:"1px solid #d1d5db",borderRadius:8}})]})]})]}),"FIESTAS DE ESTELLA"===o&&(0,Le.jsxs)(Le.Fragment,{children:[(0,Le.jsxs)("div",{children:[(0,Le.jsx)("label",{style:{display:"block",marginBottom:8,fontWeight:600,fontSize:14},children:"Fecha *"}),(0,Le.jsxs)("div",{style:{display:"flex",gap:12,alignItems:"center"},children:[(0,Le.jsx)("input",{type:"date",value:s,onChange:e=>l(e.target.value),required:!0,style:{flex:1,padding:"12px",fontSize:15,border:"1px solid #d1d5db",borderRadius:8}}),s&&(0,Le.jsx)("div",{style:{padding:"12px 16px",fontSize:14,fontWeight:600,background:"#f3f4f6",borderRadius:8,color:"#374151",minWidth:"100px",textAlign:"center"},children:F(s)})]})]}),(0,Le.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16},children:[(0,Le.jsxs)("div",{children:[(0,Le.jsx)("label",{style:{display:"block",marginBottom:8,fontWeight:600,fontSize:14},children:"Adultos"}),(0,Le.jsx)("input",{type:"number",min:"0",value:d,onChange:e=>h(e.target.value),style:{width:"100%",padding:"12px",fontSize:15,border:"1px solid #d1d5db",borderRadius:8}})]}),(0,Le.jsxs)("div",{children:[(0,Le.jsx)("label",{style:{display:"block",marginBottom:8,fontWeight:600,fontSize:14},children:"Ni\xf1os"}),(0,Le.jsx)("input",{type:"number",min:"0",value:f,onChange:e=>p(e.target.value),style:{width:"100%",padding:"12px",fontSize:15,border:"1px solid #d1d5db",borderRadius:8}})]})]})]}),"FERIAS"===o&&(0,Le.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16},children:[(0,Le.jsxs)("div",{children:[(0,Le.jsx)("label",{style:{display:"block",marginBottom:8,fontWeight:600,fontSize:14},children:"Adultos"}),(0,Le.jsx)("input",{type:"number",min:"0",value:d,onChange:e=>h(e.target.value),style:{width:"100%",padding:"12px",fontSize:15,border:"1px solid #d1d5db",borderRadius:8}})]}),(0,Le.jsxs)("div",{children:[(0,Le.jsx)("label",{style:{display:"block",marginBottom:8,fontWeight:600,fontSize:14},children:"Ni\xf1os"}),(0,Le.jsx)("input",{type:"number",min:"0",value:f,onChange:e=>p(e.target.value),style:{width:"100%",padding:"12px",fontSize:15,border:"1px solid #d1d5db",borderRadius:8}})]})]}),"LOTERIA NAVIDAD"===o&&(0,Le.jsxs)("div",{children:[(0,Le.jsx)("label",{style:{display:"block",marginBottom:8,fontWeight:600,fontSize:14},children:"N\xfamero de d\xe9cimos *"}),(0,Le.jsx)("input",{type:"number",min:"1",value:b,onChange:e=>w(e.target.value),required:!0,style:{width:"100%",padding:"12px",fontSize:15,border:"1px solid #d1d5db",borderRadius:8}})]}),"COTILLON DE REYES"===o&&(0,Le.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16},children:[(0,Le.jsxs)("div",{children:[(0,Le.jsx)("label",{style:{display:"block",marginBottom:8,fontWeight:600,fontSize:14},children:"Adultos"}),(0,Le.jsx)("input",{type:"number",min:"0",value:d,onChange:e=>h(e.target.value),style:{width:"100%",padding:"12px",fontSize:15,border:"1px solid #d1d5db",borderRadius:8}})]}),(0,Le.jsxs)("div",{children:[(0,Le.jsx)("label",{style:{display:"block",marginBottom:8,fontWeight:600,fontSize:14},children:"Ni\xf1os"}),(0,Le.jsx)("input",{type:"number",min:"0",value:f,onChange:e=>p(e.target.value),style:{width:"100%",padding:"12px",fontSize:15,border:"1px solid #d1d5db",borderRadius:8}})]})]}),o&&(0,Le.jsxs)(Le.Fragment,{children:[(0,Le.jsxs)("div",{style:{display:"flex",gap:12,marginTop:8},children:[(0,Le.jsx)("button",{type:"submit",disabled:A,style:{flex:1,padding:"14px 24px",fontSize:16,fontWeight:600,background:"#1976d2",color:"#fff",border:"none",borderRadius:8,cursor:A?"wait":"pointer",opacity:A?.7:1},children:A?"Guardando...":N?"Actualizar":"Inscribirse"}),N&&(0,Le.jsx)("button",{type:"button",onClick:()=>{O(null),a(""),l(""),u(""),h(1),p(0),m(""),y(1),w(1),S("")},style:{padding:"14px 24px",fontSize:16,fontWeight:600,background:"#6b7280",color:"#fff",border:"none",borderRadius:8,cursor:"pointer"},children:"Cancelar"})]}),"CUMPLEA\xd1OS MES"===o&&!N&&(0,Le.jsxs)("div",{style:{marginTop:16,padding:16,background:"#fef3c7",borderRadius:8,border:"2px solid #f59e0b"},children:[(0,Le.jsx)("p",{style:{margin:"0 0 12px 0",fontSize:14,color:"#92400e",fontWeight:600},children:"\u26a0\ufe0f Administraci\xf3n de inscripciones"}),(0,Le.jsx)("button",{type:"button",onClick:async()=>{"1234"===prompt("Introduce la contrase\xf1a para borrar todas las inscripciones:")?(j(""),P(!0)):alert("Contrase\xf1a incorrecta")},style:{width:"100%",padding:"14px 24px",fontSize:16,fontWeight:700,background:"#dc2626",color:"#fff",border:"none",borderRadius:8,cursor:"pointer",textTransform:"uppercase"},children:"\ud83d\uddd1\ufe0f Borrar inscripciones de todos"}),(0,Le.jsx)("p",{style:{margin:"8px 0 0 0",fontSize:12,color:"#92400e"},children:"Requiere contrase\xf1a. Eliminar\xe1 todas las inscripciones de este evento."})]})]})]})})]}),(0,Le.jsxs)("div",{style:{marginBottom:40},children:[(0,Le.jsxs)("h3",{style:{marginBottom:16,fontSize:20,fontWeight:600,color:"#1976d2"},children:["\ud83d\udcdd Mis inscripciones (",k.length,")"]}),0===k.length?(0,Le.jsx)("div",{style:{textAlign:"center",padding:40,background:"#f9fafb",borderRadius:12,color:"#6b7280"},children:"No tienes inscripciones todav\xeda"}):(0,Le.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:12},children:k.map(e=>(0,Le.jsxs)("div",{style:{background:"#fff",padding:16,borderRadius:12,boxShadow:"0 1px 3px rgba(0,0,0,0.1)",display:"flex",justifyContent:"space-between",alignItems:"center",gap:16},children:[(0,Le.jsxs)("div",{style:{flex:1},children:[(0,Le.jsx)("div",{style:{fontWeight:700,fontSize:16,color:"#1976d2",marginBottom:4},children:e.eventType}),"RESERVAR MESA"===e.eventType&&(0,Le.jsxs)(Le.Fragment,{children:[(0,Le.jsxs)("div",{style:{fontSize:14,color:"#374151",marginBottom:4},children:["\ud83d\udcc5 ",e.fecha," ",e.hora&&"\u2022 \ud83d\udd50 ".concat(e.hora)]}),(0,Le.jsxs)("div",{style:{fontSize:14,color:"#6b7280"},children:["\ud83c\udf7d\ufe0f ",e.comensales," comensal",1!==e.comensales?"es":""]}),e.observaciones&&(0,Le.jsxs)("div",{style:{fontSize:13,color:"#6b7280",marginTop:4,fontStyle:"italic"},children:["\ud83d\udcac ",e.observaciones]})]}),"CUMPLEA\xd1OS MES"===e.eventType&&(0,Le.jsxs)("div",{style:{fontSize:14,color:"#6b7280"},children:["\ud83d\udc65 ",e.adultos," adulto",1!==e.adultos?"s":""," \u2022 \ud83d\udc76 ",e.ninos," ni\xf1o",1!==e.ninos?"s":""]}),"FIESTAS DE ESTELLA"===e.eventType&&(0,Le.jsxs)(Le.Fragment,{children:[(0,Le.jsxs)("div",{style:{fontSize:14,color:"#374151",marginBottom:4},children:["\ud83d\udcc5 ",e.fecha," ",e.diaSemana&&"(".concat(e.diaSemana,")")]}),(0,Le.jsxs)("div",{style:{fontSize:14,color:"#6b7280"},children:["\ud83d\udc65 ",e.adultos," adulto",1!==e.adultos?"s":""," \u2022 \ud83d\udc76 ",e.ninos," ni\xf1o",1!==e.ninos?"s":""]})]}),"FERIAS"===e.eventType&&(0,Le.jsxs)("div",{style:{fontSize:14,color:"#6b7280"},children:["\ud83d\udc65 ",e.adultos," adulto",1!==e.adultos?"s":""," \u2022 \ud83d\udc76 ",e.ninos," ni\xf1o",1!==e.ninos?"s":""]}),"LOTERIA NAVIDAD"===e.eventType&&(0,Le.jsxs)("div",{style:{fontSize:14,color:"#6b7280"},children:["\ud83c\udf9f\ufe0f ",e.decimos," d\xe9cimo",1!==e.decimos?"s":""]}),"COTILLON DE REYES"===e.eventType&&(0,Le.jsxs)("div",{style:{fontSize:14,color:"#6b7280"},children:["\ud83d\udc65 ",e.adultos," adulto",1!==e.adultos?"s":""," \u2022 \ud83d\udc76 ",e.ninos," ni\xf1o",1!==e.ninos?"s":""]})]}),(0,Le.jsxs)("div",{style:{display:"flex",gap:8},children:[(0,Le.jsx)("button",{onClick:()=>(e=>{O(e.id),a(e.eventType),l(e.fecha||""),u(e.hora||""),h(e.adultos||1),p(e.ninos||0),m(e.observaciones||""),y(e.comensales||1),w(e.decimos||1),S(e.textoCena||""),window.scrollTo({top:0,behavior:"smooth"})})(e),style:{padding:"8px 16px",fontSize:14,fontWeight:600,background:"#f59e0b",color:"#fff",border:"none",borderRadius:6,cursor:"pointer"},children:"Editar"}),(0,Le.jsx)("button",{onClick:()=>(async e=>{if(confirm("\xbfEliminar esta inscripci\xf3n?"))try{await(0,Pe.dF)(e),alert("Inscripci\xf3n eliminada"),B()}catch(t){console.error("Error eliminando inscripci\xf3n:",t),alert("Error al eliminar: "+(t.message||t))}})(e.id),style:{padding:"8px 16px",fontSize:14,fontWeight:600,background:"#ef4444",color:"#fff",border:"none",borderRadius:6,cursor:"pointer"},children:"Eliminar"})]})]},e.id))})]}),(0,Le.jsxs)("div",{children:[(0,Le.jsxs)("h3",{style:{marginBottom:16,fontSize:20,fontWeight:600,color:"#6b7280"},children:["\ud83d\udc65 Resto de inscripciones (",I.length,")"]}),0===I.length?(0,Le.jsx)("div",{style:{textAlign:"center",padding:40,background:"#f9fafb",borderRadius:12,color:"#6b7280"},children:"No hay otras inscripciones todav\xeda"}):(0,Le.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:12},children:I.map(e=>(0,Le.jsx)("div",{style:{background:"#fff",padding:16,borderRadius:12,boxShadow:"0 1px 3px rgba(0,0,0,0.1)",border:"2px solid #f3f4f6"},children:(0,Le.jsxs)("div",{children:[(0,Le.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start",marginBottom:8},children:[(0,Le.jsx)("div",{style:{fontWeight:700,fontSize:16,color:"#1976d2"},children:e.eventType}),(0,Le.jsx)("div",{style:{fontSize:12,color:"#6b7280",fontWeight:600,background:"#f3f4f6",padding:"4px 12px",borderRadius:12},children:e.userName||e.userEmail})]}),"RESERVAR MESA"===e.eventType&&(0,Le.jsxs)(Le.Fragment,{children:[(0,Le.jsxs)("div",{style:{fontSize:14,color:"#374151",marginBottom:4},children:["\ud83d\udcc5 ",e.fecha," ",e.hora&&"\u2022 \ud83d\udd50 ".concat(e.hora)]}),(0,Le.jsxs)("div",{style:{fontSize:14,color:"#6b7280"},children:["\ud83c\udf7d\ufe0f ",e.comensales," comensal",1!==e.comensales?"es":""]}),e.observaciones&&(0,Le.jsxs)("div",{style:{fontSize:13,color:"#6b7280",marginTop:4,fontStyle:"italic"},children:["\ud83d\udcac ",e.observaciones]})]}),"CUMPLEA\xd1OS MES"===e.eventType&&(0,Le.jsxs)("div",{style:{fontSize:14,color:"#6b7280"},children:["\ud83d\udc65 ",e.adultos," adulto",1!==e.adultos?"s":""," \u2022 \ud83d\udc76 ",e.ninos," ni\xf1o",1!==e.ninos?"s":""]}),"FIESTAS DE ESTELLA"===e.eventType&&(0,Le.jsxs)(Le.Fragment,{children:[(0,Le.jsxs)("div",{style:{fontSize:14,color:"#374151",marginBottom:4},children:["\ud83d\udcc5 ",e.fecha," ",e.diaSemana&&"(".concat(e.diaSemana,")")]}),(0,Le.jsxs)("div",{style:{fontSize:14,color:"#6b7280"},children:["\ud83d\udc65 ",e.adultos," adulto",1!==e.adultos?"s":""," \u2022 \ud83d\udc76 ",e.ninos," ni\xf1o",1!==e.ninos?"s":""]})]}),"FERIAS"===e.eventType&&(0,Le.jsxs)("div",{style:{fontSize:14,color:"#6b7280"},children:["\ud83d\udc65 ",e.adultos," adulto",1!==e.adultos?"s":""," \u2022 \ud83d\udc76 ",e.ninos," ni\xf1o",1!==e.ninos?"s":""]}),"LOTERIA NAVIDAD"===e.eventType&&(0,Le.jsxs)("div",{style:{fontSize:14,color:"#6b7280"},children:["\ud83c\udf9f\ufe0f ",e.decimos," d\xe9cimo",1!==e.decimos?"s":""]}),"COTILLON DE REYES"===e.eventType&&(0,Le.jsxs)("div",{style:{fontSize:14,color:"#6b7280"},children:["\ud83d\udc65 ",e.adultos," adulto",1!==e.adultos?"s":""," \u2022 \ud83d\udc76 ",e.ninos," ni\xf1o",1!==e.ninos?"s":""]})]})},e.id))})]}),D&&(0,Le.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:(0,Le.jsxs)("div",{style:{background:"#fff",padding:32,borderRadius:16,boxShadow:"0 10px 40px rgba(0,0,0,0.3)",maxWidth:400,width:"90%"},children:[(0,Le.jsx)("h3",{style:{marginTop:0,marginBottom:20,fontSize:20,fontWeight:600},children:"\ud83d\udcc5 Fecha de la pr\xf3xima cena"}),(0,Le.jsxs)("div",{style:{marginBottom:20},children:[(0,Le.jsx)("label",{style:{display:"block",marginBottom:8,fontWeight:600,fontSize:14},children:"Selecciona la fecha:"}),(0,Le.jsx)("input",{type:"date",value:L,onChange:e=>j(e.target.value),style:{width:"100%",padding:"12px",fontSize:15,border:"1px solid #d1d5db",borderRadius:8}})]}),(0,Le.jsxs)("div",{style:{display:"flex",gap:12,justifyContent:"flex-end"},children:[(0,Le.jsx)("button",{type:"button",onClick:()=>{P(!1),j("")},style:{padding:"10px 20px",fontSize:14,fontWeight:600,border:"1px solid #d1d5db",borderRadius:8,background:"#fff",color:"#374151",cursor:"pointer"},children:"Cancelar"}),(0,Le.jsx)("button",{type:"button",onClick:async()=>{if(L){if(confirm("\xbfEst\xe1s seguro de borrar TODAS las inscripciones de CUMPLEA\xd1OS MES?")){_(!0);try{const{setEventConfig:e}=await Promise.resolve().then(n.bind(n,791));await e("CUMPLEA\xd1OS MES",{fechaCena:L});const t=await(0,Pe.qT)("CUMPLEA\xd1OS MES");T(L),P(!1),j(""),alert("Se han eliminado ".concat(t," inscripciones.\nPr\xf3xima cena: ").concat(z(L),"\n\nEnviando notificaciones por email..."));(0,Mc.Qg)(Pe.Cn,"notificarFechaCena")({eventType:"CUMPLEA\xd1OS MES",fechaCena:L}).then(e=>{console.log("Resultado env\xedo de emails:",e.data),alert("\u2705 ".concat(e.data.message))}).catch(e=>{console.error("Error enviando emails:",e),alert("\u26a0\ufe0f Error al enviar algunos emails: ".concat(e.message))}),B()}catch(e){console.error("Error borrando inscripciones:",e),alert("Error al borrar las inscripciones: "+(e.message||e))}finally{_(!1)}}}else alert("Debes seleccionar una fecha para la cena")},style:{padding:"10px 20px",fontSize:14,fontWeight:600,border:"none",borderRadius:8,background:"#ef4444",color:"#fff",cursor:"pointer"},children:"Confirmar y Borrar"})]})]})})]}):(0,Le.jsx)("div",{style:{padding:20},children:"No autenticado"})}var zc=n(619);const Bc="2.2.1",Wc=async()=>{try{if("caches"in window){const e=await caches.keys();await Promise.all(e.map(e=>caches.delete(e))),console.log("Cach\xe9 del navegador limpiada")}const e=localStorage.getItem("app-theme");localStorage.clear(),e&&localStorage.setItem("app-theme",e),sessionStorage.clear(),console.log("Almacenamiento local limpiado")}catch(e){console.error("Error limpiando cach\xe9:",e)}},Vc=[{name:"Azul Cl\xe1sico",primary:"#1976d2",secondary:"#1565c0",bg:"#ffffff",text:"#000000",headerBg:"#f5f5f5"},{name:"Oscuro",primary:"#212121",secondary:"#424242",bg:"#121212",text:"#ffffff",headerBg:"#1e1e1e"},{name:"Verde Natura",primary:"#2e7d32",secondary:"#1b5e20",bg:"#f1f8e9",text:"#000000",headerBg:"#dcedc8"},{name:"P\xfarpura",primary:"#7b1fa2",secondary:"#4a148c",bg:"#ffffff",text:"#000000",headerBg:"#f3e5f5"},{name:"Naranja Energ\xeda",primary:"#ef6c00",secondary:"#e65100",bg:"#fff3e0",text:"#000000",headerBg:"#ffe0b2"},{name:"Rojo Pasi\xf3n",primary:"#c62828",secondary:"#b71c1c",bg:"#ffffff",text:"#000000",headerBg:"#ffebee"},{name:"Gris Moderno",primary:"#546e7a",secondary:"#37474f",bg:"#eceff1",text:"#000000",headerBg:"#cfd8dc"},{name:"Turquesa",primary:"#00838f",secondary:"#006064",bg:"#e0f7fa",text:"#000000",headerBg:"#b2ebf2"}];function Hc(){var e;const[t,n]=(0,i.useState)(null),[r,o]=(0,i.useState)(null),[a,s]=(0,i.useState)(!0),[l,c]=(0,i.useState)(()=>{const e=localStorage.getItem("app-theme");return e?JSON.parse(e):Vc[0]}),[u,d]=(0,i.useState)(!1),[h,f]=(0,i.useState)(!1),[p,g]=(0,i.useState)(!1),[m,v]=(0,i.useState)(!1),[y,b]=(0,i.useState)(!1),[w,x]=(0,i.useState)(""),[S,E]=(0,i.useState)(!1),T=re(),{isInstallable:A,isInstalled:_,installPWA:k}=function(){const[e,t]=(0,i.useState)(null),[n,r]=(0,i.useState)(!1),[o,a]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{if(window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone)return void a(!0);const e=e=>{e.preventDefault(),t(e),r(!0)};return window.addEventListener("beforeinstallprompt",e),window.addEventListener("appinstalled",()=>{a(!0),r(!1),t(null)}),()=>{window.removeEventListener("beforeinstallprompt",e)}},[]),{isInstallable:n,isInstalled:o,installPWA:async()=>{if(!e)return!1;e.prompt();const{outcome:n}=await e.userChoice;return"accepted"===n&&(t(null),r(!1),!0)}}}();(0,i.useEffect)(()=>{(()=>{const e=localStorage.getItem("app-version");return e!==Bc&&(console.log("Nueva versi\xf3n detectada: ".concat(Bc," (anterior: ").concat(e,")")),Wc().then(()=>{localStorage.setItem("app-version",Bc),window.location.reload(!0)}),!0)})()||localStorage.setItem("app-version",Bc)},[]),(0,i.useEffect)(()=>{const e=(0,zc.hg)(Pe.j2,async e=>{if(s(!0),e){n(e);try{const t=await(0,Pe.Qi)(e.uid);console.log("Profile loaded:",t),console.log("PhotoURL:",null===t||void 0===t?void 0:t.photoURL),o(t)}catch(t){console.error("fetchUserDoc error:",t),o(null)}}else n(null),o(null);s(!1)});return()=>e()},[]);const C=e=>e&&e.name&&e.lastName&&e.phone&&e.birthDate;return(0,i.useEffect)(()=>{document.documentElement.style.setProperty("--primary-bg",l.primary),document.documentElement.style.setProperty("--primary-color","#ffffff"),document.documentElement.style.setProperty("--secondary-bg",l.secondary),document.documentElement.style.setProperty("--app-bg",l.bg),document.documentElement.style.setProperty("--app-text",l.text),document.documentElement.style.setProperty("--header-bg",l.headerBg),document.documentElement.style.setProperty("--ghost-border","#ffffff"===l.text?"#555":"#ccc");const e="#ffffff"===l.bg?"#f9f9f9":"#121212"===l.bg?"#1e1e1e":l.bg;document.documentElement.style.setProperty("--card-bg",e),document.body.style.backgroundColor=l.bg,document.body.style.color=l.text},[l]),(0,i.useEffect)(()=>{const e=e=>{p&&!e.target.closest("[data-user-menu]")&&g(!1)};return document.addEventListener("click",e),()=>document.removeEventListener("click",e)},[p]),(0,i.useEffect)(()=>{const e=()=>{sessionStorage.setItem("last-session",Date.now().toString())};return window.addEventListener("beforeunload",e),()=>window.removeEventListener("beforeunload",e)},[]),a?(0,Le.jsx)("div",{children:"Comprobando autenticaci\xf3n..."}):(0,Le.jsxs)("div",{style:{background:l.bg,color:l.text,minHeight:"100vh"},children:[A&&!_&&(0,Le.jsxs)("div",{style:{background:"#1976d2",color:"#fff",padding:"12px",display:"flex",justifyContent:"space-between",alignItems:"center",fontSize:"14px"},children:[(0,Le.jsx)("span",{children:"\ud83d\udcf1 Instala la app en tu dispositivo"}),(0,Le.jsx)("button",{onClick:async()=>{await k()&&alert("\xa1App instalada correctamente!")},style:{background:"#fff",color:"#1976d2",border:"none",padding:"8px 16px",borderRadius:"6px",fontWeight:"600",cursor:"pointer"},children:"Instalar"})]}),(0,Le.jsxs)("header",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px 20px",background:l.headerBg,boxShadow:"0 2px 8px rgba(0,0,0,0.1)",borderBottom:"1px solid ".concat(l.primary,"20")},children:[(0,Le.jsx)("div",{style:{display:"flex",alignItems:"center",gap:16},children:t?(0,Le.jsx)(Le.Fragment,{children:(0,Le.jsxs)("div",{style:{position:"relative"},"data-user-menu":!0,children:[(0,Le.jsx)("input",{type:"file",accept:"image/*",capture:"user",onChange:e=>{var n;return(null===(n=e.target.files)||void 0===n?void 0:n[0])&&(async e=>{if(t&&e){f(!0);try{const n=await(0,Pe.F6)(t.uid,e);o(e=>(0,De.A)((0,De.A)({},e),{},{photoURL:n})),d(!1),alert("Foto actualizada correctamente")}catch(n){console.error("Error subiendo foto:",n),alert("Error subiendo foto: "+(n.message||n))}finally{f(!1)}}})(e.target.files[0])},style:{display:"none"},id:"camera-input",disabled:h}),(0,Le.jsxs)("div",{onClick:()=>g(!p),style:{cursor:h?"wait":"pointer",display:"flex",alignItems:"center",gap:12,position:"relative",padding:"6px 12px",borderRadius:"24px",transition:"background 0.2s ease",background:p?l.primary+"15":"transparent"},title:"Men\xfa de usuario",onMouseEnter:e=>{p||(e.currentTarget.style.background=l.primary+"10")},onMouseLeave:e=>{p||(e.currentTarget.style.background="transparent")},children:[null!==r&&void 0!==r&&r.photoURL?(0,Le.jsx)("img",{src:r.photoURL,alt:"Foto usuario",style:{width:44,height:44,borderRadius:"50%",objectFit:"cover",border:"2px solid ".concat(l.primary),opacity:h?.5:1,boxShadow:"0 2px 4px rgba(0,0,0,0.1)",cursor:"pointer"},onClick:e=>{e.stopPropagation(),v(!0),g(!1)}}):(0,Le.jsx)("div",{style:{width:44,height:44,borderRadius:"50%",background:"linear-gradient(135deg, ".concat(l.primary," 0%, ").concat(l.secondary," 100%)"),color:"#fff",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"18px",fontWeight:"bold",opacity:h?.5:1,boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:((null===r||void 0===r?void 0:r.name)||t.email||"?")[0].toUpperCase()}),h&&(0,Le.jsx)("div",{style:{position:"absolute",top:6,left:12,width:44,height:44,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"50%",background:"rgba(0,0,0,0.6)",color:"white",fontSize:"20px"},children:"\u23f3"}),(0,Le.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,Le.jsx)("strong",{style:{color:l.text,fontSize:15,fontWeight:600},children:(null===r||void 0===r?void 0:r.name)||(null===(e=t.email)||void 0===e?void 0:e.split("@")[0])}),(0,Le.jsx)("span",{style:{fontSize:18,color:l.text,opacity:.5,transition:"transform 0.2s ease",transform:p?"rotate(180deg)":"rotate(0deg)"},children:"\u25bc"})]})]}),p&&(0,Le.jsxs)("div",{style:{position:"absolute",top:"60px",left:0,background:l.bg,border:"1px solid ".concat(l.primary,"30"),borderRadius:"12px",boxShadow:"0 8px 24px rgba(0,0,0,0.12)",minWidth:"220px",zIndex:1e3,overflow:"hidden"},children:[!(null!==r&&void 0!==r&&r.isAdmin)&&(0,Le.jsx)("button",{onClick:()=>{g(!1),T("/tpv")},style:{width:"100%",padding:"12px 16px",border:"none",background:"transparent",color:l.text,textAlign:"left",cursor:"pointer",fontSize:"14px",display:"flex",alignItems:"center",gap:8,borderBottom:"1px solid ".concat(l.primary,"20")},onMouseEnter:e=>e.currentTarget.style.background=l.primary+"20",onMouseLeave:e=>e.currentTarget.style.background="transparent",children:"\ud83d\uded2 TPV"}),!(null!==r&&void 0!==r&&r.isAdmin)&&(0,Le.jsx)("button",{onClick:()=>{g(!1),T("/eventos")},style:{width:"100%",padding:"12px 16px",border:"none",background:"transparent",color:l.text,textAlign:"left",cursor:"pointer",fontSize:"14px",display:"flex",alignItems:"center",gap:8,borderBottom:"1px solid ".concat(l.primary,"20")},onMouseEnter:e=>e.currentTarget.style.background=l.primary+"20",onMouseLeave:e=>e.currentTarget.style.background="transparent",children:"\ud83d\udcc5 Eventos"}),(0,Le.jsx)("button",{onClick:()=>{g(!1),T("/listados-tpv")},style:{width:"100%",padding:"12px 16px",border:"none",background:"transparent",color:l.text,textAlign:"left",cursor:"pointer",fontSize:"14px",display:"flex",alignItems:"center",gap:8,borderBottom:"1px solid ".concat(l.primary,"20")},onMouseEnter:e=>e.currentTarget.style.background=l.primary+"20",onMouseLeave:e=>e.currentTarget.style.background="transparent",children:null!==r&&void 0!==r&&r.isAdmin?"\ud83d\udcca Listados TPV":"\ud83d\udcca Mis Gastos"}),(0,Le.jsx)("button",{onClick:()=>{document.getElementById("camera-input").click(),g(!1)},style:{width:"100%",padding:"12px 16px",border:"none",background:"transparent",color:l.text,textAlign:"left",cursor:"pointer",fontSize:"14px",display:"flex",alignItems:"center",gap:8,borderBottom:"1px solid ".concat(l.primary,"20")},onMouseEnter:e=>e.currentTarget.style.background=l.primary+"20",onMouseLeave:e=>e.currentTarget.style.background="transparent",children:"\ud83d\udcf8 Cambiar foto de perfil"}),(0,Le.jsx)("button",{onClick:()=>{g(!1),alert("Se enviar\xe1 un correo para cambiar la contrase\xf1a")},style:{width:"100%",padding:"12px 16px",border:"none",background:"transparent",color:l.text,textAlign:"left",cursor:"pointer",fontSize:"14px",display:"flex",alignItems:"center",gap:8,borderBottom:"1px solid ".concat(l.primary,"20")},onMouseEnter:e=>e.currentTarget.style.background=l.primary+"20",onMouseLeave:e=>e.currentTarget.style.background="transparent",children:"\ud83d\udd11 Cambiar contrase\xf1a"}),(0,Le.jsx)("button",{onClick:()=>{g(!1),T("/perfil")},style:{width:"100%",padding:"12px 16px",border:"none",background:"transparent",color:l.text,textAlign:"left",cursor:"pointer",fontSize:"14px",display:"flex",alignItems:"center",gap:8,borderBottom:"1px solid ".concat(l.primary,"20")},onMouseEnter:e=>e.currentTarget.style.background=l.primary+"20",onMouseLeave:e=>e.currentTarget.style.background="transparent",children:"\ud83d\udc64 Ver perfil"}),(0,Le.jsx)("button",{onClick:()=>{g(!1),b(!0)},style:{width:"100%",padding:"12px 16px",border:"none",background:"transparent",color:l.text,textAlign:"left",cursor:"pointer",fontSize:"14px",display:"flex",alignItems:"center",gap:8,borderBottom:"1px solid ".concat(l.primary,"20")},onMouseEnter:e=>e.currentTarget.style.background=l.primary+"20",onMouseLeave:e=>e.currentTarget.style.background="transparent",children:"\ud83d\udca1 Sugerencias para la app"}),(0,Le.jsx)("button",{onClick:()=>{g(!1),(async()=>{try{await Wc(),await(0,Pe.ri)(),window.location.href="/login"}catch(e){console.error("Logout error:",e),alert("Error cerrando sesi\xf3n: "+(e.message||e))}})()},style:{width:"100%",padding:"12px 16px",border:"none",background:"transparent",color:"#d32f2f",textAlign:"left",cursor:"pointer",fontSize:"14px",display:"flex",alignItems:"center",gap:8,fontWeight:"600"},onMouseEnter:e=>e.currentTarget.style.background="#d32f2f20",onMouseLeave:e=>e.currentTarget.style.background="transparent",children:"\ud83d\udeaa Cerrar sesi\xf3n"})]})]})}):(0,Le.jsx)("span",{style:{color:l.text},children:"No autenticado"})}),t&&(0,Le.jsxs)("div",{style:{fontSize:"11px",color:l.text,opacity:.5,fontWeight:500,marginRight:"12px"},children:["v",Bc]}),t&&(0,Le.jsxs)("button",{onClick:()=>{const e=(Vc.findIndex(e=>e.name===l.name)+1)%Vc.length,t=Vc[e];c(t),localStorage.setItem("app-theme",JSON.stringify(t))},style:{background:l.bg,border:"1px solid ".concat(l.primary,"30"),borderRadius:"20px",width:40,height:40,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:3,padding:0,boxShadow:"0 2px 8px rgba(0,0,0,0.1)",transition:"all 0.2s ease"},title:"Cambiar tema (actual: ".concat(l.name,")"),onMouseEnter:e=>{e.currentTarget.style.transform="scale(1.05)",e.currentTarget.style.boxShadow="0 4px 12px rgba(0,0,0,0.15)"},onMouseLeave:e=>{e.currentTarget.style.transform="scale(1)",e.currentTarget.style.boxShadow="0 2px 8px rgba(0,0,0,0.1)"},children:[(0,Le.jsx)("div",{style:{width:8,height:8,borderRadius:"50%",background:"#4285F4"}}),(0,Le.jsx)("div",{style:{width:8,height:8,borderRadius:"50%",background:"#EA4335"}}),(0,Le.jsx)("div",{style:{width:8,height:8,borderRadius:"50%",background:"#FBBC04"}})]})]}),y&&(0,Le.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3,padding:16},onClick:()=>b(!1),children:(0,Le.jsxs)("div",{style:{background:l.bg,borderRadius:12,padding:24,maxWidth:500,width:"100%",boxShadow:"0 8px 24px rgba(0,0,0,0.2)"},onClick:e=>e.stopPropagation(),children:[(0,Le.jsx)("h3",{style:{margin:"0 0 16px 0",color:l.text},children:"\ud83d\udca1 Enviar sugerencia"}),(0,Le.jsx)("p",{style:{margin:"0 0 16px 0",fontSize:14,color:l.text,opacity:.7},children:"Cu\xe9ntanos qu\xe9 mejoras te gustar\xeda ver en la app"}),(0,Le.jsx)("textarea",{value:w,onChange:e=>x(e.target.value),placeholder:"Escribe tu sugerencia aqu\xed...",style:{width:"100%",minHeight:120,padding:12,borderRadius:8,border:"1px solid ".concat(l.primary,"30"),fontSize:14,resize:"vertical",background:l.bg,color:l.text,fontFamily:"inherit"},autoFocus:!0}),(0,Le.jsxs)("div",{style:{display:"flex",gap:8,marginTop:16},children:[(0,Le.jsx)("button",{onClick:async()=>{if(w.trim()){E(!0);try{const e=(null===r||void 0===r?void 0:r.name)||(null===t||void 0===t?void 0:t.email)||"Usuario an\xf3nimo",n=(null===t||void 0===t?void 0:t.email)||"sin email",i="Sugerencia TPV App - ".concat(e),o="Usuario: ".concat(e,"\nEmail: ").concat(n,"\n\nSugerencia:\n").concat(w),a="mailto:inavicba@gmail.com?subject=".concat(encodeURIComponent(i),"&body=").concat(encodeURIComponent(o));window.location.href=a,b(!1),x(""),alert("Se abrir\xe1 tu cliente de correo para enviar la sugerencia")}catch(e){console.error("Error al enviar sugerencia:",e),alert("Error al abrir el cliente de correo")}finally{E(!1)}}else alert("Por favor, escribe tu sugerencia")},disabled:S||!w.trim(),className:"btn-primary",style:{flex:1},children:S?"Enviando...":"\ud83d\udce7 Enviar sugerencia"}),(0,Le.jsx)("button",{onClick:()=>{b(!1),x("")},className:"btn-ghost",style:{flex:1},children:"Cancelar"})]})]})}),(0,Le.jsx)("div",{style:{background:l.bg,color:l.text,minHeight:"100vh"},children:(0,Le.jsxs)(xe,{children:[(0,Le.jsx)(be,{path:"/",element:(0,Le.jsx)(ye,{to:t?"/menu":"/login",replace:!0})}),(0,Le.jsx)(be,{path:"/login",element:t?(0,Le.jsx)(ye,{to:"/menu",replace:!0}):(0,Le.jsx)(je,{})}),(0,Le.jsx)(be,{path:"/perfil",element:t?(0,Le.jsx)(jc,{user:t,profile:r,onProfileUpdate:async()=>{if(t)try{const e=await(0,Pe.Qi)(t.uid);o(e)}catch(e){console.error("Error reloading profile:",e)}}}):(0,Le.jsx)(ye,{to:"/login",replace:!0})}),(0,Le.jsx)(be,{path:"/menu",element:t?C(r)?(0,Le.jsx)(Me,{user:t,profile:r}):(0,Le.jsx)(ye,{to:"/perfil",replace:!0}):(0,Le.jsx)(ye,{to:"/login",replace:!0})}),(0,Le.jsx)(be,{path:"/tpv",element:!t||null!==r&&void 0!==r&&r.isAdmin?(0,Le.jsx)(ye,{to:t?"/menu":"/login",replace:!0}):C(r)?(0,Le.jsx)(Be,{user:t,profile:r}):(0,Le.jsx)(ye,{to:"/perfil",replace:!0})}),(0,Le.jsx)(be,{path:"/listados-eventos",element:t?C(r)?(0,Le.jsx)(Ve,{user:t,profile:r}):(0,Le.jsx)(ye,{to:"/perfil",replace:!0}):(0,Le.jsx)(ye,{to:"/login",replace:!0})}),(0,Le.jsx)(be,{path:"/listados-tpv",element:t?null!==r&&void 0!==r&&r.isAdmin||C(r)?(0,Le.jsx)(Oc,{user:t,profile:r}):(0,Le.jsx)(ye,{to:"/perfil",replace:!0}):(0,Le.jsx)(ye,{to:"/login",replace:!0})}),(0,Le.jsx)(be,{path:"/eventos",element:t?null!==r&&void 0!==r&&r.isAdmin?(0,Le.jsx)(ye,{to:"/menu",replace:!0}):C(r)?(0,Le.jsx)(Uc,{user:t,profile:r}):(0,Le.jsx)(ye,{to:"/perfil",replace:!0}):(0,Le.jsx)(ye,{to:"/login",replace:!0})}),(0,Le.jsx)(be,{path:"/productos",element:t&&null!==r&&void 0!==r&&r.isAdmin?C(r)?(0,Le.jsx)(Dc,{user:t,profile:r}):(0,Le.jsx)(ye,{to:"/perfil",replace:!0}):(0,Le.jsx)(ye,{to:t?"/menu":"/login",replace:!0})}),(0,Le.jsx)(be,{path:"/socios",element:t&&null!==r&&void 0!==r&&r.isAdmin?C(r)?(0,Le.jsx)(Lc,{user:t,profile:r}):(0,Le.jsx)(ye,{to:"/perfil",replace:!0}):(0,Le.jsx)(ye,{to:t?"/menu":"/login",replace:!0})}),(0,Le.jsx)(be,{path:"*",element:(0,Le.jsx)(ye,{to:"/",replace:!0})})]})}),m&&(null===r||void 0===r?void 0:r.photoURL)&&(0,Le.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.9)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999,padding:20,cursor:"pointer"},onClick:()=>v(!1),children:(0,Le.jsx)("img",{src:r.photoURL,alt:"Foto de perfil ampliada",style:{maxWidth:"90%",maxHeight:"90%",objectFit:"contain",borderRadius:8,boxShadow:"0 8px 32px rgba(0, 0, 0, 0.5)"}})})]})}const Gc=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4]\d|[01]?\d?\d)){3}$/));function qc(e,t){navigator.serviceWorker.register(e).then(e=>{setInterval(()=>{e.update()},3e4),e.onupdatefound=()=>{const n=e.installing;null!=n&&(n.onstatechange=()=>{"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("Nueva versi\xf3n disponible, actualizando..."),t&&t.onUpdate&&t.onUpdate(e),e.waiting&&e.waiting.postMessage({type:"SKIP_WAITING"}),window.location.reload()):(console.log("Contenido cacheado para uso offline."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(e=>{console.error("Error registrando service worker:",e)})}const Kc=document.getElementById("root");(0,a.H)(Kc).render((0,Le.jsx)(i.StrictMode,{children:(0,Le.jsx)(ke,{children:(0,Le.jsx)(Hc,{})})})),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",()=>{const t="".concat("","/service-worker.js");Gc?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then(n=>{const r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then(e=>{e.unregister().then(()=>{window.location.reload()})}):qc(e,t)}).catch(()=>{console.log("No hay conexi\xf3n a internet \u2014 la app funcionar\xe1 en modo offline si est\xe1 cacheada.")})}(t,e),navigator.serviceWorker.ready.then(()=>{console.log("Service Worker listo (localhost).")})):qc(t,e)})}}()})();
//# sourceMappingURL=main.f79f3961.js.map