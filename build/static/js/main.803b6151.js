/*! For license information please see main.803b6151.js.LICENSE.txt */
(()=>{"use strict";var e={43:(e,t,n)=>{e.exports=n(202)},153:(e,t,n)=>{var r=n(43),i=Symbol.for("react.element"),o=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,o={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)s.call(t,r)&&!l.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:o,_owner:a.current}}t.Fragment=o,t.jsx=c,t.jsxs=c},202:(e,t)=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,m={};function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function v(){}function b(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var w=b.prototype=new v;w.constructor=b,g(w,y.prototype),w.isPureReactComponent=!0;var E=Array.isArray,S=Object.prototype.hasOwnProperty,x={current:null},_={key:!0,ref:!0,__self:!0,__source:!0};function k(e,t,r){var i,o={},s=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(s=""+t.key),t)S.call(t,i)&&!_.hasOwnProperty(i)&&(o[i]=t[i]);var l=arguments.length-2;if(1===l)o.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];o.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===o[i]&&(o[i]=l[i]);return{$$typeof:n,type:e,key:s,ref:a,props:o,_owner:x.current}}function T(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var I=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function A(e,t,i,o,s){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return s=s(l=e),e=""===o?"."+C(l,0):o,E(s)?(i="",null!=e&&(i=e.replace(I,"$&/")+"/"),A(s,t,i,"",function(e){return e})):null!=s&&(T(s)&&(s=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(s,i+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(I,"$&/")+"/")+e)),t.push(s)),1;if(l=0,o=""===o?".":o+":",E(e))for(var c=0;c<e.length;c++){var u=o+C(a=e[c],c);l+=A(a,t,i,u,s)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(a=e.next()).done;)l+=A(a=a.value,t,i,u=o+C(a,c++),s);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function N(e,t,n){if(null==e)return e;var r=[],i=0;return A(e,r,"","",function(e){return t.call(n,e,i++)}),r}function R(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var D={current:null},P={transition:null},O={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:P,ReactCurrentOwner:x};function L(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:N,forEach:function(e,t,n){N(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return N(e,function(){t++}),t},toArray:function(e){return N(e,function(e){return e})||[]},only:function(e){if(!T(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=s,t.PureComponent=b,t.StrictMode=o,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.act=L,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=g({},e.props),o=e.key,s=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,a=x.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)S.call(t,c)&&!_.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:e.type,key:o,ref:s,props:i,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=k,t.createFactory=function(e){var t=k.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=T,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=P.transition;P.transition={};try{e()}finally{P.transition=t}},t.unstable_act=L,t.useCallback=function(e,t){return D.current.useCallback(e,t)},t.useContext=function(e){return D.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return D.current.useDeferredValue(e)},t.useEffect=function(e,t){return D.current.useEffect(e,t)},t.useId=function(){return D.current.useId()},t.useImperativeHandle=function(e,t,n){return D.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return D.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return D.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return D.current.useMemo(e,t)},t.useReducer=function(e,t,n){return D.current.useReducer(e,t,n)},t.useRef=function(e){return D.current.useRef(e)},t.useState=function(e){return D.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return D.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return D.current.useTransition()},t.version="18.3.1"},234:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<o(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,s=i>>>1;r<s;){var a=2*(r+1)-1,l=e[a],c=a+1,u=e[c];if(0>o(l,n))c<i&&0>o(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[a]=n,r=a);else{if(!(c<i&&0>o(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],d=1,h=null,f=3,p=!1,g=!1,m=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function E(e){if(m=!1,w(e),!g)if(null!==r(c))g=!0,P(S);else{var t=r(u);null!==t&&O(E,t.startTime-e)}}function S(e,n){g=!1,m&&(m=!1,v(T),T=-1),p=!0;var o=f;try{for(w(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!A());){var s=h.callback;if("function"===typeof s){h.callback=null,f=h.priorityLevel;var a=s(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?h.callback=a:h===r(c)&&i(c),w(n)}else i(c);h=r(c)}if(null!==h)var l=!0;else{var d=r(u);null!==d&&O(E,d.startTime-n),l=!1}return l}finally{h=null,f=o,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var x,_=!1,k=null,T=-1,I=5,C=-1;function A(){return!(t.unstable_now()-C<I)}function N(){if(null!==k){var e=t.unstable_now();C=e;var n=!0;try{n=k(!0,e)}finally{n?x():(_=!1,k=null)}}else _=!1}if("function"===typeof b)x=function(){b(N)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,D=R.port2;R.port1.onmessage=N,x=function(){D.postMessage(null)}}else x=function(){y(N,0)};function P(e){k=e,_||(_=!0,x())}function O(e,n){T=y(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){g||p||(g=!0,P(S))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,o){var s=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?s+o:s:o=s,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:o,expirationTime:a=o+a,sortIndex:-1},o>s?(e.sortIndex=o,n(u,e),null===r(c)&&e===r(u)&&(m?(v(T),T=-1):m=!0,O(E,o-s))):(e.sortIndex=a,n(c,e),g||p||(g=!0,P(S))),e},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},391:(e,t,n)=>{var r=n(950);t.H=r.createRoot,r.hydrateRoot},579:(e,t,n)=>{e.exports=n(153)},730:(e,t,n)=>{var r=n(43),i=n(853);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,a={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(a[e]=t,e=0;e<t.length;e++)s.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function g(e,t,n,r,i,o,s){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=s}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){m[e]=new g(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];m[t]=new g(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){m[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){m[e]=new g(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){m[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){m[e]=new g(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){m[e]=new g(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){m[e]=new g(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){m[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)});var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(p,e)||!d.call(f,e)&&(h.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(y,v);m[t]=new g(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(y,v);m[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(y,v);m[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)}),m.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)});var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,E=Symbol.for("react.element"),S=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),I=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),D=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var P=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var j,M=Object.assign;function U(e){if(void 0===j)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);j=t&&t[1]||""}return"\n"+j+e}var F=!1;function z(e,t){if(!e||F)return"";F=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(Ko){var r=Ko}Reflect.construct(e,[],t)}else{try{t.call()}catch(Ko){r=Ko}e.call(t.prototype)}else{try{throw Error()}catch(Ko){r=Ko}e()}}catch(Ko){if(Ko&&r&&"string"===typeof Ko.stack){for(var i=Ko.stack.split("\n"),o=r.stack.split("\n"),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(1!==s||1!==a)do{if(s--,0>--a||i[s]!==o[a]){var l="\n"+i[s].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=s&&0<=a);break}}}finally{F=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function V(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=z(e.type,!1);case 11:return e=z(e.type.render,!1);case 1:return e=z(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case x:return"Fragment";case S:return"Portal";case k:return"Profiler";case _:return"StrictMode";case A:return"Suspense";case N:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case I:return(e.displayName||"Context")+".Consumer";case T:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case R:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case D:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=H(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(lu){return e.body}}function Y(e,t){var n=t.checked;return M({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function $(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function J(e,t){X(e,t);var n=W(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return M({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(te(n)){if(1<n.length)throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function oe(e,t){var n=W(t.value),r=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function se(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return ue(e,t)})}:ue);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ge(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ge(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach(function(e){pe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]})});var ye=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function Ee(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Se=null,xe=null,_e=null;function ke(e){if(e=bi(e)){if("function"!==typeof Se)throw Error(o(280));var t=e.stateNode;t&&(t=Ei(t),Se(e.stateNode,e.type,t))}}function Te(e){xe?_e?_e.push(e):_e=[e]:xe=e}function Ie(){if(xe){var e=xe,t=_e;if(_e=xe=null,ke(e),t)for(e=0;e<t.length;e++)ke(t[e])}}function Ce(e,t){return e(t)}function Ae(){}var Ne=!1;function Re(e,t,n){if(Ne)return e(t,n);Ne=!0;try{return Ce(e,t,n)}finally{Ne=!1,(null!==xe||null!==_e)&&(Ae(),Ie())}}function De(e,t){var n=e.stateNode;if(null===n)return null;var r=Ei(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Pe=!1;if(u)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){Pe=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(ue){Pe=!1}function Le(e,t,n,r,i,o,s,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var je=!1,Me=null,Ue=!1,Fe=null,ze={onError:function(e){je=!0,Me=e}};function Ve(e,t,n,r,i,o,s,a,l){je=!1,Me=null,Le.apply(ze,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(Be(e)!==e)throw Error(o(188))}function He(e){return e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var s=i.alternate;if(null===s){if(null!==(r=i.return)){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return We(i),e;if(s===r)return We(i),t;s=s.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e),null!==e?Ke(e):null}function Ke(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ke(e);if(null!==t)return t;e=e.sibling}return null}var Ge=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,$e=i.unstable_requestPaint,Xe=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,ot=null;var st=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/lt|0)|0},at=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,s=268435455&n;if(0!==s){var a=s&~i;0!==a?r=dt(a):0!==(o&=s)&&(r=dt(o))}else 0!==(s=n&~i)?r=dt(s):0!==o&&(r=dt(o));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(o=t&-t)||16===i&&0!==(4194240&o)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-st(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function gt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-st(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-st(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var bt=0;function wt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var Et,St,xt,_t,kt,Tt=!1,It=[],Ct=null,At=null,Nt=null,Rt=new Map,Dt=new Map,Pt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":At=null;break;case"mouseover":case"mouseout":Nt=null;break;case"pointerover":case"pointerout":Rt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dt.delete(t.pointerId)}}function jt(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},null!==t&&(null!==(t=bi(t))&&St(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Mt(e){var t=vi(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void kt(e.priority,function(){xt(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=bi(n))&&St(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);we=r,n.target.dispatchEvent(r),we=null,t.shift()}return!0}function Ft(e,t,n){Ut(e)&&n.delete(t)}function zt(){Tt=!1,null!==Ct&&Ut(Ct)&&(Ct=null),null!==At&&Ut(At)&&(At=null),null!==Nt&&Ut(Nt)&&(Nt=null),Rt.forEach(Ft),Dt.forEach(Ft)}function Vt(e,t){e.blockedOn===t&&(e.blockedOn=null,Tt||(Tt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,zt)))}function Bt(e){function t(t){return Vt(t,e)}if(0<It.length){Vt(It[0],e);for(var n=1;n<It.length;n++){var r=It[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&Vt(Ct,e),null!==At&&Vt(At,e),null!==Nt&&Vt(Nt,e),Rt.forEach(t),Dt.forEach(t),n=0;n<Pt.length;n++)(r=Pt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Pt.length&&null===(n=Pt[0]).blockedOn;)Mt(n),null===n.blockedOn&&Pt.shift()}var qt=w.ReactCurrentBatchConfig,Wt=!0;function Ht(e,t,n,r){var i=bt,o=qt.transition;qt.transition=null;try{bt=1,Gt(e,t,n,r)}finally{bt=i,qt.transition=o}}function Kt(e,t,n,r){var i=bt,o=qt.transition;qt.transition=null;try{bt=4,Gt(e,t,n,r)}finally{bt=i,qt.transition=o}}function Gt(e,t,n,r){if(Wt){var i=Yt(e,t,n,r);if(null===i)Wr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=jt(Ct,e,t,n,r,i),!0;case"dragenter":return At=jt(At,e,t,n,r,i),!0;case"mouseover":return Nt=jt(Nt,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return Rt.set(o,jt(Rt.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Dt.set(o,jt(Dt.get(o)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==i;){var o=bi(i);if(null!==o&&Et(o),null===(o=Yt(e,t,n,r))&&Wr(e,t,r,Qt,n),o===i)break;i=o}null!==i&&r.stopPropagation()}else Wr(e,t,r,null,n)}}var Qt=null;function Yt(e,t,n,r){if(Qt=null,null!==(e=vi(e=Ee(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function $t(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Xt=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,r=n.length,i="value"in Xt?Xt.value:Xt.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var s=r-e;for(t=1;t<=s&&n[r-t]===i[o-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function on(e){function t(t,n,r,i,o){for(var s in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(i):i[s]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return M(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var sn,an,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=on(cn),dn=M({},cn,{view:0,detail:0}),hn=on(dn),fn=M({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(sn=e.screenX-ln.screenX,an=e.screenY-ln.screenY):an=sn=0,ln=e),sn)},movementY:function(e){return"movementY"in e?e.movementY:an}}),pn=on(fn),gn=on(M({},fn,{dataTransfer:0})),mn=on(M({},dn,{relatedTarget:0})),yn=on(M({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=M({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=on(vn),wn=on(M({},cn,{data:0})),En={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _n(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=xn[e])&&!!t[e]}function kn(){return _n}var Tn=M({},dn,{key:function(e){if(e.key){var t=En[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Sn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),In=on(Tn),Cn=on(M({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),An=on(M({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kn})),Nn=on(M({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Rn=M({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Dn=on(Rn),Pn=[9,13,27,32],On=u&&"CompositionEvent"in window,Ln=null;u&&"documentMode"in document&&(Ln=document.documentMode);var jn=u&&"TextEvent"in window&&!Ln,Mn=u&&(!On||Ln&&8<Ln&&11>=Ln),Un=String.fromCharCode(32),Fn=!1;function zn(e,t){switch(e){case"keyup":return-1!==Pn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Hn(e,t,n,r){Te(r),0<(t=Kr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Kn=null,Gn=null;function Qn(e){Ur(e,0)}function Yn(e){if(G(wi(e)))return e}function $n(e,t){if("change"===e)return t}var Xn=!1;if(u){var Jn;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Jn=Zn}else Jn=!1;Xn=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Kn&&(Kn.detachEvent("onpropertychange",nr),Gn=Kn=null)}function nr(e){if("value"===e.propertyName&&Yn(Gn)){var t=[];Hn(t,Gn,e,Ee(e)),Re(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Gn=n,(Kn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Gn)}function or(e,t){if("click"===e)return Yn(t)}function sr(e,t){if("input"===e||"change"===e)return Yn(t)}var ar="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(ar(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!d.call(t,i)||!ar(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=void 0===r.end?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=ur(n,o);var s=ur(n,r);i&&s&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var gr=u&&"documentMode"in document&&11>=document.documentMode,mr=null,yr=null,vr=null,br=!1;function wr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==mr||mr!==Q(r)||("selectionStart"in(r=mr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&lr(vr,r)||(vr=r,0<(r=Kr(yr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function Er(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Sr={animationend:Er("Animation","AnimationEnd"),animationiteration:Er("Animation","AnimationIteration"),animationstart:Er("Animation","AnimationStart"),transitionend:Er("Transition","TransitionEnd")},xr={},_r={};function kr(e){if(xr[e])return xr[e];if(!Sr[e])return e;var t,n=Sr[e];for(t in n)if(n.hasOwnProperty(t)&&t in _r)return xr[e]=n[t];return e}u&&(_r=document.createElement("div").style,"AnimationEvent"in window||(delete Sr.animationend.animation,delete Sr.animationiteration.animation,delete Sr.animationstart.animation),"TransitionEvent"in window||delete Sr.transitionend.transition);var Tr=kr("animationend"),Ir=kr("animationiteration"),Cr=kr("animationstart"),Ar=kr("transitionend"),Nr=new Map,Rr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dr(e,t){Nr.set(e,t),l(t,[e])}for(var Pr=0;Pr<Rr.length;Pr++){var Or=Rr[Pr];Dr(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}Dr(Tr,"onAnimationEnd"),Dr(Ir,"onAnimationIteration"),Dr(Cr,"onAnimationStart"),Dr("dblclick","onDoubleClick"),Dr("focusin","onFocus"),Dr("focusout","onBlur"),Dr(Ar,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Mr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,s,a,l,c){if(Ve.apply(this,arguments),je){if(!je)throw Error(o(198));var u=Me;je=!1,Me=null,Ue||(Ue=!0,Fe=u)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var s=r.length-1;0<=s;s--){var a=r[s],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==o&&i.isPropagationStopped())break e;Mr(i,a,c),o=l}else for(s=0;s<r.length;s++){if(l=(a=r[s]).instance,c=a.currentTarget,a=a.listener,l!==o&&i.isPropagationStopped())break e;Mr(i,a,c),o=l}}}if(Ue)throw e=Fe,Ue=!1,Fe=null,e}function Fr(e,t){var n=t[gi];void 0===n&&(n=t[gi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function zr(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var Vr="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[Vr]){e[Vr]=!0,s.forEach(function(t){"selectionchange"!==t&&(jr.has(t)||zr(t,!1,e),zr(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Vr]||(t[Vr]=!0,zr("selectionchange",!1,t))}}function qr(e,t,n,r){switch($t(t)){case 1:var i=Ht;break;case 4:i=Kt;break;default:i=Gt}n=i.bind(null,t,n,e),i=void 0,!Pe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Wr(e,t,n,r,i){var o=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var s=r.tag;if(3===s||4===s){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===s)for(s=r.return;null!==s;){var l=s.tag;if((3===l||4===l)&&((l=s.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;s=s.return}for(;null!==a;){if(null===(s=vi(a)))return;if(5===(l=s.tag)||6===l){r=o=s;continue e}a=a.parentNode}}r=r.return}Re(function(){var r=o,i=Ee(n),s=[];e:{var a=Nr.get(e);if(void 0!==a){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=In;break;case"focusin":c="focus",l=mn;break;case"focusout":c="blur",l=mn;break;case"beforeblur":case"afterblur":l=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=An;break;case Tr:case Ir:case Cr:l=yn;break;case Ar:l=Nn;break;case"scroll":l=hn;break;case"wheel":l=Dn;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Cn}var u=0!==(4&t),d=!u&&"scroll"===e,h=u?null!==a?a+"Capture":null:a;u=[];for(var f,p=r;null!==p;){var g=(f=p).stateNode;if(5===f.tag&&null!==g&&(f=g,null!==h&&(null!=(g=De(p,h))&&u.push(Hr(p,g,f)))),d)break;p=p.return}0<u.length&&(a=new l(a,c,null,n,i),s.push({event:a,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===we||!(c=n.relatedTarget||n.fromElement)||!vi(c)&&!c[pi])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?vi(c):null)&&(c!==(d=Be(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=pn,g="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=Cn,g="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==l?a:wi(l),f=null==c?a:wi(c),(a=new u(g,p+"leave",l,n,i)).target=d,a.relatedTarget=f,g=null,vi(i)===r&&((u=new u(h,p+"enter",c,n,i)).target=f,u.relatedTarget=d,g=u),d=g,l&&c)e:{for(h=c,p=0,f=u=l;f;f=Gr(f))p++;for(f=0,g=h;g;g=Gr(g))f++;for(;0<p-f;)u=Gr(u),p--;for(;0<f-p;)h=Gr(h),f--;for(;p--;){if(u===h||null!==h&&u===h.alternate)break e;u=Gr(u),h=Gr(h)}u=null}else u=null;null!==l&&Qr(s,a,l,u,!1),null!==c&&null!==d&&Qr(s,d,c,u,!0)}if("select"===(l=(a=r?wi(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var m=$n;else if(Wn(a))if(Xn)m=sr;else{m=ir;var y=rr}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(m=or);switch(m&&(m=m(e,r))?Hn(s,m,n,i):(y&&y(e,a,r),"focusout"===e&&(y=a._wrapperState)&&y.controlled&&"number"===a.type&&ee(a,"number",a.value)),y=r?wi(r):window,e){case"focusin":(Wn(y)||"true"===y.contentEditable)&&(mr=y,yr=r,vr=null);break;case"focusout":vr=yr=mr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,wr(s,n,i);break;case"selectionchange":if(gr)break;case"keydown":case"keyup":wr(s,n,i)}var v;if(On)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Bn?zn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Mn&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Bn&&(v=en()):(Jt="value"in(Xt=i)?Xt.value:Xt.textContent,Bn=!0)),0<(y=Kr(r,b)).length&&(b=new wn(b,e,null,n,i),s.push({event:b,listeners:y}),v?b.data=v:null!==(v=Vn(n))&&(b.data=v))),(v=jn?function(e,t){switch(e){case"compositionend":return Vn(t);case"keypress":return 32!==t.which?null:(Fn=!0,Un);case"textInput":return(e=t.data)===Un&&Fn?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!On&&zn(e,t)?(e=en(),Zt=Jt=Xt=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Mn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Kr(r,"onBeforeInput")).length&&(i=new wn("onBeforeInput","beforeinput",null,n,i),s.push({event:i,listeners:r}),i.data=v))}Ur(s,t)})}function Hr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Kr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=De(e,n))&&r.unshift(Hr(e,o,i)),null!=(o=De(e,t))&&r.push(Hr(e,o,i))),e=e.return}return r}function Gr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var o=t._reactName,s=[];null!==n&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==c&&(a=c,i?null!=(l=De(n,o))&&s.unshift(Hr(n,l,a)):i||null!=(l=De(n,o))&&s.push(Hr(n,l,a))),n=n.return}0!==s.length&&e.push({event:t,listeners:s})}var Yr=/\r\n?/g,$r=/\u0000|\uFFFD/g;function Xr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace($r,"")}function Jr(e,t,n){if(t=Xr(t),Xr(e)!==t&&n)throw Error(o(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,oi="function"===typeof Promise?Promise:void 0,si="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof oi?function(e){return oi.resolve(null).then(e).catch(ai)}:ri;function ai(e){setTimeout(function(){throw e})}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Bt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var di=Math.random().toString(36).slice(2),hi="__reactFiber$"+di,fi="__reactProps$"+di,pi="__reactContainer$"+di,gi="__reactEvents$"+di,mi="__reactListeners$"+di,yi="__reactHandles$"+di;function vi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[hi])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function bi(e){return!(e=e[hi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function wi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function Ei(e){return e[fi]||null}var Si=[],xi=-1;function _i(e){return{current:e}}function ki(e){0>xi||(e.current=Si[xi],Si[xi]=null,xi--)}function Ti(e,t){xi++,Si[xi]=e.current,e.current=t}var Ii={},Ci=_i(Ii),Ai=_i(!1),Ni=Ii;function Ri(e,t){var n=e.type.contextTypes;if(!n)return Ii;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Di(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Pi(){ki(Ai),ki(Ci)}function Oi(e,t,n){if(Ci.current!==Ii)throw Error(o(168));Ti(Ci,t),Ti(Ai,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(o(108,q(e)||"Unknown",i));return M({},n,r)}function ji(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ii,Ni=Ci.current,Ti(Ci,e),Ti(Ai,Ai.current),!0}function Mi(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=Li(e,t,Ni),r.__reactInternalMemoizedMergedChildContext=e,ki(Ai),ki(Ci),Ti(Ci,e)):ki(Ai),Ti(Ai,n)}var Ui=null,Fi=!1,zi=!1;function Vi(e){null===Ui?Ui=[e]:Ui.push(e)}function Bi(){if(!zi&&null!==Ui){zi=!0;var e=0,t=bt;try{var n=Ui;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ui=null,Fi=!1}catch(i){throw null!==Ui&&(Ui=Ui.slice(e+1)),Ge(Ze,Bi),i}finally{bt=t,zi=!1}}return null}var qi=[],Wi=0,Hi=null,Ki=0,Gi=[],Qi=0,Yi=null,$i=1,Xi="";function Ji(e,t){qi[Wi++]=Ki,qi[Wi++]=Hi,Hi=e,Ki=t}function Zi(e,t,n){Gi[Qi++]=$i,Gi[Qi++]=Xi,Gi[Qi++]=Yi,Yi=e;var r=$i;e=Xi;var i=32-st(r)-1;r&=~(1<<i),n+=1;var o=32-st(t)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,$i=1<<32-st(t)+i|n<<i|r,Xi=o+e}else $i=1<<o|n<<i|r,Xi=e}function eo(e){null!==e.return&&(Ji(e,1),Zi(e,1,0))}function to(e){for(;e===Hi;)Hi=qi[--Wi],qi[Wi]=null,Ki=qi[--Wi],qi[Wi]=null;for(;e===Yi;)Yi=Gi[--Qi],Gi[Qi]=null,Xi=Gi[--Qi],Gi[Qi]=null,$i=Gi[--Qi],Gi[Qi]=null}var no=null,ro=null,io=!1,oo=null;function so(e,t){var n=jc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ao(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,no=e,ro=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,no=e,ro=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:$i,overflow:Xi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=jc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,no=e,ro=null,!0);default:return!1}}function lo(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function co(e){if(io){var t=ro;if(t){var n=t;if(!ao(e,t)){if(lo(e))throw Error(o(418));t=ci(n.nextSibling);var r=no;t&&ao(e,t)?so(r,n):(e.flags=-4097&e.flags|2,io=!1,no=e)}}else{if(lo(e))throw Error(o(418));e.flags=-4097&e.flags|2,io=!1,no=e}}}function uo(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;no=e}function ho(e){if(e!==no)return!1;if(!io)return uo(e),io=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ro)){if(lo(e))throw fo(),Error(o(418));for(;t;)so(e,t),t=ci(t.nextSibling)}if(uo(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ro=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ro=null}}else ro=no?ci(e.stateNode.nextSibling):null;return!0}function fo(){for(var e=ro;e;)e=ci(e.nextSibling)}function po(){ro=no=null,io=!1}function go(e){null===oo?oo=[e]:oo.push(e)}var mo=w.ReactCurrentBatchConfig;function yo(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=r,s=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===s?t.ref:(t=function(e){var t=i.refs;null===e?delete t[s]:t[s]=e},t._stringRef=s,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function vo(e,t){throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function bo(e){return(0,e._init)(e._payload)}function wo(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Uc(e,t)).index=0,e.sibling=null,e}function s(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Bc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var o=n.type;return o===x?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===D&&bo(o)===t.type)?((r=i(t,n.props)).ref=yo(e,t,n),r.return=e,r):((r=Fc(n.type,n.key,n.props,null,e.mode,r)).ref=yo(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=qc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,o){return null===t||7!==t.tag?((t=zc(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Bc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case E:return(n=Fc(t.type,t.key,t.props,null,e.mode,n)).ref=yo(e,null,t),n.return=e,n;case S:return(t=qc(t,e.mode,n)).return=e,t;case D:return h(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=zc(t,e.mode,n,null)).return=e,t;vo(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case E:return n.key===i?c(e,t,n,r):null;case S:return n.key===i?u(e,t,n,r):null;case D:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:d(e,t,n,r,null);vo(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case E:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case S:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case D:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return d(t,e=e.get(n)||null,r,i,null);vo(t,r)}return null}function g(i,o,a,l){for(var c=null,u=null,d=o,g=o=0,m=null;null!==d&&g<a.length;g++){d.index>g?(m=d,d=null):m=d.sibling;var y=f(i,d,a[g],l);if(null===y){null===d&&(d=m);break}e&&d&&null===y.alternate&&t(i,d),o=s(y,o,g),null===u?c=y:u.sibling=y,u=y,d=m}if(g===a.length)return n(i,d),io&&Ji(i,g),c;if(null===d){for(;g<a.length;g++)null!==(d=h(i,a[g],l))&&(o=s(d,o,g),null===u?c=d:u.sibling=d,u=d);return io&&Ji(i,g),c}for(d=r(i,d);g<a.length;g++)null!==(m=p(d,i,g,a[g],l))&&(e&&null!==m.alternate&&d.delete(null===m.key?g:m.key),o=s(m,o,g),null===u?c=m:u.sibling=m,u=m);return e&&d.forEach(function(e){return t(i,e)}),io&&Ji(i,g),c}function m(i,a,l,c){var u=L(l);if("function"!==typeof u)throw Error(o(150));if(null==(l=u.call(l)))throw Error(o(151));for(var d=u=null,g=a,m=a=0,y=null,v=l.next();null!==g&&!v.done;m++,v=l.next()){g.index>m?(y=g,g=null):y=g.sibling;var b=f(i,g,v.value,c);if(null===b){null===g&&(g=y);break}e&&g&&null===b.alternate&&t(i,g),a=s(b,a,m),null===d?u=b:d.sibling=b,d=b,g=y}if(v.done)return n(i,g),io&&Ji(i,m),u;if(null===g){for(;!v.done;m++,v=l.next())null!==(v=h(i,v.value,c))&&(a=s(v,a,m),null===d?u=v:d.sibling=v,d=v);return io&&Ji(i,m),u}for(g=r(i,g);!v.done;m++,v=l.next())null!==(v=p(g,i,m,v.value,c))&&(e&&null!==v.alternate&&g.delete(null===v.key?m:v.key),a=s(v,a,m),null===d?u=v:d.sibling=v,d=v);return e&&g.forEach(function(e){return t(i,e)}),io&&Ji(i,m),u}return function e(r,o,s,l){if("object"===typeof s&&null!==s&&s.type===x&&null===s.key&&(s=s.props.children),"object"===typeof s&&null!==s){switch(s.$$typeof){case E:e:{for(var c=s.key,u=o;null!==u;){if(u.key===c){if((c=s.type)===x){if(7===u.tag){n(r,u.sibling),(o=i(u,s.props.children)).return=r,r=o;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===D&&bo(c)===u.type){n(r,u.sibling),(o=i(u,s.props)).ref=yo(r,u,s),o.return=r,r=o;break e}n(r,u);break}t(r,u),u=u.sibling}s.type===x?((o=zc(s.props.children,r.mode,l,s.key)).return=r,r=o):((l=Fc(s.type,s.key,s.props,null,r.mode,l)).ref=yo(r,o,s),l.return=r,r=l)}return a(r);case S:e:{for(u=s.key;null!==o;){if(o.key===u){if(4===o.tag&&o.stateNode.containerInfo===s.containerInfo&&o.stateNode.implementation===s.implementation){n(r,o.sibling),(o=i(o,s.children||[])).return=r,r=o;break e}n(r,o);break}t(r,o),o=o.sibling}(o=qc(s,r.mode,l)).return=r,r=o}return a(r);case D:return e(r,o,(u=s._init)(s._payload),l)}if(te(s))return g(r,o,s,l);if(L(s))return m(r,o,s,l);vo(r,s)}return"string"===typeof s&&""!==s||"number"===typeof s?(s=""+s,null!==o&&6===o.tag?(n(r,o.sibling),(o=i(o,s)).return=r,r=o):(n(r,o),(o=Bc(s,r.mode,l)).return=r,r=o),a(r)):n(r,o)}}var Eo=wo(!0),So=wo(!1),xo=_i(null),_o=null,ko=null,To=null;function Io(){To=ko=_o=null}function Co(e){var t=xo.current;ki(xo),e._currentValue=t}function Ao(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function No(e,t){_o=e,To=ko=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(xa=!0),e.firstContext=null)}function Ro(e){var t=e._currentValue;if(To!==e)if(e={context:e,memoizedValue:t,next:null},null===ko){if(null===_o)throw Error(o(308));ko=e,_o.dependencies={lanes:0,firstContext:e}}else ko=ko.next=e;return t}var Do=null;function Po(e){null===Do?Do=[e]:Do.push(e)}function Oo(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Po(t)):(n.next=i.next,i.next=n),t.interleaved=n,Lo(e,r)}function Lo(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var jo=!1;function Mo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Uo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Fo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function zo(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Pl)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Lo(e,n)}return null===(i=r.interleaved)?(t.next=t,Po(r)):(t.next=i.next,i.next=t),r.interleaved=t,Lo(e,n)}function Vo(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}function qo(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=s:o=o.next=s,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Wo(e,t,n,r){var i=e.updateQueue;jo=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,c=l.next;l.next=null,null===s?o=c:s.next=c,s=l;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==s&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==o){var d=i.baseState;for(s=0,u=c=l=null,a=o;;){var h=a.lane,f=a.eventTime;if((r&h)===h){null!==u&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,g=a;switch(h=t,f=n,g.tag){case 1:if("function"===typeof(p=g.payload)){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=g.payload)?p.call(f,d,h):p)||void 0===h)break e;d=M({},d,h);break e;case 2:jo=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=f,l=d):u=u.next=f,s|=h;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(h=a).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===u&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{s|=i.lane,i=i.next}while(i!==t)}else null===o&&(i.shared.lanes=0);Vl|=s,e.lanes=s,e.memoizedState=d}}function Ho(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var Go={},Qo=_i(Go),Yo=_i(Go),$o=_i(Go);function Xo(e){if(e===Go)throw Error(o(174));return e}function Jo(e,t){switch(Ti($o,t),Ti(Yo,e),Ti(Qo,Go),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}ki(Qo),Ti(Qo,t)}function Zo(){ki(Qo),ki(Yo),ki($o)}function es(e){Xo($o.current);var t=Xo(Qo.current),n=le(t,e.type);t!==n&&(Ti(Yo,e),Ti(Qo,n))}function ns(e){Yo.current===e&&(ki(Qo),ki(Yo))}var rs=_i(0);function is(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ss=[];function as(){for(var e=0;e<ss.length;e++)ss[e]._workInProgressVersionPrimary=null;ss.length=0}var ls=w.ReactCurrentDispatcher,cs=w.ReactCurrentBatchConfig,us=0,ds=null,hs=null,fs=null,ps=!1,gs=!1,ms=0,ys=0;function vs(){throw Error(o(321))}function bs(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function ws(e,t,n,r,i,s){if(us=s,ds=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ls.current=null===e||null===e.memoizedState?ra:ia,e=n(r,i),gs){s=0;do{if(gs=!1,ms=0,25<=s)throw Error(o(301));s+=1,fs=hs=null,t.updateQueue=null,ls.current=oa,e=n(r,i)}while(gs)}if(ls.current=na,t=null!==hs&&null!==hs.next,us=0,fs=hs=ds=null,ps=!1,t)throw Error(o(300));return e}function Es(){var e=0!==ms;return ms=0,e}function Ss(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===fs?ds.memoizedState=fs=e:fs=fs.next=e,fs}function xs(){if(null===hs){var e=ds.alternate;e=null!==e?e.memoizedState:null}else e=hs.next;var t=null===fs?ds.memoizedState:fs.next;if(null!==t)fs=t,hs=e;else{if(null===e)throw Error(o(310));e={memoizedState:(hs=e).memoizedState,baseState:hs.baseState,baseQueue:hs.baseQueue,queue:hs.queue,next:null},null===fs?ds.memoizedState=fs=e:fs=fs.next=e}return fs}function _s(e,t){return"function"===typeof t?t(e):t}function ks(e){var t=xs(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=hs,i=r.baseQueue,s=n.pending;if(null!==s){if(null!==i){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(null!==i){s=i.next,r=r.baseState;var l=a=null,c=null,u=s;do{var d=u.lane;if((us&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,a=r):c=c.next=h,ds.lanes|=d,Vl|=d}u=u.next}while(null!==u&&u!==s);null===c?a=r:c.next=l,ar(r,t.memoizedState)||(xa=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{s=i.lane,ds.lanes|=s,Vl|=s,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ts(e){var t=xs(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{s=e(s,a.action),a=a.next}while(a!==i);ar(s,t.memoizedState)||(xa=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function Is(){}function Cs(e,t){var n=ds,r=xs(),i=t(),s=!ar(r.memoizedState,i);if(s&&(r.memoizedState=i,xa=!0),r=r.queue,zs(Rs.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||null!==fs&&1&fs.memoizedState.tag){if(n.flags|=2048,Ls(9,Ns.bind(null,n,r,i,t),void 0,null),null===Ol)throw Error(o(349));0!==(30&us)||As(n,t,i)}return i}function As(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=ds.updateQueue)?(t={lastEffect:null,stores:null},ds.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ns(e,t,n,r){t.value=n,t.getSnapshot=r,Ds(t)&&Ps(e)}function Rs(e,t,n){return n(function(){Ds(t)&&Ps(e)})}function Ds(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ar(e,n)}catch(r){return!0}}function Ps(e){var t=Lo(e,1);null!==t&&ac(t,e,1,-1)}function Os(e){var t=Ss();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_s,lastRenderedState:e},t.queue=e,e=e.dispatch=Js.bind(null,ds,e),[t.memoizedState,e]}function Ls(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=ds.updateQueue)?(t={lastEffect:null,stores:null},ds.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function js(){return xs().memoizedState}function Ms(e,t,n,r){var i=Ss();ds.flags|=e,i.memoizedState=Ls(1|t,n,void 0,void 0===r?null:r)}function Us(e,t,n,r){var i=xs();r=void 0===r?null:r;var o=void 0;if(null!==hs){var s=hs.memoizedState;if(o=s.destroy,null!==r&&bs(r,s.deps))return void(i.memoizedState=Ls(t,n,o,r))}ds.flags|=e,i.memoizedState=Ls(1|t,n,o,r)}function Fs(e,t){return Ms(8390656,8,e,t)}function zs(e,t){return Us(2048,8,e,t)}function Vs(e,t){return Us(4,2,e,t)}function Bs(e,t){return Us(4,4,e,t)}function qs(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ws(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Us(4,4,qs.bind(null,t,e),n)}function Hs(){}function Ks(e,t){var n=xs();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&bs(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Gs(e,t){var n=xs();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&bs(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Qs(e,t,n){return 0===(21&us)?(e.baseState&&(e.baseState=!1,xa=!0),e.memoizedState=n):(ar(n,t)||(n=gt(),ds.lanes|=n,Vl|=n,e.baseState=!0),t)}function Ys(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=cs.transition;cs.transition={};try{e(!1),t()}finally{bt=n,cs.transition=r}}function $s(){return xs().memoizedState}function Xs(e,t,n){var r=sc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Zs(e))ea(t,n);else if(null!==(n=Oo(e,t,n,r))){ac(n,e,r,oc()),ta(n,t,r)}}function Js(e,t,n){var r=sc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Zs(e))ea(t,i);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var s=t.lastRenderedState,a=o(s,n);if(i.hasEagerState=!0,i.eagerState=a,ar(a,s)){var l=t.interleaved;return null===l?(i.next=i,Po(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(Ko){}null!==(n=Oo(e,t,i,r))&&(ac(n,e,r,i=oc()),ta(n,t,r))}}function Zs(e){var t=e.alternate;return e===ds||null!==t&&t===ds}function ea(e,t){gs=ps=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function ta(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}var na={readContext:Ro,useCallback:vs,useContext:vs,useEffect:vs,useImperativeHandle:vs,useInsertionEffect:vs,useLayoutEffect:vs,useMemo:vs,useReducer:vs,useRef:vs,useState:vs,useDebugValue:vs,useDeferredValue:vs,useTransition:vs,useMutableSource:vs,useSyncExternalStore:vs,useId:vs,unstable_isNewReconciler:!1},ra={readContext:Ro,useCallback:function(e,t){return Ss().memoizedState=[e,void 0===t?null:t],e},useContext:Ro,useEffect:Fs,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ms(4194308,4,qs.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ms(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ms(4,2,e,t)},useMemo:function(e,t){var n=Ss();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Ss();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Xs.bind(null,ds,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Ss().memoizedState=e},useState:Os,useDebugValue:Hs,useDeferredValue:function(e){return Ss().memoizedState=e},useTransition:function(){var e=Os(!1),t=e[0];return e=Ys.bind(null,e[1]),Ss().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ds,i=Ss();if(io){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===Ol)throw Error(o(349));0!==(30&us)||As(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,Fs(Rs.bind(null,r,s,e),[e]),r.flags|=2048,Ls(9,Ns.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=Ss(),t=Ol.identifierPrefix;if(io){var n=Xi;t=":"+t+"R"+(n=($i&~(1<<32-st($i)-1)).toString(32)+n),0<(n=ms++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=ys++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ia={readContext:Ro,useCallback:Ks,useContext:Ro,useEffect:zs,useImperativeHandle:Ws,useInsertionEffect:Vs,useLayoutEffect:Bs,useMemo:Gs,useReducer:ks,useRef:js,useState:function(){return ks(_s)},useDebugValue:Hs,useDeferredValue:function(e){return Qs(xs(),hs.memoizedState,e)},useTransition:function(){return[ks(_s)[0],xs().memoizedState]},useMutableSource:Is,useSyncExternalStore:Cs,useId:$s,unstable_isNewReconciler:!1},oa={readContext:Ro,useCallback:Ks,useContext:Ro,useEffect:zs,useImperativeHandle:Ws,useInsertionEffect:Vs,useLayoutEffect:Bs,useMemo:Gs,useReducer:Ts,useRef:js,useState:function(){return Ts(_s)},useDebugValue:Hs,useDeferredValue:function(e){var t=xs();return null===hs?t.memoizedState=e:Qs(t,hs.memoizedState,e)},useTransition:function(){return[Ts(_s)[0],xs().memoizedState]},useMutableSource:Is,useSyncExternalStore:Cs,useId:$s,unstable_isNewReconciler:!1};function sa(e,t){if(e&&e.defaultProps){for(var n in t=M({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function aa(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:M({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var la={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=oc(),i=sc(e),o=Fo(r,i);o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=zo(e,o,i))&&(ac(t,e,i,r),Vo(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=oc(),i=sc(e),o=Fo(r,i);o.tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=zo(e,o,i))&&(ac(t,e,i,r),Vo(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=oc(),r=sc(e),i=Fo(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=zo(e,i,r))&&(ac(t,e,r,n),Vo(t,e,r))}};function ca(e,t,n,r,i,o,s){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,s):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,o))}function ua(e,t,n){var r=!1,i=Ii,o=t.contextType;return"object"===typeof o&&null!==o?o=Ro(o):(i=Di(t)?Ni:Ci.current,o=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ri(e,i):Ii),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=la,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function da(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&la.enqueueReplaceState(t,t.state,null)}function ha(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Mo(e);var o=t.contextType;"object"===typeof o&&null!==o?i.context=Ro(o):(o=Di(t)?Ni:Ci.current,i.context=Ri(e,o)),i.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(aa(e,t,o,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&la.enqueueReplaceState(i,i.state,null),Wo(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function fa(e,t){try{var n="",r=t;do{n+=V(r),r=r.return}while(r);var i=n}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:i,digest:null}}function pa(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ga(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var ma="function"===typeof WeakMap?WeakMap:Map;function ya(e,t,n){(n=Fo(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Yl||(Yl=!0,$l=r),ga(0,t)},n}function va(e,t,n){(n=Fo(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){ga(0,t)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){ga(0,t),"function"!==typeof r&&(null===Xl?Xl=new Set([this]):Xl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ba(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ma;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Nc.bind(null,e,t,n),t.then(e,e))}function wa(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function Ea(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Fo(-1,1)).tag=2,zo(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var Sa=w.ReactCurrentOwner,xa=!1;function _a(e,t,n,r){t.child=null===e?So(t,null,n,r):Eo(t,e.child,n,r)}function ka(e,t,n,r,i){n=n.render;var o=t.ref;return No(t,i),r=ws(e,t,n,r,o,i),n=Es(),null===e||xa?(io&&n&&eo(t),t.flags|=1,_a(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ya(e,t,i))}function Ta(e,t,n,r,i){if(null===e){var o=n.type;return"function"!==typeof o||Mc(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Fc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Ia(e,t,o,r,i))}if(o=e.child,0===(e.lanes&i)){var s=o.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(s,r)&&e.ref===t.ref)return Ya(e,t,i)}return t.flags|=1,(e=Uc(o,r)).ref=t.ref,e.return=t,t.child=e}function Ia(e,t,n,r,i){if(null!==e){var o=e.memoizedProps;if(lr(o,r)&&e.ref===t.ref){if(xa=!1,t.pendingProps=r=o,0===(e.lanes&i))return t.lanes=e.lanes,Ya(e,t,i);0!==(131072&e.flags)&&(xa=!0)}}return Ra(e,t,n,r,i)}function Aa(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ti(Ul,Ml),Ml|=n;else{if(0===(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ti(Ul,Ml),Ml|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==o?o.baseLanes:n,Ti(Ul,Ml),Ml|=r}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,Ti(Ul,Ml),Ml|=r;return _a(e,t,i,n),t.child}function Na(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ra(e,t,n,r,i){var o=Di(n)?Ni:Ci.current;return o=Ri(t,o),No(t,i),n=ws(e,t,n,r,o,i),r=Es(),null===e||xa?(io&&r&&eo(t),t.flags|=1,_a(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ya(e,t,i))}function Da(e,t,n,r,i){if(Di(n)){var o=!0;ji(t)}else o=!1;if(No(t,i),null===t.stateNode)Qa(e,t),ua(t,n,r),ha(t,n,r,i),r=!0;else if(null===e){var s=t.stateNode,a=t.memoizedProps;s.props=a;var l=s.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ro(c):c=Ri(t,c=Di(n)?Ni:Ci.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof s.getSnapshotBeforeUpdate;d||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==r||l!==c)&&da(t,s,r,c),jo=!1;var h=t.memoizedState;s.state=h,Wo(t,r,s,i),l=t.memoizedState,a!==r||h!==l||Ai.current||jo?("function"===typeof u&&(aa(t,n,u,r),l=t.memoizedState),(a=jo||ca(t,n,a,r,h,l,c))?(d||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.flags|=4194308)):("function"===typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),s.props=r,s.state=l,s.context=c,r=a):("function"===typeof s.componentDidMount&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,Uo(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:sa(t.type,a),s.props=c,d=t.pendingProps,h=s.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ro(l):l=Ri(t,l=Di(n)?Ni:Ci.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==d||h!==l)&&da(t,s,r,l),jo=!1,h=t.memoizedState,s.state=h,Wo(t,r,s,i);var p=t.memoizedState;a!==d||h!==p||Ai.current||jo?("function"===typeof f&&(aa(t,n,f,r),p=t.memoizedState),(c=jo||ca(t,n,c,r,h,p,l)||!1)?(u||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(r,p,l),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof s.componentDidUpdate&&(t.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),s.props=r,s.state=p,s.context=l,r=c):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Pa(e,t,n,r,o,i)}function Pa(e,t,n,r,i,o){Na(e,t);var s=0!==(128&t.flags);if(!r&&!s)return i&&Mi(t,n,!1),Ya(e,t,o);r=t.stateNode,Sa.current=t;var a=s&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&s?(t.child=Eo(t,e.child,null,o),t.child=Eo(t,null,a,o)):_a(e,t,a,o),t.memoizedState=r.state,i&&Mi(t,n,!0),t.child}function Oa(e){var t=e.stateNode;t.pendingContext?Oi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Oi(0,t.context,!1),Jo(e,t.containerInfo)}function La(e,t,n,r,i){return po(),go(i),t.flags|=256,_a(e,t,n,r),t.child}var ja,Ma,Ua,Fa,za={dehydrated:null,treeContext:null,retryLane:0};function Va(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ba(e,t,n){var r,i=t.pendingProps,s=rs.current,a=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&s)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(s|=1),Ti(rs,1&s),null===e)return co(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,a?(i=t.mode,a=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=Vc(l,i,0,null),e=zc(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Va(n),t.memoizedState=za,e):qa(t,l));if(null!==(s=e.memoizedState)&&null!==(r=s.dehydrated))return function(e,t,n,r,i,s,a){if(n)return 256&t.flags?(t.flags&=-257,Wa(e,t,a,r=pa(Error(o(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=Vc({mode:"visible",children:r.children},i,0,null),(s=zc(s,i,a,null)).flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,0!==(1&t.mode)&&Eo(t,e.child,null,a),t.child.memoizedState=Va(a),t.memoizedState=za,s);if(0===(1&t.mode))return Wa(e,t,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,Wa(e,t,a,r=pa(s=Error(o(419)),r,void 0))}if(l=0!==(a&e.childLanes),xa||l){if(null!==(r=Ol)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|a))?0:i)&&i!==s.retryLane&&(s.retryLane=i,Lo(e,i),ac(r,e,i,-1))}return wc(),Wa(e,t,a,r=pa(Error(o(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Dc.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,ro=ci(i.nextSibling),no=t,io=!0,oo=null,null!==e&&(Gi[Qi++]=$i,Gi[Qi++]=Xi,Gi[Qi++]=Yi,$i=e.id,Xi=e.overflow,Yi=t),t=qa(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,s,n);if(a){a=i.fallback,l=t.mode,r=(s=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==s?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Uc(s,c)).subtreeFlags=14680064&s.subtreeFlags,null!==r?a=Uc(r,a):(a=zc(a,l,n,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,l=null===(l=e.child.memoizedState)?Va(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=za,i}return e=(a=e.child).sibling,i=Uc(a,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function qa(e,t){return(t=Vc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Wa(e,t,n,r){return null!==r&&go(r),Eo(t,e.child,null,n),(e=qa(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ha(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ao(e.return,t,n)}function Ka(e,t,n,r,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Ga(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(_a(e,t,r.children,n),0!==(2&(r=rs.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ha(e,n,t);else if(19===e.tag)Ha(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ti(rs,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===is(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Ka(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===is(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Ka(t,!0,n,null,o);break;case"together":Ka(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Qa(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ya(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Vl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Uc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Uc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function $a(e,t){if(!io)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Xa(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ja(e,t,n){var r=t.pendingProps;switch(to(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xa(t),null;case 1:case 17:return Di(t.type)&&Pi(),Xa(t),null;case 3:return r=t.stateNode,Zo(),ki(Ai),ki(Ci),as(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ho(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==oo&&(dc(oo),oo=null))),Ma(e,t),Xa(t),null;case 5:ns(t);var i=Xo($o.current);if(n=t.type,null!==e&&null!=t.stateNode)Ua(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(o(166));return Xa(t),null}if(e=Xo(Qo.current),ho(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[hi]=t,r[fi]=s,e=0!==(1&t.mode),n){case"dialog":Fr("cancel",r),Fr("close",r);break;case"iframe":case"object":case"embed":Fr("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)Fr(Lr[i],r);break;case"source":Fr("error",r);break;case"img":case"image":case"link":Fr("error",r),Fr("load",r);break;case"details":Fr("toggle",r);break;case"input":$(r,s),Fr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Fr("invalid",r);break;case"textarea":ie(r,s),Fr("invalid",r)}for(var l in ve(n,s),i=null,s)if(s.hasOwnProperty(l)){var c=s[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==s.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==s.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",""+c]):a.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Fr("scroll",r)}switch(n){case"input":K(r),Z(r,s,!0);break;case"textarea":K(r),se(r);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[hi]=t,e[fi]=r,ja(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(n,r),n){case"dialog":Fr("cancel",e),Fr("close",e),i=r;break;case"iframe":case"object":case"embed":Fr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)Fr(Lr[i],e);i=r;break;case"source":Fr("error",e),i=r;break;case"img":case"image":case"link":Fr("error",e),Fr("load",e),i=r;break;case"details":Fr("toggle",e),i=r;break;case"input":$(e,r),i=Y(e,r),Fr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=M({},r,{value:void 0}),Fr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Fr("invalid",e)}for(s in ve(n,i),c=i)if(c.hasOwnProperty(s)){var u=c[s];"style"===s?me(e,u):"dangerouslySetInnerHTML"===s?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===s?"string"===typeof u?("textarea"!==n||""!==u)&&he(e,u):"number"===typeof u&&he(e,""+u):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(a.hasOwnProperty(s)?null!=u&&"onScroll"===s&&Fr("scroll",e):null!=u&&b(e,s,u,l))}switch(n){case"input":K(e),Z(e,r,!1);break;case"textarea":K(e),se(e);break;case"option":null!=r.value&&e.setAttribute("value",""+W(r.value));break;case"select":e.multiple=!!r.multiple,null!=(s=r.value)?ne(e,!!r.multiple,s,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Xa(t),null;case 6:if(e&&null!=t.stateNode)Fa(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));if(n=Xo($o.current),Xo(Qo.current),ho(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(s=r.nodeValue!==n)&&null!==(e=no))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}s&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Xa(t),null;case 13:if(ki(rs),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(io&&null!==ro&&0!==(1&t.mode)&&0===(128&t.flags))fo(),po(),t.flags|=98560,s=!1;else if(s=ho(t),null!==r&&null!==r.dehydrated){if(null===e){if(!s)throw Error(o(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(o(317));s[hi]=t}else po(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Xa(t),s=!1}else null!==oo&&(dc(oo),oo=null),s=!0;if(!s)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&rs.current)?0===Fl&&(Fl=3):wc())),null!==t.updateQueue&&(t.flags|=4),Xa(t),null);case 4:return Zo(),Ma(e,t),null===e&&Br(t.stateNode.containerInfo),Xa(t),null;case 10:return Co(t.type._context),Xa(t),null;case 19:if(ki(rs),null===(s=t.memoizedState))return Xa(t),null;if(r=0!==(128&t.flags),null===(l=s.rendering))if(r)$a(s,!1);else{if(0!==Fl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=is(e))){for(t.flags|=128,$a(s,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(s=n).flags&=14680066,null===(l=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,e=l.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ti(rs,1&rs.current|2),t.child}e=e.sibling}null!==s.tail&&Xe()>Gl&&(t.flags|=128,r=!0,$a(s,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=is(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),$a(s,!0),null===s.tail&&"hidden"===s.tailMode&&!l.alternate&&!io)return Xa(t),null}else 2*Xe()-s.renderingStartTime>Gl&&1073741824!==n&&(t.flags|=128,r=!0,$a(s,!1),t.lanes=4194304);s.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=s.last)?n.sibling=l:t.child=l,s.last=l)}return null!==s.tail?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Xe(),t.sibling=null,n=rs.current,Ti(rs,r?1&n|2:1&n),t):(Xa(t),null);case 22:case 23:return mc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ml)&&(Xa(t),6&t.subtreeFlags&&(t.flags|=8192)):Xa(t),null;case 24:case 25:return null}throw Error(o(156,t.tag))}function Za(e,t){switch(to(t),t.tag){case 1:return Di(t.type)&&Pi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Zo(),ki(Ai),ki(Ci),as(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return ns(t),null;case 13:if(ki(rs),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));po()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return ki(rs),null;case 4:return Zo(),null;case 10:return Co(t.type._context),null;case 22:case 23:return mc(),null;default:return null}}ja=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ma=function(){},Ua=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Xo(Qo.current);var o,s=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),s=[];break;case"select":i=M({},i,{value:void 0}),r=M({},r,{value:void 0}),s=[];break;case"textarea":i=re(e,i),r=re(e,r),s=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(u in ve(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(a.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(s||(s=[]),s.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(s=s||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(s=s||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(a.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Fr("scroll",e),s||l===c||(s=[])):(s=s||[]).push(u,c))}n&&(s=s||[]).push("style",n);var u=s;(t.updateQueue=u)&&(t.flags|=4)}},Fa=function(e,t,n,r){n!==r&&(t.flags|=4)};var el=!1,tl=!1,nl="function"===typeof WeakSet?WeakSet:Set,rl=null;function il(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Ac(e,t,r)}else n.current=null}function ol(e,t,n){try{n()}catch(r){Ac(e,t,r)}}var sl=!1;function al(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,void 0!==o&&ol(t,n,o)}i=i.next}while(i!==r)}}function ll(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function cl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ul(e){var t=e.alternate;null!==t&&(e.alternate=null,ul(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[fi],delete t[gi],delete t[mi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function dl(e){return 5===e.tag||3===e.tag||4===e.tag}function hl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||dl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function fl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(fl(e,t,n),e=e.sibling;null!==e;)fl(e,t,n),e=e.sibling}function pl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(pl(e,t,n),e=e.sibling;null!==e;)pl(e,t,n),e=e.sibling}var gl=null,ml=!1;function yl(e,t,n){for(n=n.child;null!==n;)vl(e,t,n),n=n.sibling}function vl(e,t,n){if(ot&&"function"===typeof ot.onCommitFiberUnmount)try{ot.onCommitFiberUnmount(it,n)}catch(a){}switch(n.tag){case 5:tl||il(n,t);case 6:var r=gl,i=ml;gl=null,yl(e,t,n),ml=i,null!==(gl=r)&&(ml?(e=gl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):gl.removeChild(n.stateNode));break;case 18:null!==gl&&(ml?(e=gl,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),Bt(e)):li(gl,n.stateNode));break;case 4:r=gl,i=ml,gl=n.stateNode.containerInfo,ml=!0,yl(e,t,n),gl=r,ml=i;break;case 0:case 11:case 14:case 15:if(!tl&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,void 0!==s&&(0!==(2&o)||0!==(4&o))&&ol(n,t,s),i=i.next}while(i!==r)}yl(e,t,n);break;case 1:if(!tl&&(il(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ac(n,t,a)}yl(e,t,n);break;case 21:yl(e,t,n);break;case 22:1&n.mode?(tl=(r=tl)||null!==n.memoizedState,yl(e,t,n),tl=r):yl(e,t,n);break;default:yl(e,t,n)}}function bl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new nl),t.forEach(function(t){var r=Pc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function wl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:gl=l.stateNode,ml=!1;break e;case 3:case 4:gl=l.stateNode.containerInfo,ml=!0;break e}l=l.return}if(null===gl)throw Error(o(160));vl(s,a,i),gl=null,ml=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(Ko){Ac(i,t,Ko)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)El(t,e),t=t.sibling}function El(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(wl(t,e),Sl(e),4&r){try{al(3,e,e.return),ll(3,e)}catch(m){Ac(e,e.return,m)}try{al(5,e,e.return)}catch(m){Ac(e,e.return,m)}}break;case 1:wl(t,e),Sl(e),512&r&&null!==n&&il(n,n.return);break;case 5:if(wl(t,e),Sl(e),512&r&&null!==n&&il(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(m){Ac(e,e.return,m)}}if(4&r&&null!=(i=e.stateNode)){var s=e.memoizedProps,a=null!==n?n.memoizedProps:s,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===s.type&&null!=s.name&&X(i,s),be(l,a);var u=be(l,s);for(a=0;a<c.length;a+=2){var d=c[a],h=c[a+1];"style"===d?me(i,h):"dangerouslySetInnerHTML"===d?de(i,h):"children"===d?he(i,h):b(i,d,h,u)}switch(l){case"input":J(i,s);break;case"textarea":oe(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;null!=p?ne(i,!!s.multiple,p,!1):f!==!!s.multiple&&(null!=s.defaultValue?ne(i,!!s.multiple,s.defaultValue,!0):ne(i,!!s.multiple,s.multiple?[]:"",!1))}i[fi]=s}catch(m){Ac(e,e.return,m)}}break;case 6:if(wl(t,e),Sl(e),4&r){if(null===e.stateNode)throw Error(o(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(m){Ac(e,e.return,m)}}break;case 3:if(wl(t,e),Sl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(m){Ac(e,e.return,m)}break;case 4:default:wl(t,e),Sl(e);break;case 13:wl(t,e),Sl(e),8192&(i=e.child).flags&&(s=null!==i.memoizedState,i.stateNode.isHidden=s,!s||null!==i.alternate&&null!==i.alternate.memoizedState||(Kl=Xe())),4&r&&bl(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(tl=(u=tl)||d,wl(t,e),tl=u):wl(t,e),Sl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(rl=e,d=e.child;null!==d;){for(h=rl=d;null!==rl;){switch(p=(f=rl).child,f.tag){case 0:case 11:case 14:case 15:al(4,f,f.return);break;case 1:il(f,f.return);var g=f.stateNode;if("function"===typeof g.componentWillUnmount){r=f,n=f.return;try{t=r,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(m){Ac(r,n,m)}}break;case 5:il(f,f.return);break;case 22:if(null!==f.memoizedState){Tl(h);continue}}null!==p?(p.return=f,rl=p):Tl(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{i=h.stateNode,u?"function"===typeof(s=i.style).setProperty?s.setProperty("display","none","important"):s.display="none":(l=h.stateNode,a=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=ge("display",a))}catch(m){Ac(e,e.return,m)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(m){Ac(e,e.return,m)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:wl(t,e),Sl(e),4&r&&bl(e);case 21:}}function Sl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(dl(n)){var r=n;break e}n=n.return}throw Error(o(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),pl(e,hl(e),i);break;case 3:case 4:var s=r.stateNode.containerInfo;fl(e,hl(e),s);break;default:throw Error(o(161))}}catch(Bo){Ac(e,e.return,Bo)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function xl(e,t,n){rl=e,_l(e,t,n)}function _l(e,t,n){for(var r=0!==(1&e.mode);null!==rl;){var i=rl,o=i.child;if(22===i.tag&&r){var s=null!==i.memoizedState||el;if(!s){var a=i.alternate,l=null!==a&&null!==a.memoizedState||tl;a=el;var c=tl;if(el=s,(tl=l)&&!c)for(rl=i;null!==rl;)l=(s=rl).child,22===s.tag&&null!==s.memoizedState?Il(i):null!==l?(l.return=s,rl=l):Il(i);for(;null!==o;)rl=o,_l(o,t,n),o=o.sibling;rl=i,el=a,tl=c}kl(e)}else 0!==(8772&i.subtreeFlags)&&null!==o?(o.return=i,rl=o):kl(e)}}function kl(e){for(;null!==rl;){var t=rl;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:tl||ll(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!tl)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:sa(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;null!==s&&Ho(t,s,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Ho(t,a,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&Bt(h)}}}break;default:throw Error(o(163))}tl||512&t.flags&&cl(t)}catch(ts){Ac(t,t.return,ts)}}if(t===e){rl=null;break}if(null!==(n=t.sibling)){n.return=t.return,rl=n;break}rl=t.return}}function Tl(e){for(;null!==rl;){var t=rl;if(t===e){rl=null;break}var n=t.sibling;if(null!==n){n.return=t.return,rl=n;break}rl=t.return}}function Il(e){for(;null!==rl;){var t=rl;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ll(4,t)}catch(Bo){Ac(t,n,Bo)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(Bo){Ac(t,i,Bo)}}var o=t.return;try{cl(t)}catch(Bo){Ac(t,o,Bo)}break;case 5:var s=t.return;try{cl(t)}catch(Bo){Ac(t,s,Bo)}}}catch(Bo){Ac(t,t.return,Bo)}if(t===e){rl=null;break}var a=t.sibling;if(null!==a){a.return=t.return,rl=a;break}rl=t.return}}var Cl,Al=Math.ceil,Nl=w.ReactCurrentDispatcher,Rl=w.ReactCurrentOwner,Dl=w.ReactCurrentBatchConfig,Pl=0,Ol=null,Ll=null,jl=0,Ml=0,Ul=_i(0),Fl=0,zl=null,Vl=0,Bl=0,ql=0,Wl=null,Hl=null,Kl=0,Gl=1/0,Ql=null,Yl=!1,$l=null,Xl=null,Jl=!1,Zl=null,ec=0,tc=0,nc=null,rc=-1,ic=0;function oc(){return 0!==(6&Pl)?Xe():-1!==rc?rc:rc=Xe()}function sc(e){return 0===(1&e.mode)?1:0!==(2&Pl)&&0!==jl?jl&-jl:null!==mo.transition?(0===ic&&(ic=gt()),ic):0!==(e=bt)?e:e=void 0===(e=window.event)?16:$t(e.type)}function ac(e,t,n,r){if(50<tc)throw tc=0,nc=null,Error(o(185));yt(e,n,r),0!==(2&Pl)&&e===Ol||(e===Ol&&(0===(2&Pl)&&(Bl|=n),4===Fl&&hc(e,jl)),lc(e,r),1===n&&0===Pl&&0===(1&t.mode)&&(Gl=Xe()+500,Fi&&Bi()))}function lc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var s=31-st(o),a=1<<s,l=i[s];-1===l?0!==(a&n)&&0===(a&r)||(i[s]=ft(a,t)):l<=t&&(e.expiredLanes|=a),o&=~a}}(e,t);var r=ht(e,e===Ol?jl:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Fi=!0,Vi(e)}(fc.bind(null,e)):Vi(fc.bind(null,e)),si(function(){0===(6&Pl)&&Bi()}),n=null;else{switch(wt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Oc(n,cc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function cc(e,t){if(rc=-1,ic=0,0!==(6&Pl))throw Error(o(327));var n=e.callbackNode;if(Ic()&&e.callbackNode!==n)return null;var r=ht(e,e===Ol?jl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=Ec(e,r);else{t=r;var i=Pl;Pl|=2;var s=bc();for(Ol===e&&jl===t||(Ql=null,Gl=Xe()+500,yc(e,t));;)try{xc();break}catch(l){vc(e,l)}Io(),Nl.current=s,Pl=i,null!==Ll?t=0:(Ol=null,jl=0,t=Fl)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=uc(e,i))),1===t)throw n=zl,yc(e,0),hc(e,r),lc(e,Xe()),n;if(6===t)hc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!ar(o(),i))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=Ec(e,r))&&(0!==(s=pt(e))&&(r=s,t=uc(e,s))),1===t))throw n=zl,yc(e,0),hc(e,r),lc(e,Xe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(o(345));case 2:case 5:Tc(e,Hl,Ql);break;case 3:if(hc(e,r),(130023424&r)===r&&10<(t=Kl+500-Xe())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){oc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(Tc.bind(null,e,Hl,Ql),t);break}Tc(e,Hl,Ql);break;case 4:if(hc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-st(r);s=1<<a,(a=t[a])>i&&(i=a),r&=~s}if(r=i,10<(r=(120>(r=Xe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Al(r/1960))-r)){e.timeoutHandle=ri(Tc.bind(null,e,Hl,Ql),r);break}Tc(e,Hl,Ql);break;default:throw Error(o(329))}}}return lc(e,Xe()),e.callbackNode===n?cc.bind(null,e):null}function uc(e,t){var n=Wl;return e.current.memoizedState.isDehydrated&&(yc(e,t).flags|=256),2!==(e=Ec(e,t))&&(t=Hl,Hl=n,null!==t&&dc(t)),e}function dc(e){null===Hl?Hl=e:Hl.push.apply(Hl,e)}function hc(e,t){for(t&=~ql,t&=~Bl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-st(t),r=1<<n;e[n]=-1,t&=~r}}function fc(e){if(0!==(6&Pl))throw Error(o(327));Ic();var t=ht(e,0);if(0===(1&t))return lc(e,Xe()),null;var n=Ec(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=uc(e,r))}if(1===n)throw n=zl,yc(e,0),hc(e,t),lc(e,Xe()),n;if(6===n)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Tc(e,Hl,Ql),lc(e,Xe()),null}function pc(e,t){var n=Pl;Pl|=1;try{return e(t)}finally{0===(Pl=n)&&(Gl=Xe()+500,Fi&&Bi())}}function gc(e){null!==Zl&&0===Zl.tag&&0===(6&Pl)&&Ic();var t=Pl;Pl|=1;var n=Dl.transition,r=bt;try{if(Dl.transition=null,bt=1,e)return e()}finally{bt=r,Dl.transition=n,0===(6&(Pl=t))&&Bi()}}function mc(){Ml=Ul.current,ki(Ul)}function yc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Ll)for(n=Ll.return;null!==n;){var r=n;switch(to(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Pi();break;case 3:Zo(),ki(Ai),ki(Ci),as();break;case 5:ns(r);break;case 4:Zo();break;case 13:case 19:ki(rs);break;case 10:Co(r.type._context);break;case 22:case 23:mc()}n=n.return}if(Ol=e,Ll=e=Uc(e.current,null),jl=Ml=t,Fl=0,zl=null,ql=Bl=Vl=0,Hl=Wl=null,null!==Do){for(t=0;t<Do.length;t++)if(null!==(r=(n=Do[t]).interleaved)){n.interleaved=null;var i=r.next,o=n.pending;if(null!==o){var s=o.next;o.next=i,r.next=s}n.pending=r}Do=null}return e}function vc(e,t){for(;;){var n=Ll;try{if(Io(),ls.current=na,ps){for(var r=ds.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}ps=!1}if(us=0,fs=hs=ds=null,gs=!1,ms=0,Rl.current=null,null===n||null===n.return){Fl=1,zl=t,Ll=null;break}e:{var s=e,a=n.return,l=n,c=t;if(t=jl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=wa(a);if(null!==p){p.flags&=-257,Ea(p,a,l,0,t),1&p.mode&&ba(s,u,t),c=u;var g=(t=p).updateQueue;if(null===g){var m=new Set;m.add(c),t.updateQueue=m}else g.add(c);break e}if(0===(1&t)){ba(s,u,t),wc();break e}c=Error(o(426))}else if(io&&1&l.mode){var y=wa(a);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),Ea(y,a,l,0,t),go(fa(c,l));break e}}s=c=fa(c,l),4!==Fl&&(Fl=2),null===Wl?Wl=[s]:Wl.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t,qo(s,ya(0,c,t));break e;case 1:l=c;var v=s.type,b=s.stateNode;if(0===(128&s.flags)&&("function"===typeof v.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Xl||!Xl.has(b)))){s.flags|=65536,t&=-t,s.lanes|=t,qo(s,va(s,l,t));break e}}s=s.return}while(null!==s)}kc(n)}catch(os){t=os,Ll===n&&null!==n&&(Ll=n=n.return);continue}break}}function bc(){var e=Nl.current;return Nl.current=na,null===e?na:e}function wc(){0!==Fl&&3!==Fl&&2!==Fl||(Fl=4),null===Ol||0===(268435455&Vl)&&0===(268435455&Bl)||hc(Ol,jl)}function Ec(e,t){var n=Pl;Pl|=2;var r=bc();for(Ol===e&&jl===t||(Ql=null,yc(e,t));;)try{Sc();break}catch(i){vc(e,i)}if(Io(),Pl=n,Nl.current=r,null!==Ll)throw Error(o(261));return Ol=null,jl=0,Fl}function Sc(){for(;null!==Ll;)_c(Ll)}function xc(){for(;null!==Ll&&!Ye();)_c(Ll)}function _c(e){var t=Cl(e.alternate,e,Ml);e.memoizedProps=e.pendingProps,null===t?kc(e):Ll=t,Rl.current=null}function kc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ja(n,t,Ml)))return void(Ll=n)}else{if(null!==(n=Za(n,t)))return n.flags&=32767,void(Ll=n);if(null===e)return Fl=6,void(Ll=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ll=t);Ll=t=e}while(null!==t);0===Fl&&(Fl=5)}function Tc(e,t,n){var r=bt,i=Dl.transition;try{Dl.transition=null,bt=1,function(e,t,n,r){do{Ic()}while(null!==Zl);if(0!==(6&Pl))throw Error(o(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-st(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}(e,s),e===Ol&&(Ll=Ol=null,jl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Jl||(Jl=!0,Oc(tt,function(){return Ic(),null})),s=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||s){s=Dl.transition,Dl.transition=null;var a=bt;bt=1;var l=Pl;Pl|=4,Rl.current=null,function(e,t){if(ei=Wt,fr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch(Ca){n=null;break e}var a=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(l=a+i),h!==s||0!==r&&3!==h.nodeType||(c=a+r),3===h.nodeType&&(a+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++u===i&&(l=a),f===s&&++d===r&&(c=a),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Wt=!1,rl=t;null!==rl;)if(e=(t=rl).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,rl=e;else for(;null!==rl;){t=rl;try{var g=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==g){var m=g.memoizedProps,y=g.memoizedState,v=t.stateNode,b=v.getSnapshotBeforeUpdate(t.elementType===t.type?m:sa(t.type,m),y);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(o(163))}}catch(Ca){Ac(t,t.return,Ca)}if(null!==(e=t.sibling)){e.return=t.return,rl=e;break}rl=t.return}g=sl,sl=!1}(e,n),El(n,e),pr(ti),Wt=!!ei,ti=ei=null,e.current=n,xl(n,e,i),$e(),Pl=l,bt=a,Dl.transition=s}else e.current=n;if(Jl&&(Jl=!1,Zl=e,ec=i),s=e.pendingLanes,0===s&&(Xl=null),function(e){if(ot&&"function"===typeof ot.onCommitFiberRoot)try{ot.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),lc(e,Xe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Yl)throw Yl=!1,e=$l,$l=null,e;0!==(1&ec)&&0!==e.tag&&Ic(),s=e.pendingLanes,0!==(1&s)?e===nc?tc++:(tc=0,nc=e):tc=0,Bi()}(e,t,n,r)}finally{Dl.transition=i,bt=r}return null}function Ic(){if(null!==Zl){var e=wt(ec),t=Dl.transition,n=bt;try{if(Dl.transition=null,bt=16>e?16:e,null===Zl)var r=!1;else{if(e=Zl,Zl=null,ec=0,0!==(6&Pl))throw Error(o(331));var i=Pl;for(Pl|=4,rl=e.current;null!==rl;){var s=rl,a=s.child;if(0!==(16&rl.flags)){var l=s.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(rl=u;null!==rl;){var d=rl;switch(d.tag){case 0:case 11:case 15:al(8,d,s)}var h=d.child;if(null!==h)h.return=d,rl=h;else for(;null!==rl;){var f=(d=rl).sibling,p=d.return;if(ul(d),d===u){rl=null;break}if(null!==f){f.return=p,rl=f;break}rl=p}}}var g=s.alternate;if(null!==g){var m=g.child;if(null!==m){g.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(null!==m)}}rl=s}}if(0!==(2064&s.subtreeFlags)&&null!==a)a.return=s,rl=a;else e:for(;null!==rl;){if(0!==(2048&(s=rl).flags))switch(s.tag){case 0:case 11:case 15:al(9,s,s.return)}var v=s.sibling;if(null!==v){v.return=s.return,rl=v;break e}rl=s.return}}var b=e.current;for(rl=b;null!==rl;){var w=(a=rl).child;if(0!==(2064&a.subtreeFlags)&&null!==w)w.return=a,rl=w;else e:for(a=b;null!==rl;){if(0!==(2048&(l=rl).flags))try{switch(l.tag){case 0:case 11:case 15:ll(9,l)}}catch(os){Ac(l,l.return,os)}if(l===a){rl=null;break e}var E=l.sibling;if(null!==E){E.return=l.return,rl=E;break e}rl=l.return}}if(Pl=i,Bi(),ot&&"function"===typeof ot.onPostCommitFiberRoot)try{ot.onPostCommitFiberRoot(it,e)}catch(os){}r=!0}return r}finally{bt=n,Dl.transition=t}}return!1}function Cc(e,t,n){e=zo(e,t=ya(0,t=fa(n,t),1),1),t=oc(),null!==e&&(yt(e,1,t),lc(e,t))}function Ac(e,t,n){if(3===e.tag)Cc(e,e,n);else for(;null!==t;){if(3===t.tag){Cc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Xl||!Xl.has(r))){t=zo(t,e=va(t,e=fa(n,e),1),1),e=oc(),null!==t&&(yt(t,1,e),lc(t,e));break}}t=t.return}}function Nc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=oc(),e.pingedLanes|=e.suspendedLanes&n,Ol===e&&(jl&n)===n&&(4===Fl||3===Fl&&(130023424&jl)===jl&&500>Xe()-Kl?yc(e,0):ql|=n),lc(e,t)}function Rc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=oc();null!==(e=Lo(e,t))&&(yt(e,t,n),lc(e,n))}function Dc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Rc(e,n)}function Pc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(o(314))}null!==r&&r.delete(t),Rc(e,n)}function Oc(e,t){return Ge(e,t)}function Lc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jc(e,t,n,r){return new Lc(e,t,n,r)}function Mc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Uc(e,t){var n=e.alternate;return null===n?((n=jc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Fc(e,t,n,r,i,s){var a=2;if(r=e,"function"===typeof e)Mc(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case x:return zc(n.children,i,s,t);case _:a=8,i|=8;break;case k:return(e=jc(12,n,t,2|i)).elementType=k,e.lanes=s,e;case A:return(e=jc(13,n,t,i)).elementType=A,e.lanes=s,e;case N:return(e=jc(19,n,t,i)).elementType=N,e.lanes=s,e;case P:return Vc(n,i,s,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case T:a=10;break e;case I:a=9;break e;case C:a=11;break e;case R:a=14;break e;case D:a=16,r=null;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=jc(a,n,t,i)).elementType=e,t.type=r,t.lanes=s,t}function zc(e,t,n,r){return(e=jc(7,e,r,t)).lanes=n,e}function Vc(e,t,n,r){return(e=jc(22,e,r,t)).elementType=P,e.lanes=n,e.stateNode={isHidden:!1},e}function Bc(e,t,n){return(e=jc(6,e,null,t)).lanes=n,e}function qc(e,t,n){return(t=jc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Wc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Hc(e,t,n,r,i,o,s,a,l){return e=new Wc(e,t,n,a,l),1===t?(t=1,!0===o&&(t|=8)):t=0,o=jc(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Mo(o),e}function Kc(e){if(!e)return Ii;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(o(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Di(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(o(171))}if(1===e.tag){var n=e.type;if(Di(n))return Li(e,n,t)}return t}function Gc(e,t,n,r,i,o,s,a,l){return(e=Hc(n,r,!0,e,0,o,0,a,l)).context=Kc(null),n=e.current,(o=Fo(r=oc(),i=sc(n))).callback=void 0!==t&&null!==t?t:null,zo(n,o,i),e.current.lanes=i,yt(e,i,r),lc(e,r),e}function Qc(e,t,n,r){var i=t.current,o=oc(),s=sc(i);return n=Kc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Fo(o,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=zo(i,t,s))&&(ac(e,i,s,o),Vo(e,i,s)),s}function Yc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function $c(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Xc(e,t){$c(e,t),(e=e.alternate)&&$c(e,t)}Cl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ai.current)xa=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return xa=!1,function(e,t,n){switch(t.tag){case 3:Oa(t),po();break;case 5:es(t);break;case 1:Di(t.type)&&ji(t);break;case 4:Jo(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ti(xo,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ti(rs,1&rs.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ba(e,t,n):(Ti(rs,1&rs.current),null!==(e=Ya(e,t,n))?e.sibling:null);Ti(rs,1&rs.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Ga(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ti(rs,rs.current),r)break;return null;case 22:case 23:return t.lanes=0,Aa(e,t,n)}return Ya(e,t,n)}(e,t,n);xa=0!==(131072&e.flags)}else xa=!1,io&&0!==(1048576&t.flags)&&Zi(t,Ki,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Qa(e,t),e=t.pendingProps;var i=Ri(t,Ci.current);No(t,n),i=ws(null,t,r,e,i,n);var s=Es();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Di(r)?(s=!0,ji(t)):s=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Mo(t),i.updater=la,t.stateNode=i,i._reactInternals=t,ha(t,r,e,n),t=Pa(null,t,r,!0,s,n)):(t.tag=0,io&&s&&eo(t),_a(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Qa(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Mc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===R)return 14}return 2}(r),e=sa(r,e),i){case 0:t=Ra(null,t,r,e,n);break e;case 1:t=Da(null,t,r,e,n);break e;case 11:t=ka(null,t,r,e,n);break e;case 14:t=Ta(null,t,r,sa(r.type,e),n);break e}throw Error(o(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ra(e,t,r,i=t.elementType===r?i:sa(r,i),n);case 1:return r=t.type,i=t.pendingProps,Da(e,t,r,i=t.elementType===r?i:sa(r,i),n);case 3:e:{if(Oa(t),null===e)throw Error(o(387));r=t.pendingProps,i=(s=t.memoizedState).element,Uo(e,t),Wo(t,r,null,n);var a=t.memoizedState;if(r=a.element,s.isDehydrated){if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=La(e,t,r,n,i=fa(Error(o(423)),t));break e}if(r!==i){t=La(e,t,r,n,i=fa(Error(o(424)),t));break e}for(ro=ci(t.stateNode.containerInfo.firstChild),no=t,io=!0,oo=null,n=So(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(po(),r===i){t=Ya(e,t,n);break e}_a(e,t,r,n)}t=t.child}return t;case 5:return es(t),null===e&&co(t),r=t.type,i=t.pendingProps,s=null!==e?e.memoizedProps:null,a=i.children,ni(r,i)?a=null:null!==s&&ni(r,s)&&(t.flags|=32),Na(e,t),_a(e,t,a,n),t.child;case 6:return null===e&&co(t),null;case 13:return Ba(e,t,n);case 4:return Jo(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Eo(t,null,r,n):_a(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,ka(e,t,r,i=t.elementType===r?i:sa(r,i),n);case 7:return _a(e,t,t.pendingProps,n),t.child;case 8:case 12:return _a(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,a=i.value,Ti(xo,r._currentValue),r._currentValue=a,null!==s)if(ar(s.value,a)){if(s.children===i.children&&!Ai.current){t=Ya(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var l=s.dependencies;if(null!==l){a=s.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===s.tag){(c=Fo(-1,n&-n)).tag=2;var u=s.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}s.lanes|=n,null!==(c=s.alternate)&&(c.lanes|=n),Ao(s.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===s.tag)a=s.type===t.type?null:s.child;else if(18===s.tag){if(null===(a=s.return))throw Error(o(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),Ao(a,n,t),a=s.sibling}else a=s.child;if(null!==a)a.return=s;else for(a=s;null!==a;){if(a===t){a=null;break}if(null!==(s=a.sibling)){s.return=a.return,a=s;break}a=a.return}s=a}_a(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,No(t,n),r=r(i=Ro(i)),t.flags|=1,_a(e,t,r,n),t.child;case 14:return i=sa(r=t.type,t.pendingProps),Ta(e,t,r,i=sa(r.type,i),n);case 15:return Ia(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:sa(r,i),Qa(e,t),t.tag=1,Di(r)?(e=!0,ji(t)):e=!1,No(t,n),ua(t,r,i),ha(t,r,i,n),Pa(null,t,r,!0,e,n);case 19:return Ga(e,t,n);case 22:return Aa(e,t,n)}throw Error(o(156,t.tag))};var Jc="function"===typeof reportError?reportError:function(e){console.error(e)};function Zc(e){this._internalRoot=e}function eu(e){this._internalRoot=e}function tu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function nu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function ru(){}function iu(e,t,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if("function"===typeof i){var a=i;i=function(){var e=Yc(s);a.call(e)}}Qc(t,s,e,i)}else s=function(e,t,n,r,i){if(i){if("function"===typeof r){var o=r;r=function(){var e=Yc(s);o.call(e)}}var s=Gc(t,r,e,0,null,!1,0,"",ru);return e._reactRootContainer=s,e[pi]=s.current,Br(8===e.nodeType?e.parentNode:e),gc(),s}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var a=r;r=function(){var e=Yc(l);a.call(e)}}var l=Hc(e,0,!1,null,0,!1,0,"",ru);return e._reactRootContainer=l,e[pi]=l.current,Br(8===e.nodeType?e.parentNode:e),gc(function(){Qc(t,l,n,r)}),l}(n,t,e,i,r);return Yc(s)}eu.prototype.render=Zc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));Qc(e,t,null,null)},eu.prototype.unmount=Zc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;gc(function(){Qc(null,e,null,null)}),t[pi]=null}},eu.prototype.unstable_scheduleHydration=function(e){if(e){var t=_t();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Pt.length&&0!==t&&t<Pt[n].priority;n++);Pt.splice(n,0,e),0===n&&Mt(e)}},Et=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(vt(t,1|n),lc(t,Xe()),0===(6&Pl)&&(Gl=Xe()+500,Bi()))}break;case 13:gc(function(){var t=Lo(e,1);if(null!==t){var n=oc();ac(t,e,1,n)}}),Xc(e,1)}},St=function(e){if(13===e.tag){var t=Lo(e,134217728);if(null!==t)ac(t,e,134217728,oc());Xc(e,134217728)}},xt=function(e){if(13===e.tag){var t=sc(e),n=Lo(e,t);if(null!==n)ac(n,e,t,oc());Xc(e,t)}},_t=function(){return bt},kt=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},Se=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Ei(r);if(!i)throw Error(o(90));G(r),J(r,i)}}}break;case"textarea":oe(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=pc,Ae=gc;var ou={usingClientEntryPoint:!1,Events:[bi,wi,Ei,Te,Ie,pc]},su={findFiberByHostInstance:vi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},au={bundleType:su.bundleType,version:su.version,rendererPackageName:su.rendererPackageName,rendererConfig:su.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:su.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var cu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cu.isDisabled&&cu.supportsFiber)try{it=cu.inject(au),ot=cu}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ou,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!tu(t))throw Error(o(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:S,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!tu(e))throw Error(o(299));var n=!1,r="",i=Jc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Hc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,Br(8===e.nodeType?e.parentNode:e),new Zc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return gc(e)},t.hydrate=function(e,t,n){if(!nu(t))throw Error(o(200));return iu(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!tu(e))throw Error(o(405));var r=null!=n&&n.hydratedSources||null,i=!1,s="",a=Jc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(s=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=Gc(t,null,e,1,null!=n?n:null,i,0,s,a),e[pi]=t.current,Br(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new eu(t)},t.render=function(e,t,n){if(!nu(t))throw Error(o(200));return iu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!nu(e))throw Error(o(40));return!!e._reactRootContainer&&(gc(function(){iu(null,null,e,!1,function(){e._reactRootContainer=null,e[pi]=null})}),!0)},t.unstable_batchedUpdates=pc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!nu(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return iu(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},853:(e,t,n)=>{e.exports=n(234)},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var o=Object.create(null);n.r(o);var s={};e=e||[null,t({}),t([]),t(t)];for(var a=2&i&&r;("object"==typeof a||"function"==typeof a)&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach(e=>s[e]=()=>r[e]);return s.default=()=>r,n.d(o,s),o}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r,i=n(43),o=n.t(i,2),s=n(391),a=n(950),l=n.t(a,2);function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(r||(r={}));const u="popstate";function d(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function h(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function f(e,t){return{usr:e.state,key:e.key,idx:t}}function p(e,t,n,r){return void 0===n&&(n=null),c({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?m(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function g(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function m(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function y(e,t,n,i){void 0===i&&(i={});let{window:o=document.defaultView,v5Compat:s=!1}=i,a=o.history,l=r.Pop,h=null,m=y();function y(){return(a.state||{idx:null}).idx}function v(){l=r.Pop;let e=y(),t=null==e?null:e-m;m=e,h&&h({action:l,location:w.location,delta:t})}function b(e){let t="null"!==o.location.origin?o.location.origin:o.location.href,n="string"===typeof e?e:g(e);return n=n.replace(/ $/,"%20"),d(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==m&&(m=0,a.replaceState(c({},a.state,{idx:m}),""));let w={get action(){return l},get location(){return e(o,a)},listen(e){if(h)throw new Error("A history only accepts one active listener");return o.addEventListener(u,v),h=e,()=>{o.removeEventListener(u,v),h=null}},createHref:e=>t(o,e),createURL:b,encodeLocation(e){let t=b(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){l=r.Push;let i=p(w.location,e,t);n&&n(i,e),m=y()+1;let c=f(i,m),u=w.createHref(i);try{a.pushState(c,"",u)}catch(d){if(d instanceof DOMException&&"DataCloneError"===d.name)throw d;o.location.assign(u)}s&&h&&h({action:l,location:w.location,delta:1})},replace:function(e,t){l=r.Replace;let i=p(w.location,e,t);n&&n(i,e),m=y();let o=f(i,m),c=w.createHref(i);a.replaceState(o,"",c),s&&h&&h({action:l,location:w.location,delta:0})},go:e=>a.go(e)};return w}var v;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(v||(v={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function b(e,t,n){return void 0===n&&(n="/"),w(e,t,n,!1)}function w(e,t,n,r){let i=O(("string"===typeof t?m(t):t).pathname||"/",n);if(null==i)return null;let o=E(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(o);let s=null;for(let a=0;null==s&&a<o.length;++a){let e=P(i);s=R(o[a],e,r)}return s}function E(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let i=(e,i,o)=>{let s={relativePath:void 0===o?e.path||"":o,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};s.relativePath.startsWith("/")&&(d(s.relativePath.startsWith(r),'Absolute route path "'+s.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),s.relativePath=s.relativePath.slice(r.length));let a=F([r,s.relativePath]),l=n.concat(s);e.children&&e.children.length>0&&(d(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+a+'".'),E(e.children,t,l,a)),(null!=e.path||e.index)&&t.push({path:a,score:N(a,e.index),routesMeta:l})};return e.forEach((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of S(e.path))i(e,t,r);else i(e,t)}),t}function S(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(0===r.length)return i?[o,""]:[o];let s=S(r.join("/")),a=[];return a.push(...s.map(e=>""===e?o:[o,e].join("/"))),i&&a.push(...s),a.map(t=>e.startsWith("/")&&""===t?"/":t)}const x=/^:[\w-]+$/,_=3,k=2,T=1,I=10,C=-2,A=e=>"*"===e;function N(e,t){let n=e.split("/"),r=n.length;return n.some(A)&&(r+=C),t&&(r+=k),n.filter(e=>!A(e)).reduce((e,t)=>e+(x.test(t)?_:""===t?T:I),r)}function R(e,t,n){void 0===n&&(n=!1);let{routesMeta:r}=e,i={},o="/",s=[];for(let a=0;a<r.length;++a){let e=r[a],l=a===r.length-1,c="/"===o?t:t.slice(o.length)||"/",u=D({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),d=e.route;if(!u&&l&&n&&!r[r.length-1].route.index&&(u=D({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(i,u.params),s.push({params:i,pathname:F([o,u.pathname]),pathnameBase:z(F([o,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(o=F([o,u.pathnameBase]))}return s}function D(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);h("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)"));e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let o=new RegExp(i,t?void 0:"i");return[o,r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let o=i[0],s=o.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=a[n]||"";s=o.slice(0,o.length-e.length).replace(/(.)\/+$/,"$1")}const l=a[n];return e[r]=i&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{}),pathname:o,pathnameBase:s,pattern:e}}function P(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return h(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function O(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function L(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function j(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function M(e,t){let n=j(e);return t?n.map((e,t)=>t===n.length-1?e.pathname:e.pathnameBase):n.map(e=>e.pathnameBase)}function U(e,t,n,r){let i;void 0===r&&(r=!1),"string"===typeof e?i=m(e):(i=c({},e),d(!i.pathname||!i.pathname.includes("?"),L("?","pathname","search",i)),d(!i.pathname||!i.pathname.includes("#"),L("#","pathname","hash",i)),d(!i.search||!i.search.includes("#"),L("#","search","hash",i)));let o,s=""===e||""===i.pathname,a=s?"/":i.pathname;if(null==a)o=n;else{let e=t.length-1;if(!r&&a.startsWith("..")){let t=a.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}o=e>=0?t[e]:"/"}let l=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:i=""}="string"===typeof e?m(e):e,o=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:o,search:V(r),hash:B(i)}}(i,o),u=a&&"/"!==a&&a.endsWith("/"),h=(s||"."===a)&&n.endsWith("/");return l.pathname.endsWith("/")||!u&&!h||(l.pathname+="/"),l}const F=e=>e.join("/").replace(/\/\/+/g,"/"),z=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),V=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",B=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function q(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const W=["post","put","patch","delete"],H=(new Set(W),["get",...W]);new Set(H),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function K(){return K=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},K.apply(this,arguments)}const G=i.createContext(null);const Q=i.createContext(null);const Y=i.createContext(null);const $=i.createContext(null);const X=i.createContext({outlet:null,matches:[],isDataRoute:!1});const J=i.createContext(null);function Z(){return null!=i.useContext($)}function ee(){return Z()||d(!1),i.useContext($).location}function te(e){i.useContext(Y).static||i.useLayoutEffect(e)}function ne(){let{isDataRoute:e}=i.useContext(X);return e?function(){let{router:e}=he(ue.UseNavigateStable),t=pe(de.UseNavigateStable),n=i.useRef(!1);te(()=>{n.current=!0});let r=i.useCallback(function(r,i){void 0===i&&(i={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,K({fromRouteId:t},i)))},[e,t]);return r}():function(){Z()||d(!1);let e=i.useContext(G),{basename:t,future:n,navigator:r}=i.useContext(Y),{matches:o}=i.useContext(X),{pathname:s}=ee(),a=JSON.stringify(M(o,n.v7_relativeSplatPath)),l=i.useRef(!1);te(()=>{l.current=!0});let c=i.useCallback(function(n,i){if(void 0===i&&(i={}),!l.current)return;if("number"===typeof n)return void r.go(n);let o=U(n,JSON.parse(a),s,"path"===i.relative);null==e&&"/"!==t&&(o.pathname="/"===o.pathname?t:F([t,o.pathname])),(i.replace?r.replace:r.push)(o,i.state,i)},[t,r,a,s,e]);return c}()}function re(e,t){let{relative:n}=void 0===t?{}:t,{future:r}=i.useContext(Y),{matches:o}=i.useContext(X),{pathname:s}=ee(),a=JSON.stringify(M(o,r.v7_relativeSplatPath));return i.useMemo(()=>U(e,JSON.parse(a),s,"path"===n),[e,a,s,n])}function ie(e,t,n,o){Z()||d(!1);let{navigator:s}=i.useContext(Y),{matches:a}=i.useContext(X),l=a[a.length-1],c=l?l.params:{},u=(l&&l.pathname,l?l.pathnameBase:"/");l&&l.route;let h,f=ee();if(t){var p;let e="string"===typeof t?m(t):t;"/"===u||(null==(p=e.pathname)?void 0:p.startsWith(u))||d(!1),h=e}else h=f;let g=h.pathname||"/",y=g;if("/"!==u){let e=u.replace(/^\//,"").split("/");y="/"+g.replace(/^\//,"").split("/").slice(e.length).join("/")}let v=b(e,{pathname:y});let w=ce(v&&v.map(e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:F([u,s.encodeLocation?s.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?u:F([u,s.encodeLocation?s.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),a,n,o);return t&&w?i.createElement($.Provider,{value:{location:K({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:r.Pop}},w):w}function oe(){let e=function(){var e;let t=i.useContext(J),n=fe(de.UseRouteError),r=pe(de.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[r]}(),t=q(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:r};return i.createElement(i.Fragment,null,i.createElement("h2",null,"Unexpected Application Error!"),i.createElement("h3",{style:{fontStyle:"italic"}},t),n?i.createElement("pre",{style:o},n):null,null)}const se=i.createElement(oe,null);class ae extends i.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?i.createElement(X.Provider,{value:this.props.routeContext},i.createElement(J.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function le(e){let{routeContext:t,match:n,children:r}=e,o=i.useContext(G);return o&&o.static&&o.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=n.route.id),i.createElement(X.Provider,{value:t},r)}function ce(e,t,n,r){var o;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===r&&(r=null),null==e){var s;if(!n)return null;if(n.errors)e=n.matches;else{if(!(null!=(s=r)&&s.v7_partialHydration&&0===t.length&&!n.initialized&&n.matches.length>0))return null;e=n.matches}}let a=e,l=null==(o=n)?void 0:o.errors;if(null!=l){let e=a.findIndex(e=>e.route.id&&void 0!==(null==l?void 0:l[e.route.id]));e>=0||d(!1),a=a.slice(0,Math.min(a.length,e+1))}let c=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let i=0;i<a.length;i++){let e=a[i];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(u=i),e.route.id){let{loaderData:t,errors:r}=n,i=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||i){c=!0,a=u>=0?a.slice(0,u+1):[a[0]];break}}}return a.reduceRight((e,r,o)=>{let s,d=!1,h=null,f=null;var p;n&&(s=l&&r.route.id?l[r.route.id]:void 0,h=r.route.errorElement||se,c&&(u<0&&0===o?(p="route-fallback",!1||ge[p]||(ge[p]=!0),d=!0,f=null):u===o&&(d=!0,f=r.route.hydrateFallbackElement||null)));let g=t.concat(a.slice(0,o+1)),m=()=>{let t;return t=s?h:d?f:r.route.Component?i.createElement(r.route.Component,null):r.route.element?r.route.element:e,i.createElement(le,{match:r,routeContext:{outlet:e,matches:g,isDataRoute:null!=n},children:t})};return n&&(r.route.ErrorBoundary||r.route.errorElement||0===o)?i.createElement(ae,{location:n.location,revalidation:n.revalidation,component:h,error:s,children:m(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):m()},null)}var ue=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(ue||{}),de=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(de||{});function he(e){let t=i.useContext(G);return t||d(!1),t}function fe(e){let t=i.useContext(Q);return t||d(!1),t}function pe(e){let t=function(){let e=i.useContext(X);return e||d(!1),e}(),n=t.matches[t.matches.length-1];return n.route.id||d(!1),n.route.id}const ge={};function me(e,t){null==e||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}o.startTransition;function ye(e){let{to:t,replace:n,state:r,relative:o}=e;Z()||d(!1);let{future:s,static:a}=i.useContext(Y),{matches:l}=i.useContext(X),{pathname:c}=ee(),u=ne(),h=U(t,M(l,s.v7_relativeSplatPath),c,"path"===o),f=JSON.stringify(h);return i.useEffect(()=>u(JSON.parse(f),{replace:n,state:r,relative:o}),[u,f,o,n,r]),null}function ve(e){d(!1)}function be(e){let{basename:t="/",children:n=null,location:o,navigationType:s=r.Pop,navigator:a,static:l=!1,future:c}=e;Z()&&d(!1);let u=t.replace(/^\/*/,"/"),h=i.useMemo(()=>({basename:u,navigator:a,static:l,future:K({v7_relativeSplatPath:!1},c)}),[u,c,a,l]);"string"===typeof o&&(o=m(o));let{pathname:f="/",search:p="",hash:g="",state:y=null,key:v="default"}=o,b=i.useMemo(()=>{let e=O(f,u);return null==e?null:{location:{pathname:e,search:p,hash:g,state:y,key:v},navigationType:s}},[u,f,p,g,y,v,s]);return null==b?null:i.createElement(Y.Provider,{value:h},i.createElement($.Provider,{children:n,value:b}))}function we(e){let{children:t,location:n}=e;return ie(Ee(t),n)}new Promise(()=>{});i.Component;function Ee(e,t){void 0===t&&(t=[]);let n=[];return i.Children.forEach(e,(e,r)=>{if(!i.isValidElement(e))return;let o=[...t,r];if(e.type===i.Fragment)return void n.push.apply(n,Ee(e.props.children,o));e.type!==ve&&d(!1),e.props.index&&e.props.children&&d(!1);let s={id:e.props.id||o.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(s.children=Ee(e.props.children,o)),n.push(s)}),n}function Se(){return Se=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Se.apply(this,arguments)}function xe(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const _e=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"];try{window.__reactRouterVersion="6"}catch(Tw){}new Map;const ke=o.startTransition;l.flushSync,o.useId;function Te(e){let{basename:t,children:n,future:r,window:o}=e,s=i.useRef();var a;null==s.current&&(s.current=(void 0===(a={window:o,v5Compat:!0})&&(a={}),y(function(e,t){let{pathname:n,search:r,hash:i}=e.location;return p("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:g(t)},null,a)));let l=s.current,[c,u]=i.useState({action:l.action,location:l.location}),{v7_startTransition:d}=r||{},h=i.useCallback(e=>{d&&ke?ke(()=>u(e)):u(e)},[u,d]);return i.useLayoutEffect(()=>l.listen(h),[l,h]),i.useEffect(()=>me(r),[r]),i.createElement(be,{basename:t,children:n,location:c.location,navigationType:c.action,navigator:l,future:r})}const Ie="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Ce=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ae=i.forwardRef(function(e,t){let n,{onClick:r,relative:o,reloadDocument:s,replace:a,state:l,target:c,to:u,preventScrollReset:h,viewTransition:f}=e,p=xe(e,_e),{basename:m}=i.useContext(Y),y=!1;if("string"===typeof u&&Ce.test(u)&&(n=u,Ie))try{let e=new URL(window.location.href),t=u.startsWith("//")?new URL(e.protocol+u):new URL(u),n=O(t.pathname,m);t.origin===e.origin&&null!=n?u=n+t.search+t.hash:y=!0}catch(Tw){}let v=function(e,t){let{relative:n}=void 0===t?{}:t;Z()||d(!1);let{basename:r,navigator:o}=i.useContext(Y),{hash:s,pathname:a,search:l}=re(e,{relative:n}),c=a;return"/"!==r&&(c="/"===a?r:F([r,a])),o.createHref({pathname:c,search:l,hash:s})}(u,{relative:o}),b=function(e,t){let{target:n,replace:r,state:o,preventScrollReset:s,relative:a,viewTransition:l}=void 0===t?{}:t,c=ne(),u=ee(),d=re(e,{relative:a});return i.useCallback(t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,n)){t.preventDefault();let n=void 0!==r?r:g(u)===g(d);c(e,{replace:n,state:o,preventScrollReset:s,relative:a,viewTransition:l})}},[u,c,d,r,o,n,e,s,a,l])}(u,{replace:a,state:l,target:c,preventScrollReset:h,relative:o,viewTransition:f});return i.createElement("a",Se({},p,{href:n||v,onClick:y||s?r:function(e){r&&r(e),e.defaultPrevented||b(e)},ref:t,target:c}))});var Ne,Re;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Ne||(Ne={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Re||(Re={}));function De(e){return De="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},De(e)}function Pe(e){var t=function(e,t){if("object"!=De(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=De(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==De(t)?t:t+""}function Oe(e,t,n){return(t=Pe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Le(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function je(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Le(Object(n),!0).forEach(function(t){Oe(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Le(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const Me=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Ue={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],o=i+1<e.length,s=o?e[i+1]:0,a=i+2<e.length,l=a?e[i+2]:0,c=t>>2,u=(3&t)<<4|s>>4;let d=(15&s)<<2|l>>6,h=63&l;a||(h=64,o||(d=64)),r.push(n[c],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Me(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){const o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{const o=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0;++i;const s=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==o||null==s||null==a)throw new Fe;const l=t<<2|o>>4;if(r.push(l),64!==s){const e=o<<4&240|s>>2;if(r.push(e),64!==a){const e=s<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Fe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ze=function(e){return function(e){const t=Me(e);return Ue.encodeByteArray(t,!0)}(e).replace(/\./g,"")},Ve=function(e){try{return Ue.decodeString(e,!0)}catch(Tw){console.error("base64Decode failed: ",Tw)}return null};const Be=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,qe=()=>{try{return Be()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(Tw){return}const t=e&&Ve(e[1]);return t&&JSON.parse(t)})()}catch(Tw){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(Tw))}},We=e=>{var t,n;return null===(n=null===(t=qe())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},He=e=>{const t=We(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},Ke=()=>{var e;return null===(e=qe())||void 0===e?void 0:e.config},Ge=e=>{var t;return null===(t=qe())||void 0===t?void 0:t["_".concat(e)]};class Qe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function Ye(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[ze(JSON.stringify({alg:"none",type:"JWT"})),ze(JSON.stringify(o)),""].join(".")}function $e(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Xe(){var e;const t=null===(e=qe())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(Tw){return!1}}function Je(){try{return"object"===typeof indexedDB}catch(Tw){return!1}}class Ze extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,Ze.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,et.prototype.create)}}class et{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(tt,(e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")})}(r,t):"Error",o="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new Ze(n,o,t)}}const tt=/\{\$([^}]+)}/g;function nt(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],o=t[i];if(rt(n)&&rt(o)){if(!nt(n,o))return!1}else if(n!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function rt(e){return null!==e&&"object"===typeof e}function it(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function ot(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function st(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class at{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=lt),void 0===r.error&&(r.error=lt),void 0===r.complete&&(r.complete=lt);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(Tw){}}),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(Tw){"undefined"!==typeof console&&console.error&&console.error(Tw)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function lt(){}function ct(e){return e&&e._delegate?e._delegate:e}class ut{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const dt="[DEFAULT]";class ht{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new Qe;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(Tw){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(Tw){if(r)return null;throw Tw}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:dt})}catch(Tw){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(Tw){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dt;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dt;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dt;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,o]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&o.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===dt?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(o){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dt;return this.component?this.component.multipleInstances?e:dt:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ft{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new ht(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const pt=[];var gt;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(gt||(gt={}));const mt={debug:gt.DEBUG,verbose:gt.VERBOSE,info:gt.INFO,warn:gt.WARN,error:gt.ERROR,silent:gt.SILENT},yt=gt.INFO,vt={[gt.DEBUG]:"log",[gt.VERBOSE]:"log",[gt.INFO]:"info",[gt.WARN]:"warn",[gt.ERROR]:"error"},bt=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=vt[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,o=new Array(i>2?i-2:0),s=2;s<i;s++)o[s-2]=arguments[s];console[r]("[".concat(n,"]  ").concat(e.name,":"),...o)};class wt{constructor(e){this.name=e,this._logLevel=yt,this._logHandler=bt,this._userLogHandler=null,pt.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in gt))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?mt[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,gt.DEBUG,...t),this._logHandler(this,gt.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,gt.VERBOSE,...t),this._logHandler(this,gt.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,gt.INFO,...t),this._logHandler(this,gt.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,gt.WARN,...t),this._logHandler(this,gt.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,gt.ERROR,...t),this._logHandler(this,gt.ERROR,...t)}}let Et,St;const xt=new WeakMap,_t=new WeakMap,kt=new WeakMap,Tt=new WeakMap,It=new WeakMap;let Ct={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return _t.get(e);if("objectStoreNames"===t)return e.objectStoreNames||kt.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Rt(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function At(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(St||(St=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Dt(this),n),Rt(xt.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Rt(e.apply(Dt(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const o=e.call(Dt(this),t,...r);return kt.set(o,t.sort?t.sort():[t]),Rt(o)}}function Nt(e){return"function"===typeof e?At(e):(e instanceof IDBTransaction&&function(e){if(_t.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",o),e.removeEventListener("abort",o)},i=()=>{t(),r()},o=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",o),e.addEventListener("abort",o)});_t.set(e,t)}(e),t=e,(Et||(Et=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,Ct):e);var t}function Rt(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",o)},i=()=>{t(Rt(e.result)),r()},o=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",o)});return t.then(t=>{t instanceof IDBCursor&&xt.set(t,e)}).catch(()=>{}),It.set(t,e),t}(e);if(Tt.has(e))return Tt.get(e);const t=Nt(e);return t!==e&&(Tt.set(e,t),It.set(t,e)),t}const Dt=e=>It.get(e);const Pt=["get","getKey","getAll","getAllKeys","count"],Ot=["put","add","delete","clear"],Lt=new Map;function jt(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(Lt.get(t))return Lt.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=Ot.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Pt.includes(n))return;const o=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let o=t.store;for(var s=arguments.length,a=new Array(s>1?s-1:0),l=1;l<s;l++)a[l-1]=arguments[l];return r&&(o=o.index(a.shift())),(await Promise.all([o[n](...a),i&&t.done]))[0]};return Lt.set(t,o),o}Ct=(e=>je(je({},e),{},{get:(t,n,r)=>jt(t,n)||e.get(t,n,r),has:(t,n)=>!!jt(t,n)||e.has(t,n)}))(Ct);class Mt{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null}).filter(e=>e).join(" ")}}const Ut="@firebase/app",Ft="0.9.13",zt=new wt("@firebase/app"),Vt="@firebase/app-compat",Bt="@firebase/analytics-compat",qt="@firebase/analytics",Wt="@firebase/app-check-compat",Ht="@firebase/app-check",Kt="@firebase/auth",Gt="@firebase/auth-compat",Qt="@firebase/database",Yt="@firebase/database-compat",$t="@firebase/functions",Xt="@firebase/functions-compat",Jt="@firebase/installations",Zt="@firebase/installations-compat",en="@firebase/messaging",tn="@firebase/messaging-compat",nn="@firebase/performance",rn="@firebase/performance-compat",on="@firebase/remote-config",sn="@firebase/remote-config-compat",an="@firebase/storage",ln="@firebase/storage-compat",cn="@firebase/firestore",un="@firebase/firestore-compat",dn="firebase",hn="[DEFAULT]",fn={[Ut]:"fire-core",[Vt]:"fire-core-compat",[qt]:"fire-analytics",[Bt]:"fire-analytics-compat",[Ht]:"fire-app-check",[Wt]:"fire-app-check-compat",[Kt]:"fire-auth",[Gt]:"fire-auth-compat",[Qt]:"fire-rtdb",[Yt]:"fire-rtdb-compat",[$t]:"fire-fn",[Xt]:"fire-fn-compat",[Jt]:"fire-iid",[Zt]:"fire-iid-compat",[en]:"fire-fcm",[tn]:"fire-fcm-compat",[nn]:"fire-perf",[rn]:"fire-perf-compat",[on]:"fire-rc",[sn]:"fire-rc-compat",[an]:"fire-gcs",[ln]:"fire-gcs-compat",[cn]:"fire-fst",[un]:"fire-fst-compat","fire-js":"fire-js",[dn]:"fire-js-all"},pn=new Map,gn=new Map;function mn(e,t){try{e.container.addComponent(t)}catch(Tw){zt.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),Tw)}}function yn(e){const t=e.name;if(gn.has(t))return zt.debug("There were multiple attempts to register component ".concat(t,".")),!1;gn.set(t,e);for(const n of pn.values())mn(n,e);return!0}function vn(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}const bn=new et("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class wn{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new ut("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw bn.create("app-deleted",{appName:this._name})}}const En="9.23.0";function Sn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:hn,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw bn.create("bad-app-name",{appName:String(i)});if(n||(n=Ke()),!n)throw bn.create("no-options");const o=pn.get(i);if(o){if(nt(n,o.options)&&nt(r,o.config))return o;throw bn.create("duplicate-app",{appName:i})}const s=new ft(i);for(const l of gn.values())s.addComponent(l);const a=new wn(n,r,s);return pn.set(i,a),a}function xn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:hn;const t=pn.get(e);if(!t&&e===hn&&Ke())return Sn();if(!t)throw bn.create("no-app",{appName:e});return t}function _n(e,t,n){var r;let i=null!==(r=fn[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const o=i.match(/\s|\//),s=t.match(/\s|\//);if(o||s){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return o&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),o&&s&&e.push("and"),s&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void zt.warn(e.join(" "))}yn(new ut("".concat(i,"-version"),()=>({library:i,version:t}),"VERSION"))}const kn="firebase-heartbeat-store";let Tn=null;function In(){return Tn||(Tn=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:o}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=indexedDB.open(e,t),a=Rt(s);return r&&s.addEventListener("upgradeneeded",e=>{r(Rt(s.result),e.oldVersion,e.newVersion,Rt(s.transaction),e)}),n&&s.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),a.then(e=>{o&&e.addEventListener("close",()=>o()),i&&e.addEventListener("versionchange",e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),a}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(kn)}}).catch(e=>{throw bn.create("idb-open",{originalErrorMessage:e.message})})),Tn}async function Cn(e,t){try{const n=(await In()).transaction(kn,"readwrite"),r=n.objectStore(kn);await r.put(t,An(e)),await n.done}catch(Tw){if(Tw instanceof Ze)zt.warn(Tw.message);else{const t=bn.create("idb-set",{originalErrorMessage:null===Tw||void 0===Tw?void 0:Tw.message});zt.warn(t.message)}}}function An(e){return"".concat(e.name,"!").concat(e.options.appId)}class Nn{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Dn(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),t=Rn();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==t&&!this._heartbeatsCache.heartbeats.some(e=>e.date===t))return this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const e=Rn(),{heartbeatsToSend:t,unsentEntries:n}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),Pn(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Pn(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),r=ze(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function Rn(){return(new Date).toISOString().substring(0,10)}class Dn{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!Je()&&new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}}).then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=await In();return await t.transaction(kn).objectStore(kn).get(An(e))}catch(Tw){if(Tw instanceof Ze)zt.warn(Tw.message);else{const t=bn.create("idb-get",{originalErrorMessage:null===Tw||void 0===Tw?void 0:Tw.message});zt.warn(t.message)}}}(this.app);return e||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Cn(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Cn(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Pn(e){return ze(JSON.stringify({version:2,heartbeats:e})).length}var On;On="",yn(new ut("platform-logger",e=>new Mt(e),"PRIVATE")),yn(new ut("heartbeat",e=>new Nn(e),"PRIVATE")),_n(Ut,Ft,On),_n(Ut,Ft,"esm2017"),_n("fire-js","");_n("firebase","9.23.0","app");function Ln(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;function jn(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Mn=jn,Un=new et("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Fn=new wt("@firebase/auth");function zn(e){if(Fn.logLevel<=gt.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Fn.error("Auth (".concat(En,"): ").concat(e),...n)}}function Vn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Wn(e,...n)}function Bn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Wn(e,...n)}function qn(e,t,n){const r=Object.assign(Object.assign({},Mn()),{[t]:n});return new et("auth","Firebase",r).create(t,{appName:e.name})}function Wn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return Un.create(e,...n)}function Hn(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw Wn(t,...r)}}function Kn(e){const t="INTERNAL ASSERTION FAILED: "+e;throw zn(t),new Error(t)}function Gn(e,t){e||Kn(t)}function Qn(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Yn(){return"http:"===$n()||"https:"===$n()}function $n(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function Xn(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Yn()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class Jn{constructor(e,t){this.shortDelay=e,this.longDelay=t,Gn(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test($e())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return Xn()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Zn(e,t){Gn(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class er{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void Kn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void Kn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void Kn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const tr={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},nr=new Jn(3e4,6e4);function rr(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function ir(e,t,n,r){return or(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},async()=>{let i={},o={};r&&("GET"===t?o=r:i={body:JSON.stringify(r)});const s=it(Object.assign({key:e.config.apiKey},o)).slice(1),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode),er.fetch()(ar(e,e.config.apiHost,n,s),Object.assign({method:t,headers:a,referrerPolicy:"no-referrer"},i))})}async function or(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},tr),t);try{const t=new lr(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw cr(e,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const t=i.ok?o.errorMessage:o.error.message,[n,s]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw cr(e,"credential-already-in-use",o);if("EMAIL_EXISTS"===n)throw cr(e,"email-already-in-use",o);if("USER_DISABLED"===n)throw cr(e,"user-disabled",o);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(s)throw qn(e,a,s);Vn(e,a)}}catch(Tw){if(Tw instanceof Ze)throw Tw;Vn(e,"network-request-failed",{message:String(Tw)})}}async function sr(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const o=await ir(e,t,n,r,i);return"mfaPendingCredential"in o&&Vn(e,"multi-factor-auth-required",{_serverResponse:o}),o}function ar(e,t,n,r){const i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?Zn(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}class lr{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(Bn(this.auth,"network-request-failed")),nr.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function cr(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Bn(e,t,r);return i.customData._tokenResponse=n,i}function ur(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(Tw){}}function dr(e){return 1e3*Number(e)}function hr(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return zn("JWT malformed, contained fewer than 3 sections"),null;try{const e=Ve(n);return e?JSON.parse(e):(zn("Failed to decode base64 JWT payload"),null)}catch(Tw){return zn("Caught error parsing JWT payload as JSON",null===Tw||void 0===Tw?void 0:Tw.toString()),null}}async function fr(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(Tw){throw Tw instanceof Ze&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(Tw)&&e.auth.currentUser===e&&await e.auth.signOut(),Tw}}class pr{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(Tw){return void((null===Tw||void 0===Tw?void 0:Tw.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class gr{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ur(this.lastLoginAt),this.creationTime=ur(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function mr(e){var t;const n=e.auth,r=await e.getIdToken(),i=await fr(e,async function(e,t){return ir(e,"POST","/v1/accounts:lookup",t)}(n,{idToken:r}));Hn(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const o=i.users[0];e._notifyReloadListener(o);const s=(null===(t=o.providerUserInfo)||void 0===t?void 0:t.length)?o.providerUserInfo.map(e=>{var{providerId:t}=e,n=Ln(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}):[];const a=(l=e.providerData,c=s,[...l.filter(e=>!c.some(t=>t.providerId===e.providerId)),...c]);var l,c;const u=e.isAnonymous,d=!(e.email&&o.passwordHash)&&!(null===a||void 0===a?void 0:a.length),h=!!u&&d,f={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new gr(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(e,f)}class yr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Hn(e.idToken,"internal-error"),Hn("undefined"!==typeof e.idToken,"internal-error"),Hn("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){const t=hr(e);return Hn(t,"internal-error"),Hn("undefined"!==typeof t.exp,"internal-error"),Hn("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Hn(!this.accessToken||this.refreshToken,e,"user-token-expired"),t||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await or(e,{},async()=>{const n=it({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,o=ar(e,r,"/v1/token","key=".concat(i)),s=await e._getAdditionalHeaders();return s["Content-Type"]="application/x-www-form-urlencoded",er.fetch()(o,{method:"POST",headers:s,body:n})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,o=new yr;return n&&(Hn("string"===typeof n,"internal-error",{appName:e}),o.refreshToken=n),r&&(Hn("string"===typeof r,"internal-error",{appName:e}),o.accessToken=r),i&&(Hn("number"===typeof i,"internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new yr,this.toJSON())}_performRefresh(){return Kn("not implemented")}}function vr(e,t){Hn("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class br{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=Ln(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new pr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new gr(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await fr(this,this.stsTokenManager.getToken(this.auth,e));return Hn(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=ct(e),r=await n.getIdToken(t),i=hr(r);Hn(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o="object"===typeof i.firebase?i.firebase:void 0,s=null===o||void 0===o?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:ur(dr(i.auth_time)),issuedAtTime:ur(dr(i.iat)),expirationTime:ur(dr(i.exp)),signInProvider:s||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=ct(e);await mr(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(Hn(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>Object.assign({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new br(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Hn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await mr(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await fr(this,async function(e,t){return ir(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,o,s,a,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,d=null!==(r=t.email)&&void 0!==r?r:void 0,h=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(o=t.photoURL)&&void 0!==o?o:void 0,p=null!==(s=t.tenantId)&&void 0!==s?s:void 0,g=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,m=null!==(l=t.createdAt)&&void 0!==l?l:void 0,y=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:v,emailVerified:b,isAnonymous:w,providerData:E,stsTokenManager:S}=t;Hn(v&&S,e,"internal-error");const x=yr.fromJSON(this.name,S);Hn("string"===typeof v,e,"internal-error"),vr(u,e.name),vr(d,e.name),Hn("boolean"===typeof b,e,"internal-error"),Hn("boolean"===typeof w,e,"internal-error"),vr(h,e.name),vr(f,e.name),vr(p,e.name),vr(g,e.name),vr(m,e.name),vr(y,e.name);const _=new br({uid:v,auth:e,email:d,emailVerified:b,displayName:u,isAnonymous:w,photoURL:f,phoneNumber:h,tenantId:p,stsTokenManager:x,createdAt:m,lastLoginAt:y});return E&&Array.isArray(E)&&(_.providerData=E.map(e=>Object.assign({},e))),g&&(_._redirectEventId=g),_}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new yr;r.updateFromServerResponse(t);const i=new br({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await mr(i),i}}const wr=new Map;function Er(e){Gn(e instanceof Function,"Expected a class definition");let t=wr.get(e);return t?(Gn(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,wr.set(e,t),t)}class Sr{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Sr.type="NONE";const xr=Sr;function _r(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class kr{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=_r(this.userKey,r.apiKey,i),this.fullPersistenceKey=_r("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?br._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new kr(Er(xr),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let i=r[0]||Er(xr);const o=_r(n,e.config.apiKey,e.name);let s=null;for(const c of t)try{const t=await c._get(o);if(t){const n=br._fromJSON(e,t);c!==i&&(s=n),i=c;break}}catch(l){}const a=r.filter(e=>e._shouldAllowMigration);return i._shouldAllowMigration&&a.length?(i=a[0],s&&await i._set(o,s.toJSON()),await Promise.all(t.map(async e=>{if(e!==i)try{await e._remove(o)}catch(l){}})),new kr(i,e,n)):new kr(i,e,n)}}function Tr(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Nr(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Ir(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Dr(t))return"Blackberry";if(Pr(t))return"Webos";if(Cr(t))return"Safari";if((t.includes("chrome/")||Ar(t))&&!t.includes("edge/"))return"Chrome";if(Rr(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function Ir(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$e();return/firefox\//i.test(e)}function Cr(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:$e()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Ar(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$e();return/crios\//i.test(e)}function Nr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$e();return/iemobile/i.test(e)}function Rr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$e();return/android/i.test(e)}function Dr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$e();return/blackberry/i.test(e)}function Pr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$e();return/webos/i.test(e)}function Or(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$e();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Lr(){return function(){const e=$e();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function jr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$e();return Or(e)||Rr(e)||Pr(e)||Dr(e)||/windows phone/i.test(e)||Nr(e)}function Mr(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Tr($e());break;case"Worker":t="".concat(Tr($e()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(En,"/").concat(r)}async function Ur(e,t){return ir(e,"GET","/v2/recaptchaConfig",rr(e,t))}function Fr(e){return void 0!==e&&void 0!==e.enterprise}class zr{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some(e=>"EMAIL_PASSWORD_PROVIDER"===e.provider&&"OFF"!==e.enforcementState)}}function Vr(e){return new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=Bn("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)})}function Br(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class qr{constructor(e){this.type="recaptcha-enterprise",this.auth=Gr(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;Fr(i)?i.enterprise.ready(()=>{i.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n("NO_RECAPTCHA")})}):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{Ur(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new zr(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(i=>{if(!t&&Fr(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));Vr("https://www.google.com/recaptcha/enterprise.js?render="+i).then(()=>{n(i,e,r)}).catch(e=>{r(e)})}}).catch(e=>{r(e)})})}}async function Wr(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=new qr(e);let o;try{o=await i.verify(n)}catch(a){o=await i.verify(n,!0)}const s=Object.assign({},t);return r?Object.assign(s,{captchaResp:o}):Object.assign(s,{captchaResponse:o}),Object.assign(s,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(s,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),s}class Hr{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(Tw){r(Tw)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(Tw){t.reverse();for(const r of t)try{r()}catch(n){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===Tw||void 0===Tw?void 0:Tw.message})}}}class Kr{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Qr(this),this.idTokenSubscription=new Qr(this),this.beforeStateQueue=new Hr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Un,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Er(t)),this._initializationPromise=this.queue(async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await kr.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(Tw){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUser(e){var t;const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,o=null===r||void 0===r?void 0:r._redirectEventId,s=await this.tryRedirectSignIn(e);n&&n!==o||!(null===s||void 0===s?void 0:s.user)||(r=s.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(Tw){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(Tw))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Hn(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(Tw){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await mr(e)}catch(Tw){if((null===Tw||void 0===Tw?void 0:Tw.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?ct(e):null;return t&&Hn(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&Hn(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(Er(e))})}async initializeRecaptchaConfig(){const e=await Ur(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),t=new zr(e);if(null==this.tenantId?this._agentRecaptchaConfig=t:this._tenantRecaptchaConfigs[this.tenantId]=t,t.emailPasswordEnabled){new qr(this).verify()}}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new et("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Er(e)||this._popupRedirectResolver;Hn(t,this,"argument-error"),this.redirectPersistenceManager=await kr.create(this,[Er(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return Hn(o,this,"internal-error"),o.then(()=>i(this.currentUser)),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Hn(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Mr(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(Fn.logLevel<=gt.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Fn.warn("Auth (".concat(En,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function Gr(e){return ct(e)}class Qr{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new at(e,t);return n.subscribe.bind(n)}(e=>this.observer=e)}get next(){return Hn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Yr(e,t,n){const r=Gr(e);Hn(r._canInitEmulator,r,"emulator-config-failed"),Hn(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),o=$r(t),{host:s,port:a}=function(e){const t=$r(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:Xr(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Xr(t)}}}(t),l=null===a?"":":".concat(a);r.config.emulator={url:"".concat(o,"//").concat(s).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function $r(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Xr(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Jr{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Kn("not implemented")}_getIdTokenResponse(e){return Kn("not implemented")}_linkToIdToken(e,t){return Kn("not implemented")}_getReauthenticationResolver(e){return Kn("not implemented")}}async function Zr(e,t){return ir(e,"POST","/v1/accounts:update",t)}async function ei(e,t){return sr(e,"POST","/v1/accounts:signInWithPassword",rr(e,t))}async function ti(e,t){return ir(e,"POST","/v1/accounts:sendOobCode",rr(e,t))}async function ni(e,t){return ti(e,t)}class ri extends Jr{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new ri(e,t,"password")}static _fromEmailAndCode(e,t){return new ri(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){var t;switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};if(null===(t=e._getRecaptchaConfig())||void 0===t?void 0:t.emailPasswordEnabled){const t=await Wr(e,n,"signInWithPassword");return ei(e,t)}return ei(e,n).catch(async t=>{if(t.code==="auth/".concat("missing-recaptcha-token")){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const t=await Wr(e,n,"signInWithPassword");return ei(e,t)}return Promise.reject(t)});case"emailLink":return async function(e,t){return sr(e,"POST","/v1/accounts:signInWithEmailLink",rr(e,t))}(e,{email:this._email,oobCode:this._password});default:Vn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Zr(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(e,t){return sr(e,"POST","/v1/accounts:signInWithEmailLink",rr(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:Vn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function ii(e,t){return sr(e,"POST","/v1/accounts:signInWithIdp",rr(e,t))}class oi extends Jr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new oi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Vn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=Ln(t,["providerId","signInMethod"]);if(!n||!r)return null;const o=new oi(n,r);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){return ii(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,ii(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ii(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=it(t)}return e}}const si={USER_NOT_FOUND:"user-not-found"};class ai extends Jr{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new ai({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new ai({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return sr(e,"POST","/v1/accounts:signInWithPhoneNumber",rr(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await sr(e,"POST","/v1/accounts:signInWithPhoneNumber",rr(e,t));if(n.temporaryProof)throw cr(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return sr(e,"POST","/v1/accounts:signInWithPhoneNumber",rr(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),si)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new ai({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class li{constructor(e){var t,n,r,i,o,s;const a=ot(st(e)),l=null!==(t=a.apiKey)&&void 0!==t?t:null,c=null!==(n=a.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);Hn(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(o=a.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(s=a.tenantId)&&void 0!==s?s:null}static parseLink(e){const t=function(e){const t=ot(st(e)).link,n=t?ot(st(t)).deep_link_id:null,r=ot(st(e)).deep_link_id;return(r?ot(st(r)).link:null)||r||n||t||e}(e);try{return new li(t)}catch(n){return null}}}class ci{constructor(){this.providerId=ci.PROVIDER_ID}static credential(e,t){return ri._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=li.parseLink(t);return Hn(n,"argument-error"),ri._fromEmailAndCode(e,n.code,n.tenantId)}}ci.PROVIDER_ID="password",ci.EMAIL_PASSWORD_SIGN_IN_METHOD="password",ci.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class ui{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class di extends ui{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class hi extends di{constructor(){super("facebook.com")}static credential(e){return oi._fromParams({providerId:hi.PROVIDER_ID,signInMethod:hi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return hi.credentialFromTaggedObject(e)}static credentialFromError(e){return hi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return hi.credential(t.oauthAccessToken)}catch(n){return null}}}hi.FACEBOOK_SIGN_IN_METHOD="facebook.com",hi.PROVIDER_ID="facebook.com";class fi extends di{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return oi._fromParams({providerId:fi.PROVIDER_ID,signInMethod:fi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return fi.credentialFromTaggedObject(e)}static credentialFromError(e){return fi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return fi.credential(n,r)}catch(i){return null}}}fi.GOOGLE_SIGN_IN_METHOD="google.com",fi.PROVIDER_ID="google.com";class pi extends di{constructor(){super("github.com")}static credential(e){return oi._fromParams({providerId:pi.PROVIDER_ID,signInMethod:pi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return pi.credentialFromTaggedObject(e)}static credentialFromError(e){return pi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return pi.credential(t.oauthAccessToken)}catch(n){return null}}}pi.GITHUB_SIGN_IN_METHOD="github.com",pi.PROVIDER_ID="github.com";class gi extends di{constructor(){super("twitter.com")}static credential(e,t){return oi._fromParams({providerId:gi.PROVIDER_ID,signInMethod:gi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return gi.credentialFromTaggedObject(e)}static credentialFromError(e){return gi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return gi.credential(n,r)}catch(i){return null}}}async function mi(e,t){return sr(e,"POST","/v1/accounts:signUp",rr(e,t))}gi.TWITTER_SIGN_IN_METHOD="twitter.com",gi.PROVIDER_ID="twitter.com";class yi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await br._fromIdTokenResponse(e,n,r),o=vi(n);return new yi({user:i,providerId:o,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=vi(n);return new yi({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function vi(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class bi extends Ze{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,bi.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new bi(e,t,n,r)}}function wi(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw bi._fromErrorAndOperation(e,n,t,r);throw n})}async function Ei(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await fr(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return yi._forOperation(e,"link",r)}async function Si(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e,i="reauthenticate";try{const o=await fr(e,wi(r,i,t,e),n);Hn(o.idToken,r,"internal-error");const s=hr(o.idToken);Hn(s,r,"internal-error");const{sub:a}=s;return Hn(e.uid===a,r,"user-mismatch"),yi._forOperation(e,i,o)}catch(Tw){throw(null===Tw||void 0===Tw?void 0:Tw.code)==="auth/".concat("user-not-found")&&Vn(r,"user-mismatch"),Tw}}async function xi(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r="signIn",i=await wi(e,r,t),o=await yi._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(o.user),o}async function _i(e,t){return xi(Gr(e),t)}function ki(e,t,n){var r;Hn((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),Hn("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Hn(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(Hn(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function Ti(e,t){let{displayName:n,photoURL:r}=t;if(void 0===n&&void 0===r)return;const i=ct(e),o={idToken:await i.getIdToken(),displayName:n,photoUrl:r,returnSecureToken:!0},s=await fr(i,async function(e,t){return ir(e,"POST","/v1/accounts:update",t)}(i.auth,o));i.displayName=s.displayName||null,i.photoURL=s.photoUrl||null;const a=i.providerData.find(e=>{let{providerId:t}=e;return"password"===t});a&&(a.displayName=i.displayName,a.photoURL=i.photoURL),await i._updateTokensIfNecessary(s)}new WeakMap;const Ii="__sak";class Ci{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Ii,"1"),this.storage.removeItem(Ii),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class Ai extends Ci{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=$e();return Cr(e)||Or(e)}()&&function(){try{return!(!window||window===window.top)}catch(Tw){return!1}}(),this.fallbackToPolling=jr(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);Lr()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Ai.type="LOCAL";const Ni=Ai;class Ri extends Ci{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Ri.type="SESSION";const Di=Ri;class Pi{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new Pi(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,o=this.handlersMap[r];if(!(null===o||void 0===o?void 0:o.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const s=Array.from(o).map(async e=>e(t.origin,i)),a=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(s);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Oi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Pi.receivers=[];class Li{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,o;return new Promise((s,a)=>{const l=Oi("",20);r.port1.start();const c=setTimeout(()=>{a(new Error("unsupported_event"))},n);o={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout(()=>{a(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),s(t.data.response);break;default:clearTimeout(c),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}function ji(){return window}function Mi(){return"undefined"!==typeof ji().WorkerGlobalScope&&"function"===typeof ji().importScripts}const Ui="firebaseLocalStorageDb",Fi="firebaseLocalStorage",zi="fbase_key";class Vi{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Bi(e,t){return e.transaction([Fi],t?"readwrite":"readonly").objectStore(Fi)}function qi(){const e=indexedDB.open(Ui,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(Fi,{keyPath:zi})}catch(Tw){n(Tw)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(Fi)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Ui);return new Vi(e).toPromise()}(),t(await qi()))})})}async function Wi(e,t,n){const r=Bi(e,!0).put({[zi]:t,value:n});return new Vi(r).toPromise()}function Hi(e,t){const n=Bi(e,!0).delete(t);return new Vi(n).toPromise()}class Ki{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await qi()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(Tw){if(t++>3)throw Tw;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Mi()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Pi._getInstance(Mi()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new Li(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await qi();return await Wi(e,Ii,"1"),await Hi(e,Ii),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Wi(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=Bi(e,!1).get(t),r=await new Vi(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Hi(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=Bi(e,!1).getAll();return new Vi(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Ki.type="LOCAL";const Gi=Ki;Br("rcb"),new Jn(3e4,6e4);const Qi="recaptcha";async function Yi(e,t,n){var r;const i=await n.verify();try{let o;if(Hn("string"===typeof i,e,"argument-error"),Hn(n.type===Qi,e,"argument-error"),o="string"===typeof t?{phoneNumber:t}:t,"session"in o){const t=o.session;if("phoneNumber"in o){Hn("enroll"===t.type,e,"internal-error");const n=await function(e,t){return ir(e,"POST","/v2/accounts/mfaEnrollment:start",rr(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{Hn("signin"===t.type,e,"internal-error");const n=(null===(r=o.multiFactorHint)||void 0===r?void 0:r.uid)||o.multiFactorUid;Hn(n,e,"missing-multi-factor-info");const s=await function(e,t){return ir(e,"POST","/v2/accounts/mfaSignIn:start",rr(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return s.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return ir(e,"POST","/v1/accounts:sendVerificationCode",rr(e,t))}(e,{phoneNumber:o.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}class $i{constructor(e){this.providerId=$i.PROVIDER_ID,this.auth=Gr(e)}verifyPhoneNumber(e,t){return Yi(this.auth,e,ct(t))}static credential(e,t){return ai._fromVerification(e,t)}static credentialFromResult(e){const t=e;return $i.credentialFromTaggedObject(t)}static credentialFromError(e){return $i.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?ai._fromTokenResponse(n,r):null}}function Xi(e,t){return t?Er(t):(Hn(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}$i.PROVIDER_ID="phone",$i.PHONE_SIGN_IN_METHOD="phone";class Ji extends Jr{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ii(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ii(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ii(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Zi(e){return xi(e.auth,new Ji(e),e.bypassAuthState)}function eo(e){const{auth:t,user:n}=e;return Hn(n,t,"internal-error"),Si(n,new Ji(e),e.bypassAuthState)}async function to(e){const{auth:t,user:n}=e;return Hn(n,t,"internal-error"),Ei(n,new Ji(e),e.bypassAuthState)}class no{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(Tw){this.reject(Tw)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:o,type:s}=e;if(o)return void this.reject(o);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(s)(a))}catch(Tw){this.reject(Tw)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Zi;case"linkViaPopup":case"linkViaRedirect":return to;case"reauthViaPopup":case"reauthViaRedirect":return eo;default:Vn(this.auth,"internal-error")}}resolve(e){Gn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Gn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ro=new Jn(2e3,1e4);class io extends no{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,io.currentPopupAction&&io.currentPopupAction.cancel(),io.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Hn(e,this.auth,"internal-error"),e}async onExecution(){Gn(1===this.filter.length,"Popup operations only handle one event");const e=Oi();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(Bn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(Bn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,io.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Bn(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,ro.get())};e()}}io.currentPopupAction=null;const oo=new Map;class so extends no{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=oo.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=co(t),r=lo(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(Tw){e=()=>Promise.reject(Tw)}oo.set(this.auth._key(),e)}return this.bypassAuthState||oo.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function ao(e,t){oo.set(e._key(),t)}function lo(e){return Er(e._redirectPersistence)}function co(e){return _r("pendingRedirect",e.config.apiKey,e.name)}async function uo(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=Gr(e),i=Xi(r,t),o=new so(r,i,n),s=await o.execute();return s&&!n&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,t)),s}class ho{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return po(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!po(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Bn(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(fo(e))}saveEventToCache(e){this.cachedEventUids.add(fo(e)),this.lastProcessedEventTime=Date.now()}}function fo(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function po(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const go=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,mo=/^https?/;async function yo(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return ir(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(vo(r))return}catch(n){}Vn(e,"unauthorized-domain")}function vo(e){const t=Qn(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!mo.test(n))return!1;if(go.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const bo=new Jn(3e4,6e4);function wo(){const e=ji().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}let Eo=null;function So(e){return Eo=Eo||function(e){return new Promise((t,n)=>{var r,i,o;function s(){wo(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{wo(),n(Bn(e,"network-request-failed"))},timeout:bo.get()})}if(null===(i=null===(r=ji().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(o=ji().gapi)||void 0===o?void 0:o.load)){const t=Br("iframefcb");return ji()[t]=()=>{gapi.load?s():n(Bn(e,"network-request-failed"))},Vr("https://apis.google.com/js/api.js?onload=".concat(t)).catch(e=>n(e))}s()}}).catch(e=>{throw Eo=null,e})}(e),Eo}const xo=new Jn(5e3,15e3),_o={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ko=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function To(e){const t=e.config;Hn(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Zn(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:En},i=ko.get(e.config.apiHost);i&&(r.eid=i);const o=e._getFrameworks();return o.length&&(r.fw=o.join(",")),"".concat(n,"?").concat(it(r).slice(1))}const Io={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Co{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(Tw){}}}function Ao(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},Io),{width:r.toString(),height:i.toString(),top:o,left:s}),c=$e().toLowerCase();n&&(a=Ar(c)?"_blank":n),Ir(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")},"");if(function(){var e;return Or(arguments.length>0&&void 0!==arguments[0]?arguments[0]:$e())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",a),new Co(null);const d=window.open(t||"",a,u);Hn(d,e,"popup-blocked");try{d.focus()}catch(Tw){}return new Co(d)}const No="__/auth/handler",Ro="emulator/auth/handler",Do=encodeURIComponent("fac");async function Po(e,t,n,r,i,o){Hn(e.config.authDomain,e,"auth-domain-config-required"),Hn(e.config.apiKey,e,"invalid-api-key");const s={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:En,eventId:i};if(t instanceof ui){t.setDefaultLanguage(e.languageCode),s.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(s.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(o||{}))s[e]=t}if(t instanceof di){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(s.scopes=e.join(","))}e.tenantId&&(s.tid=e.tenantId);const a=s;for(const u of Object.keys(a))void 0===a[u]&&delete a[u];const l=await e._getAppCheckToken(),c=l?"#".concat(Do,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(No);return Zn(t,Ro)}(e),"?").concat(it(a).slice(1)).concat(c)}const Oo="webStorageSupport";const Lo=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Di,this._completeRedirectFn=uo,this._overrideRedirectResult=ao}async _openPopup(e,t,n,r){var i;Gn(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return Ao(e,await Po(e,t,n,Qn(),r),Oi())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){ji().location.href=e}(await Po(e,t,n,Qn(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(Gn(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await async function(e){const t=await So(e),n=ji().gapi;return Hn(n,e,"internal-error"),t.open({where:document.body,url:To(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:_o,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=Bn(e,"network-request-failed"),o=ji().setTimeout(()=>{r(i)},xo.get());function s(){ji().clearTimeout(o),n(t)}t.ping(s).then(s,()=>{r(i)})}))}(e),n=new ho(e);return t.register("authEvent",t=>{Hn(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Oo,{type:Oo},n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[Oo];void 0!==i&&t(!!i),Vn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=yo(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return jr()||Cr()||Or()}};var jo="@firebase/auth",Mo="0.23.2";class Uo{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Hn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Fo=Ge("authIdTokenMaxAge")||300;let zo=null;var Vo;Vo="Browser",yn(new ut("auth",(e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;Hn(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:s,authDomain:a,clientPlatform:Vo,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Mr(Vo)},c=new Kr(r,i,o,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Er);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),yn(new ut("auth-internal",e=>(e=>new Uo(e))(Gr(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),_n(jo,Mo,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(Vo)),_n(jo,Mo,"esm2017");var Bo,qo="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Wo={},Ho=Ho||{},Ko=qo||self;function Go(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Qo(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Yo="closure_uid_"+(1e9*Math.random()>>>0),$o=0;function Xo(e,t,n){return e.call.apply(e.bind,arguments)}function Jo(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Zo(e,t,n){return(Zo=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Xo:Jo).apply(null,arguments)}function es(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function ts(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}function ns(){this.s=this.s,this.o=this.o}ns.prototype.s=!1,ns.prototype.sa=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,Yo)&&e[Yo]||(e[Yo]=++$o))},ns.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const rs=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function is(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function os(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(Go(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function ss(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}ss.prototype.h=function(){this.defaultPrevented=!0};var as=function(){if(!Ko.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Ko.addEventListener("test",()=>{},t),Ko.removeEventListener("test",()=>{},t)}catch(n){}return e}();function ls(e){return/^[\s\xa0]*$/.test(e)}function cs(){var e=Ko.navigator;return e&&(e=e.userAgent)?e:""}function us(e){return-1!=cs().indexOf(e)}function ds(e){return ds[" "](e),e}ds[" "]=function(){};var hs,fs,ps=us("Opera"),gs=us("Trident")||us("MSIE"),ms=us("Edge"),ys=ms||gs,vs=us("Gecko")&&!(-1!=cs().toLowerCase().indexOf("webkit")&&!us("Edge"))&&!(us("Trident")||us("MSIE"))&&!us("Edge"),bs=-1!=cs().toLowerCase().indexOf("webkit")&&!us("Edge");function ws(){var e=Ko.document;return e?e.documentMode:void 0}e:{var Es="",Ss=function(){var e=cs();return vs?/rv:([^\);]+)(\)|;)/.exec(e):ms?/Edge\/([\d\.]+)/.exec(e):gs?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):bs?/WebKit\/(\S+)/.exec(e):ps?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Ss&&(Es=Ss?Ss[1]:""),gs){var xs=ws();if(null!=xs&&xs>parseFloat(Es)){hs=String(xs);break e}}hs=Es}if(Ko.document&&gs){var _s=ws();fs=_s||(parseInt(hs,10)||void 0)}else fs=void 0;var ks=fs;function Ts(e,t){if(ss.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(vs){e:{try{ds(t.nodeName);var i=!0;break e}catch(o){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Is[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Ts.$.h.call(this)}}ts(Ts,ss);var Is={2:"touch",3:"pen",4:"mouse"};Ts.prototype.h=function(){Ts.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Cs="closure_listenable_"+(1e6*Math.random()|0),As=0;function Ns(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++As,this.fa=this.ia=!1}function Rs(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function Ds(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function Ps(e){const t={};for(const n in e)t[n]=e[n];return t}const Os="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ls(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<Os.length;t++)n=Os[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function js(e){this.src=e,this.g={},this.h=0}function Ms(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],o=rs(i,t);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(Rs(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Us(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.fa&&o.listener==t&&o.capture==!!n&&o.la==r)return i}return-1}js.prototype.add=function(e,t,n,r,i){var o=e.toString();(e=this.g[o])||(e=this.g[o]=[],this.h++);var s=Us(e,t,r,i);return-1<s?(t=e[s],n||(t.ia=!1)):((t=new Ns(t,this.src,o,!!r,i)).ia=n,e.push(t)),t};var Fs="closure_lm_"+(1e6*Math.random()|0),zs={};function Vs(e,t,n,r,i){if(r&&r.once)return qs(e,t,n,r,i);if(Array.isArray(t)){for(var o=0;o<t.length;o++)Vs(e,t[o],n,r,i);return null}return n=$s(n),e&&e[Cs]?e.O(t,n,Qo(r)?!!r.capture:!!r,i):Bs(e,t,n,!1,r,i)}function Bs(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var s=Qo(i)?!!i.capture:!!i,a=Qs(e);if(a||(e[Fs]=a=new js(e)),(n=a.add(t,n,r,s,o)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=Gs;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)as||(i=s),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Ks(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function qs(e,t,n,r,i){if(Array.isArray(t)){for(var o=0;o<t.length;o++)qs(e,t[o],n,r,i);return null}return n=$s(n),e&&e[Cs]?e.P(t,n,Qo(r)?!!r.capture:!!r,i):Bs(e,t,n,!0,r,i)}function Ws(e,t,n,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)Ws(e,t[o],n,r,i);else r=Qo(r)?!!r.capture:!!r,n=$s(n),e&&e[Cs]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Us(o=e.g[t],n,r,i))&&(Rs(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete e.g[t],e.h--)))):e&&(e=Qs(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Us(t,n,r,i)),(n=-1<e?t[e]:null)&&Hs(n))}function Hs(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[Cs])Ms(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Ks(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Qs(t))?(Ms(n,e),0==n.h&&(n.src=null,t[Fs]=null)):Rs(e)}}}function Ks(e){return e in zs?zs[e]:zs[e]="on"+e}function Gs(e,t){if(e.fa)e=!0;else{t=new Ts(t,this);var n=e.listener,r=e.la||e.src;e.ia&&Hs(e),e=n.call(r,t)}return e}function Qs(e){return(e=e[Fs])instanceof js?e:null}var Ys="__closure_events_fn_"+(1e9*Math.random()>>>0);function $s(e){return"function"===typeof e?e:(e[Ys]||(e[Ys]=function(t){return e.handleEvent(t)}),e[Ys])}function Xs(){ns.call(this),this.i=new js(this),this.S=this,this.J=null}function Js(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new ss(t,e);else if(t instanceof ss)t.target=t.target||e;else{var i=t;Ls(t=new ss(r,e),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=t.g=n[o];i=Zs(s,r,!0,t)&&i}if(i=Zs(s=t.g=e,r,!0,t)&&i,i=Zs(s,r,!1,t)&&i,n)for(o=0;o<n.length;o++)i=Zs(s=t.g=n[o],r,!1,t)&&i}function Zs(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var s=t[o];if(s&&!s.fa&&s.capture==n){var a=s.listener,l=s.la||s.src;s.ia&&Ms(e.i,s),i=!1!==a.call(l,r)&&i}}return i&&!r.defaultPrevented}ts(Xs,ns),Xs.prototype[Cs]=!0,Xs.prototype.removeEventListener=function(e,t,n,r){Ws(this,e,t,n,r)},Xs.prototype.N=function(){if(Xs.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Rs(n[r]);delete t.g[e],t.h--}}this.J=null},Xs.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Xs.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var ea=Ko.JSON.stringify;function ta(){var e=la;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var na=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new ra,e=>e.reset());class ra{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function ia(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function oa(e){Ko.setTimeout(()=>{throw e},0)}let sa,aa=!1,la=new class{constructor(){this.h=this.g=null}add(e,t){const n=na.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},ca=()=>{const e=Ko.Promise.resolve(void 0);sa=()=>{e.then(ua)}};var ua=()=>{for(var e;e=ta();){try{e.h.call(e.g)}catch(n){oa(n)}var t=na;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}aa=!1};function da(e,t){Xs.call(this),this.h=e||1,this.g=t||Ko,this.j=Zo(this.qb,this),this.l=Date.now()}function ha(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function fa(e,t,n){if("function"===typeof e)n&&(e=Zo(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Zo(e.handleEvent,e)}return 2147483647<Number(t)?-1:Ko.setTimeout(e,t||0)}function pa(e){e.g=fa(()=>{e.g=null,e.i&&(e.i=!1,pa(e))},e.j);const t=e.h;e.h=null,e.m.apply(null,t)}ts(da,Xs),(Bo=da.prototype).ga=!1,Bo.T=null,Bo.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Js(this,"tick"),this.ga&&(ha(this),this.start()))}},Bo.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Bo.N=function(){da.$.N.call(this),ha(this),delete this.g};class ga extends ns{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:pa(this)}N(){super.N(),this.g&&(Ko.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ma(e){ns.call(this),this.h=e,this.g={}}ts(ma,ns);var ya=[];function va(e,t,n,r){Array.isArray(n)||(n&&(ya[0]=n.toString()),n=ya);for(var i=0;i<n.length;i++){var o=Vs(t,n[i],r||e.handleEvent,!1,e.h||e);if(!o)break;e.g[o.key]=o}}function ba(e){Ds(e.g,function(e,t){this.g.hasOwnProperty(t)&&Hs(e)},e),e.g={}}function wa(){this.g=!0}function Ea(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return ea(n)}catch(a){return t}}(e,n)+(r?" "+r:"")})}ma.prototype.N=function(){ma.$.N.call(this),ba(this)},ma.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},wa.prototype.Ea=function(){this.g=!1},wa.prototype.info=function(){};var Sa={},xa=null;function _a(){return xa=xa||new Xs}function ka(e){ss.call(this,Sa.Ta,e)}function Ta(e){const t=_a();Js(t,new ka(t))}function Ia(e,t){ss.call(this,Sa.STAT_EVENT,e),this.stat=t}function Ca(e){const t=_a();Js(t,new Ia(t,e))}function Aa(e,t){ss.call(this,Sa.Ua,e),this.size=t}function Na(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Ko.setTimeout(function(){e()},t)}Sa.Ta="serverreachability",ts(ka,ss),Sa.STAT_EVENT="statevent",ts(Ia,ss),Sa.Ua="timingevent",ts(Aa,ss);var Ra={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Da={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Pa(){}function Oa(e){return e.h||(e.h=e.i())}function La(){}Pa.prototype.h=null;var ja,Ma={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Ua(){ss.call(this,"d")}function Fa(){ss.call(this,"c")}function za(){}function Va(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new ma(this),this.P=qa,e=ys?125:void 0,this.V=new da(e),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Ba}function Ba(){this.i=null,this.g="",this.h=!1}ts(Ua,ss),ts(Fa,ss),ts(za,Pa),za.prototype.g=function(){return new XMLHttpRequest},za.prototype.i=function(){return{}},ja=new za;var qa=45e3,Wa={},Ha={};function Ka(e,t,n){e.L=1,e.v=dl(sl(t)),e.s=n,e.S=!0,Ga(e,null)}function Ga(e,t){e.G=Date.now(),Xa(e),e.A=sl(e.v);var n=e.A,r=e.W;Array.isArray(r)||(r=[String(r)]),_l(n.i,"t",r),e.C=0,n=e.l.J,e.h=new Ba,e.g=kc(e.l,n?t:null,!e.s),0<e.O&&(e.M=new ga(Zo(e.Pa,e,e.g),e.O)),va(e.U,e.g,"readystatechange",e.nb),t=e.I?Ps(e.I):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.A,e.u,e.s,t)):(e.u="GET",e.g.ha(e.A,e.u,null,t)),Ta(),function(e,t,n,r,i,o){e.info(function(){if(e.g)if(o)for(var s="",a=o.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var d=u.split("_");s=2<=d.length&&"type"==d[1]?s+(u+"=")+c+"&":s+(u+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+s})}(e.j,e.u,e.A,e.m,e.W,e.s)}function Qa(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.l.Ha)}function Ya(e,t,n){let r,i=!0;for(;!e.J&&e.C<n.length;){if(r=$a(e,n),r==Ha){4==t&&(e.o=4,Ca(14),i=!1),Ea(e.j,e.m,null,"[Incomplete Response]");break}if(r==Wa){e.o=4,Ca(15),Ea(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Ea(e.j,e.m,r,null),nl(e,r)}Qa(e)&&r!=Ha&&r!=Wa&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Ca(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),yc(t),t.M=!0,Ca(11))):(Ea(e.j,e.m,n,"[Invalid Chunked Response]"),tl(e),el(e))}function $a(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Ha:(n=Number(t.substring(n,r)),isNaN(n)?Wa:(r+=1)+n>t.length?Ha:(t=t.slice(r,r+n),e.C=r+n,t))}function Xa(e){e.Y=Date.now()+e.P,Ja(e,e.P)}function Ja(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Na(Zo(e.lb,e),t)}function Za(e){e.B&&(Ko.clearTimeout(e.B),e.B=null)}function el(e){0==e.l.H||e.J||wc(e.l,e)}function tl(e){Za(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,ha(e.V),ba(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function nl(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||Rl(n.i,e)))if(!e.K&&Rl(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(c){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;bc(n),cc(n)}mc(n),Ca(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=Na(Zo(n.ib,n),6e3));if(1>=Nl(n.i)&&n.oa){try{n.oa()}catch(c){}n.oa=void 0}}else Sc(n,11)}else if((e.K||n.g==e)&&bc(n),!ls(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){let c=i[t];if(n.V=c[0],c=c[1],2==n.H)if("c"==c[0]){n.K=c[1],n.pa=c[2];const t=c[3];null!=t&&(n.ra=t,n.l.info("VER="+n.ra));const i=c[4];null!=i&&(n.Ga=i,n.l.info("SVER="+n.Ga));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var o=r.i;o.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(o.j=o.l,o.g=new Set,o.h&&(Dl(o,o.h),o.h=null))}if(r.F){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.Da=e,ul(r.I,r.F,e))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var s=e;if((r=n).wa=_c(r,r.J?r.pa:null,r.Y),s.K){Pl(r.i,s);var a=s,l=r.L;l&&a.setTimeout(l),a.B&&(Za(a),Xa(a)),r.g=s}else gc(r);0<n.j.length&&dc(n)}else"stop"!=c[0]&&"close"!=c[0]||Sc(n,7);else 3==n.H&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?Sc(n,7):lc(n):"noop"!=c[0]&&n.h&&n.h.Aa(c),n.A=0)}Ta()}catch(c){}}function rl(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Go(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(Go(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(Go(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}(Bo=Va.prototype).setTimeout=function(e){this.P=e},Bo.nb=function(e){e=e.target;const t=this.M;t&&3==nc(e)?t.l():this.Pa(e)},Bo.Pa=function(e){try{if(e==this.g)e:{const u=nc(this.g);var t=this.g.Ia();this.g.da();if(!(3>u)&&(3!=u||ys||this.g&&(this.h.h||this.g.ja()||rc(this.g)))){this.J||4!=u||7==t||Ta(),Za(this);var n=this.g.da();this.ca=n;t:if(Qa(this)){var r=rc(this.g);e="";var i=r.length,o=4==nc(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){tl(this),el(this);var s="";break t}this.h.i=new Ko.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:o&&t==i-1});r.splice(0,i),this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.ja();if(this.i=200==n,function(e,t,n,r,i,o,s){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+o+" "+s})}(this.j,this.u,this.A,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ls(a)){var c=a;break t}}c=null}if(!(n=c)){this.i=!1,this.o=3,Ca(12),tl(this),el(this);break e}Ea(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,nl(this,n)}this.S?(Ya(this,u,s),ys&&this.i&&3==u&&(va(this.U,this.V,"tick",this.mb),this.V.start())):(Ea(this.j,this.m,s,null),nl(this,s)),4==u&&tl(this),this.i&&!this.J&&(4==u?wc(this.l,this):(this.i=!1,Xa(this)))}else(function(e){const t={};e=(e.g&&2<=nc(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(ls(e[r]))continue;var n=ia(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const o=t[i]||[];t[i]=o,o.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==n&&0<s.indexOf("Unknown SID")?(this.o=3,Ca(12)):(this.o=0,Ca(13)),tl(this),el(this)}}}catch(u){}},Bo.mb=function(){if(this.g){var e=nc(this.g),t=this.g.ja();this.C<t.length&&(Za(this),Ya(this,e,t),this.i&&4!=e&&Xa(this))}},Bo.cancel=function(){this.J=!0,tl(this)},Bo.lb=function(){this.B=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.j,this.A),2!=this.L&&(Ta(),Ca(17)),tl(this),this.o=2,el(this)):Ja(this,this.Y-e)};var il=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ol(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof ol){this.h=e.h,al(this,e.j),this.s=e.s,this.g=e.g,ll(this,e.m),this.l=e.l;var t=e.i,n=new wl;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),cl(this,n),this.o=e.o}else e&&(t=String(e).match(il))?(this.h=!1,al(this,t[1]||"",!0),this.s=hl(t[2]||""),this.g=hl(t[3]||"",!0),ll(this,t[4]),this.l=hl(t[5]||"",!0),cl(this,t[6]||"",!0),this.o=hl(t[7]||"")):(this.h=!1,this.i=new wl(null,this.h))}function sl(e){return new ol(e)}function al(e,t,n){e.j=n?hl(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function ll(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function cl(e,t,n){t instanceof wl?(e.i=t,function(e,t){t&&!e.j&&(El(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(Sl(this,t),_l(this,n,e))},e)),e.j=t}(e.i,e.h)):(n||(t=fl(t,vl)),e.i=new wl(t,e.h))}function ul(e,t,n){e.i.set(t,n)}function dl(e){return ul(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function hl(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function fl(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,pl),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function pl(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}ol.prototype.toString=function(){var e=[],t=this.j;t&&e.push(fl(t,gl,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(fl(t,gl,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(fl(n,"/"==n.charAt(0)?yl:ml,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",fl(n,bl)),e.join("")};var gl=/[#\/\?@]/g,ml=/[#\?:]/g,yl=/[#\?]/g,vl=/[#\?@]/g,bl=/#/g;function wl(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function El(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function Sl(e,t){El(e),t=kl(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function xl(e,t){return El(e),t=kl(e,t),e.g.has(t)}function _l(e,t,n){Sl(e,t),0<n.length&&(e.i=null,e.g.set(kl(e,t),is(n)),e.h+=n.length)}function kl(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Bo=wl.prototype).add=function(e,t){El(this),this.i=null,e=kl(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Bo.forEach=function(e,t){El(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},Bo.ta=function(){El(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},Bo.Z=function(e){El(this);let t=[];if("string"===typeof e)xl(this,e)&&(t=t.concat(this.g.get(kl(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},Bo.set=function(e,t){return El(this),this.i=null,xl(this,e=kl(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Bo.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},Bo.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const o=encodeURIComponent(String(r)),s=this.Z(r);for(r=0;r<s.length;r++){var i=o;""!==s[r]&&(i+="="+encodeURIComponent(String(s[r]))),e.push(i)}}return this.i=e.join("&")};var Tl=class{constructor(e,t){this.g=e,this.map=t}};function Il(e){this.l=e||Cl,Ko.PerformanceNavigationTiming?e=0<(e=Ko.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Ko.g&&Ko.g.Ka&&Ko.g.Ka()&&Ko.g.Ka().ec),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Cl=10;function Al(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Nl(e){return e.h?1:e.g?e.g.size:0}function Rl(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Dl(e,t){e.g?e.g.add(t):e.h=t}function Pl(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Ol(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return is(e.i)}Il.prototype.cancel=function(){if(this.i=Ol(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var Ll,jl=class{stringify(e){return Ko.JSON.stringify(e,void 0)}parse(e){return Ko.JSON.parse(e,void 0)}};function Ml(){this.g=new jl}function Ul(e,t,n){const r=n||"";try{rl(e,function(e,n){let i=e;Qo(e)&&(i=ea(e)),t.push(r+n+"="+encodeURIComponent(i))})}catch(Tw){throw t.push(r+"type="+encodeURIComponent("_badmap")),Tw}}function Fl(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(o){}}function zl(e){this.l=e.fc||null,this.j=e.ob||!1}function Vl(e,t){Xs.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=Bl,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ts(zl,Pa),zl.prototype.g=function(){return new Vl(this.l,this.j)},zl.prototype.i=(Ll={},function(){return Ll}),ts(Vl,Xs);var Bl=0;function ql(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function Wl(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Hl(e)}function Hl(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Bo=Vl.prototype).open=function(e,t){if(this.readyState!=Bl)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Hl(this)},Bo.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||Ko).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},Bo.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Wl(this)),this.readyState=Bl},Bo.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Hl(this)),this.g&&(this.readyState=3,Hl(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof Ko.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ql(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},Bo.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Wl(this):Hl(this),3==this.readyState&&ql(this)}},Bo.Za=function(e){this.g&&(this.response=this.responseText=e,Wl(this))},Bo.Ya=function(e){this.g&&(this.response=e,Wl(this))},Bo.ka=function(){this.g&&Wl(this)},Bo.setRequestHeader=function(e,t){this.v.append(e,t)},Bo.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Bo.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Vl.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Kl=Ko.JSON.parse;function Gl(e){Xs.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Ql,this.L=this.M=!1}ts(Gl,Xs);var Ql="",Yl=/^https?$/i,$l=["POST","PUT"];function Xl(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Jl(e),ec(e)}function Jl(e){e.F||(e.F=!0,Js(e,"complete"),Js(e,"error"))}function Zl(e){if(e.h&&"undefined"!=typeof Ho&&(!e.C[1]||4!=nc(e)||2!=e.da()))if(e.v&&4==nc(e))fa(e.La,0,e);else if(Js(e,"readystatechange"),4==nc(e)){e.h=!1;try{const a=e.da();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===a){var i=String(e.I).match(il)[1]||null;!i&&Ko.self&&Ko.self.location&&(i=Ko.self.location.protocol.slice(0,-1)),r=!Yl.test(i?i.toLowerCase():"")}n=r}if(n)Js(e,"complete"),Js(e,"success");else{e.m=6;try{var o=2<nc(e)?e.g.statusText:""}catch(s){o=""}e.j=o+" ["+e.da()+"]",Jl(e)}}finally{ec(e)}}}function ec(e,t){if(e.g){tc(e);const n=e.g,r=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||Js(e,"ready");try{n.onreadystatechange=r}catch(Tw){}}}function tc(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(Ko.clearTimeout(e.A),e.A=null)}function nc(e){return e.g?e.g.readyState:0}function rc(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case Ql:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(lu){return null}}function ic(e){let t="";return Ds(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function oc(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=ic(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):ul(e,t,n))}function sc(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function ac(e){this.Ga=0,this.j=[],this.l=new wa,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=sc("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=sc("baseRetryDelayMs",5e3,e),this.hb=sc("retryDelaySeedMs",1e4,e),this.eb=sc("forwardChannelMaxRetries",2,e),this.xa=sc("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.dc||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new Il(e&&e.concurrentRequestLimit),this.Ja=new Ml,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function lc(e){if(uc(e),3==e.H){var t=e.W++,n=sl(e.I);if(ul(n,"SID",e.K),ul(n,"RID",t),ul(n,"TYPE","terminate"),fc(e,n),(t=new Va(e,e.l,t)).L=2,t.v=dl(sl(n)),n=!1,Ko.navigator&&Ko.navigator.sendBeacon)try{n=Ko.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&Ko.Image&&((new Image).src=t.v,n=!0),n||(t.g=kc(t.l,null),t.g.ha(t.v)),t.G=Date.now(),Xa(t)}xc(e)}function cc(e){e.g&&(yc(e),e.g.cancel(),e.g=null)}function uc(e){cc(e),e.u&&(Ko.clearTimeout(e.u),e.u=null),bc(e),e.i.cancel(),e.m&&("number"===typeof e.m&&Ko.clearTimeout(e.m),e.m=null)}function dc(e){if(!Al(e.i)&&!e.m){e.m=!0;var t=e.Na;sa||ca(),aa||(sa(),aa=!0),la.add(t,e),e.C=0}}function hc(e,t){var n;n=t?t.m:e.W++;const r=sl(e.I);ul(r,"SID",e.K),ul(r,"RID",n),ul(r,"AID",e.V),fc(e,r),e.o&&e.s&&oc(r,e.o,e.s),n=new Va(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=pc(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),Dl(e.i,n),Ka(n,r,t)}function fc(e,t){e.na&&Ds(e.na,function(e,n){ul(t,n,e)}),e.h&&rl({},function(e,n){ul(t,n,e)})}function pc(e,t,n){n=Math.min(e.j.length,n);var r=e.h?Zo(e.h.Va,e.h,e):null;e:{var i=e.j;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let o=!0;for(let s=0;s<n;s++){let n=i[s].g;const a=i[s].map;if(n-=t,0>n)t=Math.max(0,i[s].g-100),o=!1;else try{Ul(a,e,"req"+n+"_")}catch(bu){r&&r(a)}}if(o){r=e.join("&");break e}}}return e=e.j.splice(0,n),t.F=e,r}function gc(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;sa||ca(),aa||(sa(),aa=!0),la.add(t,e),e.A=0}}function mc(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=Na(Zo(e.Ma,e),Ec(e,e.A)),e.A++,!0)}function yc(e){null!=e.B&&(Ko.clearTimeout(e.B),e.B=null)}function vc(e){e.g=new Va(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=sl(e.wa);ul(t,"RID","rpc"),ul(t,"SID",e.K),ul(t,"AID",e.V),ul(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&ul(t,"TO",e.qa),ul(t,"TYPE","xmlhttp"),fc(e,t),e.o&&e.s&&oc(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.v=dl(sl(t)),n.s=null,n.S=!0,Ga(n,e)}function bc(e){null!=e.v&&(Ko.clearTimeout(e.v),e.v=null)}function wc(e,t){var n=null;if(e.g==t){bc(e),yc(e),e.g=null;var r=2}else{if(!Rl(e.i,t))return;n=t.F,Pl(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.G;var i=e.C;Js(r=_a(),new Aa(r,n)),dc(e)}else gc(e);else if(3==(i=t.o)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(Nl(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=Na(Zo(e.Na,e,t),Ec(e,e.C)),e.C++,!0))}(e,t)||2==r&&mc(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Sc(e,5);break;case 4:Sc(e,10);break;case 3:Sc(e,6);break;default:Sc(e,2)}}function Ec(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function Sc(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=Zo(e.pb,e);n||(n=new ol("//www.google.com/images/cleardot.gif"),Ko.location&&"http"==Ko.location.protocol||al(n,"https"),dl(n)),function(e,t){const n=new wa;if(Ko.Image){const r=new Image;r.onload=es(Fl,n,r,"TestLoadImage: loaded",!0,t),r.onerror=es(Fl,n,r,"TestLoadImage: error",!1,t),r.onabort=es(Fl,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=es(Fl,n,r,"TestLoadImage: timeout",!1,t),Ko.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(n.toString(),r)}else Ca(2);e.H=0,e.h&&e.h.za(t),xc(e),uc(e)}function xc(e){if(e.H=0,e.ma=[],e.h){const t=Ol(e.i);0==t.length&&0==e.j.length||(os(e.ma,t),os(e.ma,e.j),e.i.i.length=0,is(e.j),e.j.length=0),e.h.ya()}}function _c(e,t,n){var r=n instanceof ol?sl(n):new ol(n);if(""!=r.g)t&&(r.g=t+"."+r.g),ll(r,r.m);else{var i=Ko.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var o=new ol(null);r&&al(o,r),t&&(o.g=t),i&&ll(o,i),n&&(o.l=n),r=o}return n=e.F,t=e.Da,n&&t&&ul(r,n,t),ul(r,"VER",e.ra),fc(e,r),r}function kc(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ha&&!e.va?new Gl(new zl({ob:!0})):new Gl(e.va)).Oa(e.J),t}function Tc(){}function Ic(){if(gs&&!(10<=Number(ks)))throw Error("Environmental error: no available transport.")}function Cc(e,t){Xs.call(this),this.g=new ac(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!ls(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!ls(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Rc(this)}function Ac(e){Ua.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Nc(){Fa.call(this),this.status=1}function Rc(e){this.g=e}function Dc(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Pc(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var o=e.g[3],s=t+(o^n&(i^o))+r[0]+3614090360&4294967295;s=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=n+(s<<7&4294967295|s>>>25))+((s=o+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(o^t))+r[3]+3250441966&4294967295)<<22&4294967295|s>>>10))+((s=t+(o^n&(i^o))+r[4]+4118548399&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(o^t))+r[7]+4249261313&4294967295)<<22&4294967295|s>>>10))+((s=t+(o^n&(i^o))+r[8]+1770035416&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(o^t))+r[11]+2304563134&4294967295)<<22&4294967295|s>>>10))+((s=t+(o^n&(i^o))+r[12]+1804603682&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(o^t))+r[15]+1236535329&4294967295)<<22&4294967295|s>>>10))+((s=t+(i^o&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(o^t))+r[11]+643717713&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^t&(i^o))+r[0]+3921069994&4294967295)<<20&4294967295|s>>>12))+((s=t+(i^o&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(o^t))+r[15]+3634488961&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^t&(i^o))+r[4]+3889429448&4294967295)<<20&4294967295|s>>>12))+((s=t+(i^o&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(o^t))+r[3]+4107603335&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^t&(i^o))+r[8]+1163531501&4294967295)<<20&4294967295|s>>>12))+((s=t+(i^o&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(o^t))+r[7]+1735328473&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^t&(i^o))+r[12]+2368359562&4294967295)<<20&4294967295|s>>>12))+((s=t+(n^i^o)+r[5]+4294588738&4294967295)<<4&4294967295|s>>>28))+((s=o+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^t)+r[14]+4259657740&4294967295)<<23&4294967295|s>>>9))+((s=t+(n^i^o)+r[1]+2763975236&4294967295)<<4&4294967295|s>>>28))+((s=o+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^t)+r[10]+3200236656&4294967295)<<23&4294967295|s>>>9))+((s=t+(n^i^o)+r[13]+681279174&4294967295)<<4&4294967295|s>>>28))+((s=o+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^t)+r[6]+76029189&4294967295)<<23&4294967295|s>>>9))+((s=t+(n^i^o)+r[9]+3654602809&4294967295)<<4&4294967295|s>>>28))+((s=o+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^t^n)+r[15]+530742520&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^t)+r[2]+3299628645&4294967295)<<23&4294967295|s>>>9))+((s=t+(i^(n|~o))+r[0]+4096336452&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|s>>>22))+((s=i+(t^(o|~n))+r[14]+2878612391&4294967295)<<15&4294967295|s>>>17))+((s=n+(o^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|s>>>11))+((s=t+(i^(n|~o))+r[12]+1700485571&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|s>>>22))+((s=i+(t^(o|~n))+r[10]+4293915773&4294967295)<<15&4294967295|s>>>17))+((s=n+(o^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|s>>>11))+((s=t+(i^(n|~o))+r[8]+1873313359&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|s>>>22))+((s=i+(t^(o|~n))+r[6]+2734768916&4294967295)<<15&4294967295|s>>>17))+((s=n+(o^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|s>>>11))+((o=(t=n+((s=t+(i^(n|~o))+r[4]+4149444226&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|s>>>22))^((i=o+((s=i+(t^(o|~n))+r[2]+718787259&4294967295)<<15&4294967295|s>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(s<<21&4294967295|s>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+o&4294967295}function Oc(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var o=0|e[i];r&&o==t||(n[i]=o,r=!1)}this.g=n}(Bo=Gl.prototype).Oa=function(e){this.M=e},Bo.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():ja.g(),this.C=this.u?Oa(this.u):Oa(ja),this.g.onreadystatechange=Zo(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(o){return void Xl(this,o)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),i=Ko.FormData&&e instanceof Ko.FormData,!(0<=rs($l,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,a]of n)this.g.setRequestHeader(s,a);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{tc(this),0<this.B&&((this.L=function(e){return gs&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Zo(this.ua,this)):this.A=fa(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(o){Xl(this,o)}},Bo.ua=function(){"undefined"!=typeof Ho&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Js(this,"timeout"),this.abort(8))},Bo.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Js(this,"complete"),Js(this,"abort"),ec(this))},Bo.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),ec(this,!0)),Gl.$.N.call(this)},Bo.La=function(){this.s||(this.G||this.v||this.l?Zl(this):this.kb())},Bo.kb=function(){Zl(this)},Bo.isActive=function(){return!!this.g},Bo.da=function(){try{return 2<nc(this)?this.g.status:-1}catch(Ll){return-1}},Bo.ja=function(){try{return this.g?this.g.responseText:""}catch(Ll){return""}},Bo.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Kl(t)}},Bo.Ia=function(){return this.m},Bo.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(Bo=ac.prototype).ra=8,Bo.H=1,Bo.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const i=new Va(this,this.l,e);let o=this.s;if(this.U&&(o?(o=Ps(o),Ls(o,this.U)):o=this.U),null!==this.o||this.O||(i.I=o,o=null),this.P)e:{for(var t=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.j.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=pc(this,i,t),ul(n=sl(this.I),"RID",e),ul(n,"CVER",22),this.F&&ul(n,"X-HTTP-Session-Id",this.F),fc(this,n),o&&(this.O?t="headers="+encodeURIComponent(String(ic(o)))+"&"+t:this.o&&oc(n,this.o,o)),Dl(this.i,i),this.bb&&ul(n,"TYPE","init"),this.P?(ul(n,"$req",t),ul(n,"SID","null"),i.aa=!0,Ka(i,n,null)):Ka(i,n,t),this.H=2}}else 3==this.H&&(e?hc(this,e):0==this.j.length||Al(this.i)||hc(this))},Bo.Ma=function(){if(this.u=null,vc(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=Na(Zo(this.jb,this),e)}},Bo.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Ca(10),cc(this),vc(this))},Bo.ib=function(){null!=this.v&&(this.v=null,cc(this),mc(this),Ca(19))},Bo.pb=function(e){e?(this.l.info("Successfully pinged google.com"),Ca(2)):(this.l.info("Failed to ping google.com"),Ca(1))},Bo.isActive=function(){return!!this.h&&this.h.isActive(this)},(Bo=Tc.prototype).Ba=function(){},Bo.Aa=function(){},Bo.za=function(){},Bo.ya=function(){},Bo.isActive=function(){return!0},Bo.Va=function(){},Ic.prototype.g=function(e,t){return new Cc(e,t)},ts(Cc,Xs),Cc.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;Ca(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=_c(e,null,e.Y),dc(e)},Cc.prototype.close=function(){lc(this.g)},Cc.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=ea(e),e=n);t.j.push(new Tl(t.fb++,e)),3==t.H&&dc(t)},Cc.prototype.N=function(){this.g.h=null,delete this.j,lc(this.g),delete this.g,Cc.$.N.call(this)},ts(Ac,Ua),ts(Nc,Fa),ts(Rc,Tc),Rc.prototype.Ba=function(){Js(this.g,"a")},Rc.prototype.Aa=function(e){Js(this.g,new Ac(e))},Rc.prototype.za=function(e){Js(this.g,new Nc)},Rc.prototype.ya=function(){Js(this.g,"b")},ts(Dc,function(){this.blockSize=-1}),Dc.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Dc.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,o=0;o<t;){if(0==i)for(;o<=n;)Pc(this,e,o),o+=this.blockSize;if("string"===typeof e){for(;o<t;)if(r[i++]=e.charCodeAt(o++),i==this.blockSize){Pc(this,r),i=0;break}}else for(;o<t;)if(r[i++]=e[o++],i==this.blockSize){Pc(this,r),i=0;break}}this.h=i,this.i+=t},Dc.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var Lc={};function jc(e){return-128<=e&&128>e?function(e,t){var n=Lc;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new Oc([0|e],0>e?-1:0)}):new Oc([0|e],0>e?-1:0)}function Mc(e){if(isNaN(e)||!isFinite(e))return Fc;if(0>e)return Wc(Mc(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=Uc;return new Oc(t,0)}var Uc=4294967296,Fc=jc(0),zc=jc(1),Vc=jc(16777216);function Bc(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function qc(e){return-1==e.h}function Wc(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new Oc(n,~e.h).add(zc)}function Hc(e,t){return e.add(Wc(t))}function Kc(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function Gc(e,t){this.g=e,this.h=t}function Qc(e,t){if(Bc(t))throw Error("division by zero");if(Bc(e))return new Gc(Fc,Fc);if(qc(e))return t=Qc(Wc(e),t),new Gc(Wc(t.g),Wc(t.h));if(qc(t))return t=Qc(e,Wc(t)),new Gc(Wc(t.g),t.h);if(30<e.g.length){if(qc(e)||qc(t))throw Error("slowDivide_ only works with positive integers.");for(var n=zc,r=t;0>=r.X(e);)n=Yc(n),r=Yc(r);var i=$c(n,1),o=$c(r,1);for(r=$c(r,2),n=$c(n,2);!Bc(r);){var s=o.add(r);0>=s.X(e)&&(i=i.add(n),o=s),r=$c(r,1),n=$c(n,1)}return t=Hc(e,i.R(t)),new Gc(i,t)}for(i=Fc;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),s=(o=Mc(n)).R(t);qc(s)||0<s.X(e);)s=(o=Mc(n-=r)).R(t);Bc(o)&&(o=zc),i=i.add(o),e=Hc(e,s)}return new Gc(i,e)}function Yc(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new Oc(n,e.h)}function $c(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],o=0;o<r;o++)i[o]=0<t?e.D(o+n)>>>t|e.D(o+n+1)<<32-t:e.D(o+n);return new Oc(i,e.h)}(Bo=Oc.prototype).ea=function(){if(qc(this))return-Wc(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:Uc+r)*t,t*=Uc}return e},Bo.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(Bc(this))return"0";if(qc(this))return"-"+Wc(this).toString(e);for(var t=Mc(Math.pow(e,6)),n=this,r="";;){var i=Qc(n,t).g,o=((0<(n=Hc(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(Bc(n=i))return o+r;for(;6>o.length;)o="0"+o;r=o+r}},Bo.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},Bo.X=function(e){return qc(e=Hc(this,e))?-1:Bc(e)?0:1},Bo.abs=function(){return qc(this)?Wc(this):this},Bo.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var o=r+(65535&this.D(i))+(65535&e.D(i)),s=(o>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=s>>>16,o&=65535,s&=65535,n[i]=s<<16|o}return new Oc(n,-2147483648&n[n.length-1]?-1:0)},Bo.R=function(e){if(Bc(this)||Bc(e))return Fc;if(qc(this))return qc(e)?Wc(this).R(Wc(e)):Wc(Wc(this).R(e));if(qc(e))return Wc(this.R(Wc(e)));if(0>this.X(Vc)&&0>e.X(Vc))return Mc(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var o=this.D(r)>>>16,s=65535&this.D(r),a=e.D(i)>>>16,l=65535&e.D(i);n[2*r+2*i]+=s*l,Kc(n,2*r+2*i),n[2*r+2*i+1]+=o*l,Kc(n,2*r+2*i+1),n[2*r+2*i+1]+=s*a,Kc(n,2*r+2*i+1),n[2*r+2*i+2]+=o*a,Kc(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new Oc(n,0)},Bo.gb=function(e){return Qc(this,e).h},Bo.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new Oc(n,this.h&e.h)},Bo.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new Oc(n,this.h|e.h)},Bo.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new Oc(n,this.h^e.h)},Ic.prototype.createWebChannel=Ic.prototype.g,Cc.prototype.send=Cc.prototype.u,Cc.prototype.open=Cc.prototype.m,Cc.prototype.close=Cc.prototype.close,Ra.NO_ERROR=0,Ra.TIMEOUT=8,Ra.HTTP_ERROR=6,Da.COMPLETE="complete",La.EventType=Ma,Ma.OPEN="a",Ma.CLOSE="b",Ma.ERROR="c",Ma.MESSAGE="d",Xs.prototype.listen=Xs.prototype.O,Gl.prototype.listenOnce=Gl.prototype.P,Gl.prototype.getLastError=Gl.prototype.Sa,Gl.prototype.getLastErrorCode=Gl.prototype.Ia,Gl.prototype.getStatus=Gl.prototype.da,Gl.prototype.getResponseJson=Gl.prototype.Wa,Gl.prototype.getResponseText=Gl.prototype.ja,Gl.prototype.send=Gl.prototype.ha,Gl.prototype.setWithCredentials=Gl.prototype.Oa,Dc.prototype.digest=Dc.prototype.l,Dc.prototype.reset=Dc.prototype.reset,Dc.prototype.update=Dc.prototype.j,Oc.prototype.add=Oc.prototype.add,Oc.prototype.multiply=Oc.prototype.R,Oc.prototype.modulo=Oc.prototype.gb,Oc.prototype.compare=Oc.prototype.X,Oc.prototype.toNumber=Oc.prototype.ea,Oc.prototype.toString=Oc.prototype.toString,Oc.prototype.getBits=Oc.prototype.D,Oc.fromNumber=Mc,Oc.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return Wc(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=Mc(Math.pow(n,8)),i=Fc,o=0;o<t.length;o+=8){var s=Math.min(8,t.length-o),a=parseInt(t.substring(o,o+s),n);8>s?(s=Mc(Math.pow(n,s)),i=i.R(s).add(Mc(a))):i=(i=i.R(r)).add(Mc(a))}return i};var Xc=Wo.createWebChannelTransport=function(){return new Ic},Jc=Wo.getStatEventTarget=function(){return _a()},Zc=Wo.ErrorCode=Ra,eu=Wo.EventType=Da,tu=Wo.Event=Sa,nu=Wo.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},ru=Wo.FetchXmlHttpFactory=zl,iu=Wo.WebChannel=La,ou=Wo.XhrIo=Gl,su=Wo.Md5=Dc,au=Wo.Integer=Oc;const lu="@firebase/firestore";class cu{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}cu.UNAUTHENTICATED=new cu(null),cu.GOOGLE_CREDENTIALS=new cu("google-credentials-uid"),cu.FIRST_PARTY=new cu("first-party-uid"),cu.MOCK_USER=new cu("mock-user");let uu="9.23.0";const du=new wt("@firebase/firestore");function hu(){return du.logLevel}function fu(e){if(du.logLevel<=gt.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(mu);du.debug("Firestore (".concat(uu,"): ").concat(e),...i)}}function pu(e){if(du.logLevel<=gt.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(mu);du.error("Firestore (".concat(uu,"): ").concat(e),...i)}}function gu(e){if(du.logLevel<=gt.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(mu);du.warn("Firestore (".concat(uu,"): ").concat(e),...i)}}function mu(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function yu(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const t="FIRESTORE (".concat(uu,") INTERNAL ASSERTION FAILED: ")+e;throw pu(t),new Error(t)}function vu(e,t){e||yu()}function bu(e,t){return e}const wu={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Eu extends Ze{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class Su{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class xu{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class _u{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(cu.UNAUTHENTICATED))}shutdown(){}}class ku{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Tu{constructor(e){this.t=e,this.currentUser=cu.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new Su;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Su,e.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const t=i;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},s=e=>{fu("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(e=>s(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?s(e):(fu("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Su)}},0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(fu("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(vu("string"==typeof t.accessToken),new xu(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return vu(null===e||"string"==typeof e),new cu(e)}}class Iu{constructor(e,t,n){this.h=e,this.l=t,this.m=n,this.type="FirstParty",this.user=cu.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class Cu{constructor(e,t,n){this.h=e,this.l=t,this.m=n}getToken(){return Promise.resolve(new Iu(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(cu.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Au{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Nu{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const n=e=>{null!=e.error&&fu("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.T;return this.T=e.token,fu("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{fu("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.I.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.I.getImmediate({optional:!0});e?r(e):fu("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(vu("string"==typeof e.token),this.T=e.token,new Au(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Ru(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class Du{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=Ru(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function Pu(e,t){return e<t?-1:e>t?1:0}function Ou(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}class Lu{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Eu(wu.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Eu(wu.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Eu(wu.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Eu(wu.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Lu.fromMillis(Date.now())}static fromDate(e){return Lu.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new Lu(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Pu(this.nanoseconds,e.nanoseconds):Pu(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class ju{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ju(e)}static min(){return new ju(new Lu(0,0))}static max(){return new ju(new Lu(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Mu{constructor(e,t,n){void 0===t?t=0:t>e.length&&yu(),void 0===n?n=e.length-t:n>e.length-t&&yu(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Mu.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Mu?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Uu extends Mu{construct(e,t,n){return new Uu(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new Eu(wu.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter(e=>e.length>0))}return new Uu(e)}static emptyPath(){return new Uu([])}}const Fu=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class zu extends Mu{construct(e,t,n){return new zu(e,t,n)}static isValidIdentifier(e){return Fu.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),zu.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new zu(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new Eu(wu.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let o=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Eu(wu.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Eu(wu.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(o=!o,r++):"."!==t||o?(n+=t,r++):(i(),r++)}if(i(),o)throw new Eu(wu.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new zu(t)}static emptyPath(){return new zu([])}}class Vu{constructor(e){this.path=e}static fromPath(e){return new Vu(Uu.fromString(e))}static fromName(e){return new Vu(Uu.fromString(e).popFirst(5))}static empty(){return new Vu(Uu.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Uu.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Uu.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Vu(new Uu(e.slice()))}}class Bu{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}Bu.UNKNOWN_ID=-1;function qu(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=ju.fromTimestamp(1e9===r?new Lu(n+1,0):new Lu(n,r));return new Hu(i,Vu.empty(),t)}function Wu(e){return new Hu(e.readTime,e.key,-1)}class Hu{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Hu(ju.min(),Vu.empty(),-1)}static max(){return new Hu(ju.max(),Vu.empty(),-1)}}function Ku(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=Vu.comparator(e.documentKey,t.documentKey),0!==n?n:Pu(e.largestBatchId,t.largestBatchId))}const Gu="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Qu{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function Yu(e){if(e.code!==wu.FAILED_PRECONDITION||e.message!==Gu)throw e;fu("LocalStore","Unexpectedly lost primary lease")}class $u{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&yu(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new $u((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof $u?t:$u.resolve(t)}catch(e){return $u.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):$u.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):$u.reject(t)}static resolve(e){return new $u((t,n)=>{t(e)})}static reject(e){return new $u((t,n)=>{n(e)})}static waitFor(e){return new $u((t,n)=>{let r=0,i=0,o=!1;e.forEach(e=>{++r,e.next(()=>{++i,o&&i===r&&t()},e=>n(e))}),o=!0,i===r&&t()})}static or(e){let t=$u.resolve(!1);for(const n of e)t=t.next(e=>e?$u.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new $u((n,r)=>{const i=e.length,o=new Array(i);let s=0;for(let a=0;a<i;a++){const l=a;t(e[l]).next(e=>{o[l]=e,++s,s===i&&n(o)},e=>r(e))}})}static doWhile(e,t){return new $u((n,r)=>{const i=()=>{!0===e()?t().next(()=>{i()},r):n()};i()})}}function Xu(e){return"IndexedDbTransactionError"===e.name}class Ju{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ot(e),this.ut=e=>t.writeSequenceNumber(e))}ot(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ut&&this.ut(e),e}}function Zu(e){return null==e}function ed(e){return 0===e&&1/e==-1/0}function td(e){return"number"==typeof e&&Number.isInteger(e)&&!ed(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}Ju.ct=-1;const nd=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],rd=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],id=rd;function od(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function sd(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function ad(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class ld{constructor(e,t){this.comparator=e,this.root=t||ud.EMPTY}insert(e,t){return new ld(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ud.BLACK,null,null))}remove(e){return new ld(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ud.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push("".concat(t,":").concat(n)),!1)),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new cd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new cd(this.root,e,this.comparator,!1)}getReverseIterator(){return new cd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new cd(this.root,e,this.comparator,!0)}}class cd{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ud{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:ud.RED,this.left=null!=r?r:ud.EMPTY,this.right=null!=i?i:ud.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new ud(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return ud.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return ud.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ud.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ud.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw yu();if(this.right.isRed())throw yu();const e=this.left.check();if(e!==this.right.check())throw yu();return e+(this.isRed()?0:1)}}ud.EMPTY=null,ud.RED=!0,ud.BLACK=!1,ud.EMPTY=new class{constructor(){this.size=0}get key(){throw yu()}get value(){throw yu()}get color(){throw yu()}get left(){throw yu()}get right(){throw yu()}copy(e,t,n,r,i){return this}insert(e,t,n){return new ud(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class dd{constructor(e){this.comparator=e,this.data=new ld(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new hd(this.data.getIterator())}getIteratorFrom(e){return new hd(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof dd))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new dd(this.comparator);return t.data=e,t}}class hd{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class fd{constructor(e){this.fields=e,e.sort(zu.comparator)}static empty(){return new fd([])}unionWith(e){let t=new dd(zu.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new fd(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ou(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class pd extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class gd{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new pd("Invalid base64 string: "+e):e}}(e);return new gd(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new gd(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Pu(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}gd.EMPTY_BYTE_STRING=new gd("");const md=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function yd(e){if(vu(!!e),"string"==typeof e){let t=0;const n=md.exec(e);if(vu(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:vd(e.seconds),nanos:vd(e.nanos)}}function vd(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function bd(e){return"string"==typeof e?gd.fromBase64String(e):gd.fromUint8Array(e)}function wd(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Ed(e){const t=e.mapValue.fields.__previous_value__;return wd(t)?Ed(t):t}function Sd(e){const t=yd(e.mapValue.fields.__local_write_time__.timestampValue);return new Lu(t.seconds,t.nanos)}class xd{constructor(e,t,n,r,i,o,s,a,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.longPollingOptions=a,this.useFetchStreams=l}}class _d{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new _d("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof _d&&e.projectId===this.projectId&&e.database===this.database}}const kd={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Td(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?wd(e)?4:zd(e)?9007199254740991:10:yu()}function Id(e,t){if(e===t)return!0;const n=Td(e);if(n!==Td(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Sd(e).isEqual(Sd(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=yd(e.timestampValue),r=yd(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return bd(e.bytesValue).isEqual(bd(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return vd(e.geoPointValue.latitude)===vd(t.geoPointValue.latitude)&&vd(e.geoPointValue.longitude)===vd(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return vd(e.integerValue)===vd(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=vd(e.doubleValue),r=vd(t.doubleValue);return n===r?ed(n)===ed(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Ou(e.arrayValue.values||[],t.arrayValue.values||[],Id);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(od(n)!==od(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Id(n[i],r[i])))return!1;return!0}(e,t);default:return yu()}}function Cd(e,t){return void 0!==(e.values||[]).find(e=>Id(e,t))}function Ad(e,t){if(e===t)return 0;const n=Td(e),r=Td(t);if(n!==r)return Pu(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Pu(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=vd(e.integerValue||e.doubleValue),r=vd(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Nd(e.timestampValue,t.timestampValue);case 4:return Nd(Sd(e),Sd(t));case 5:return Pu(e.stringValue,t.stringValue);case 6:return function(e,t){const n=bd(e),r=bd(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=Pu(n[i],r[i]);if(0!==e)return e}return Pu(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Pu(vd(e.latitude),vd(t.latitude));return 0!==n?n:Pu(vd(e.longitude),vd(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=Ad(n[i],r[i]);if(e)return e}return Pu(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===kd.mapValue&&t===kd.mapValue)return 0;if(e===kd.mapValue)return 1;if(t===kd.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},o=Object.keys(i);r.sort(),o.sort();for(let s=0;s<r.length&&s<o.length;++s){const e=Pu(r[s],o[s]);if(0!==e)return e;const t=Ad(n[r[s]],i[o[s]]);if(0!==t)return t}return Pu(r.length,o.length)}(e.mapValue,t.mapValue);default:throw yu()}}function Nd(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Pu(e,t);const n=yd(e),r=yd(t),i=Pu(n.seconds,r.seconds);return 0!==i?i:Pu(n.nanos,r.nanos)}function Rd(e){return Dd(e)}function Dd(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=yd(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?bd(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,Vu.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Dd(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(Dd(e.fields[i]));return n+"}"}(e.mapValue):yu();var t,n}function Pd(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Od(e){return!!e&&"integerValue"in e}function Ld(e){return!!e&&"arrayValue"in e}function jd(e){return!!e&&"nullValue"in e}function Md(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Ud(e){return!!e&&"mapValue"in e}function Fd(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return sd(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=Fd(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Fd(e.arrayValue.values[n]);return t}return Object.assign({},e)}function zd(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}class Vd{constructor(e){this.value=e}static empty(){return new Vd({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Ud(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Fd(t)}setAll(e){let t=zu.emptyPath(),n={},r=[];e.forEach((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=Fd(e):r.push(i.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());Ud(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Id(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Ud(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){sd(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new Vd(Fd(this.value))}}function Bd(e){const t=[];return sd(e.fields,(e,n)=>{const r=new zu([e]);if(Ud(n)){const e=Bd(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new fd(t)}class qd{constructor(e,t,n,r,i,o,s){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=o,this.documentState=s}static newInvalidDocument(e){return new qd(e,0,ju.min(),ju.min(),ju.min(),Vd.empty(),0)}static newFoundDocument(e,t,n,r){return new qd(e,1,t,ju.min(),n,r,0)}static newNoDocument(e,t){return new qd(e,2,t,ju.min(),ju.min(),Vd.empty(),0)}static newUnknownDocument(e,t){return new qd(e,3,t,ju.min(),ju.min(),Vd.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ju.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Vd.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Vd.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ju.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof qd&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new qd(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class Wd{constructor(e,t){this.position=e,this.inclusive=t}}function Hd(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const o=t[i],s=e.position[i];if(r=o.field.isKeyField()?Vu.comparator(Vu.fromName(s.referenceValue),n.key):Ad(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return r}function Kd(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Id(e.position[n],t.position[n]))return!1;return!0}class Gd{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function Qd(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class Yd{}class $d extends Yd{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new ih(e,t,n):"array-contains"===t?new lh(e,n):"in"===t?new ch(e,n):"not-in"===t?new uh(e,n):"array-contains-any"===t?new dh(e,n):new $d(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new oh(e,n):new sh(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Ad(t,this.value)):null!==t&&Td(this.value)===Td(t)&&this.matchesComparison(Ad(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return yu()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Xd extends Yd{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new Xd(e,t)}matches(e){return Jd(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(e=>e.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function Jd(e){return"and"===e.op}function Zd(e){return eh(e)&&Jd(e)}function eh(e){for(const t of e.filters)if(t instanceof Xd)return!1;return!0}function th(e){if(e instanceof $d)return e.field.canonicalString()+e.op.toString()+Rd(e.value);if(Zd(e))return e.filters.map(e=>th(e)).join(",");{const t=e.filters.map(e=>th(e)).join(",");return"".concat(e.op,"(").concat(t,")")}}function nh(e,t){return e instanceof $d?function(e,t){return t instanceof $d&&e.op===t.op&&e.field.isEqual(t.field)&&Id(e.value,t.value)}(e,t):e instanceof Xd?function(e,t){return t instanceof Xd&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&nh(n,t.filters[r]),!0)}(e,t):void yu()}function rh(e){return e instanceof $d?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Rd(e.value))}(e):e instanceof Xd?function(e){return e.op.toString()+" {"+e.getFilters().map(rh).join(" ,")+"}"}(e):"Filter"}class ih extends $d{constructor(e,t,n){super(e,t,n),this.key=Vu.fromName(n.referenceValue)}matches(e){const t=Vu.comparator(e.key,this.key);return this.matchesComparison(t)}}class oh extends $d{constructor(e,t){super(e,"in",t),this.keys=ah("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class sh extends $d{constructor(e,t){super(e,"not-in",t),this.keys=ah("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function ah(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>Vu.fromName(e.referenceValue))}class lh extends $d{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ld(t)&&Cd(t.arrayValue,this.value)}}class ch extends $d{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Cd(this.value.arrayValue,t)}}class uh extends $d{constructor(e,t){super(e,"not-in",t)}matches(e){if(Cd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Cd(this.value.arrayValue,t)}}class dh extends $d{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ld(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>Cd(this.value.arrayValue,e))}}class hh{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.dt=null}}function fh(e){return new hh(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function ph(e){const t=bu(e);if(null===t.dt){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>th(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),Zu(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>Rd(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>Rd(e)).join(",")),t.dt=e}return t.dt}function gh(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Qd(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!nh(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Kd(e.startAt,t.startAt)&&Kd(e.endAt,t.endAt)}function mh(e){return Vu.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class yh{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.wt=null,this._t=null,this.startAt,this.endAt}}function vh(e,t,n,r,i,o,s,a){return new yh(e,t,n,r,i,o,s,a)}function bh(e){return new yh(e)}function wh(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Eh(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function Sh(e){for(const t of e.filters){const e=t.getFirstInequalityField();if(null!==e)return e}return null}function xh(e){return null!==e.collectionGroup}function _h(e){const t=bu(e);if(null===t.wt){t.wt=[];const e=Sh(t),n=Eh(t);if(null!==e&&null===n)e.isKeyField()||t.wt.push(new Gd(e)),t.wt.push(new Gd(zu.keyField(),"asc"));else{let e=!1;for(const n of t.explicitOrderBy)t.wt.push(n),n.field.isKeyField()&&(e=!0);if(!e){const e=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.wt.push(new Gd(zu.keyField(),e))}}}return t.wt}function kh(e){const t=bu(e);if(!t._t)if("F"===t.limitType)t._t=fh(t.path,t.collectionGroup,_h(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const i of _h(t)){const t="desc"===i.dir?"asc":"desc";e.push(new Gd(i.field,t))}const n=t.endAt?new Wd(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Wd(t.startAt.position,t.startAt.inclusive):null;t._t=fh(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}return t._t}function Th(e,t){t.getFirstInequalityField(),Sh(e);const n=e.filters.concat([t]);return new yh(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Ih(e,t,n){return new yh(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Ch(e,t){return gh(kh(e),kh(t))&&e.limitType===t.limitType}function Ah(e){return"".concat(ph(kh(e)),"|lt:").concat(e.limitType)}function Nh(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map(e=>rh(e)).join(", "),"]")),Zu(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map(e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>Rd(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>Rd(e)).join(",")),"Target(".concat(t,")")}(kh(e)),"; limitType=").concat(e.limitType,")")}function Rh(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Vu.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of _h(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=Hd(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,_h(e),t))&&!(e.endAt&&!function(e,t,n){const r=Hd(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,_h(e),t))}(e,t)}function Dh(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Ph(e){return(t,n)=>{let r=!1;for(const i of _h(e)){const e=Oh(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function Oh(e,t,n){const r=e.field.isKeyField()?Vu.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Ad(r,i):yu()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return yu()}}class Lh{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){sd(this.inner,(t,n)=>{for(const[r,i]of n)e(r,i)})}isEmpty(){return ad(this.inner)}size(){return this.innerSize}}const jh=new ld(Vu.comparator);function Mh(){return jh}const Uh=new ld(Vu.comparator);function Fh(){let e=Uh;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function zh(e){let t=Uh;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function Vh(){return qh()}function Bh(){return qh()}function qh(){return new Lh(e=>e.toString(),(e,t)=>e.isEqual(t))}const Wh=new ld(Vu.comparator),Hh=new dd(Vu.comparator);function Kh(){let e=Hh;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const Gh=new dd(Pu);function Qh(){return Gh}function Yh(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ed(t)?"-0":t}}function $h(e){return{integerValue:""+e}}function Xh(e,t){return td(t)?$h(t):Yh(e,t)}class Jh{constructor(){this._=void 0}}function Zh(e,t,n){return e instanceof nf?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&wd(t)&&(t=Ed(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof rf?of(e,t):e instanceof sf?af(e,t):function(e,t){const n=tf(e,t),r=cf(n)+cf(e.gt);return Od(n)&&Od(e.gt)?$h(r):Yh(e.serializer,r)}(e,t)}function ef(e,t,n){return e instanceof rf?of(e,t):e instanceof sf?af(e,t):n}function tf(e,t){return e instanceof lf?Od(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}class nf extends Jh{}class rf extends Jh{constructor(e){super(),this.elements=e}}function of(e,t){const n=uf(t);for(const r of e.elements)n.some(e=>Id(e,r))||n.push(r);return{arrayValue:{values:n}}}class sf extends Jh{constructor(e){super(),this.elements=e}}function af(e,t){let n=uf(t);for(const r of e.elements)n=n.filter(e=>!Id(e,r));return{arrayValue:{values:n}}}class lf extends Jh{constructor(e,t){super(),this.serializer=e,this.gt=t}}function cf(e){return vd(e.integerValue||e.doubleValue)}function uf(e){return Ld(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class df{constructor(e,t){this.field=e,this.transform=t}}class hf{constructor(e,t){this.version=e,this.transformResults=t}}class ff{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ff}static exists(e){return new ff(void 0,e)}static updateTime(e){return new ff(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function pf(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class gf{}function mf(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Tf(e.key,ff.none()):new Ef(e.key,e.data,ff.none());{const n=e.data,r=Vd.empty();let i=new dd(zu.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new Sf(e.key,r,new fd(i.toArray()),ff.none())}}function yf(e,t,n){e instanceof Ef?function(e,t,n){const r=e.value.clone(),i=_f(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Sf?function(e,t,n){if(!pf(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=_f(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(xf(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function vf(e,t,n,r){return e instanceof Ef?function(e,t,n,r){if(!pf(e.precondition,t))return n;const i=e.value.clone(),o=kf(e.fieldTransforms,r,t);return i.setAll(o),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Sf?function(e,t,n,r){if(!pf(e.precondition,t))return n;const i=kf(e.fieldTransforms,r,t),o=t.data;return o.setAll(xf(e)),o.setAll(i),t.convertToFoundDocument(t.version,o).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):function(e,t,n){return pf(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function bf(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=tf(r.transform,e||null);null!=i&&(null===n&&(n=Vd.empty()),n.set(r.field,i))}return n||null}function wf(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Ou(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof rf&&t instanceof rf||e instanceof sf&&t instanceof sf?Ou(e.elements,t.elements,Id):e instanceof lf&&t instanceof lf?Id(e.gt,t.gt):e instanceof nf&&t instanceof nf}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Ef extends gf{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Sf extends gf{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function xf(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function _f(e,t,n){const r=new Map;vu(e.length===n.length);for(let i=0;i<n.length;i++){const o=e[i],s=o.transform,a=t.data.field(o.field);r.set(o.field,ef(s,a,n[i]))}return r}function kf(e,t,n){const r=new Map;for(const i of e){const e=i.transform,o=n.data.field(i.field);r.set(i.field,Zh(e,o,t))}return r}class Tf extends gf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class If extends gf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Cf{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&yf(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=vf(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=vf(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=Bh();return this.mutations.forEach(r=>{const i=e.get(r.key),o=i.overlayedDocument;let s=this.applyToLocalView(o,i.mutatedFields);s=t.has(r.key)?null:s;const a=mf(o,s);null!==a&&n.set(r.key,a),o.isValidDocument()||o.convertToNoDocument(ju.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Kh())}isEqual(e){return this.batchId===e.batchId&&Ou(this.mutations,e.mutations,(e,t)=>wf(e,t))&&Ou(this.baseMutations,e.baseMutations,(e,t)=>wf(e,t))}}class Af{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){vu(e.mutations.length===n.length);let r=Wh;const i=e.mutations;for(let o=0;o<i.length;o++)r=r.insert(i[o].key,n[o].version);return new Af(e,t,n,r)}}class Nf{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class Rf{constructor(e,t){this.count=e,this.unchangedNames=t}}var Df,Pf;function Of(e){switch(e){default:return yu();case wu.CANCELLED:case wu.UNKNOWN:case wu.DEADLINE_EXCEEDED:case wu.RESOURCE_EXHAUSTED:case wu.INTERNAL:case wu.UNAVAILABLE:case wu.UNAUTHENTICATED:return!1;case wu.INVALID_ARGUMENT:case wu.NOT_FOUND:case wu.ALREADY_EXISTS:case wu.PERMISSION_DENIED:case wu.FAILED_PRECONDITION:case wu.ABORTED:case wu.OUT_OF_RANGE:case wu.UNIMPLEMENTED:case wu.DATA_LOSS:return!0}}function Lf(e){if(void 0===e)return pu("GRPC error has no .code"),wu.UNKNOWN;switch(e){case Df.OK:return wu.OK;case Df.CANCELLED:return wu.CANCELLED;case Df.UNKNOWN:return wu.UNKNOWN;case Df.DEADLINE_EXCEEDED:return wu.DEADLINE_EXCEEDED;case Df.RESOURCE_EXHAUSTED:return wu.RESOURCE_EXHAUSTED;case Df.INTERNAL:return wu.INTERNAL;case Df.UNAVAILABLE:return wu.UNAVAILABLE;case Df.UNAUTHENTICATED:return wu.UNAUTHENTICATED;case Df.INVALID_ARGUMENT:return wu.INVALID_ARGUMENT;case Df.NOT_FOUND:return wu.NOT_FOUND;case Df.ALREADY_EXISTS:return wu.ALREADY_EXISTS;case Df.PERMISSION_DENIED:return wu.PERMISSION_DENIED;case Df.FAILED_PRECONDITION:return wu.FAILED_PRECONDITION;case Df.ABORTED:return wu.ABORTED;case Df.OUT_OF_RANGE:return wu.OUT_OF_RANGE;case Df.UNIMPLEMENTED:return wu.UNIMPLEMENTED;case Df.DATA_LOSS:return wu.DATA_LOSS;default:return yu()}}(Pf=Df||(Df={}))[Pf.OK=0]="OK",Pf[Pf.CANCELLED=1]="CANCELLED",Pf[Pf.UNKNOWN=2]="UNKNOWN",Pf[Pf.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Pf[Pf.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Pf[Pf.NOT_FOUND=5]="NOT_FOUND",Pf[Pf.ALREADY_EXISTS=6]="ALREADY_EXISTS",Pf[Pf.PERMISSION_DENIED=7]="PERMISSION_DENIED",Pf[Pf.UNAUTHENTICATED=16]="UNAUTHENTICATED",Pf[Pf.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Pf[Pf.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Pf[Pf.ABORTED=10]="ABORTED",Pf[Pf.OUT_OF_RANGE=11]="OUT_OF_RANGE",Pf[Pf.UNIMPLEMENTED=12]="UNIMPLEMENTED",Pf[Pf.INTERNAL=13]="INTERNAL",Pf[Pf.UNAVAILABLE=14]="UNAVAILABLE",Pf[Pf.DATA_LOSS=15]="DATA_LOSS";class jf{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return Mf}static getOrCreateInstance(){return null===Mf&&(Mf=new jf),Mf}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let Mf=null;function Uf(){return new TextEncoder}const Ff=new au([4294967295,4294967295],0);function zf(e){const t=Uf().encode(e),n=new su;return n.update(t),new Uint8Array(n.digest())}function Vf(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),o=t.getUint32(12,!0);return[new au([n,r],0),new au([i,o],0)]}class Bf{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new qf("Invalid padding: ".concat(t));if(n<0)throw new qf("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new qf("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new qf("Invalid padding when bitmap length is 0: ".concat(t));this.It=8*e.length-t,this.Tt=au.fromNumber(this.It)}Et(e,t,n){let r=e.add(t.multiply(au.fromNumber(n)));return 1===r.compare(Ff)&&(r=new au([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=zf(e),[n,r]=Vf(t);for(let i=0;i<this.hashCount;i++){const e=this.Et(n,r,i);if(!this.At(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Bf(i,r,t);return n.forEach(e=>o.insert(e)),o}insert(e){if(0===this.It)return;const t=zf(e),[n,r]=Vf(t);for(let i=0;i<this.hashCount;i++){const e=this.Et(n,r,i);this.Rt(e)}}Rt(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class qf extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Wf{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,Hf.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Wf(ju.min(),r,new ld(Pu),Mh(),Kh())}}class Hf{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Hf(n,t,Kh(),Kh(),Kh())}}class Kf{constructor(e,t,n,r){this.Pt=e,this.removedTargetIds=t,this.key=n,this.bt=r}}class Gf{constructor(e,t){this.targetId=e,this.Vt=t}}class Qf{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:gd.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class Yf{constructor(){this.St=0,this.Dt=Jf(),this.Ct=gd.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=Kh(),t=Kh(),n=Kh();return this.Dt.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:yu()}}),new Hf(this.Ct,this.xt,e,t,n)}Ft(){this.Nt=!1,this.Dt=Jf()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class $f{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=Mh(),this.zt=Xf(),this.Wt=new ld(Pu)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const n=this.Zt(t);switch(e.state){case 0:this.te(t)&&n.$t(e.resumeToken);break;case 1:n.Ut(),n.kt||n.Ft(),n.$t(e.resumeToken);break;case 2:n.Ut(),n.kt||this.removeTarget(t);break;case 3:this.te(t)&&(n.Kt(),n.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),n.$t(e.resumeToken));break;default:yu()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((e,n)=>{this.te(n)&&t(n)})}ne(e){var t;const n=e.targetId,r=e.Vt.count,i=this.se(n);if(i){const o=i.target;if(mh(o))if(0===r){const e=new Vu(o.path);this.Yt(n,e,qd.newNoDocument(e,ju.min()))}else vu(1===r);else{const i=this.ie(n);if(i!==r){const r=this.re(e,i);if(0!==r){this.ee(n);const e=2===r?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Wt=this.Wt.insert(n,e)}null===(t=jf.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(e,t,n){var r,i,o,s,a,l;const c={localCacheCount:t,existenceFilterCount:n.count},u=n.unchangedNames;return u&&(c.bloomFilter={applied:0===e,hashCount:null!==(r=null==u?void 0:u.hashCount)&&void 0!==r?r:0,bitmapLength:null!==(s=null===(o=null===(i=null==u?void 0:u.bits)||void 0===i?void 0:i.bitmap)||void 0===o?void 0:o.length)&&void 0!==s?s:0,padding:null!==(l=null===(a=null==u?void 0:u.bits)||void 0===a?void 0:a.padding)&&void 0!==l?l:0}),c}(r,i,e.Vt))}}}}re(e,t){const{unchangedNames:n,count:r}=e.Vt;if(!n||!n.bits)return 1;const{bits:{bitmap:i="",padding:o=0},hashCount:s=0}=n;let a,l;try{a=bd(i).toUint8Array()}catch(e){if(e instanceof pd)return gu("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw e}try{l=new Bf(a,o,s)}catch(e){return gu(e instanceof qf?"BloomFilter error: ":"Applying bloom filter failed: ",e),1}return 0===l.It?1:r!==t-this.oe(e.targetId,l)?2:0}oe(e,t){const n=this.Gt.getRemoteKeysForTarget(e);let r=0;return n.forEach(n=>{const i=this.Gt.ue(),o="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());t.vt(o)||(this.Yt(e,n,null),r++)}),r}ce(e){const t=new Map;this.Qt.forEach((n,r)=>{const i=this.se(r);if(i){if(n.current&&mh(i.target)){const t=new Vu(i.target.path);null!==this.jt.get(t)||this.ae(r,t)||this.Yt(r,t,qd.newNoDocument(t,e))}n.Mt&&(t.set(r,n.Ot()),n.Ft())}});let n=Kh();this.zt.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.se(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.jt.forEach((t,n)=>n.setReadTime(e));const r=new Wf(e,t,this.Wt,this.jt,n);return this.jt=Mh(),this.zt=Xf(),this.Wt=new ld(Pu),r}Jt(e,t){if(!this.te(e))return;const n=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,n),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,n){if(!this.te(e))return;const r=this.Zt(e);this.ae(e,t)?r.Bt(t,1):r.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),n&&(this.jt=this.jt.insert(t,n))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new Yf,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new dd(Pu),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||fu("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new Yf),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function Xf(){return new ld(Vu.comparator)}function Jf(){return new ld(Vu.comparator)}const Zf={asc:"ASCENDING",desc:"DESCENDING"},ep={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},tp={and:"AND",or:"OR"};class np{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function rp(e,t){return e.useProto3Json||Zu(t)?t:{value:t}}function ip(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function op(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function sp(e,t){return ip(e,t.toTimestamp())}function ap(e){return vu(!!e),ju.fromTimestamp(function(e){const t=yd(e);return new Lu(t.seconds,t.nanos)}(e))}function lp(e,t){return function(e){return new Uu(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function cp(e){const t=Uu.fromString(e);return vu(Ap(t)),t}function up(e,t){return lp(e.databaseId,t.path)}function dp(e,t){const n=cp(t);if(n.get(1)!==e.databaseId.projectId)throw new Eu(wu.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Eu(wu.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Vu(gp(n))}function hp(e,t){return lp(e.databaseId,t)}function fp(e){const t=cp(e);return 4===t.length?Uu.emptyPath():gp(t)}function pp(e){return new Uu(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function gp(e){return vu(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function mp(e,t,n){return{name:up(e,t),fields:n.value.mapValue.fields}}function yp(e,t){let n;if(t instanceof Ef)n={update:mp(e,t.key,t.value)};else if(t instanceof Tf)n={delete:up(e,t.key)};else if(t instanceof Sf)n={update:mp(e,t.key,t.data),updateMask:Cp(t.fieldMask)};else{if(!(t instanceof If))return yu();n={verify:up(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof nf)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof rf)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof sf)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof lf)return{fieldPath:t.field.canonicalString(),increment:n.gt};throw yu()}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:sp(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:yu()}(e,t.precondition)),n}function vp(e,t){return{documents:[hp(e,t.path)]}}function bp(e,t){const n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=hp(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=hp(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(e){if(0!==e.length)return Ip(Xd.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);const o=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:kp(e.field),direction:Sp(e.dir)}}(e))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const s=rp(e,t.limit);var a;return null!==s&&(n.structuredQuery.limit=s),t.startAt&&(n.structuredQuery.startAt={before:(a=t.startAt).inclusive,values:a.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function wp(e){let t=fp(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){vu(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let o=[];n.where&&(o=function(e){const t=Ep(e);return t instanceof Xd&&Zd(t)?t.getFilters():[t]}(n.where));let s=[];n.orderBy&&(s=n.orderBy.map(e=>function(e){return new Gd(Tp(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,Zu(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new Wd(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new Wd(n,t)}(n.endAt)),vh(t,i,s,o,a,"F",l,c)}function Ep(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Tp(e.unaryFilter.field);return $d.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Tp(e.unaryFilter.field);return $d.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Tp(e.unaryFilter.field);return $d.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Tp(e.unaryFilter.field);return $d.create(i,"!=",{nullValue:"NULL_VALUE"});default:return yu()}}(e):void 0!==e.fieldFilter?function(e){return $d.create(Tp(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return yu()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Xd.create(e.compositeFilter.filters.map(e=>Ep(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return yu()}}(e.compositeFilter.op))}(e):yu()}function Sp(e){return Zf[e]}function xp(e){return ep[e]}function _p(e){return tp[e]}function kp(e){return{fieldPath:e.canonicalString()}}function Tp(e){return zu.fromServerFormat(e.fieldPath)}function Ip(e){return e instanceof $d?function(e){if("=="===e.op){if(Md(e.value))return{unaryFilter:{field:kp(e.field),op:"IS_NAN"}};if(jd(e.value))return{unaryFilter:{field:kp(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Md(e.value))return{unaryFilter:{field:kp(e.field),op:"IS_NOT_NAN"}};if(jd(e.value))return{unaryFilter:{field:kp(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:kp(e.field),op:xp(e.op),value:e.value}}}(e):e instanceof Xd?function(e){const t=e.getFilters().map(e=>Ip(e));return 1===t.length?t[0]:{compositeFilter:{op:_p(e.op),filters:t}}}(e):yu()}function Cp(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function Ap(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Np{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ju.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:ju.min(),s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:gd.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s,this.expectedCount=a}withSequenceNumber(e){return new Np(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Np(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Np(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Np(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Rp{constructor(e){this.fe=e}}function Dp(e){const t=wp({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Ih(t,t.limit,"L"):t}class Pp{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(vd(e.integerValue));else if("doubleValue"in e){const n=vd(e.doubleValue);isNaN(n)?this.ye(t,13):(this.ye(t,15),ed(n)?t.pe(0):t.pe(n))}else if("timestampValue"in e){const n=e.timestampValue;this.ye(t,20),"string"==typeof n?t.Ie(n):(t.Ie("".concat(n.seconds||"")),t.pe(n.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(bd(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.ye(t,45),t.pe(n.latitude||0),t.pe(n.longitude||0)}else"mapValue"in e?zd(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):yu()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const n=e.fields||{};this.ye(t,55);for(const r of Object.keys(n))this.Te(r,t),this.me(n[r],t)}Pe(e,t){const n=e.values||[];this.ye(t,50);for(const r of n)this.me(r,t)}ve(e,t){this.ye(t,37),Vu.fromName(e).path.forEach(e=>{this.ye(t,60),this.be(e,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}Pp.Ve=new Pp;class Op{constructor(){this.rn=new Lp}addToCollectionParentIndex(e,t){return this.rn.add(t),$u.resolve()}getCollectionParents(e,t){return $u.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return $u.resolve()}deleteFieldIndex(e,t){return $u.resolve()}getDocumentsMatchingTarget(e,t){return $u.resolve(null)}getIndexType(e,t){return $u.resolve(0)}getFieldIndexes(e,t){return $u.resolve([])}getNextCollectionGroupToUpdate(e){return $u.resolve(null)}getMinOffset(e,t){return $u.resolve(Hu.min())}getMinOffsetFromCollectionGroup(e,t){return $u.resolve(Hu.min())}updateCollectionGroup(e,t,n){return $u.resolve()}updateIndexEntries(e,t){return $u.resolve()}}class Lp{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new dd(Uu.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new dd(Uu.comparator)).toArray()}}new Uint8Array(0);class jp{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new jp(e,jp.DEFAULT_COLLECTION_PERCENTILE,jp.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}jp.DEFAULT_COLLECTION_PERCENTILE=10,jp.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,jp.DEFAULT=new jp(41943040,jp.DEFAULT_COLLECTION_PERCENTILE,jp.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),jp.DISABLED=new jp(-1,0,0);class Mp{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new Mp(0)}static Mn(){return new Mp(-1)}}class Up{constructor(){this.changes=new Lh(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,qd.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?$u.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Fp{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class zp{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&vf(n.mutation,e,fd.empty(),Lu.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,Kh()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Kh();const r=Vh();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=Fh();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=Vh();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,Kh()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let i=Mh();const o=qh(),s=qh();return t.forEach((e,t)=>{const s=n.get(t.key);r.has(t.key)&&(void 0===s||s.mutation instanceof Sf)?i=i.insert(t.key,t):void 0!==s?(o.set(t.key,s.mutation.getFieldMask()),vf(s.mutation,t,s.mutation.getFieldMask(),Lu.now())):o.set(t.key,fd.empty())}),this.recalculateAndSaveOverlays(e,i).next(e=>(e.forEach((e,t)=>o.set(e,t)),t.forEach((e,t)=>{var n;return s.set(e,new Fp(t,null!==(n=o.get(e))&&void 0!==n?n:null))}),s))}recalculateAndSaveOverlays(e,t){const n=qh();let r=new ld((e,t)=>e-t),i=Kh();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const i of e)i.keys().forEach(e=>{const o=t.get(e);if(null===o)return;let s=n.get(e)||fd.empty();s=i.applyToLocalView(o,s),n.set(e,s);const a=(r.get(i.batchId)||Kh()).add(e);r=r.insert(i.batchId,a)})}).next(()=>{const o=[],s=r.getReverseIterator();for(;s.hasNext();){const r=s.getNext(),a=r.key,l=r.value,c=Bh();l.forEach(e=>{if(!i.has(e)){const r=mf(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}}),o.push(this.documentOverlayCache.saveOverlays(e,a,c))}return $u.waitFor(o)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n){return function(e){return Vu.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):xh(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):$u.resolve(Vh());let s=-1,a=i;return o.next(t=>$u.forEach(t,(t,n)=>(s<n.largestBatchId&&(s=n.largestBatchId),i.get(t)?$u.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{a=a.insert(t,e)}))).next(()=>this.populateOverlays(e,t,i)).next(()=>this.computeViews(e,a,t,Kh())).next(e=>({batchId:s,changes:zh(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Vu(t)).next(e=>{let t=Fh();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n){const r=t.collectionGroup;let i=Fh();return this.indexManager.getCollectionParents(e,r).next(o=>$u.forEach(o,o=>{const s=function(e,t){return new yh(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(r));return this.getDocumentsMatchingCollectionQuery(e,s,n).next(e=>{e.forEach((e,t)=>{i=i.insert(e,t)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,t,n){let r;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(i=>(r=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r))).next(e=>{r.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,qd.newInvalidDocument(r)))});let n=Fh();return e.forEach((e,i)=>{const o=r.get(e);void 0!==o&&vf(o.mutation,i,fd.empty(),Lu.now()),Rh(t,i)&&(n=n.insert(e,i))}),n})}}class Vp{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return $u.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var n;return this.cs.set(t.id,{id:(n=t).id,version:n.version,createTime:ap(n.createTime)}),$u.resolve()}getNamedQuery(e,t){return $u.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,function(e){return{name:e.name,query:Dp(e.bundledQuery),readTime:ap(e.readTime)}}(t)),$u.resolve()}}class Bp{constructor(){this.overlays=new ld(Vu.comparator),this.ls=new Map}getOverlay(e,t){return $u.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Vh();return $u.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.we(e,t,r)}),$u.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.ls.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.ls.delete(n)),$u.resolve()}getOverlaysForCollection(e,t,n){const r=Vh(),i=t.length+1,o=new Vu(t.child("")),s=this.overlays.getIteratorFrom(o);for(;s.hasNext();){const e=s.getNext().value,o=e.getKey();if(!t.isPrefixOf(o.path))break;o.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return $u.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new ld((e,t)=>e-t);const o=this.overlays.getIterator();for(;o.hasNext();){const e=o.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=Vh(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const s=Vh(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach((e,t)=>s.set(e,t)),!(s.size()>=r)););return $u.resolve(s)}we(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.ls.get(r.largestBatchId).delete(n.key);this.ls.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Nf(t,n));let i=this.ls.get(t);void 0===i&&(i=Kh(),this.ls.set(t,i)),this.ls.set(t,i.add(n.key))}}class qp{constructor(){this.fs=new dd(Wp.ds),this.ws=new dd(Wp._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const n=new Wp(e,t);this.fs=this.fs.add(n),this.ws=this.ws.add(n)}gs(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.ys(new Wp(e,t))}ps(e,t){e.forEach(e=>this.removeReference(e,t))}Is(e){const t=new Vu(new Uu([])),n=new Wp(t,e),r=new Wp(t,e+1),i=[];return this.ws.forEachInRange([n,r],e=>{this.ys(e),i.push(e.key)}),i}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new Vu(new Uu([])),n=new Wp(t,e),r=new Wp(t,e+1);let i=Kh();return this.ws.forEachInRange([n,r],e=>{i=i.add(e.key)}),i}containsKey(e){const t=new Wp(e,0),n=this.fs.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Wp{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return Vu.comparator(e.key,t.key)||Pu(e.As,t.As)}static _s(e,t){return Pu(e.As,t.As)||Vu.comparator(e.key,t.key)}}class Hp{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new dd(Wp.ds)}checkEmpty(e){return $u.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.vs;this.vs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Cf(i,t,n,r);this.mutationQueue.push(o);for(const s of r)this.Rs=this.Rs.add(new Wp(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast());return $u.resolve(o)}lookupMutationBatch(e,t){return $u.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.bs(n),i=r<0?0:r;return $u.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return $u.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return $u.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Wp(t,0),r=new Wp(t,Number.POSITIVE_INFINITY),i=[];return this.Rs.forEachInRange([n,r],e=>{const t=this.Ps(e.As);i.push(t)}),$u.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new dd(Pu);return t.forEach(e=>{const t=new Wp(e,0),r=new Wp(e,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([t,r],e=>{n=n.add(e.As)})}),$u.resolve(this.Vs(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;Vu.isDocumentKey(i)||(i=i.child(""));const o=new Wp(new Vu(i),0);let s=new dd(Pu);return this.Rs.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(s=s.add(e.As)),!0)},o),$u.resolve(this.Vs(s))}Vs(e){const t=[];return e.forEach(e=>{const n=this.Ps(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){vu(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let n=this.Rs;return $u.forEach(t.mutations,r=>{const i=new Wp(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Rs=n})}Cn(e){}containsKey(e,t){const n=new Wp(t,0),r=this.Rs.firstAfterOrEqual(n);return $u.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,$u.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Kp{constructor(e){this.Ds=e,this.docs=new ld(Vu.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,o=this.Ds(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return $u.resolve(n?n.document.mutableCopy():qd.newInvalidDocument(t))}getEntries(e,t){let n=Mh();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():qd.newInvalidDocument(e))}),$u.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=Mh();const o=t.path,s=new Vu(o.child("")),a=this.docs.getIteratorFrom(s);for(;a.hasNext();){const{key:e,value:{document:s}}=a.getNext();if(!o.isPrefixOf(e.path))break;e.path.length>o.length+1||Ku(Wu(s),n)<=0||(r.has(s.key)||Rh(t,s))&&(i=i.insert(s.key,s.mutableCopy()))}return $u.resolve(i)}getAllFromCollectionGroup(e,t,n,r){yu()}Cs(e,t){return $u.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new Gp(this)}getSize(e){return $u.resolve(this.size)}}class Gp extends Up{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.os.addEntry(e,r)):this.os.removeEntry(n)}),$u.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class Qp{constructor(e){this.persistence=e,this.xs=new Lh(e=>ph(e),gh),this.lastRemoteSnapshotVersion=ju.min(),this.highestTargetId=0,this.Ns=0,this.ks=new qp,this.targetCount=0,this.Ms=Mp.kn()}forEachTarget(e,t){return this.xs.forEach((e,n)=>t(n)),$u.resolve()}getLastRemoteSnapshotVersion(e){return $u.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return $u.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),$u.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Ns&&(this.Ns=t),$u.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new Mp(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,$u.resolve()}updateTargetData(e,t){return this.Fn(t),$u.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,$u.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.xs.forEach((o,s)=>{s.sequenceNumber<=t&&null===n.get(s.targetId)&&(this.xs.delete(o),i.push(this.removeMatchingKeysForTargetId(e,s.targetId)),r++)}),$u.waitFor(i).next(()=>r)}getTargetCount(e){return $u.resolve(this.targetCount)}getTargetData(e,t){const n=this.xs.get(t)||null;return $u.resolve(n)}addMatchingKeys(e,t,n){return this.ks.gs(t,n),$u.resolve()}removeMatchingKeys(e,t,n){this.ks.ps(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(t=>{i.push(r.markPotentiallyOrphaned(e,t))}),$u.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),$u.resolve()}getMatchingKeysForTargetId(e,t){const n=this.ks.Es(t);return $u.resolve(n)}containsKey(e,t){return $u.resolve(this.ks.containsKey(t))}}class Yp{constructor(e,t){this.$s={},this.overlays={},this.Os=new Ju(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new Qp(this),this.indexManager=new Op,this.remoteDocumentCache=function(e){return new Kp(e)}(e=>this.referenceDelegate.Ls(e)),this.serializer=new Rp(t),this.qs=new Vp(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Bp,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.$s[e.toKey()];return n||(n=new Hp(t,this.referenceDelegate),this.$s[e.toKey()]=n),n}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,n){fu("MemoryPersistence","Starting transaction:",e);const r=new $p(this.Os.next());return this.referenceDelegate.Us(),n(r).next(e=>this.referenceDelegate.Ks(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Gs(e,t){return $u.or(Object.values(this.$s).map(n=>()=>n.containsKey(e,t)))}}class $p extends Qu{constructor(e){super(),this.currentSequenceNumber=e}}class Xp{constructor(e){this.persistence=e,this.Qs=new qp,this.js=null}static zs(e){return new Xp(e)}get Ws(){if(this.js)return this.js;throw yu()}addReference(e,t,n){return this.Qs.addReference(n,t),this.Ws.delete(n.toString()),$u.resolve()}removeReference(e,t,n){return this.Qs.removeReference(n,t),this.Ws.add(n.toString()),$u.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),$u.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(e=>this.Ws.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.Ws.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $u.forEach(this.Ws,n=>{const r=Vu.fromPath(n);return this.Hs(e,r).next(e=>{e||t.removeEntry(r,ju.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(e=>{e?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return $u.or([()=>$u.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class Jp{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Fi=n,this.Bi=r}static Li(e,t){let n=Kh(),r=Kh();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Jp(e,t.fromCache,n,r)}}class Zp{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,n,r){return this.Ki(e,t).next(i=>i||this.Gi(e,t,r,n)).next(n=>n||this.Qi(e,t))}Ki(e,t){if(wh(t))return $u.resolve(null);let n=kh(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=Ih(t,null,"F"),n=kh(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const i=Kh(...r);return this.Ui.getDocuments(e,i).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const o=this.ji(t,r);return this.zi(t,o,i,n.readTime)?this.Ki(e,Ih(t,null,"F")):this.Wi(e,o,t,n)}))})))}Gi(e,t,n,r){return wh(t)||r.isEqual(ju.min())?this.Qi(e,t):this.Ui.getDocuments(e,n).next(i=>{const o=this.ji(t,i);return this.zi(t,o,n,r)?this.Qi(e,t):(hu()<=gt.DEBUG&&fu("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Nh(t)),this.Wi(e,o,t,qu(r,-1)))})}ji(e,t){let n=new dd(Ph(e));return t.forEach((t,r)=>{Rh(e,r)&&(n=n.add(r))}),n}zi(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Qi(e,t){return hu()<=gt.DEBUG&&fu("QueryEngine","Using full collection scan to execute query:",Nh(t)),this.Ui.getDocumentsMatchingQuery(e,t,Hu.min())}Wi(e,t,n,r){return this.Ui.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}class eg{constructor(e,t,n,r){this.persistence=e,this.Hi=t,this.serializer=r,this.Ji=new ld(Pu),this.Yi=new Lh(e=>ph(e),gh),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(n)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new zp(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function tg(e,t,n,r){return new eg(e,t,n,r)}async function ng(e,t){const n=bu(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(i=>(r=i,n.tr(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const i=[],o=[];let s=Kh();for(const e of r){i.push(e.batchId);for(const t of e.mutations)s=s.add(t.key)}for(const e of t){o.push(e.batchId);for(const t of e.mutations)s=s.add(t.key)}return n.localDocuments.getDocuments(e,s).next(e=>({er:e,removedBatchIds:i,addedBatchIds:o}))})})}function rg(e){const t=bu(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Bs.getLastRemoteSnapshotVersion(e))}function ig(e,t,n){let r=Kh(),i=Kh();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=Mh();return n.forEach((n,o)=>{const s=e.get(n);o.isFoundDocument()!==s.isFoundDocument()&&(i=i.add(n)),o.isNoDocument()&&o.version.isEqual(ju.min())?(t.removeEntry(n,o.readTime),r=r.insert(n,o)):!s.isValidDocument()||o.version.compareTo(s.version)>0||0===o.version.compareTo(s.version)&&s.hasPendingWrites?(t.addEntry(o),r=r.insert(n,o)):fu("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",o.version)}),{nr:r,sr:i}})}function og(e,t){const n=bu(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function sg(e,t){const n=bu(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.Bs.getTargetData(e,t).next(i=>i?(r=i,$u.resolve(r)):n.Bs.allocateTargetId(e).next(i=>(r=new Np(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Bs.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.Ji.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ji=n.Ji.insert(e.targetId,e),n.Yi.set(t,e.targetId)),e})}async function ag(e,t,n){const r=bu(e),i=r.Ji.get(t),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,e=>r.persistence.referenceDelegate.removeTarget(e,i))}catch(e){if(!Xu(e))throw e;fu("LocalStore","Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.Ji=r.Ji.remove(t),r.Yi.delete(i.target)}function lg(e,t,n){const r=bu(e);let i=ju.min(),o=Kh();return r.persistence.runTransaction("Execute query","readonly",e=>function(e,t,n){const r=bu(e),i=r.Yi.get(n);return void 0!==i?$u.resolve(r.Ji.get(i)):r.Bs.getTargetData(t,n)}(r,e,kh(t)).next(t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(e,t.targetId).next(e=>{o=e})}).next(()=>r.Hi.getDocumentsMatchingQuery(e,t,n?i:ju.min(),n?o:Kh())).next(e=>(cg(r,Dh(t),e),{documents:e,ir:o})))}function cg(e,t,n){let r=e.Xi.get(t)||ju.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.Xi.set(t,r)}class ug{constructor(){this.activeTargetIds=Qh()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class dg{constructor(){this.Hr=new ug,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,n){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new ug,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class hg{Yr(e){}shutdown(){}}class fg{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){fu("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){fu("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let pg=null;function gg(){return null===pg?pg=268435456+Math.round(2147483648*Math.random()):pg++,"0x"+pg.toString(16)}const mg={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class yg{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const vg="WebChannelConnection";class bg extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http";this.mo=t+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,n,r,i){const o=gg(),s=this.To(e,t);fu("RestConnection","Sending RPC '".concat(e,"' ").concat(o,":"),s,n);const a={};return this.Eo(a,r,i),this.Ao(e,s,a,n).then(t=>(fu("RestConnection","Received RPC '".concat(e,"' ").concat(o,": "),t),t),t=>{throw gu("RestConnection","RPC '".concat(e,"' ").concat(o," failed with error: "),t,"url: ",s,"request:",n),t})}vo(e,t,n,r,i,o){return this.Io(e,t,n,r,i)}Eo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+uu,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}To(e,t){const n=mg[e];return"".concat(this.mo,"/v1/").concat(t,":").concat(n)}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,n,r){const i=gg();return new Promise((o,s)=>{const a=new ou;a.setWithCredentials(!0),a.listenOnce(eu.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case Zc.NO_ERROR:const t=a.getResponseJson();fu(vg,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),o(t);break;case Zc.TIMEOUT:fu(vg,"RPC '".concat(e,"' ").concat(i," timed out")),s(new Eu(wu.DEADLINE_EXCEEDED,"Request time out"));break;case Zc.HTTP_ERROR:const n=a.getStatus();if(fu(vg,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(wu).indexOf(t)>=0?t:wu.UNKNOWN}(t.status);s(new Eu(e,t.message))}else s(new Eu(wu.UNKNOWN,"Server responded with status "+a.getStatus()))}else s(new Eu(wu.UNAVAILABLE,"Connection failed."));break;default:yu()}}finally{fu(vg,"RPC '".concat(e,"' ").concat(i," completed."))}});const l=JSON.stringify(r);fu(vg,"RPC '".concat(e,"' ").concat(i," sending request:"),r),a.send(t,"POST",l,n,15)})}Ro(e,t,n){const r=gg(),i=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Xc(),s=Jc(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.xmlHttpFactory=new ru({})),this.Eo(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const c=i.join("");fu(vg,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),a);const u=o.createWebChannel(c,a);let d=!1,h=!1;const f=new yg({ro:t=>{h?fu(vg,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(d||(fu(vg,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),d=!0),fu(vg,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},oo:()=>u.close()}),p=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return p(u,iu.EventType.OPEN,()=>{h||fu(vg,"RPC '".concat(e,"' stream ").concat(r," transport opened."))}),p(u,iu.EventType.CLOSE,()=>{h||(h=!0,fu(vg,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.wo())}),p(u,iu.EventType.ERROR,t=>{h||(h=!0,gu(vg,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),f.wo(new Eu(wu.UNAVAILABLE,"The operation could not be completed")))}),p(u,iu.EventType.MESSAGE,t=>{var n;if(!h){const i=t.data[0];vu(!!i);const o=i,s=o.error||(null===(n=o[0])||void 0===n?void 0:n.error);if(s){fu(vg,"RPC '".concat(e,"' stream ").concat(r," received error:"),s);const t=s.status;let n=function(e){const t=Df[e];if(void 0!==t)return Lf(t)}(t),i=s.message;void 0===n&&(n=wu.INTERNAL,i="Unknown error status: "+t+" with message "+s.message),h=!0,f.wo(new Eu(n,i)),u.close()}else fu(vg,"RPC '".concat(e,"' stream ").concat(r," received:"),i),f._o(i)}}),p(s,tu.STAT_EVENT,t=>{t.stat===nu.PROXY?fu(vg,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===nu.NOPROXY&&fu(vg,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))}),setTimeout(()=>{f.fo()},0),f}}function wg(){return"undefined"!=typeof document?document:null}function Eg(e){return new np(e,!0)}class Sg{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.ii=e,this.timerId=t,this.Po=n,this.bo=r,this.Vo=i,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),n=Math.max(0,Date.now()-this.Co),r=Math.max(0,t-n);r>0&&fu("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.So," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.Do=this.ii.enqueueAfterDelay(this.timerId,r,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class xg{constructor(e,t,n,r,i,o,s,a){this.ii=e,this.$o=n,this.Oo=r,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=s,this.listener=a,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new Sg(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}async stop(){this.Uo()&&await this.close(0)}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}async zo(){if(this.Ko())return this.close(0)}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}async close(e,t){this.Ho(),this.Jo(),this.qo.cancel(),this.Fo++,4!==e?this.qo.reset():t&&t.code===wu.RESOURCE_EXHAUSTED?(pu(t.toString()),pu("Using maximum backoff delay to prevent overloading the backend."),this.qo.xo()):t&&t.code===wu.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Yo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.ao(t)}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(e=>{let[n,r]=e;this.Fo===t&&this.Zo(n,r)},t=>{e(()=>{const e=new Eu(wu.UNKNOWN,"Fetching auth token failed: "+t.message);return this.tu(e)})})}Zo(e,t){const n=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{n(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(e=>{n(()=>this.tu(e))}),this.stream.onMessage(e=>{n(()=>this.onMessage(e))})}Go(){this.state=5,this.qo.No(async()=>{this.state=0,this.start()})}tu(e){return fu("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(fu("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class _g extends xg{constructor(e,t,n,r,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,o),this.serializer=i}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:yu()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],o=function(e,t){return e.useProto3Json?(vu(void 0===t||"string"==typeof t),gd.fromBase64String(t||"")):(vu(void 0===t||t instanceof Uint8Array),gd.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),s=t.targetChange.cause,a=s&&function(e){const t=void 0===e.code?wu.UNKNOWN:Lf(e.code);return new Eu(t,e.message||"")}(s);n=new Qf(r,i,o,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=dp(e,r.document.name),o=ap(r.document.updateTime),s=r.document.createTime?ap(r.document.createTime):ju.min(),a=new Vd({mapValue:{fields:r.document.fields}}),l=qd.newFoundDocument(i,o,s,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new Kf(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=dp(e,r.document),o=r.readTime?ap(r.readTime):ju.min(),s=qd.newNoDocument(i,o),a=r.removedTargetIds||[];n=new Kf([],a,s.key,s)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=dp(e,r.document),o=r.removedTargetIds||[];n=new Kf([],o,i,null)}else{if(!("filter"in t))return yu();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,o=new Rf(r,i),s=e.targetId;n=new Gf(s,o)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return ju.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?ju.min():t.readTime?ap(t.readTime):ju.min()}(e);return this.listener.nu(t,n)}su(e){const t={};t.database=pp(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=mh(r)?{documents:vp(e,r)}:{query:bp(e,r)},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=op(e,t.resumeToken);const r=rp(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(ju.min())>0){n.readTime=ip(e,t.snapshotVersion.toTimestamp());const r=rp(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return yu()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.Wo(t)}iu(e){const t={};t.database=pp(this.serializer),t.removeTarget=e,this.Wo(t)}}class kg extends xg{constructor(e,t,n,r,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,o),this.serializer=i,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(vu(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function(e,t){return e&&e.length>0?(vu(void 0!==t),e.map(e=>function(e,t){let n=e.updateTime?ap(e.updateTime):ap(t);return n.isEqual(ju.min())&&(n=ap(t)),new hf(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=ap(e.commitTime);return this.listener.cu(n,t)}return vu(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=pp(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>yp(this.serializer,e))};this.Wo(t)}}class Tg extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.lu=!1}fu(){if(this.lu)throw new Eu(wu.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,n){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(r=>{let[i,o]=r;return this.connection.Io(e,t,n,i,o)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===wu.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Eu(wu.UNKNOWN,e.toString())})}vo(e,t,n,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(i=>{let[o,s]=i;return this.connection.vo(e,t,n,o,s,r)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===wu.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Eu(wu.UNKNOWN,e.toString())})}terminate(){this.lu=!0}}class Ig{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.mu?(pu(t),this.mu=!1):fu("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class Cg{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=i,this.Pu.Yr(e=>{n.enqueueAndForget(async()=>{Mg(this)&&(fu("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=bu(e);t.vu.add(4),await Ng(t),t.bu.set("Unknown"),t.vu.delete(4),await Ag(t)}(this))})}),this.bu=new Ig(n,r)}}async function Ag(e){if(Mg(e))for(const t of e.Ru)await t(!0)}async function Ng(e){for(const t of e.Ru)await t(!1)}function Rg(e,t){const n=bu(e);n.Au.has(t.targetId)||(n.Au.set(t.targetId,t),jg(n)?Lg(n):tm(n).Ko()&&Pg(n,t))}function Dg(e,t){const n=bu(e),r=tm(n);n.Au.delete(t),r.Ko()&&Og(n,t),0===n.Au.size&&(r.Ko()?r.jo():Mg(n)&&n.bu.set("Unknown"))}function Pg(e,t){if(e.Vu.qt(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(ju.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}tm(e).su(t)}function Og(e,t){e.Vu.qt(t),tm(e).iu(t)}function Lg(e){e.Vu=new $f({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),le:t=>e.Au.get(t)||null,ue:()=>e.datastore.serializer.databaseId}),tm(e).start(),e.bu.gu()}function jg(e){return Mg(e)&&!tm(e).Uo()&&e.Au.size>0}function Mg(e){return 0===bu(e).vu.size}function Ug(e){e.Vu=void 0}async function Fg(e){e.Au.forEach((t,n)=>{Pg(e,t)})}async function zg(e,t){Ug(e),jg(e)?(e.bu.Iu(t),Lg(e)):e.bu.set("Unknown")}async function Vg(e,t,n){if(e.bu.set("Online"),t instanceof Qf&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.Au.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Au.delete(r),e.Vu.removeTarget(r))}(e,t)}catch(n){fu("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Bg(e,n)}else if(t instanceof Kf?e.Vu.Ht(t):t instanceof Gf?e.Vu.ne(t):e.Vu.Xt(t),!n.isEqual(ju.min()))try{const t=await rg(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Vu.ce(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.Au.get(r);i&&e.Au.set(r,i.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.Au.get(t);if(!r)return;e.Au.set(t,r.withResumeToken(gd.EMPTY_BYTE_STRING,r.snapshotVersion)),Og(e,t);const i=new Np(r.target,t,n,r.sequenceNumber);Pg(e,i)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){fu("RemoteStore","Failed to raise snapshot:",t),await Bg(e,t)}}async function Bg(e,t,n){if(!Xu(t))throw t;e.vu.add(1),await Ng(e),e.bu.set("Offline"),n||(n=()=>rg(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{fu("RemoteStore","Retrying IndexedDB access"),await n(),e.vu.delete(1),await Ag(e)})}function qg(e,t){return t().catch(n=>Bg(e,n,t))}async function Wg(e){const t=bu(e),n=nm(t);let r=t.Eu.length>0?t.Eu[t.Eu.length-1].batchId:-1;for(;Hg(t);)try{const e=await og(t.localStore,r);if(null===e){0===t.Eu.length&&n.jo();break}r=e.batchId,Kg(t,e)}catch(e){await Bg(t,e)}Gg(t)&&Qg(t)}function Hg(e){return Mg(e)&&e.Eu.length<10}function Kg(e,t){e.Eu.push(t);const n=nm(e);n.Ko()&&n.ou&&n.uu(t.mutations)}function Gg(e){return Mg(e)&&!nm(e).Uo()&&e.Eu.length>0}function Qg(e){nm(e).start()}async function Yg(e){nm(e).hu()}async function $g(e){const t=nm(e);for(const n of e.Eu)t.uu(n.mutations)}async function Xg(e,t,n){const r=e.Eu.shift(),i=Af.from(r,t,n);await qg(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await Wg(e)}async function Jg(e,t){t&&nm(e).ou&&await async function(e,t){if(Of(n=t.code)&&n!==wu.ABORTED){const n=e.Eu.shift();nm(e).Qo(),await qg(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await Wg(e)}var n}(e,t),Gg(e)&&Qg(e)}async function Zg(e,t){const n=bu(e);n.asyncQueue.verifyOperationInProgress(),fu("RemoteStore","RemoteStore received new credentials");const r=Mg(n);n.vu.add(3),await Ng(n),r&&n.bu.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.vu.delete(3),await Ag(n)}async function em(e,t){const n=bu(e);t?(n.vu.delete(2),await Ag(n)):t||(n.vu.add(2),await Ng(n),n.bu.set("Unknown"))}function tm(e){return e.Su||(e.Su=function(e,t,n){const r=bu(e);return r.fu(),new _g(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{uo:Fg.bind(null,e),ao:zg.bind(null,e),nu:Vg.bind(null,e)}),e.Ru.push(async t=>{t?(e.Su.Qo(),jg(e)?Lg(e):e.bu.set("Unknown")):(await e.Su.stop(),Ug(e))})),e.Su}function nm(e){return e.Du||(e.Du=function(e,t,n){const r=bu(e);return r.fu(),new kg(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{uo:Yg.bind(null,e),ao:Jg.bind(null,e),au:$g.bind(null,e),cu:Xg.bind(null,e)}),e.Ru.push(async t=>{t?(e.Du.Qo(),await Wg(e)):(await e.Du.stop(),e.Eu.length>0&&(fu("RemoteStore","Stopping write stream with ".concat(e.Eu.length," pending writes")),e.Eu=[]))})),e.Du}class rm{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Su,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}static createAndSchedule(e,t,n,r,i){const o=Date.now()+n,s=new rm(e,t,o,r,i);return s.start(n),s}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Eu(wu.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function im(e,t){if(pu("AsyncQueue","".concat(t,": ").concat(e)),Xu(e))return new Eu(wu.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class om{constructor(e){this.comparator=e?(t,n)=>e(t,n)||Vu.comparator(t.key,n.key):(e,t)=>Vu.comparator(e.key,t.key),this.keyedMap=Fh(),this.sortedSet=new ld(this.comparator)}static emptySet(e){return new om(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof om))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new om;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class sm{constructor(){this.Cu=new ld(Vu.comparator)}track(e){const t=e.doc.key,n=this.Cu.get(t);n?0!==e.type&&3===n.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==n.type?this.Cu=this.Cu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Cu=this.Cu.remove(t):1===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):yu():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,n)=>{e.push(n)}),e}}class am{constructor(e,t,n,r,i,o,s,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const o=[];return t.forEach(e=>{o.push({type:0,doc:e})}),new am(e,t,om.emptySet(t),o,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ch(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class lm{constructor(){this.Nu=void 0,this.listeners=[]}}class cm{constructor(){this.queries=new Lh(e=>Ah(e),Ch),this.onlineState="Unknown",this.ku=new Set}}async function um(e,t){const n=bu(e),r=t.query;let i=!1,o=n.queries.get(r);if(o||(i=!0,o=new lm),i)try{o.Nu=await n.onListen(r)}catch(e){const n=im(e,"Initialization of query '".concat(Nh(t.query),"' failed"));return void t.onError(n)}n.queries.set(r,o),o.listeners.push(t),t.Mu(n.onlineState),o.Nu&&t.$u(o.Nu)&&pm(n)}async function dm(e,t){const n=bu(e),r=t.query;let i=!1;const o=n.queries.get(r);if(o){const e=o.listeners.indexOf(t);e>=0&&(o.listeners.splice(e,1),i=0===o.listeners.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function hm(e,t){const n=bu(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.listeners)e.$u(i)&&(r=!0);t.Nu=i}}r&&pm(n)}function fm(e,t,n){const r=bu(e),i=r.queries.get(t);if(i)for(const o of i.listeners)o.onError(n);r.queries.delete(t)}function pm(e){e.ku.forEach(e=>{e.next()})}class gm{constructor(e,t,n){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=n||{}}$u(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new am(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){if(!e.fromCache)return!0;const n="Offline"!==t;return(!this.options.Ku||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){if(e.docChanges.length>0)return!0;const t=this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}Uu(e){e=am.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class mm{constructor(e){this.key=e}}class ym{constructor(e){this.key=e}}class vm{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=Kh(),this.mutatedKeys=Kh(),this.tc=Ph(e),this.ec=new om(this.tc)}get nc(){return this.Yu}sc(e,t){const n=t?t.ic:new sm,r=t?t.ec:this.ec;let i=t?t.mutatedKeys:this.mutatedKeys,o=r,s=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const c=r.get(e),u=Rh(this.query,t)?t:null,d=!!c&&this.mutatedKeys.has(c.key),h=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?d!==h&&(n.track({type:3,doc:u}),f=!0):this.rc(c,u)||(n.track({type:2,doc:u}),f=!0,(a&&this.tc(u,a)>0||l&&this.tc(u,l)<0)&&(s=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(a||l)&&(s=!0)),f&&(u?(o=o.add(u),i=h?i.add(e):i.delete(e)):(o=o.delete(e),i=i.delete(e)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const e="F"===this.query.limitType?o.last():o.first();o=o.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{ec:o,ic:n,zi:s,mutatedKeys:i}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n){const r=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const i=e.ic.xu();i.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return yu()}};return n(e)-n(t)}(e.type,t.type)||this.tc(e.doc,t.doc)),this.oc(n);const o=t?this.uc():[],s=0===this.Zu.size&&this.current?1:0,a=s!==this.Xu;return this.Xu=s,0!==i.length||a?{snapshot:new am(this.query,e.ec,r,i,e.mutatedKeys,0===s,a,!1,!!n&&n.resumeToken.approximateByteSize()>0),cc:o}:{cc:o}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new sm,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(e=>this.Yu=this.Yu.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Yu=this.Yu.delete(e)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=Kh(),this.ec.forEach(e=>{this.ac(e.key)&&(this.Zu=this.Zu.add(e.key))});const t=[];return e.forEach(e=>{this.Zu.has(e)||t.push(new ym(e))}),this.Zu.forEach(n=>{e.has(n)||t.push(new mm(n))}),t}hc(e){this.Yu=e.ir,this.Zu=Kh();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return am.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class bm{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class wm{constructor(e){this.key=e,this.fc=!1}}class Em{constructor(e,t,n,r,i,o){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.dc={},this.wc=new Lh(e=>Ah(e),Ch),this._c=new Map,this.mc=new Set,this.gc=new ld(Vu.comparator),this.yc=new Map,this.Ic=new qp,this.Tc={},this.Ec=new Map,this.Ac=Mp.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}async function Sm(e,t){const n=zm(e);let r,i;const o=n.wc.get(t);if(o)r=o.targetId,n.sharedClientState.addLocalQueryTarget(r),i=o.view.lc();else{const e=await sg(n.localStore,kh(t)),o=n.sharedClientState.addLocalQueryTarget(e.targetId);r=e.targetId,i=await xm(n,t,r,"current"===o,e.resumeToken),n.isPrimaryClient&&Rg(n.remoteStore,e)}return i}async function xm(e,t,n,r,i){e.Rc=(t,n,r)=>async function(e,t,n,r){let i=t.view.sc(n);i.zi&&(i=await lg(e.localStore,t.query,!1).then(e=>{let{documents:n}=e;return t.view.sc(n,i)}));const o=r&&r.targetChanges.get(t.targetId),s=t.view.applyChanges(i,e.isPrimaryClient,o);return Om(e,t.targetId,s.cc),s.snapshot}(e,t,n,r);const o=await lg(e.localStore,t,!0),s=new vm(t,o.ir),a=s.sc(o.documents),l=Hf.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=s.applyChanges(a,e.isPrimaryClient,l);Om(e,n,c.cc);const u=new bm(t,n,s);return e.wc.set(t,u),e._c.has(n)?e._c.get(n).push(t):e._c.set(n,[t]),c.snapshot}async function _m(e,t){const n=bu(e),r=n.wc.get(t),i=n._c.get(r.targetId);if(i.length>1)return n._c.set(r.targetId,i.filter(e=>!Ch(e,t))),void n.wc.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await ag(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),Dg(n.remoteStore,r.targetId),Dm(n,r.targetId)}).catch(Yu)):(Dm(n,r.targetId),await ag(n.localStore,r.targetId,!0))}async function km(e,t){const n=bu(e);try{const e=await function(e,t){const n=bu(e),r=t.snapshotVersion;let i=n.Ji;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const o=n.Zi.newChangeBuffer({trackRemovals:!0});i=n.Ji;const s=[];t.targetChanges.forEach((o,a)=>{const l=i.get(a);if(!l)return;s.push(n.Bs.removeMatchingKeys(e,o.removedDocuments,a).next(()=>n.Bs.addMatchingKeys(e,o.addedDocuments,a)));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?c=c.withResumeToken(gd.EMPTY_BYTE_STRING,ju.min()).withLastLimboFreeSnapshotVersion(ju.min()):o.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(o.resumeToken,r)),i=i.insert(a,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,c,o)&&s.push(n.Bs.updateTargetData(e,c))});let a=Mh(),l=Kh();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),s.push(ig(e,o,t.documentUpdates).next(e=>{a=e.nr,l=e.sr})),!r.isEqual(ju.min())){const t=n.Bs.getLastRemoteSnapshotVersion(e).next(t=>n.Bs.setTargetsMetadata(e,e.currentSequenceNumber,r));s.push(t)}return $u.waitFor(s).next(()=>o.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,a,l)).next(()=>a)}).then(e=>(n.Ji=i,e))}(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.yc.get(t);r&&(vu(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.fc=!0:e.modifiedDocuments.size>0?vu(r.fc):e.removedDocuments.size>0&&(vu(r.fc),r.fc=!1))}),await Mm(n,e,t)}catch(e){await Yu(e)}}function Tm(e,t,n){const r=bu(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.wc.forEach((n,r)=>{const i=r.view.Mu(t);i.snapshot&&e.push(i.snapshot)}),function(e,t){const n=bu(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const i of n.listeners)i.Mu(t)&&(r=!0)}),r&&pm(n)}(r.eventManager,t),e.length&&r.dc.nu(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Im(e,t,n){const r=bu(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.yc.get(t),o=i&&i.key;if(o){let e=new ld(Vu.comparator);e=e.insert(o,qd.newNoDocument(o,ju.min()));const n=Kh().add(o),i=new Wf(ju.min(),new Map,new ld(Pu),e,n);await km(r,i),r.gc=r.gc.remove(o),r.yc.delete(t),jm(r)}else await ag(r.localStore,t,!1).then(()=>Dm(r,t,n)).catch(Yu)}async function Cm(e,t){const n=bu(e),r=t.batch.batchId;try{const e=await function(e,t){const n=bu(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),i=n.Zi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,o=i.keys();let s=$u.resolve();return o.forEach(e=>{s=s.next(()=>r.getEntry(t,e)).next(t=>{const o=n.docVersions.get(e);vu(null!==o),t.version.compareTo(o)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),s.next(()=>e.mutationQueue.removeMutationBatch(t,i))}(n,e,t,i).next(()=>i.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Kh();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);Rm(n,r,null),Nm(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Mm(n,e)}catch(e){await Yu(e)}}async function Am(e,t,n){const r=bu(e);try{const e=await function(e,t){const n=bu(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(vu(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);Rm(r,t,n),Nm(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Mm(r,e)}catch(n){await Yu(n)}}function Nm(e,t){(e.Ec.get(t)||[]).forEach(e=>{e.resolve()}),e.Ec.delete(t)}function Rm(e,t,n){const r=bu(e);let i=r.Tc[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Tc[r.currentUser.toKey()]=i}}function Dm(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e._c.get(t))e.wc.delete(r),n&&e.dc.Pc(r,n);e._c.delete(t),e.isPrimaryClient&&e.Ic.Is(t).forEach(t=>{e.Ic.containsKey(t)||Pm(e,t)})}function Pm(e,t){e.mc.delete(t.path.canonicalString());const n=e.gc.get(t);null!==n&&(Dg(e.remoteStore,n),e.gc=e.gc.remove(t),e.yc.delete(n),jm(e))}function Om(e,t,n){for(const r of n)r instanceof mm?(e.Ic.addReference(r.key,t),Lm(e,r)):r instanceof ym?(fu("SyncEngine","Document no longer in limbo: "+r.key),e.Ic.removeReference(r.key,t),e.Ic.containsKey(r.key)||Pm(e,r.key)):yu()}function Lm(e,t){const n=t.key,r=n.path.canonicalString();e.gc.get(n)||e.mc.has(r)||(fu("SyncEngine","New document in limbo: "+n),e.mc.add(r),jm(e))}function jm(e){for(;e.mc.size>0&&e.gc.size<e.maxConcurrentLimboResolutions;){const t=e.mc.values().next().value;e.mc.delete(t);const n=new Vu(Uu.fromString(t)),r=e.Ac.next();e.yc.set(r,new wm(n)),e.gc=e.gc.insert(n,r),Rg(e.remoteStore,new Np(kh(bh(n.path)),r,"TargetPurposeLimboResolution",Ju.ct))}}async function Mm(e,t,n){const r=bu(e),i=[],o=[],s=[];r.wc.isEmpty()||(r.wc.forEach((e,a)=>{s.push(r.Rc(a,t,n).then(e=>{if((e||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){i.push(e);const t=Jp.Li(a.targetId,e);o.push(t)}}))}),await Promise.all(s),r.dc.nu(i),await async function(e,t){const n=bu(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>$u.forEach(t,t=>$u.forEach(t.Fi,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>$u.forEach(t.Bi,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!Xu(e))throw e;fu("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Ji.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.Ji=n.Ji.insert(e,i)}}}(r.localStore,o))}async function Um(e,t){const n=bu(e);if(!n.currentUser.isEqual(t)){fu("SyncEngine","User change. New user:",t.toKey());const e=await ng(n.localStore,t);n.currentUser=t,function(e){e.Ec.forEach(e=>{e.forEach(e=>{e.reject(new Eu(wu.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),e.Ec.clear()}(n),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Mm(n,e.er)}}function Fm(e,t){const n=bu(e),r=n.yc.get(t);if(r&&r.fc)return Kh().add(r.key);{let e=Kh();const r=n._c.get(t);if(!r)return e;for(const t of r){const r=n.wc.get(t);e=e.unionWith(r.view.nc)}return e}}function zm(e){const t=bu(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=km.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Fm.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Im.bind(null,t),t.dc.nu=hm.bind(null,t.eventManager),t.dc.Pc=fm.bind(null,t.eventManager),t}function Vm(e){const t=bu(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Cm.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Am.bind(null,t),t}class Bm{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Eg(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return tg(this.persistence,new Zp,e.initialUser,this.serializer)}createPersistence(e){return new Yp(Xp.zs,this.serializer)}createSharedClientState(e){return new dg}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class qm{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Tm(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Um.bind(null,this.syncEngine),await em(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new cm}createDatastore(e){const t=Eg(e.databaseInfo.databaseId),n=(r=e.databaseInfo,new bg(r));var r;return function(e,t,n,r){return new Tg(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=e=>Tm(this.syncEngine,e,0),o=fg.D()?new fg:new hg,new Cg(t,n,r,i,o);var t,n,r,i,o}createSyncEngine(e,t){return function(e,t,n,r,i,o,s){const a=new Em(e,t,n,r,i,o);return s&&(a.vc=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return async function(e){const t=bu(e);fu("RemoteStore","RemoteStore shutting down."),t.vu.add(5),await Ng(t),t.Pu.shutdown(),t.bu.set("Unknown")}(this.remoteStore)}}class Wm{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):pu("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Hm{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=cu.UNAUTHENTICATED,this.clientId=Du.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,async e=>{fu("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(fu("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Eu(wu.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Su;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(Tw){const n=im(Tw,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Km(e,t){e.asyncQueue.verifyOperationInProgress(),fu("FirestoreClient","Initializing OfflineComponentProvider");const n=await e.getConfiguration();await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await ng(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function Gm(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Ym(e);fu("FirestoreClient","Initializing OnlineComponentProvider");const r=await e.getConfiguration();await t.initialize(n,r),e.setCredentialChangeListener(e=>Zg(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>Zg(t.remoteStore,n)),e._onlineComponents=t}function Qm(e){return"FirebaseError"===e.name?e.code===wu.FAILED_PRECONDITION||e.code===wu.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}async function Ym(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){fu("FirestoreClient","Using user provided OfflineComponentProvider");try{await Km(e,e._uninitializedComponentsProvider._offline)}catch(Tw){const n=Tw;if(!Qm(n))throw n;gu("Error using user provided cache. Falling back to memory cache: "+n),await Km(e,new Bm)}}else fu("FirestoreClient","Using default OfflineComponentProvider"),await Km(e,new Bm);return e._offlineComponents}async function $m(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(fu("FirestoreClient","Using user provided OnlineComponentProvider"),await Gm(e,e._uninitializedComponentsProvider._online)):(fu("FirestoreClient","Using default OnlineComponentProvider"),await Gm(e,new qm))),e._onlineComponents}function Xm(e){return $m(e).then(e=>e.syncEngine)}async function Jm(e){const t=await $m(e),n=t.eventManager;return n.onListen=Sm.bind(null,t.syncEngine),n.onUnlisten=_m.bind(null,t.syncEngine),n}function Zm(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Su;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const o=new Wm({next:o=>{t.enqueueAndForget(()=>dm(e,s));const a=o.docs.has(n);!a&&o.fromCache?i.reject(new Eu(wu.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new Eu(wu.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:e=>i.reject(e)}),s=new gm(bh(n.path),o,{includeMetadataChanges:!0,Ku:!0});return um(e,s)}(await Jm(e),e.asyncQueue,t,n,r)),r.promise}function ey(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Su;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const o=new Wm({next:n=>{t.enqueueAndForget(()=>dm(e,s)),n.fromCache&&"server"===r.source?i.reject(new Eu(wu.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),s=new gm(n,o,{includeMetadataChanges:!0,Ku:!0});return um(e,s)}(await Jm(e),e.asyncQueue,t,n,r)),r.promise}function ty(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const ny=new Map;function ry(e,t,n){if(!n)throw new Eu(wu.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function iy(e){if(!Vu.isDocumentKey(e))throw new Eu(wu.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function oy(e){if(Vu.isDocumentKey(e))throw new Eu(wu.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function sy(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":yu()}function ay(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Eu(wu.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=sy(e);throw new Eu(wu.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}class ly{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Eu(wu.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Eu(wu.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new Eu(wu.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ty(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Eu(wu.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new Eu(wu.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new Eu(wu.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(t=this.experimentalLongPollingOptions,n=e.experimentalLongPollingOptions,t.timeoutSeconds===n.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams;var t,n}}class cy{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ly({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Eu(wu.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Eu(wu.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ly(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new _u;switch(e.type){case"firstParty":return new Cu(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Eu(wu.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=ny.get(e);t&&(fu("ComponentProvider","Removing Datastore"),ny.delete(e),t.terminate())}(this),Promise.resolve()}}class uy{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new hy(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new uy(this.firestore,e,this._key)}}class dy{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new dy(this.firestore,e,this._query)}}class hy extends dy{constructor(e,t,n){super(e,t,bh(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new uy(this.firestore,null,new Vu(e))}withConverter(e){return new hy(this.firestore,e,this._path)}}function fy(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=ct(e),ry("collection","path",t),e instanceof cy){const n=Uu.fromString(t,...r);return oy(n),new hy(e,null,n)}{if(!(e instanceof uy||e instanceof hy))throw new Eu(wu.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Uu.fromString(t,...r));return oy(n),new hy(e.firestore,null,n)}}function py(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=ct(e),1===arguments.length&&(t=Du.A()),ry("doc","path",t),e instanceof cy){const n=Uu.fromString(t,...r);return iy(n),new uy(e,null,new Vu(n))}{if(!(e instanceof uy||e instanceof hy))throw new Eu(wu.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Uu.fromString(t,...r));return iy(n),new uy(e.firestore,e instanceof hy?e.converter:null,new Vu(n))}}class gy{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new Sg(this,"async_queue_retry"),this.Xc=()=>{const e=wg();e&&fu("AsyncQueue","Visibility state changed to "+e.visibilityState),this.qo.Mo()};const e=wg();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=wg();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new Su;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}async ea(){if(0!==this.Qc.length){try{await this.Qc[0](),this.Qc.shift(),this.qo.reset()}catch(e){if(!Xu(e))throw e;fu("AsyncQueue","Operation failed with retryable error: "+e)}this.Qc.length>0&&this.qo.No(()=>this.ea())}}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(e=>{this.Wc=e,this.Hc=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw pu("INTERNAL UNHANDLED ERROR: ",t),e}).then(e=>(this.Hc=!1,e))));return this.Gc=t,t}enqueueAfterDelay(e,t,n){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const r=rm.createAndSchedule(this,e,t,n,e=>this.na(e));return this.zc.push(r),r}Zc(){this.Wc&&yu()}verifyOperationInProgress(){}async sa(){let e;do{e=this.Gc,await e}while(e!==this.Gc)}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function my(e){return function(e){if("object"!=typeof e||null===e)return!1;const t=e;for(const n of["next","error","complete"])if(n in t&&"function"==typeof t[n])return!0;return!1}(e)}class yy extends cy{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new gy,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||by(this),this._firestoreClient.terminate()}}function vy(e){return e._firestoreClient||by(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function by(e){var t,n,r;const i=e._freezeSettings(),o=function(e,t,n,r){return new xd(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,ty(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new Hm(e._authCredentials,e._appCheckCredentials,e._queue,o),(null===(n=i.cache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.cache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}class wy{constructor(e){this._byteString=e}static fromBase64String(e){try{return new wy(gd.fromBase64String(e))}catch(e){throw new Eu(wu.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new wy(gd.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Ey{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new Eu(wu.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new zu(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Sy{constructor(e){this._methodName=e}}class xy{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Eu(wu.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Eu(wu.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Pu(this._lat,e._lat)||Pu(this._long,e._long)}}const _y=/^__.*__$/;class ky{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Sf(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ef(e,this.data,t,this.fieldTransforms)}}class Ty{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Sf(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Iy(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw yu()}}class Cy{constructor(e,t,n,r,i,o){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.ua(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new Cy(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:n,la:!1});return r.fa(e),r}da(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:n,la:!1});return r.ua(),r}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return Wy(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(Iy(this.ca)&&_y.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class Ay{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Eg(e)}ya(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Cy({ca:e,methodName:t,ga:n,path:zu.emptyPath(),la:!1,ma:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ny(e){const t=e._freezeSettings(),n=Eg(e._databaseId);return new Ay(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Ry(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const s=e.ya(o.merge||o.mergeFields?2:0,t,n,i);zy("Data must be an object, but it was:",s,r);const a=Uy(r,s);let l,c;if(o.merge)l=new fd(s.fieldMask),c=s.fieldTransforms;else if(o.mergeFields){const e=[];for(const r of o.mergeFields){const i=Vy(t,r,n);if(!s.contains(i))throw new Eu(wu.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));Hy(e,i)||e.push(i)}l=new fd(e),c=s.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,c=s.fieldTransforms;return new ky(new Vd(a),l,c)}class Dy extends Sy{_toFieldTransform(e){if(2!==e.ca)throw 1===e.ca?e._a("".concat(this._methodName,"() can only appear at the top level of your update data")):e._a("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Dy}}class Py extends Sy{_toFieldTransform(e){return new df(e.path,new nf)}isEqual(e){return e instanceof Py}}function Oy(e,t,n,r){const i=e.ya(1,t,n);zy("Data must be an object, but it was:",i,r);const o=[],s=Vd.empty();sd(r,(e,r)=>{const a=qy(t,e,n);r=ct(r);const l=i.da(a);if(r instanceof Dy)o.push(a);else{const e=My(r,l);null!=e&&(o.push(a),s.set(a,e))}});const a=new fd(o);return new Ty(s,a,i.fieldTransforms)}function Ly(e,t,n,r,i,o){const s=e.ya(1,t,n),a=[Vy(t,r,n)],l=[i];if(o.length%2!=0)throw new Eu(wu.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let h=0;h<o.length;h+=2)a.push(Vy(t,o[h])),l.push(o[h+1]);const c=[],u=Vd.empty();for(let h=a.length-1;h>=0;--h)if(!Hy(c,a[h])){const e=a[h];let t=l[h];t=ct(t);const n=s.da(e);if(t instanceof Dy)c.push(e);else{const r=My(t,n);null!=r&&(c.push(e),u.set(e,r))}}const d=new fd(c);return new Ty(u,d,s.fieldTransforms)}function jy(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return My(n,e.ya(r?4:3,t))}function My(e,t){if(Fy(e=ct(e)))return zy("Unsupported field value:",t,e),Uy(e,t);if(e instanceof Sy)return function(e,t){if(!Iy(t.ca))throw t._a("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t._a("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.la&&4!==t.ca)throw t._a("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=My(i,t.wa(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=ct(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Xh(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Lu.fromDate(e);return{timestampValue:ip(t.serializer,n)}}if(e instanceof Lu){const n=new Lu(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:ip(t.serializer,n)}}if(e instanceof xy)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof wy)return{bytesValue:op(t.serializer,e._byteString)};if(e instanceof uy){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t._a("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:lp(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t._a("Unsupported field value: ".concat(sy(e)))}(e,t)}function Uy(e,t){const n={};return ad(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):sd(e,(e,r)=>{const i=My(r,t.ha(e));null!=i&&(n[e]=i)}),{mapValue:{fields:n}}}function Fy(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Lu||e instanceof xy||e instanceof wy||e instanceof uy||e instanceof Sy)}function zy(e,t,n){if(!Fy(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=sy(n);throw"an object"===r?t._a(e+" a custom object"):t._a(e+" "+r)}}function Vy(e,t,n){if((t=ct(t))instanceof Ey)return t._internalPath;if("string"==typeof t)return qy(e,t);throw Wy("Field path arguments must be of type string or ",e,!1,void 0,n)}const By=new RegExp("[~\\*/\\[\\]]");function qy(e,t,n){if(t.search(By)>=0)throw Wy("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new Ey(...t.split("."))._internalPath}catch(r){throw Wy("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Wy(e,t,n,r,i){const o=r&&!r.isEmpty(),s=void 0!==i;let a="Function ".concat(t,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(o||s)&&(l+=" (found",o&&(l+=" in field ".concat(r)),s&&(l+=" in document ".concat(i)),l+=")"),new Eu(wu.INVALID_ARGUMENT,a+e+l)}function Hy(e,t){return e.some(e=>e.isEqual(t))}class Ky{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new uy(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Gy(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Qy("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Gy extends Ky{data(){return super.data()}}function Qy(e,t){return"string"==typeof t?qy(e,t):t instanceof Ey?t._internalPath:t._delegate._internalPath}function Yy(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Eu(wu.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class $y{}class Xy extends $y{}function Jy(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];t instanceof $y&&n.push(t),n=n.concat(i),function(e){const t=e.filter(e=>e instanceof tv).length,n=e.filter(e=>e instanceof Zy).length;if(t>1||t>0&&n>0)throw new Eu(wu.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const s of n)e=s._apply(e);return e}class Zy extends Xy{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Zy(e,t,n)}_apply(e){const t=this._parse(e);return sv(e._query,t),new dy(e.firestore,e.converter,Th(e._query,t))}_parse(e){const t=Ny(e.firestore),n=function(e,t,n,r,i,o,s){let a;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new Eu(wu.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(o,"' queries on documentId()."));if("in"===o||"not-in"===o){ov(s,o);const t=[];for(const n of s)t.push(iv(r,e,n));a={arrayValue:{values:t}}}else a=iv(r,e,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||ov(s,o),a=jy(n,"where",s,"in"===o||"not-in"===o);return $d.create(i,o,a)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function ev(e,t,n){const r=t,i=Qy("where",e);return Zy._create(i,r,n)}class tv extends $y{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new tv(e,t)}_parse(e){const t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:Xd.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)sv(n,i),n=Th(n,i)}(e._query,t),new dy(e.firestore,e.converter,Th(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class nv extends Xy{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new nv(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new Eu(wu.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Eu(wu.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const r=new Gd(t,n);return function(e,t){if(null===Eh(e)){const n=Sh(e);null!==n&&av(e,n,t.field)}}(e,r),r}(e._query,this._field,this._direction);return new dy(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new yh(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function rv(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=Qy("orderBy",e);return nv._create(n,t)}function iv(e,t,n){if("string"==typeof(n=ct(n))){if(""===n)throw new Eu(wu.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!xh(t)&&-1!==n.indexOf("/"))throw new Eu(wu.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(Uu.fromString(n));if(!Vu.isDocumentKey(r))throw new Eu(wu.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Pd(e,new Vu(r))}if(n instanceof uy)return Pd(e,n._key);throw new Eu(wu.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(sy(n),"."))}function ov(e,t){if(!Array.isArray(e)||0===e.length)throw new Eu(wu.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function sv(e,t){if(t.isInequality()){const n=Sh(e),r=t.field;if(null!==n&&!n.isEqual(r))throw new Eu(wu.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(r.toString(),"'"));const i=Eh(e);null!==i&&av(e,r,i)}const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new Eu(wu.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Eu(wu.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}function av(e,t,n){if(!n.isEqual(t))throw new Eu(wu.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}class lv{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Td(e)){case 0:return null;case 1:return e.booleanValue;case 2:return vd(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(bd(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw yu()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return sd(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertGeoPoint(e){return new xy(vd(e.latitude),vd(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Ed(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Sd(e));default:return null}}convertTimestamp(e){const t=yd(e);return new Lu(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Uu.fromString(e);vu(Ap(n));const r=new _d(n.get(1),n.get(3)),i=new Vu(n.popFirst(5));return r.isEqual(t)||pu("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function cv(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class uv{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class dv extends Ky{constructor(e,t,n,r,i,o){super(e,t,n,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new hv(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(Qy("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class hv extends dv{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class fv{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new uv(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new hv(this._firestore,this._userDataWriter,n.key,n,new uv(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Eu(wu.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new hv(e._firestore,e._userDataWriter,n.doc.key,n.doc,new uv(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new hv(e._firestore,e._userDataWriter,t.doc.key,t.doc,new uv(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,o=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),o=n.indexOf(t.doc.key)),{type:pv(t.type),doc:r,oldIndex:i,newIndex:o}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function pv(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return yu()}}function gv(e){e=ay(e,uy);const t=ay(e.firestore,yy);return Zm(vy(t),e._key).then(n=>xv(t,e,n))}class mv extends lv{constructor(e){super(),this.firestore=e}convertBytes(e){return new wy(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new uy(this.firestore,null,t)}}function yv(e){e=ay(e,dy);const t=ay(e.firestore,yy),n=vy(t),r=new mv(t);return Yy(e._query),ey(n,e._query).then(n=>new fv(t,r,e,n))}function vv(e,t,n){e=ay(e,uy);const r=ay(e.firestore,yy),i=cv(e.converter,t,n);return Sv(r,[Ry(Ny(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,ff.none())])}function bv(e,t,n){e=ay(e,uy);const r=ay(e.firestore,yy),i=Ny(r);let o;for(var s=arguments.length,a=new Array(s>3?s-3:0),l=3;l<s;l++)a[l-3]=arguments[l];return o="string"==typeof(t=ct(t))||t instanceof Ey?Ly(i,"updateDoc",e._key,t,n,a):Oy(i,"updateDoc",e._key,t),Sv(r,[o.toMutation(e._key,ff.exists(!0))])}function wv(e){return Sv(ay(e.firestore,yy),[new Tf(e._key,ff.none())])}function Ev(e,t){const n=ay(e.firestore,yy),r=py(e),i=cv(e.converter,t);return Sv(n,[Ry(Ny(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,ff.exists(!1))]).then(()=>r)}function Sv(e,t){return function(e,t){const n=new Su;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const r=Vm(e);try{const e=await function(e,t){const n=bu(e),r=Lu.now(),i=t.reduce((e,t)=>e.add(t.key),Kh());let o,s;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let a=Mh(),l=Kh();return n.Zi.getEntries(e,i).next(e=>{a=e,a.forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,a)).next(i=>{o=i;const s=[];for(const e of t){const t=bf(e,o.get(e.key).overlayedDocument);null!=t&&s.push(new Sf(e.key,t,Bd(t.value.mapValue),ff.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,s,t)}).next(t=>{s=t;const r=t.applyToLocalDocumentSet(o,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:s.batchId,changes:zh(o)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Tc[e.currentUser.toKey()];r||(r=new ld(Pu)),r=r.insert(t,n),e.Tc[e.currentUser.toKey()]=r}(r,e.batchId,n),await Mm(r,e.changes),await Wg(r.remoteStore)}catch(e){const t=im(e,"Failed to persist write");n.reject(t)}}(await Xm(e),t,n)),n.promise}(vy(e),t)}function xv(e,t,n){const r=n.docs.get(t._key),i=new mv(e);return new dv(e,i,t._key,r,new uv(n.hasPendingWrites,n.fromCache),t.converter)}function _v(){return new Py("serverTimestamp")}!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){uu=e}(En),yn(new ut("firestore",(e,n)=>{let{instanceIdentifier:r,options:i}=n;const o=e.getProvider("app").getImmediate(),s=new yy(new Tu(e.getProvider("auth-internal")),new Nu(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Eu(wu.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new _d(e.options.projectId,t)}(o,r),o);return i=Object.assign({useFetchStreams:t},i),s._setSettings(i),s},"PUBLIC").setMultipleInstances(!0)),_n(lu,"3.13.0",e),_n(lu,"3.13.0","esm2017")}();const kv="firebasestorage.googleapis.com",Tv="storageBucket";class Iv extends Ze{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(Nv(e),"Firebase Storage: ".concat(t," (").concat(Nv(e),")")),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Iv.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Nv(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}var Cv,Av;function Nv(e){return"storage/"+e}function Rv(){return new Iv(Cv.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function Dv(){return new Iv(Cv.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Pv(){return new Iv(Cv.CANCELED,"User canceled the upload/download.")}function Ov(){return new Iv(Cv.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Lv(e){return new Iv(Cv.INVALID_ARGUMENT,e)}function jv(){return new Iv(Cv.APP_DELETED,"The Firebase app was deleted.")}function Mv(e,t){return new Iv(Cv.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function Uv(e){throw new Iv(Cv.INTERNAL_ERROR,"Internal error: "+e)}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(Cv||(Cv={}));class Fv{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=Fv.makeFromUrl(e,t)}catch(Tw){return new Fv(e,"")}if(""===n.path)return n;throw r=e,new Iv(Cv.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.");var r}static makeFromUrl(e,t){let n=null;const r="([A-Za-z0-9.\\-_]+)";const i=new RegExp("^gs://"+r+"(/(.*))?$","i");function o(e){e.path_=decodeURIComponent(e.path)}const s=t.replace(/[.]/g,"\\."),a=[{regex:i,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(s,"/").concat("v[A-Za-z0-9_]+","/b/").concat(r,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://".concat(t===kv?"(?:storage.googleapis.com|storage.cloud.google.com)":t,"/").concat(r,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:o}];for(let l=0;l<a.length;l++){const t=a[l],r=t.regex.exec(e);if(r){const e=r[t.indices.bucket];let i=r[t.indices.path];i||(i=""),n=new Fv(e,i),t.postModify(n);break}}if(null==n)throw function(e){return new Iv(Cv.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return n}}class zv{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(){}}function Vv(e){return"string"===typeof e||e instanceof String}function Bv(e){return qv()&&e instanceof Blob}function qv(){return"undefined"!==typeof Blob&&!Xe()}function Wv(e,t,n,r){if(r<t)throw Lv("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw Lv("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function Hv(e,t,n){let r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function Kv(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1),n}function Gv(e,t){const n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return n||r||i}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(Av||(Av={}));class Qv{constructor(e,t,n,r,i,o,s,a,l,c,u){let d=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=s,this.errorCallback_=a,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=u,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()})}start_(){const e=(e,t)=>{if(t)return void e(!1,new Yv(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const r=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(r),n.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(r),this.pendingConnection_=null;const t=n.getErrorCode()===Av.NO_ERROR,i=n.getStatus();if(!t||Gv(i,this.additionalRetryCodes_)&&this.retry){const t=n.getErrorCode()===Av.ABORT;return void e(!1,new Yv(!1,null,t))}const o=-1!==this.successCodes_.indexOf(i);e(!0,new Yv(o,n))})},t=(e,t)=>{const n=this.resolve_,r=this.reject_,i=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(i,i.getResponse());!function(e){return void 0!==e}(e)?n():n(e)}catch(Tw){r(Tw)}else if(null!==i){const e=Rv();e.serverResponse=i.getErrorText(),this.errorCallback_?r(this.errorCallback_(i,e)):r(e)}else if(t.canceled){r(this.appDelete_?jv():Pv())}else{r(Dv())}};this.canceled_?t(0,new Yv(!1,null,!0)):this.backoffId_=function(e,t,n){let r=1,i=null,o=null,s=!1,a=0;function l(){return 2===a}let c=!1;function u(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function d(t){i=setTimeout(()=>{i=null,e(f,l())},t)}function h(){o&&clearTimeout(o)}function f(e){if(c)return void h();for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return h(),void u.call(null,e,...n);if(l()||s)return h(),void u.call(null,e,...n);let o;r<64&&(r*=2),1===a?(a=2,o=0):o=1e3*(r+Math.random()),d(o)}let p=!1;function g(e){p||(p=!0,h(),c||(null!==i?(e||(a=2),clearTimeout(i),d(0)):e||(a=1)))}return d(0),o=setTimeout(()=>{s=!0,g(!0)},n),g}(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class Yv{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function $v(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function Xv(){const e=$v();for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){const t=new e;for(let e=0;e<n.length;e++)t.append(n[e]);return t.getBlob()}if(qv())return new Blob(n);throw new Iv(Cv.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}function Jv(e){if("undefined"===typeof atob)throw t="base-64",new Iv(Cv.UNSUPPORTED_ENVIRONMENT,"".concat(t," is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information."));var t;return atob(e)}const Zv="raw",eb="base64",tb="base64url",nb="data_url";class rb{constructor(e,t){this.data=e,this.contentType=t||null}}function ib(e,t){switch(e){case Zv:return new rb(ob(t));case eb:case tb:return new rb(sb(e,t));case nb:return new rb(function(e){const t=new ab(e);return t.base64?sb(eb,t.rest):function(e){let t;try{t=decodeURIComponent(e)}catch(Tw){throw Mv(nb,"Malformed data URL.")}return ob(t)}(t.rest)}(t),new ab(t).contentType)}throw Rv()}function ob(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r)){if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1))){r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else t.push(239,191,189)}else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function sb(e,t){switch(e){case eb:{const n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r){throw Mv(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?")}break}case tb:{const n=-1!==t.indexOf("+"),r=-1!==t.indexOf("/");if(n||r){throw Mv(e,"Invalid character '"+(n?"+":"/")+"' found: is it base64 encoded?")}t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=Jv(t)}catch(Tw){if(Tw.message.includes("polyfill"))throw Tw;throw Mv(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class ab{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw Mv(nb,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=t[1]||null;null!=n&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}class lb{constructor(e,t){let n=0,r="";Bv(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if(Bv(this.data_)){const n=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,e,t);return null===n?null:new lb(n)}{const n=new Uint8Array(this.data_.buffer,e,t-e);return new lb(n,!0)}}static getBlob(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(qv()){const e=t.map(e=>e instanceof lb?e.data_:e);return new lb(Xv.apply(null,e))}{const e=t.map(e=>Vv(e)?ib(Zv,e).data:e.data_);let n=0;e.forEach(e=>{n+=e.byteLength});const r=new Uint8Array(n);let i=0;return e.forEach(e=>{for(let t=0;t<e.length;t++)r[i++]=e[t]}),new lb(r,!0)}}uploadData(){return this.data_}}function cb(e){let t;try{t=JSON.parse(e)}catch(Tw){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function ub(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function db(e,t){return t}class hb{constructor(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||db}}let fb=null;function pb(){if(fb)return fb;const e=[];e.push(new hb("bucket")),e.push(new hb("generation")),e.push(new hb("metageneration")),e.push(new hb("name","fullPath",!0));const t=new hb("name");t.xform=function(e,t){return function(e){return!Vv(e)||e.length<2?e:ub(e)}(t)},e.push(t);const n=new hb("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new hb("timeCreated")),e.push(new hb("updated")),e.push(new hb("md5Hash",null,!0)),e.push(new hb("cacheControl",null,!0)),e.push(new hb("contentDisposition",null,!0)),e.push(new hb("contentEncoding",null,!0)),e.push(new hb("contentLanguage",null,!0)),e.push(new hb("contentType",null,!0)),e.push(new hb("metadata","customMetadata",!0)),fb=e,fb}function gb(e,t,n){const r={type:"file"},i=n.length;for(let o=0;o<i;o++){const e=n[o];r[e.local]=e.xform(r,t[e.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){const n=e.bucket,r=e.fullPath,i=new Fv(n,r);return t._makeStorageReference(i)}})}(r,e),r}function mb(e,t,n){const r=cb(t);if(null===r)return null;return gb(e,r,n)}function yb(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const r=t[i];r.writable&&(n[r.server]=e[r.local])}return JSON.stringify(n)}class vb{constructor(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function bb(e){if(!e)throw Rv()}function wb(e,t){return function(n,r){const i=mb(e,r,t);return bb(null!==i),i}}function Eb(e,t){return function(n,r){const i=mb(e,r,t);return bb(null!==i),function(e,t,n,r){const i=cb(t);if(null===i)return null;if(!Vv(i.downloadTokens))return null;const o=i.downloadTokens;if(0===o.length)return null;const s=encodeURIComponent;return o.split(",").map(t=>{const i=e.bucket,o=e.fullPath;return Hv("/b/"+s(i)+"/o/"+s(o),n,r)+Kv({alt:"media",token:t})})[0]}(i,r,e.host,e._protocol)}}function Sb(e){return function(t,n){let r;var i,o;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new Iv(Cv.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new Iv(Cv.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(o=e.bucket,r=new Iv(Cv.QUOTA_EXCEEDED,"Quota for bucket '"+o+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new Iv(Cv.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}}function xb(e){const t=Sb(e);return function(n,r){let i=t(n,r);var o;return 404===n.getStatus()&&(o=e.path,i=new Iv(Cv.OBJECT_NOT_FOUND,"Object '"+o+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function _b(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function kb(e,t,n,r,i){const o=t.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};const a=function(){let e="";for(let t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();s["Content-Type"]="multipart/related; boundary="+a;const l=_b(t,r,i),c="--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+yb(l,n)+"\r\n--"+a+"\r\nContent-Type: "+l.contentType+"\r\n\r\n",u="\r\n--"+a+"--",d=lb.getBlob(c,r,u);if(null===d)throw Ov();const h={name:l.fullPath},f=Hv(o,e.host,e._protocol),p=e.maxUploadRetryTime,g=new vb(f,"POST",wb(e,n),p);return g.urlParams=h,g.headers=s,g.body=d.uploadData(),g.errorHandler=Sb(t),g}class Tb{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Av.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Av.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Av.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,n,r){if(this.sent_)throw Uv("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(const i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Uv("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Uv("cannot .getStatus() before sending");try{return this.xhr_.status}catch(Tw){return-1}}getResponse(){if(!this.sent_)throw Uv("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Uv("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class Ib extends Tb{initXhr(){this.xhr_.responseType="text"}}function Cb(){return new Ib}class Ab{constructor(e,t){this._service=e,this._location=t instanceof Fv?t:Fv.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Ab(e,t)}get root(){const e=new Fv(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return ub(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new Fv(this._location.bucket,e);return new Ab(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function(e){return new Iv(Cv.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function Nb(e,t,n){e._throwIfRoot("uploadBytes");const r=kb(e.storage,e._location,pb(),new lb(t,!0),n);return e.storage.makeRequestWithTokens(r,Cb).then(t=>({metadata:t,ref:e}))}function Rb(e){e._throwIfRoot("getDownloadURL");const t=function(e,t,n){const r=Hv(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,o=new vb(r,"GET",Eb(e,n),i);return o.errorHandler=xb(t),o}(e.storage,e._location,pb());return e.storage.makeRequestWithTokens(t,Cb).then(e=>{if(null===e)throw new Iv(Cv.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e})}function Db(e,t){const n=function(e,t){const n=t.split("/").filter(e=>e.length>0).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new Fv(e._location.bucket,n);return new Ab(e.storage,r)}function Pb(e,t){if(e instanceof jb){const n=e;if(null==n._bucket)throw new Iv(Cv.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Tv+"' property when initializing the app?");const r=new Ab(n,n._bucket);return null!=t?Pb(r,t):r}return void 0!==t?Db(e,t):e}function Ob(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof jb)return new Ab(e,t);throw Lv("To use ref(service, url), the first argument must be a Storage instance.")}return Pb(e,t)}function Lb(e,t){const n=null===t||void 0===t?void 0:t[Tv];return null==n?null:Fv.makeFromBucketSpec(n,e)}class jb{constructor(e,t,n,r,i){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=i,this._bucket=null,this._host=kv,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?Fv.makeFromBucketSpec(r,this._host):Lb(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=Fv.makeFromBucketSpec(this._url,e):this._bucket=Lb(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Wv("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Wv("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});if(e){return(await e.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ab(this,e)}_makeRequest(e,t,n,r){let i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new zv(jv());{const o=function(e,t,n,r,i,o){let s=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];const a=Kv(e.urlParams),l=e.url+a,c=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(c,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(c,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(c,o),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(c,r),new Qv(l,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,s)}(e,this._appId,n,r,t,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,t){const[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,r).getPromise()}}const Mb="@firebase/storage",Ub="0.11.2",Fb="storage";function zb(e,t){let{instanceIdentifier:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return new jb(r,i,o,n,En)}yn(new ut(Fb,zb,"PUBLIC").setMultipleInstances(!0)),_n(Mb,Ub,""),_n(Mb,Ub,"esm2017");const Vb={apiKey:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_FIREBASE_API_KEY||"AIzaSyAiinYBnD20OAIs9S_7wetabfQz477Duh4",authDomain:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_FIREBASE_AUTH_DOMAIN||"sociedad-tpv.firebaseapp.com",projectId:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_FIREBASE_PROJECT_ID||"sociedad-tpv",storageBucket:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_FIREBASE_STORAGE_BUCKET||"sociedad-tpv.appspot.com",messagingSenderId:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_FIREBASE_MESSAGING_SENDER_ID||"180644630865",appId:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_FIREBASE_APP_ID||"1:180644630865:web:a0a2d69c67c5b482c9c370"};console.log("FIREBASE CONFIG:",{apiKey:Vb.apiKey,authDomain:Vb.authDomain,projectId:Vb.projectId});const Bb=Sn(Vb),qb=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xn();const t=vn(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=vn(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(nt(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;Vn(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:Lo,persistence:[Gi,Ni,Di]}),r=Ge("authTokenSyncURL");if(r){const e=(i=r,async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>Fo)return;const r=null===t||void 0===t?void 0:t.token;zo!==r&&(zo=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:"Bearer ".concat(r)}:{}}))});!function(e,t,n){ct(e).beforeAuthStateChanged(t,n)}(n,e,()=>e(n.currentUser)),function(e,t,n,r){ct(e).onIdTokenChanged(t,n,r)}(n,t=>e(t))}var i;const o=We("auth");return o&&Yr(n,"http://".concat(o)),n}(Bb),Wb=function(e,t){const n="string"==typeof e?e:t||"(default)",r=vn("object"==typeof e?e:xn(),"firestore").getImmediate({identifier:n});if(!r._initialized){const e=He("firestore");e&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const o=(e=ay(e,cy))._getSettings(),s="".concat(t,":").concat(n);if("firestore.googleapis.com"!==o.host&&o.host!==s&&gu("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=cu.MOCK_USER;else{t=Ye(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const o=r.mockUserToken.sub||r.mockUserToken.user_id;if(!o)throw new Eu(wu.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new cu(o)}e._authCredentials=new ku(new xu(t,n))}}(r,...e)}return r}(Bb),Hb=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xn(),t=arguments.length>1?arguments[1]:void 0;e=ct(e);const n=vn(e,Fb).getImmediate({identifier:t}),r=He("storage");return r&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};!function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken="string"===typeof i?i:Ye(i,e.app.options.projectId))}(e,t,n,r)}(n,...r),n}(Bb);async function Kb(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const{email:r,name:i}=e,o=await async function(e,t,n){var r;const i=Gr(e),o={returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"};let s;if(null===(r=i._getRecaptchaConfig())||void 0===r?void 0:r.emailPasswordEnabled){const e=await Wr(i,o,"signUpPassword");s=mi(i,e)}else s=mi(i,o).catch(async e=>{if(e.code==="auth/".concat("missing-recaptcha-token")){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const e=await Wr(i,o,"signUpPassword");return mi(i,e)}return Promise.reject(e)});const a=await s.catch(e=>Promise.reject(e)),l=await yi._fromIdTokenResponse(i,"signIn",a);return await i._updateCurrentUser(l.user),l}(qb,r,t);if(i)try{await Ti(o.user,{displayName:i})}catch(Tw){console.warn(Tw)}let s="";if(n)try{s=await Jb(o.user.uid,n)}catch(Tw){console.warn("Error subiendo foto durante registro:",Tw)}const a=py(Wb,"users",o.user.uid);return await vv(a,je(je({email:r},e),{},{photoURL:s,createdAt:_v()})),o.user}async function Gb(e,t){const n=await function(e,t,n){return _i(ct(e),ci.credential(t,n))}(qb,e,t);return n.user}async function Qb(){await function(e){return ct(e).signOut()}(qb)}async function Yb(e){if(!e)return null;const t=py(Wb,"users",e),n=await gv(t);return n.exists()?je({id:n.id},n.data()):null}async function $b(e,t){if(!e)throw new Error("UID requerido");const n=py(Wb,"users",e),r={};return void 0!==t.name&&(r.name=t.name),void 0!==t.surname&&(r.surname=t.surname),void 0!==t.lastName&&(r.lastName=t.lastName),void 0!==t.dob&&(r.dob=t.dob),void 0!==t.birthDate&&(r.birthDate=t.birthDate),void 0!==t.phone&&(r.phone=t.phone),void 0!==t.photoURL&&(r.photoURL=t.photoURL),void 0!==t.isAdmin&&(r.isAdmin=!!t.isAdmin),r.updatedAt=_v(),await bv(n,r),!0}async function Xb(e){if(!e)throw new Error("Email requerido");return await async function(e,t,n){var r;const i=Gr(e),o={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};if(null===(r=i._getRecaptchaConfig())||void 0===r?void 0:r.emailPasswordEnabled){const e=await Wr(i,o,"getOobCode",!0);n&&ki(i,e,n),await ni(i,e)}else n&&ki(i,o,n),await ni(i,o).catch(async e=>{if(e.code!=="auth/".concat("missing-recaptcha-token"))return Promise.reject(e);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const e=await Wr(i,o,"getOobCode",!0);n&&ki(i,e,n),await ni(i,e)}})}(qb,e),!0}async function Jb(e,t){if(!e||!t)throw new Error("UID y archivo requeridos");try{console.log("Iniciando subida de foto...",{uid:e,fileName:t.name,fileSize:t.size});const i=Date.now(),o=(n=Hb,r="user-photos/".concat(e,"/").concat(i,"_").concat(t.name),Ob(n=ct(n),r));console.log("Subiendo archivo a Storage...");const s=await function(e,t,n){return Nb(e=ct(e),t,n)}(o,t);console.log("Archivo subido, obteniendo URL...",s);const a=await function(e){return Rb(e=ct(e))}(o);return console.log("URL obtenida:",a),console.log("Actualizando perfil en Firestore..."),await $b(e,{photoURL:a}),console.log("Foto subida y guardada exitosamente"),a}catch(i){throw console.error("Error detallado en uploadUserPhoto:",i),console.error("Error code:",i.code),console.error("Error message:",i.message),i}var n,r}function Zb(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=fy(Wb,"products");let r;r=t?Jy(n,ev("active","==",!0),rv("label","asc")):Jy(n,rv("label","asc"));const i=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,o,s;e=ct(e);let a={includeMetadataChanges:!1},l=0;"object"!=typeof n[l]||my(n[l])||(a=n[l],l++);const c={includeMetadataChanges:a.includeMetadataChanges};if(my(n[l])){const e=n[l];n[l]=null===(i=e.next)||void 0===i?void 0:i.bind(e),n[l+1]=null===(o=e.error)||void 0===o?void 0:o.bind(e),n[l+2]=null===(s=e.complete)||void 0===s?void 0:s.bind(e)}let u,d,h;if(e instanceof uy)d=ay(e.firestore,yy),h=bh(e._key.path),u={next:t=>{n[l]&&n[l](xv(d,e,t))},error:n[l+1],complete:n[l+2]};else{const t=ay(e,dy);d=ay(t.firestore,yy),h=t._query;const r=new mv(d);u={next:e=>{n[l]&&n[l](new fv(d,r,t,e))},error:n[l+1],complete:n[l+2]},Yy(e._query)}return function(e,t,n,r){const i=new Wm(r),o=new gm(t,i,n);return e.asyncQueue.enqueueAndForget(async()=>um(await Jm(e),o)),()=>{i.Dc(),e.asyncQueue.enqueueAndForget(async()=>dm(await Jm(e),o))}}(vy(d),h,c,u)}(r,t=>{const n=t.docs.map(e=>je({id:e.id},e.data()));e(n)},async n=>{console.error("subscribeProducts error:",n);try{let n=(await yv(fy(Wb,"products"))).docs.map(e=>je({id:e.id},e.data()));t&&(n=n.filter(e=>e.active)),n.sort((e,t)=>String(e.label||"").localeCompare(String(t.label||""))),e(n)}catch(r){console.error("subscribeProducts fallback error:",r),e([])}});return i}async function ew(){let{uid:e,isAdmin:t=!1,startDate:n=null,endDate:r=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{const i=fy(Wb,"expenses"),o=[];!t&&e&&o.push(ev("uid","==",e)),n&&o.push(ev("date",">=",n)),r&&o.push(ev("date","<=",r));const s=o.length?Jy(i,...o,rv("date","desc")):Jy(i,rv("date","desc"));return(await yv(s)).docs.map(e=>je({id:e.id},e.data()))}catch(i){console.error("queryExpenses error:",i);let o=(await yv(fy(Wb,"expenses"))).docs.map(e=>je({id:e.id},e.data()));return!t&&e&&(o=o.filter(t=>t.uid===e)),n&&(o=o.filter(e=>(e.date&&e.date.toDate?e.date.toDate():new Date(e.date||0))>=n)),r&&(o=o.filter(e=>(e.date&&e.date.toDate?e.date.toDate():new Date(e.date||0))<=r)),o.sort((e,t)=>{const n=e.date&&e.date.toDate?e.date.toDate():new Date(e.date||0);return(t.date&&t.date.toDate?t.date.toDate():new Date(t.date||0))-n}),o}}async function tw(e){if(!e)return[];try{const t=py(Wb,"users",e),n=await gv(t);if(n.exists()){return n.data().favoriteProducts||[]}return[]}catch(t){return console.error("getUserFavorites error:",t),[]}}async function nw(e,t){if(!e||!t)throw new Error("UID y productId requeridos");try{return(await tw(e)).includes(t)?await async function(e,t){if(!e||!t)throw new Error("UID y productId requeridos");try{const n=py(Wb,"users",e),r=await gv(n);if(r.exists()){const e=(r.data().favoriteProducts||[]).filter(e=>e!==t);return await bv(n,{favoriteProducts:e,updatedAt:_v()}),e}return[]}catch(n){throw console.error("removeFavoriteProduct error:",n),n}}(e,t):await async function(e,t){if(!e||!t)throw new Error("UID y productId requeridos");try{const n=py(Wb,"users",e),r=await gv(n);if(r.exists()){const e=r.data().favoriteProducts||[];if(!e.includes(t)){const r=[...e,t];return await bv(n,{favoriteProducts:r,updatedAt:_v()}),r}return e}return await vv(n,{favoriteProducts:[t],createdAt:_v()}),[t]}catch(n){throw console.error("addFavoriteProduct error:",n),n}}(e,t)}catch(n){throw console.error("toggleFavoriteProduct error:",n),n}}var rw=n(579);function iw(){const[e,t]=(0,i.useState)("entrar"),[n,r]=(0,i.useState)({name:"",surname:"",dob:"",phone:"",email:"",password:""}),[o,s]=(0,i.useState)(null),[a,l]=(0,i.useState)(""),[c,u]=(0,i.useState)(!1),d=ne(),h=e=>r(je(je({},n),{},{[e.target.name]:e.target.value}));return(0,rw.jsxs)("div",{style:{padding:16,maxWidth:420,margin:"0 auto"},children:[(0,rw.jsx)("h3",{style:{marginBottom:12},children:"Acceso"}),(0,rw.jsxs)("form",{onSubmit:"entrar"===e?async e=>{e.preventDefault(),u(!0);try{await Gb(n.email,n.password),d("/menu")}catch(t){console.error("Login error full:",t),alert("Error login: ".concat(t.code||""," \u2014 ").concat(t.message||t))}finally{u(!1)}}:async e=>{e.preventDefault(),u(!0);try{await Kb({name:n.name,surname:n.surname,dob:n.dob,phone:n.phone,email:n.email},n.password,o),alert("Registro OK. Bienvenido."),d("/menu")}catch(t){console.error("Register error full:",t),alert("Error registro: ".concat(t.code||""," \u2014 ").concat(t.message||t))}finally{u(!1)}},style:{display:"flex",flexDirection:"column",gap:10},children:["registrarse"===e&&(0,rw.jsxs)(rw.Fragment,{children:[(0,rw.jsx)("input",{className:"full-input",name:"name",value:n.name,onChange:h,placeholder:"Nombre",required:!0}),(0,rw.jsx)("input",{className:"full-input",name:"surname",value:n.surname,onChange:h,placeholder:"Apellidos",required:!0}),(0,rw.jsx)("input",{className:"full-input",name:"dob",value:n.dob,onChange:h,type:"date",placeholder:"Fecha de nacimiento",required:!0}),(0,rw.jsx)("input",{className:"full-input",name:"phone",value:n.phone,onChange:h,placeholder:"Tel\xe9fono",required:!0}),(0,rw.jsxs)("div",{children:[(0,rw.jsx)("label",{style:{fontSize:13,fontWeight:600,marginBottom:4,display:"block"},children:"Foto (opcional)"}),a&&(0,rw.jsx)("div",{style:{marginBottom:8},children:(0,rw.jsx)("img",{src:a,alt:"Vista previa",style:{width:100,height:100,objectFit:"cover",borderRadius:8,border:"1px solid #ddd"}})}),(0,rw.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{var t;const n=null===(t=e.target.files)||void 0===t?void 0:t[0];if(!n)return;if(!n.type.startsWith("image/"))return void alert("Por favor selecciona una imagen");if(n.size>2097152)return void alert("La imagen no puede superar 2MB");s(n);const r=new FileReader;r.onloadend=()=>{l(r.result)},r.readAsDataURL(n)},className:"full-input",style:{padding:"6px"}})]})]}),(0,rw.jsx)("input",{className:"full-input",name:"email",value:n.email,onChange:h,type:"email",placeholder:"Email",required:!0}),(0,rw.jsx)("input",{className:"full-input",name:"password",value:n.password,onChange:h,type:"password",placeholder:"Contrase\xf1a",required:!0}),(0,rw.jsx)("button",{className:"btn-primary full",type:"submit",disabled:c,children:"Entrar"}),(0,rw.jsx)("button",{type:"button",className:"btn-ghost full",onClick:()=>t(e=>"entrar"===e?"registrarse":"entrar"),disabled:c&&"registrarse"===e,children:"entrar"===e?"Registrarse":"Volver a Entrar"})]})]})}function ow(e){let{user:t,profile:n}=e;const r=e=>{let{to:t,icon:n,label:r,isAdmin:i=!1}=e;return(0,rw.jsxs)(Ae,{to:t,style:{textDecoration:"none",display:"flex",flexDirection:"column",alignItems:"center",gap:12},children:[(0,rw.jsx)("button",{style:{width:"140px",height:"140px",borderRadius:"50%",border:"none",background:i?"linear-gradient(135deg, #7b1fa2 0%, #6a1b9a 100%)":"linear-gradient(135deg, #1976d2 0%, #1565c0 100%)",color:"#fff",cursor:"pointer",boxShadow:"0 4px 12px rgba(25, 118, 210, 0.3)",transition:"all 0.2s ease",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:8,fontSize:"48px"},onMouseEnter:e=>{e.currentTarget.style.transform="scale(1.05)",e.currentTarget.style.boxShadow="0 6px 16px rgba(25, 118, 210, 0.4)"},onMouseLeave:e=>{e.currentTarget.style.transform="scale(1)",e.currentTarget.style.boxShadow="0 4px 12px rgba(25, 118, 210, 0.3)"},children:n}),(0,rw.jsx)("span",{style:{fontSize:"16px",fontWeight:"600",color:"#374151",textAlign:"center"},children:r})]})};return(0,rw.jsxs)("div",{style:{padding:20,display:"flex",flexDirection:"column",alignItems:"center",minHeight:"100vh"},children:[(0,rw.jsx)("h2",{style:{marginBottom:40,fontSize:28,fontWeight:700,color:"#111827",textAlign:"center"},children:"Men\xfa Principal"}),(0,rw.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:32,alignItems:"center"},children:[!(null!==n&&void 0!==n&&n.isAdmin)&&(0,rw.jsx)(r,{to:"/tpv",icon:"\ud83d\uded2",label:"TPV"}),(0,rw.jsx)(r,{to:"/listados",icon:"\ud83d\udcca",label:"Listados"}),(0,rw.jsx)(r,{to:"/eventos",icon:"\ud83d\udcc5",label:"Eventos"}),(null===n||void 0===n?void 0:n.isAdmin)&&(0,rw.jsx)(r,{to:"/productos",icon:"\ud83d\udce6",label:"Productos",isAdmin:!0}),(null===n||void 0===n?void 0:n.isAdmin)&&(0,rw.jsx)(r,{to:"/socios",icon:"\ud83d\udc65",label:"Socios",isAdmin:!0})]})]})}function sw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t=new Map;for(const n of e){const e=n.productId?"id:".concat(n.productId):"lbl:".concat((n.label||"").trim(),"::").concat(Number(n.price||0).toFixed(2)),r=Number(n.qty||1),i=Number(n.price||0),o=t.get(e);o?o.qty+=r:t.set(e,{productId:n.productId||null,label:n.label||"",price:i,qty:r})}return Array.from(t.values())}function aw(e){if(!e)return"";const t=e.toDate?e.toDate():new Date(e);return new Date(t.getTime()-6e4*t.getTimezoneOffset()).toISOString().slice(0,16)}function lw(e){let{user:t,profile:n}=e;const[r,o]=(0,i.useState)([]),[s,a]=(0,i.useState)([]),[l,c]=(0,i.useState)(!1),[u,d]=(0,i.useState)([]),[h,f]=(0,i.useState)(!1),[p,g]=(0,i.useState)(null),[m,y]=(0,i.useState)(null),[v,b]=(0,i.useState)([]),[w,E]=(0,i.useState)(!1),[S,x]=(0,i.useState)("all");ne();if((0,i.useEffect)(()=>{const e=Zb(o,!0);return()=>e&&e()},[]),(0,i.useEffect)(()=>{let e=!0;return(async()=>{if(t&&t.uid)try{const n=await tw(t.uid);e&&b(n)}catch(n){console.error("Error loading favorites:",n)}})(),()=>{e=!1}},[t]),(0,i.useEffect)(()=>{let e=!0;return t&&t.uid&&(async()=>{try{const n=await ew({uid:null===t||void 0===t?void 0:t.uid,isAdmin:!1});if(!e)return;const r=n.map(e=>je(je({},e),{},{createdAtStr:e.createdAt&&e.createdAt.toDate?e.createdAt.toDate().toLocaleString():e.createdAt||"",dateInput:aw(e.date||e.createdAt)}));d(r)}catch(n){console.error("queryExpenses load error:",n)}})(),()=>{e=!1}},[t]),!t)return(0,rw.jsx)("div",{children:"No autenticado"});if(null!==n&&void 0!==n&&n.isAdmin)return(0,rw.jsx)("div",{children:'Los administradores no pueden usar TPV. Usa "Listados" o "Productos".'});const _=sw(s),k=_.reduce((e,t)=>e+(Number(t.price)||0)*(Number(t.qty)||1),0),T=[...new Set(r.map(e=>e.category||"Sin categor\xeda"))].sort();let I=r;w&&(I=I.filter(e=>v.includes(e.id))),"all"!==S&&(I=I.filter(e=>(e.category||"Sin categor\xeda")===S));const C=()=>{g(null),y(null)},A=async()=>{var e;if(p)try{const t=sw(m.productLines||[]),n={item:t.map(e=>"".concat(e.qty,"x ").concat(e.label)).join(", "),amount:t.reduce((e,t)=>e+t.price*t.qty,0),productLines:t,date:m.dateInput?(e=m.dateInput,e?new Date(e):null):null};await async function(e,t){const n=py(Wb,"expenses",e),r={};return void 0!==t.item&&(r.item=t.item),void 0!==t.amount&&(r.amount=Number(t.amount)),void 0!==t.category&&(r.category=t.category),void 0!==t.date&&(r.date=t.date),void 0!==t.productLines&&(r.productLines=t.productLines),r.updatedAt=_v(),await bv(n,r),!0}(p,n),d(e=>e.map(e=>e.id===p?je(je({},e),{},{item:n.item,amount:n.amount,productLines:n.productLines,dateInput:m.dateInput,createdAtStr:n.date?n.date.toLocaleString():e.createdAtStr}):e)),C(),alert("Ticket actualizado.")}catch(t){console.error("updateExpense error:",t),alert("Error actualizando ticket: "+(t.message||t))}},N=async e=>{if(confirm("Borrar este ticket?"))try{await async function(e){const t=py(Wb,"expenses",e);return await wv(t),!0}(e),d(t=>t.filter(t=>t.id!==e)),alert("Ticket borrado.")}catch(t){console.error("deleteExpense error:",t),alert("Error borrando ticket: "+(t.message||t))}},R=()=>y(e=>je(je({},e),{},{productLines:[...e.productLines||[],{productId:null,label:"",price:0,qty:1}]})),D=(e,t)=>y(n=>je(je({},n),{},{productLines:n.productLines.map((n,r)=>r===e?je(je({},n),t):n)}));return(0,rw.jsx)("div",{style:{padding:12},children:(0,rw.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:12},children:[(0,rw.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:8},children:[(0,rw.jsxs)("div",{children:[(0,rw.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16,flexWrap:"wrap",gap:12},children:[(0,rw.jsx)("h3",{style:{margin:0,fontSize:24,fontWeight:700,color:"#111827"},children:"TPV"}),(0,rw.jsxs)("div",{style:{display:"flex",gap:8,alignItems:"center",flexWrap:"wrap"},children:[(0,rw.jsxs)("select",{value:S,onChange:e=>x(e.target.value),style:{fontSize:14,padding:"8px 12px",borderRadius:8,border:"1px solid #e5e7eb",background:"#fff",color:"#374151",cursor:"pointer",fontWeight:500},children:[(0,rw.jsx)("option",{value:"all",children:"\ud83d\udccb Todas las categor\xedas"}),T.map(e=>(0,rw.jsx)("option",{value:e,children:e},e))]}),w&&(0,rw.jsxs)("span",{style:{fontSize:13,color:"#6b7280",fontWeight:500,background:"#fef3c7",padding:"4px 12px",borderRadius:20,border:"1px solid #fbbf24"},children:[v.length," ",1===v.length?"favorito":"favoritos"]}),(0,rw.jsxs)("button",{onClick:()=>E(!w),style:{fontSize:14,padding:"8px 16px",borderRadius:8,fontWeight:600,background:w?"linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%)":"#fff",color:w?"#fff":"#374151",border:w?"none":"1px solid #e5e7eb",cursor:"pointer",transition:"all 0.2s ease",boxShadow:w?"0 4px 12px rgba(251, 191, 36, 0.3)":"0 1px 3px rgba(0,0,0,0.1)",display:"flex",alignItems:"center",gap:6},onMouseEnter:e=>{w?(e.currentTarget.style.background="linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",e.currentTarget.style.transform="translateY(-1px)",e.currentTarget.style.boxShadow="0 6px 16px rgba(251, 191, 36, 0.4)"):(e.currentTarget.style.background="#f9fafb",e.currentTarget.style.borderColor="#d1d5db")},onMouseLeave:e=>{w?(e.currentTarget.style.background="linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%)",e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="0 4px 12px rgba(251, 191, 36, 0.3)"):(e.currentTarget.style.background="#fff",e.currentTarget.style.borderColor="#e5e7eb")},children:[(0,rw.jsx)("span",{style:{fontSize:16},children:w?"\u2b50":"\ud83d\udccb"}),(0,rw.jsx)("span",{children:w?"Favoritos":"Todos"})]})]})]}),(0,rw.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(160px, 1fr))",gap:16},children:I.map(e=>{const n=v.includes(e.id);return(0,rw.jsxs)("div",{className:"card",style:{padding:"16px",position:"relative",borderRadius:"20px",display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center"},children:[(0,rw.jsx)("button",{onClick:()=>(async e=>{if(t&&t.uid)try{const n=await nw(t.uid,e);b(n)}catch(n){console.error("Error toggling favorite:",n),alert("Error al actualizar favoritos")}})(e.id),style:{position:"absolute",top:12,right:12,background:"transparent",border:"none",cursor:"pointer",fontSize:22,padding:4,lineHeight:1,zIndex:2},title:n?"Quitar de favoritos":"A\xf1adir a favoritos",children:n?"\u2b50":"\u2606"}),(0,rw.jsxs)("div",{style:{paddingTop:8,width:"100%",display:"flex",flexDirection:"column",alignItems:"center",gap:8},children:[(0,rw.jsx)("div",{style:{fontWeight:600,fontSize:15,marginBottom:4},children:e.label}),(0,rw.jsx)("div",{style:{fontSize:12,color:"#666",marginBottom:4},children:e.category||"Sin categor\xeda"}),(0,rw.jsxs)("div",{style:{fontSize:18,fontWeight:700,color:"#1976d2",marginBottom:8},children:[Number(e.price||0).toFixed(2)," \u20ac"]}),(0,rw.jsx)("button",{className:"btn-primary full",style:{marginTop:0,fontSize:15,padding:"14px 20px",borderRadius:"50px",fontWeight:"600",minWidth:"120px",boxShadow:"0 4px 12px rgba(25, 118, 210, 0.3)",transition:"all 0.2s ease"},onClick:()=>(e=>a(t=>[...t,{productId:e.id,label:e.label,price:Number(e.price)||0,qty:1}]))(e),onMouseEnter:e=>{e.currentTarget.style.transform="scale(1.05)",e.currentTarget.style.boxShadow="0 6px 16px rgba(25, 118, 210, 0.4)"},onMouseLeave:e=>{e.currentTarget.style.transform="scale(1)",e.currentTarget.style.boxShadow="0 4px 12px rgba(25, 118, 210, 0.3)"},children:"A\xf1adir"})]})]},e.id)})}),w&&0===I.length&&(0,rw.jsxs)("div",{style:{textAlign:"center",padding:"60px 20px",background:"linear-gradient(135deg, #fef3c7 0%, #fde68a 100%)",borderRadius:16,border:"2px dashed #fbbf24"},children:[(0,rw.jsx)("div",{style:{fontSize:64,marginBottom:16,filter:"grayscale(50%)",opacity:.6},children:"\u2b50"}),(0,rw.jsx)("div",{style:{fontSize:18,fontWeight:600,color:"#92400e",marginBottom:8},children:"No tienes productos favoritos"}),(0,rw.jsxs)("div",{style:{fontSize:14,color:"#78350f",maxWidth:300,margin:"0 auto",lineHeight:1.6},children:["Haz clic en el bot\xf3n ",(0,rw.jsx)("span",{style:{display:"inline-block",width:24,height:24,background:"#fef3c7",border:"1px solid #fbbf24",borderRadius:"50%",verticalAlign:"middle",lineHeight:"22px",fontSize:12},children:"\u2b50"})," en cualquier producto para a\xf1adirlo a tus favoritos"]})]})]}),(0,rw.jsxs)("div",{children:[(0,rw.jsx)("h4",{style:{margin:"8px 0"},children:"Carrito"}),(0,rw.jsxs)("div",{style:{background:"#fafafa",padding:8,borderRadius:8},children:[0===s.length?(0,rw.jsx)("div",{className:"muted",children:"Carrito vac\xedo"}):s.map((e,t)=>(0,rw.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"6px 0",borderBottom:"1px solid #eee"},children:[(0,rw.jsxs)("div",{style:{flex:1},children:[(0,rw.jsx)("div",{style:{fontWeight:600},children:e.label}),(0,rw.jsxs)("div",{style:{fontSize:13,color:"#666"},children:["Precio: ",Number(e.price).toFixed(2)," \u20ac"]})]}),(0,rw.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,rw.jsx)("input",{className:"small-input",type:"number",min:"1",value:e.qty,onChange:e=>{return n=t,r={qty:Number(e.target.value)||1},a(e=>e.map((e,t)=>t===n?je(je({},e),r):e));var n,r}}),(0,rw.jsxs)("div",{style:{minWidth:72,textAlign:"right",fontWeight:700},children:[(e.qty*e.price).toFixed(2)," \u20ac"]}),(0,rw.jsx)("button",{className:"btn-ghost",onClick:()=>{return e=t,a(t=>t.filter((t,n)=>n!==e));var e},children:"Quitar"})]})]},t)),(0,rw.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:10},children:[(0,rw.jsx)("div",{style:{fontWeight:700},children:"Total:"}),(0,rw.jsxs)("div",{style:{fontSize:18,fontWeight:800},children:[k.toFixed(2)," \u20ac"]})]}),(0,rw.jsx)("div",{style:{marginTop:10},children:(0,rw.jsx)("button",{className:"btn-primary full",onClick:async()=>{if(!_.length)return void alert("Carrito vac\xedo");if(!t||!t.uid)return void alert("No autenticado");c(!0);const e=_,n=e.reduce((e,t)=>e+t.price*t.qty,0),r={uid:t.uid,userEmail:t.email||"",productLines:e,item:e.map(e=>"".concat(e.qty,"x ").concat(e.label)).join(", "),category:"venta",amount:n};try{const e=await async function(){let{uid:e,userEmail:t,item:n,category:r,amount:i,date:o=null,productId:s=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!e)throw new Error("UID requerido para addSale");const a={uid:e,userEmail:t||"",item:n||"",category:r||"",amount:Number(i)||0,productId:s||null,date:o||_v(),createdAt:_v()};return je({id:(await Ev(fy(Wb,"expenses"),a)).id},a)}({uid:r.uid,userEmail:r.userEmail,item:r.item,category:r.category,amount:r.amount}),t=je(je({id:e.id},r),{},{createdAtStr:(new Date).toLocaleString(),dateInput:aw(new Date)});d(e=>[t,...e]),alert("Venta guardada correctamente."),a([])}catch(i){console.error("addSale error full:",i),alert("Error al guardar la venta: ".concat(i.code||""," \u2014 ").concat(i.message||i,". Revisa la consola."))}finally{c(!1)}},disabled:l,children:"Total y Guardar"})})]})]})]}),(0,rw.jsxs)("div",{children:[(0,rw.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",margin:"8px 0"},children:[(0,rw.jsx)("h4",{style:{margin:0},children:"Hist\xf3rico de tickets"}),(0,rw.jsx)("button",{className:"btn-small",onClick:()=>f(e=>!e),style:{fontSize:"12px"},children:h?"\u25bc Ocultar":"\u25b6 Mostrar"})]}),h&&(0===u.length?(0,rw.jsx)("div",{children:"No hay ventas registradas."}):(0,rw.jsx)("div",{style:{overflowX:"auto"},children:(0,rw.jsxs)("table",{className:"table-responsive",style:{width:"100%",borderCollapse:"collapse"},children:[(0,rw.jsx)("thead",{children:(0,rw.jsxs)("tr",{children:[(0,rw.jsx)("th",{style:{textAlign:"left",padding:8},children:"Fecha"}),(0,rw.jsx)("th",{style:{textAlign:"left",padding:8},children:"Productos"}),(0,rw.jsx)("th",{style:{textAlign:"right",padding:8},children:"Total"}),(0,rw.jsx)("th",{style:{padding:8},children:"Acciones"})]})}),(0,rw.jsx)("tbody",{children:u.map(e=>(0,rw.jsxs)("tr",{style:{borderTop:"1px solid #eee",verticalAlign:"top"},children:[(0,rw.jsx)("td",{style:{padding:8,minWidth:140},children:p===e.id?(0,rw.jsx)("input",{type:"datetime-local",value:m.dateInput,onChange:e=>y(t=>je(je({},t),{},{dateInput:e.target.value}))}):e.createdAtStr}),(0,rw.jsx)("td",{style:{padding:8,maxWidth:420},children:p===e.id?(0,rw.jsxs)("div",{children:[(0,rw.jsx)("button",{className:"btn-small",onClick:R,children:"+ L\xednea"}),(m.productLines||[]).map((e,t)=>(0,rw.jsxs)("div",{style:{display:"flex",gap:8,alignItems:"center",marginTop:6},children:[(0,rw.jsx)("input",{className:"small-input",placeholder:"Producto",value:e.label,onChange:e=>D(t,{label:e.target.value})}),(0,rw.jsx)("input",{className:"small-input",type:"number",step:"0.01",style:{width:90},value:e.price,onChange:e=>D(t,{price:Number(e.target.value)||0})}),(0,rw.jsx)("input",{className:"small-input",type:"number",style:{width:70},value:e.qty,min:"1",onChange:e=>D(t,{qty:Number(e.target.value)||1})}),(0,rw.jsx)("button",{className:"btn-ghost",onClick:()=>{return e=t,y(t=>je(je({},t),{},{productLines:t.productLines.filter((t,n)=>n!==e)}));var e},children:"Quitar"})]},t)),(0,rw.jsxs)("div",{style:{marginTop:8},children:[(0,rw.jsx)("label",{style:{display:"block",fontSize:13},children:"Resumen"}),(0,rw.jsx)("input",{className:"full-input",style:{marginTop:4},value:m.item,onChange:e=>y(t=>je(je({},t),{},{item:e.target.value}))}),(0,rw.jsx)("div",{style:{marginTop:8,display:"flex",gap:8},children:(0,rw.jsxs)("div",{style:{flex:1},children:[(0,rw.jsx)("label",{children:"Total"}),(0,rw.jsx)("input",{className:"small-input",type:"number",step:"0.01",value:m.amount,onChange:e=>y(t=>je(je({},t),{},{amount:Number(e.target.value)||0}))})]})})]})]}):(0,rw.jsx)("div",{children:sw(e.productLines||[]).map((e,t)=>(0,rw.jsxs)("div",{children:[e.qty," x ",e.label," \u2014 ",Number(e.price||0).toFixed(2)," \u20ac"]},t))})}),(0,rw.jsxs)("td",{style:{padding:8,textAlign:"right"},children:[Number(e.amount||0).toFixed(2)," \u20ac"]}),(0,rw.jsx)("td",{style:{padding:8},children:p===e.id?(0,rw.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:8},children:[(0,rw.jsx)("button",{className:"btn-primary",onClick:A,children:"Guardar"}),(0,rw.jsx)("button",{className:"btn-ghost",onClick:C,children:"Cancelar"})]}):(0,rw.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:8},children:[(0,rw.jsx)("button",{className:"btn-small",onClick:()=>{return g((t=e).id),void y({item:t.item||"",amount:t.amount||0,productLines:(t.productLines||[]).map(e=>je({},e)),dateInput:t.dateInput||aw(t.createdAt)});var t},children:"Editar"}),(0,rw.jsx)("button",{className:"btn-ghost",onClick:()=>N(e.id),children:"Borrar"})]})})]},e.id))})]})}))]})]})})}function cw(e){if(!e)return"";const t=e.toDate?e.toDate():new Date(e);return new Date(t.getTime()-6e4*t.getTimezoneOffset()).toISOString().slice(0,16)}function uw(e){if(!e)return null;const t=new Date(e);return isNaN(t.getTime())?null:t}function dw(e){if("Sin fecha"===e)return e;const[t,n]=e.split("-");return"".concat(["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"][parseInt(n)-1]," ").concat(t)}function hw(e){let{user:t,profile:n}=e;const[r,o]=(0,i.useState)(function(){const e=new Date;return cw(new Date(e.getFullYear(),e.getMonth()-1,1,0,0,0))}()),[s,a]=(0,i.useState)(function(){const e=new Date;return cw(new Date(e.getFullYear(),e.getMonth(),0,23,59,59))}()),[l,c]=(0,i.useState)(!1),[u,d]=(0,i.useState)([]),[h,f]=(0,i.useState)(!1),[p,g]=(0,i.useState)({}),[m,y]=(0,i.useState)(!1),[v,b]=(0,i.useState)(!1);(0,i.useEffect)(()=>{c(!(null===n||void 0===n||!n.isAdmin))},[n]);const w=async e=>{e&&e.preventDefault(),f(!0);try{const e=uw(r),n=uw(s),i=await ew({uid:null===t||void 0===t?void 0:t.uid,isAdmin:l,startDate:e,endDate:n});d(i)}catch(n){console.error("queryExpenses error:",n),alert("Error cargando listados: "+(n.message||n))}finally{f(!1)}};(0,i.useEffect)(()=>{w()},[t,n]);const E=e=>{if(!e.length)return"";const t=[["Fecha","Usuario","Email","Producto/Servicio","Categor\xeda","Cantidad","Importe (\u20ac)","ID Transacci\xf3n"].join(","),...e.map(e=>{const t=e.createdAt&&e.createdAt.toDate?e.createdAt.toDate():e.date?e.date.toDate?e.date.toDate():new Date(e.date):null,n=t?t.toLocaleString("es-ES"):"Sin fecha",r=e.item||(e.productLines?e.productLines.map(e=>"".concat(e.qty,"x ").concat(e.label)).join("; "):""),i=e.userEmail||"Sin email",o=e.category||"Sin categor\xeda",s=Number(e.amount||0).toFixed(2),a=e=>("string"!==typeof e&&(e=String(e)),e.includes(",")||e.includes('"')||e.includes("\n")?'"'.concat(e.replace(/"/g,'""'),'"'):e);return[a(n),a(i.split("@")[0]),a(i),a(r),a(o),"1",s,a(e.id)].join(",")})].join("\n");return t},S=(e,t)=>{const n=new Blob([e],{type:"text/csv;charset=utf-8;"}),r=document.createElement("a");if(void 0!==r.download){const e=URL.createObjectURL(n);r.setAttribute("href",e),r.setAttribute("download",t),r.style.visibility="hidden",document.body.appendChild(r),r.click(),document.body.removeChild(r)}},x=(()=>{const e={};return u.forEach(t=>{const n=function(e){if(!e)return"Sin fecha";const t=e.toDate?e.toDate():new Date(e),n=t.getFullYear(),r=String(t.getMonth()+1).padStart(2,"0");return"".concat(n,"-").concat(r)}(t.createdAt&&t.createdAt.toDate?t.createdAt.toDate():t.date?t.date.toDate?t.date.toDate():new Date(t.date):null),r=t.userEmail||t.uid||"Usuario desconocido",i="".concat(n,"|").concat(r);e[i]||(e[i]={month:n,user:r,total:0,count:0,expenses:[]}),e[i].total+=Number(t.amount||0),e[i].count+=1,e[i].expenses.push(t)}),Object.values(e).sort((e,t)=>t.month===e.month?e.user.localeCompare(t.user):t.month.localeCompare(e.month))})();return(0,rw.jsxs)("div",{style:{padding:12},children:[(0,rw.jsx)("h3",{style:{marginBottom:12},children:"Listados"}),(0,rw.jsxs)("form",{onSubmit:w,style:{display:"flex",flexDirection:"column",gap:8,maxWidth:420},children:[(0,rw.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:4},children:[(0,rw.jsx)("label",{style:{fontSize:13},children:"Desde"}),(0,rw.jsx)("input",{type:"datetime-local",value:r,onChange:e=>o(e.target.value),style:{padding:"8px",border:"1px solid #ddd",borderRadius:"8px",fontSize:"14px",width:"100%"}})]}),(0,rw.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:4},children:[(0,rw.jsx)("label",{style:{fontSize:13},children:"Hasta"}),(0,rw.jsx)("input",{type:"datetime-local",value:s,onChange:e=>a(e.target.value),style:{padding:"8px",border:"1px solid #ddd",borderRadius:"8px",fontSize:"14px",width:"100%"}})]}),(0,rw.jsxs)("div",{style:{display:"flex",gap:8,marginTop:6},children:[(0,rw.jsx)("button",{className:"btn-primary",type:"submit",style:{flex:1},children:"Buscar"}),(0,rw.jsx)("button",{type:"button",className:"btn-ghost",onClick:()=>{o(""),a(""),d([]),g({})},style:{flex:1},children:"Limpiar"}),(0,rw.jsx)("button",{type:"button",className:"btn-secondary",onClick:()=>y(!0),style:{backgroundColor:"#28a745",color:"#fff",border:"none",padding:"8px 16px",borderRadius:"4px",cursor:"pointer"},children:"\ud83d\udcca Exportar CSV"})]})]}),(0,rw.jsx)("div",{style:{marginTop:18},children:h?(0,rw.jsx)("div",{children:"Cargando..."}):(0,rw.jsxs)("div",{children:[(0,rw.jsxs)("div",{style:{fontSize:14,marginBottom:8},children:["Total de gastos: ",u.length," | Agrupaciones: ",x.length]}),(0,rw.jsx)("div",{style:{overflowX:"auto"},children:(0,rw.jsxs)("table",{className:"table-responsive",style:{width:"auto",borderCollapse:"collapse",whiteSpace:"nowrap"},children:[(0,rw.jsx)("thead",{children:(0,rw.jsxs)("tr",{children:[(0,rw.jsx)("th",{style:{textAlign:"left",padding:"8px 16px",whiteSpace:"nowrap"},children:"Mes"}),(0,rw.jsx)("th",{style:{textAlign:"left",padding:"8px 16px",whiteSpace:"nowrap"},children:"Usuario"}),(0,rw.jsx)("th",{style:{textAlign:"center",padding:"8px 16px",whiteSpace:"nowrap"},children:"Gastos"}),(0,rw.jsx)("th",{style:{textAlign:"right",padding:"8px 16px",whiteSpace:"nowrap"},children:"Total"}),(0,rw.jsx)("th",{style:{textAlign:"center",padding:"8px 16px",whiteSpace:"nowrap"},children:"Detalle"})]})}),(0,rw.jsx)("tbody",{children:x.map(e=>{const t="".concat(e.month,"|").concat(e.user),n=p[t];return(0,rw.jsxs)(i.Fragment,{children:[(0,rw.jsxs)("tr",{style:{borderTop:"2px solid #ddd",backgroundColor:"#f9f9f9"},children:[(0,rw.jsx)("td",{style:{padding:"8px 16px",fontWeight:"500",whiteSpace:"nowrap"},children:dw(e.month)}),(0,rw.jsx)("td",{style:{padding:"8px 16px",whiteSpace:"nowrap"},children:e.user}),(0,rw.jsx)("td",{style:{padding:"8px 16px",textAlign:"center",whiteSpace:"nowrap"},children:e.count}),(0,rw.jsxs)("td",{style:{padding:"8px 16px",textAlign:"right",fontWeight:"600",whiteSpace:"nowrap"},children:[e.total.toFixed(2)," \u20ac"]}),(0,rw.jsx)("td",{style:{padding:"8px 16px",textAlign:"center",whiteSpace:"nowrap"},children:(0,rw.jsx)("button",{className:"btn-small",onClick:()=>((e,t)=>{const n="".concat(e,"|").concat(t);g(e=>je(je({},e),{},{[n]:!e[n]}))})(e.month,e.user),children:n?"Ocultar":"Ver"})})]}),n&&e.expenses.map(e=>{const t=e.createdAt&&e.createdAt.toDate?e.createdAt.toDate():e.date?e.date.toDate?e.date.toDate():new Date(e.date):null,n=t?t.toLocaleString():"";return(0,rw.jsxs)("tr",{style:{borderTop:"1px solid #eee",backgroundColor:"#fff"},children:[(0,rw.jsx)("td",{style:{padding:"8px 16px",paddingLeft:32,fontSize:13,whiteSpace:"nowrap"},children:n}),(0,rw.jsx)("td",{style:{padding:"8px 16px",fontSize:13,whiteSpace:"normal"},colSpan:"2",children:e.item||(e.productLines?e.productLines.map(e=>"".concat(e.qty,"x ").concat(e.label)).join(", "):"")}),(0,rw.jsxs)("td",{style:{padding:"8px 16px",textAlign:"right",fontSize:13,whiteSpace:"nowrap"},children:[Number(e.amount||0).toFixed(2)," \u20ac"]}),(0,rw.jsx)("td",{})]},e.id)})]},t)})})]})})]})}),m&&(0,rw.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:(0,rw.jsxs)("div",{style:{backgroundColor:"#fff",padding:24,borderRadius:8,maxWidth:500,width:"90%",boxShadow:"0 4px 20px rgba(0,0,0,0.3)"},children:[(0,rw.jsx)("h3",{style:{marginTop:0,marginBottom:16},children:"Exportar a CSV"}),(0,rw.jsx)("p",{style:{marginBottom:20,color:"#666",lineHeight:1.5},children:"Selecciona el tipo de exportaci\xf3n que deseas realizar:"}),(0,rw.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:12,marginBottom:24},children:[(0,rw.jsxs)("button",{onClick:()=>{const e=E(u),t=r?new Date(r).toLocaleDateString("es-ES"):"inicio",n=s?new Date(s).toLocaleDateString("es-ES"):"fin",i="gastos_".concat(t,"_").concat(n,"_").concat((new Date).toLocaleDateString("es-ES"),".csv");S(e,i),y(!1)},disabled:v,style:{padding:"12px 16px",backgroundColor:"#1976d2",color:"#fff",border:"none",borderRadius:6,cursor:v?"not-allowed":"pointer",opacity:v?.7:1,textAlign:"left",fontSize:14},children:[(0,rw.jsx)("strong",{children:"\ud83d\udcc5 Exportar datos filtrados"}),(0,rw.jsx)("br",{}),(0,rw.jsxs)("small",{style:{opacity:.9},children:["Exporta solo los gastos mostrados actualmente (",u.length," registros)",r&&s&&(0,rw.jsxs)("span",{children:[" desde ",new Date(r).toLocaleDateString("es-ES")," hasta ",new Date(s).toLocaleDateString("es-ES")]})]})]}),(0,rw.jsxs)("button",{onClick:async()=>{b(!0);try{const e=await ew({uid:null===t||void 0===t?void 0:t.uid,isAdmin:l,startDate:null,endDate:null}),n=E(e),r="gastos_completo_".concat((new Date).toLocaleDateString("es-ES"),".csv");S(n,r),y(!1)}catch(e){console.error("Error exportando datos completos:",e),alert("Error exportando datos: "+(e.message||e))}finally{b(!1)}},disabled:v,style:{padding:"12px 16px",backgroundColor:"#28a745",color:"#fff",border:"none",borderRadius:6,cursor:v?"not-allowed":"pointer",opacity:v?.7:1,textAlign:"left",fontSize:14},children:[(0,rw.jsx)("strong",{children:"\ud83d\udcca Exportar datos completos"}),(0,rw.jsx)("br",{}),(0,rw.jsxs)("small",{style:{opacity:.9},children:["Exporta TODOS los gastos de la base de datos",l?" (todos los usuarios)":" (solo tus gastos)"]})]})]}),v&&(0,rw.jsx)("div",{style:{padding:12,backgroundColor:"#fff3cd",border:"1px solid #ffeaa7",borderRadius:4,marginBottom:16,textAlign:"center",color:"#856404"},children:"\u23f3 Generando archivo CSV... Por favor espera."}),(0,rw.jsx)("div",{style:{display:"flex",gap:12,justifyContent:"flex-end"},children:(0,rw.jsx)("button",{onClick:()=>y(!1),disabled:v,style:{padding:"8px 16px",backgroundColor:"#666",color:"#fff",border:"none",borderRadius:4,cursor:v?"not-allowed":"pointer",opacity:v?.7:1},children:"Cancelar"})})]})})]})}function fw(e){let{profile:t}=e;const[n,r]=(0,i.useState)([]),[o,s]=(0,i.useState)(!0),[a,l]=(0,i.useState)(null),[c,u]=(0,i.useState)({label:"",category:"",price:0,active:!0}),[d,h]=(0,i.useState)({label:"",category:"",price:0,active:!0});(0,i.useEffect)(()=>{const e=Zb(e=>{r(e),s(!1)},!1);return()=>e&&e()},[]);const f=()=>{l(null),u({label:"",category:"",price:0,active:!0})},p=async e=>{try{await async function(e,t){const n=py(Wb,"products",e);return await bv(n,je(je({},t),{},{updatedAt:_v()})),!0}(e,{label:c.label,category:c.category,price:Number(c.price||0),active:c.active}),f(),alert("Producto actualizado")}catch(t){console.error("updateProduct error:",t),alert("Error actualizando producto: "+(t.message||t))}},g=async e=>{if(confirm('Borrar producto "'.concat(e.label,'"?')))try{await async function(e){const t=py(Wb,"products",e);return await wv(t),!0}(e.id),alert("Producto borrado")}catch(t){console.error("deleteProduct error:",t),alert("Error borrando producto: "+(t.message||t))}};return(0,rw.jsxs)("div",{style:{padding:12},children:[(0,rw.jsx)("h3",{style:{marginBottom:12},children:"Productos"}),(0,rw.jsxs)("div",{style:{marginBottom:12},children:[(0,rw.jsx)("h4",{style:{marginBottom:8},children:"A\xf1adir producto"}),(0,rw.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:8},children:[(0,rw.jsx)("input",{className:"full-input",placeholder:"Nombre",value:d.label,onChange:e=>h(t=>je(je({},t),{},{label:e.target.value}))}),(0,rw.jsx)("input",{className:"full-input",placeholder:"Categor\xeda",value:d.category,onChange:e=>h(t=>je(je({},t),{},{category:e.target.value}))}),(0,rw.jsx)("input",{className:"full-input",placeholder:"Precio",type:"number",step:"0.01",value:d.price,onChange:e=>h(t=>je(je({},t),{},{price:e.target.value}))}),(0,rw.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,rw.jsx)("input",{type:"checkbox",checked:d.active,onChange:e=>h(t=>je(je({},t),{},{active:e.target.checked}))}),"Activo"]}),(0,rw.jsx)("button",{className:"btn-primary full",onClick:async()=>{if(d.label)try{await async function(e){const t=await Ev(fy(Wb,"products"),je(je({},e),{},{createdAt:_v()}));return je({id:t.id},e)}({label:d.label,category:d.category,price:Number(d.price||0),active:!!d.active}),h({label:"",category:"",price:0,active:!0}),alert("Producto a\xf1adido")}catch(e){console.error("addProduct error:",e),alert("Error a\xf1adiendo producto: "+(e.message||e))}else alert("Introduce nombre")},children:"A\xf1adir producto"})]})]}),o?(0,rw.jsx)("div",{children:"Cargando..."}):(0,rw.jsx)("div",{style:{overflowX:"auto"},children:(0,rw.jsxs)("table",{className:"table-responsive",style:{width:"100%",borderCollapse:"collapse"},children:[(0,rw.jsx)("thead",{children:(0,rw.jsxs)("tr",{children:[(0,rw.jsx)("th",{style:{textAlign:"left",padding:8},children:"Nombre"}),(0,rw.jsx)("th",{style:{padding:8},children:"Categor\xeda"}),(0,rw.jsx)("th",{style:{padding:8},children:"Precio"}),(0,rw.jsx)("th",{style:{padding:8},children:"Activo"}),(0,rw.jsx)("th",{style:{padding:8},children:"Acciones"})]})}),(0,rw.jsx)("tbody",{children:n.map(e=>(0,rw.jsxs)("tr",{style:{borderTop:"1px solid #eee"},children:[(0,rw.jsx)("td",{style:{padding:8},children:a===e.id?(0,rw.jsx)("input",{className:"full-input",value:c.label,onChange:e=>u(t=>je(je({},t),{},{label:e.target.value}))}):e.label}),(0,rw.jsx)("td",{style:{padding:8},children:a===e.id?(0,rw.jsx)("input",{className:"full-input",value:c.category,onChange:e=>u(t=>je(je({},t),{},{category:e.target.value}))}):e.category||"\u2014"}),(0,rw.jsx)("td",{style:{padding:8,textAlign:"right"},children:a===e.id?(0,rw.jsx)("input",{className:"small-input",type:"number",step:"0.01",value:c.price,onChange:e=>u(t=>je(je({},t),{},{price:e.target.value}))}):Number(e.price||0).toFixed(2)+" \u20ac"}),(0,rw.jsx)("td",{style:{padding:8,textAlign:"center"},children:a===e.id?(0,rw.jsx)("input",{type:"checkbox",checked:c.active,onChange:e=>u(t=>je(je({},t),{},{active:e.target.checked}))}):e.active?"S\xed":"No"}),(0,rw.jsx)("td",{style:{padding:8},children:a===e.id?(0,rw.jsxs)(rw.Fragment,{children:[(0,rw.jsx)("button",{className:"btn-primary",onClick:()=>p(e.id),children:"Guardar"}),(0,rw.jsx)("button",{className:"btn-ghost",onClick:f,style:{marginLeft:8},children:"Cancelar"})]}):(0,rw.jsxs)(rw.Fragment,{children:[(0,rw.jsx)("button",{className:"btn-small",onClick:()=>(e=>{l(e.id),u({label:e.label||"",category:e.category||"",price:Number(e.price||0),active:!!e.active})})(e),children:"Editar"}),(0,rw.jsx)("button",{className:"btn-ghost",onClick:()=>g(e),style:{marginLeft:8},children:"Borrar"})]})})]},e.id))})]})})]})}const pw=["id","email"];function gw(e){let{user:t,profile:n}=e;const[r,o]=(0,i.useState)([]),[s,a]=(0,i.useState)(!0),[l,c]=(0,i.useState)(""),[u,d]=(0,i.useState)(null),[h,f]=(0,i.useState)("");(0,i.useEffect)(()=>{p()},[]);const p=async()=>{try{a(!0);const e=await async function(){try{const e=Jy(fy(Wb,"users"),rv("email","asc"));return(await yv(e)).docs.map(e=>je({id:e.id},e.data()))}catch(e){console.error("queryAllUsers error:",e);let t=(await yv(fy(Wb,"users"))).docs.map(e=>je({id:e.id},e.data()));return t.sort((e,t)=>String(e.email||"").localeCompare(String(t.email||""))),t}}();o(e)}catch(e){console.error("Error cargando usuarios:",e),f("Error cargando usuarios: "+e.message)}finally{a(!1)}},g=r.filter(e=>{const t=l.toLowerCase();return(e.name||"").toLowerCase().includes(t)||(e.lastName||"").toLowerCase().includes(t)||(e.email||"").toLowerCase().includes(t)||(e.phone||"").toLowerCase().includes(t)}),m=e=>{if(!e)return"N/A";try{return(e.toDate?e.toDate():new Date(e)).toLocaleDateString("es-ES")}catch(t){return"N/A"}};return s?(0,rw.jsx)("div",{style:{padding:16},children:"Cargando usuarios..."}):(0,rw.jsxs)("div",{style:{padding:16},children:[(0,rw.jsx)("h2",{children:"Gesti\xf3n de Socios"}),h&&(0,rw.jsxs)("div",{style:{padding:12,margin:"12px 0",backgroundColor:h.includes("Error")?"#ffebee":"#e8f5e8",color:h.includes("Error")?"#c62828":"#2e7d32",borderRadius:4,border:"1px solid ".concat(h.includes("Error")?"#ffcdd2":"#c8e6c9")},children:[h,(0,rw.jsx)("button",{onClick:()=>f(""),style:{float:"right",background:"none",border:"none",cursor:"pointer",fontSize:16},children:"\xd7"})]}),(0,rw.jsx)("div",{style:{marginBottom:16},children:(0,rw.jsx)("input",{type:"text",placeholder:"Buscar por nombre, apellidos, email o tel\xe9fono...",value:l,onChange:e=>c(e.target.value),style:{width:"100%",maxWidth:400,padding:8,border:"1px solid #ddd",borderRadius:4}})}),(0,rw.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:12,marginBottom:20},children:[(0,rw.jsxs)("div",{style:{padding:12,backgroundColor:"#f5f5f5",borderRadius:6,textAlign:"center"},children:[(0,rw.jsx)("div",{style:{fontSize:24,fontWeight:"bold",color:"#1976d2"},children:g.length}),(0,rw.jsxs)("div",{style:{fontSize:12,color:"#666"},children:["Socios",l?" (filtrados)":""]})]}),(0,rw.jsxs)("div",{style:{padding:12,backgroundColor:"#f5f5f5",borderRadius:6,textAlign:"center"},children:[(0,rw.jsx)("div",{style:{fontSize:24,fontWeight:"bold",color:"#388e3c"},children:g.filter(e=>e.isAdmin).length}),(0,rw.jsx)("div",{style:{fontSize:12,color:"#666"},children:"Administradores"})]})]}),(0,rw.jsx)("div",{style:{overflowX:"auto"},children:(0,rw.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",backgroundColor:"#fff",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[(0,rw.jsx)("thead",{children:(0,rw.jsxs)("tr",{style:{backgroundColor:"#f8f9fa"},children:[(0,rw.jsx)("th",{style:{padding:12,textAlign:"left",borderBottom:"2px solid #dee2e6"},children:"Usuario"}),(0,rw.jsx)("th",{style:{padding:12,textAlign:"left",borderBottom:"2px solid #dee2e6"},children:"Contacto"}),(0,rw.jsx)("th",{style:{padding:12,textAlign:"left",borderBottom:"2px solid #dee2e6"},children:"Rol"}),(0,rw.jsx)("th",{style:{padding:12,textAlign:"left",borderBottom:"2px solid #dee2e6"},children:"Registro"}),(0,rw.jsx)("th",{style:{padding:12,textAlign:"center",borderBottom:"2px solid #dee2e6"},children:"Acciones"})]})}),(0,rw.jsx)("tbody",{children:g.map(e=>(0,rw.jsxs)("tr",{style:{borderBottom:"1px solid #dee2e6"},children:[(0,rw.jsxs)("td",{style:{padding:12},children:[(0,rw.jsxs)("div",{style:{fontWeight:"bold"},children:[e.name||"Sin nombre"," ",e.lastName||""]}),(0,rw.jsx)("div",{style:{fontSize:12,color:"#666"},children:e.email})]}),(0,rw.jsxs)("td",{style:{padding:12},children:[(0,rw.jsx)("div",{children:e.phone||"Sin tel\xe9fono"}),(0,rw.jsxs)("div",{style:{fontSize:12,color:"#666"},children:["Nacimiento: ",e.birthDate||"N/A"]})]}),(0,rw.jsx)("td",{style:{padding:12},children:(0,rw.jsx)("span",{style:{padding:"4px 8px",borderRadius:12,fontSize:12,backgroundColor:e.isAdmin?"#e3f2fd":"#f3e5f5",color:e.isAdmin?"#1565c0":"#7b1fa2"},children:e.isAdmin?"Admin":"Usuario"})}),(0,rw.jsx)("td",{style:{padding:12},children:(0,rw.jsx)("div",{style:{fontSize:12,color:"#666"},children:m(e.createdAt)})}),(0,rw.jsx)("td",{style:{padding:12,textAlign:"center"},children:(0,rw.jsxs)("div",{style:{display:"flex",gap:4,justifyContent:"center",flexWrap:"wrap"},children:[(0,rw.jsx)("button",{onClick:()=>(e=>{d({id:e.id,name:e.name||"",lastName:e.lastName||"",phone:e.phone||"",birthDate:e.birthDate||"",isAdmin:e.isAdmin||!1,email:e.email||""})})(e),style:{padding:"4px 8px",fontSize:12,backgroundColor:"#1976d2",color:"#fff",border:"none",borderRadius:4,cursor:"pointer"},children:"Editar"}),(0,rw.jsx)("button",{onClick:()=>(async(e,t)=>{try{const n=await Xb(e);n.success?f("Email de restablecimiento enviado a ".concat(t," (").concat(e,")")):f("Error: ".concat(n.message))}catch(n){console.error("Error restableciendo contrase\xf1a:",n),f("Error enviando email de restablecimiento")}})(e.email,e.name||"usuario"),style:{padding:"4px 8px",fontSize:12,backgroundColor:"#f57c00",color:"#fff",border:"none",borderRadius:4,cursor:"pointer"},children:"Reset Pass"})]})})]},e.id))})]})}),0===g.length&&(0,rw.jsx)("div",{style:{textAlign:"center",padding:40,color:"#666"},children:l?"No se encontraron usuarios que coincidan con la b\xfasqueda":"No hay usuarios registrados"}),u&&(0,rw.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:(0,rw.jsxs)("div",{style:{backgroundColor:"#fff",padding:24,borderRadius:8,maxWidth:500,width:"90%",maxHeight:"90vh",overflow:"auto"},children:[(0,rw.jsx)("h3",{children:"Editar Usuario"}),(0,rw.jsxs)("div",{style:{marginBottom:12},children:[(0,rw.jsx)("label",{style:{display:"block",marginBottom:4,fontWeight:"bold"},children:"Email (no editable):"}),(0,rw.jsx)("input",{type:"email",value:u.email,disabled:!0,style:{width:"100%",padding:8,border:"1px solid #ddd",borderRadius:4,backgroundColor:"#f5f5f5"}})]}),(0,rw.jsxs)("div",{style:{marginBottom:12},children:[(0,rw.jsx)("label",{style:{display:"block",marginBottom:4,fontWeight:"bold"},children:"Nombre:"}),(0,rw.jsx)("input",{type:"text",value:u.name,onChange:e=>d(je(je({},u),{},{name:e.target.value})),style:{width:"100%",padding:8,border:"1px solid #ddd",borderRadius:4}})]}),(0,rw.jsxs)("div",{style:{marginBottom:12},children:[(0,rw.jsx)("label",{style:{display:"block",marginBottom:4,fontWeight:"bold"},children:"Apellidos:"}),(0,rw.jsx)("input",{type:"text",value:u.lastName,onChange:e=>d(je(je({},u),{},{lastName:e.target.value})),style:{width:"100%",padding:8,border:"1px solid #ddd",borderRadius:4}})]}),(0,rw.jsxs)("div",{style:{marginBottom:12},children:[(0,rw.jsx)("label",{style:{display:"block",marginBottom:4,fontWeight:"bold"},children:"Tel\xe9fono:"}),(0,rw.jsx)("input",{type:"tel",value:u.phone,onChange:e=>d(je(je({},u),{},{phone:e.target.value})),style:{width:"100%",padding:8,border:"1px solid #ddd",borderRadius:4}})]}),(0,rw.jsxs)("div",{style:{marginBottom:12},children:[(0,rw.jsx)("label",{style:{display:"block",marginBottom:4,fontWeight:"bold"},children:"Fecha de Nacimiento:"}),(0,rw.jsx)("input",{type:"date",value:u.birthDate,onChange:e=>d(je(je({},u),{},{birthDate:e.target.value})),style:{width:"100%",padding:8,border:"1px solid #ddd",borderRadius:4}})]}),(0,rw.jsx)("div",{style:{marginBottom:20},children:(0,rw.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,rw.jsx)("input",{type:"checkbox",checked:u.isAdmin,onChange:e=>d(je(je({},u),{},{isAdmin:e.target.checked}))}),(0,rw.jsx)("span",{style:{fontWeight:"bold"},children:"Es Administrador"})]})}),(0,rw.jsxs)("div",{style:{display:"flex",gap:12,justifyContent:"flex-end"},children:[(0,rw.jsx)("button",{onClick:()=>d(null),style:{padding:"8px 16px",backgroundColor:"#666",color:"#fff",border:"none",borderRadius:4,cursor:"pointer"},children:"Cancelar"}),(0,rw.jsx)("button",{onClick:async()=>{try{if(!u)return;const{id:e,email:t}=u,n=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(u,pw);await $b(e,n),f("Usuario actualizado correctamente"),d(null),p()}catch(e){console.error("Error actualizando usuario:",e),f("Error actualizando usuario: "+e.message)}},style:{padding:"8px 16px",backgroundColor:"#1976d2",color:"#fff",border:"none",borderRadius:4,cursor:"pointer"},children:"Guardar"})]})]})})]})}function mw(e){let{user:t,profile:n,onProfileUpdate:r}=e;const[o,s]=(0,i.useState)(!1),[a,l]=(0,i.useState)({name:"",lastName:"",phone:"",birthDate:""}),[c,u]=(0,i.useState)(!1);(0,i.useEffect)(()=>{n&&l({name:n.name||"",lastName:n.lastName||"",phone:n.phone||"",birthDate:n.birthDate||""})},[n]);const d=e=>{l(je(je({},a),{},{[e.target.name]:e.target.value}))},h=!(null!==n&&void 0!==n&&n.name)||!(null!==n&&void 0!==n&&n.lastName)||!(null!==n&&void 0!==n&&n.phone)||!(null!==n&&void 0!==n&&n.birthDate);return(0,rw.jsxs)("div",{style:{padding:16,maxWidth:600,margin:"0 auto"},children:[(0,rw.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:12,marginBottom:24},children:[!h&&(0,rw.jsx)("button",{className:"btn-ghost",onClick:()=>window.history.back(),style:{padding:"8px 12px"},children:"\u2190 Volver"}),(0,rw.jsx)("h2",{style:{margin:0},children:"Mi Perfil"})]}),h&&(0,rw.jsxs)("div",{style:{background:"#fff3cd",border:"2px solid #ffc107",borderRadius:"8px",padding:"16px",marginBottom:20,color:"#856404"},children:[(0,rw.jsx)("strong",{children:"\u26a0\ufe0f Perfil incompleto"}),(0,rw.jsx)("p",{style:{margin:"8px 0 0 0",fontSize:14},children:"Debes completar todos los campos de tu perfil para poder usar la aplicaci\xf3n."})]}),o?(0,rw.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),a.name&&a.lastName&&a.phone&&a.birthDate){u(!0);try{await $b(t.uid,a),alert("Perfil actualizado correctamente"),s(!1),r&&r()}catch(n){console.error("Error actualizando perfil:",n),alert("Error actualizando perfil: "+(n.message||n))}finally{u(!1)}}else alert("Todos los campos son obligatorios. Por favor, completa tu perfil.")},className:"card",style:{padding:20},children:[(0,rw.jsxs)("div",{style:{marginBottom:16},children:[(0,rw.jsx)("label",{style:{display:"block",fontSize:13,marginBottom:4,color:"#666"},children:"Email (no editable)"}),(0,rw.jsx)("input",{type:"text",value:null===t||void 0===t?void 0:t.email,disabled:!0,className:"full-input",style:{background:"#f5f5f5",cursor:"not-allowed"}})]}),(0,rw.jsxs)("div",{style:{marginBottom:16},children:[(0,rw.jsx)("label",{style:{display:"block",fontSize:13,marginBottom:4},children:"Nombre *"}),(0,rw.jsx)("input",{type:"text",name:"name",value:a.name,onChange:d,required:!0,className:"full-input",placeholder:"Introduce tu nombre"})]}),(0,rw.jsxs)("div",{style:{marginBottom:16},children:[(0,rw.jsx)("label",{style:{display:"block",fontSize:13,marginBottom:4},children:"Apellido *"}),(0,rw.jsx)("input",{type:"text",name:"lastName",value:a.lastName,onChange:d,required:!0,className:"full-input",placeholder:"Introduce tu apellido"})]}),(0,rw.jsxs)("div",{style:{marginBottom:16},children:[(0,rw.jsx)("label",{style:{display:"block",fontSize:13,marginBottom:4},children:"Tel\xe9fono *"}),(0,rw.jsx)("input",{type:"tel",name:"phone",value:a.phone,onChange:d,required:!0,className:"full-input",placeholder:"Introduce tu tel\xe9fono"})]}),(0,rw.jsxs)("div",{style:{marginBottom:20},children:[(0,rw.jsx)("label",{style:{display:"block",fontSize:13,marginBottom:4},children:"Fecha de nacimiento *"}),(0,rw.jsx)("input",{type:"date",name:"birthDate",value:a.birthDate,onChange:d,required:!0,className:"full-input"})]}),(0,rw.jsxs)("div",{style:{display:"flex",gap:8},children:[(0,rw.jsx)("button",{type:"submit",className:"btn-primary",disabled:c,style:{flex:1},children:c?"Guardando...":"\ud83d\udcbe Guardar cambios"}),(0,rw.jsx)("button",{type:"button",className:"btn-ghost",onClick:()=>{l({name:(null===n||void 0===n?void 0:n.name)||"",lastName:(null===n||void 0===n?void 0:n.lastName)||"",phone:(null===n||void 0===n?void 0:n.phone)||"",birthDate:(null===n||void 0===n?void 0:n.birthDate)||""}),s(!1)},disabled:c,style:{flex:1},children:"\u274c Cancelar"})]})]}):(0,rw.jsxs)("div",{className:"card",style:{padding:20},children:[(0,rw.jsxs)("div",{style:{marginBottom:20},children:[(0,rw.jsx)("div",{style:{fontSize:13,color:"#666",marginBottom:4},children:"Email"}),(0,rw.jsx)("div",{style:{fontSize:16,fontWeight:600},children:null===t||void 0===t?void 0:t.email})]}),(0,rw.jsxs)("div",{style:{marginBottom:20},children:[(0,rw.jsx)("div",{style:{fontSize:13,color:"#666",marginBottom:4},children:"Nombre"}),(0,rw.jsx)("div",{style:{fontSize:16,fontWeight:600},children:(null===n||void 0===n?void 0:n.name)||"Sin nombre"})]}),(0,rw.jsxs)("div",{style:{marginBottom:20},children:[(0,rw.jsx)("div",{style:{fontSize:13,color:"#666",marginBottom:4},children:"Apellido"}),(0,rw.jsx)("div",{style:{fontSize:16,fontWeight:600},children:(null===n||void 0===n?void 0:n.lastName)||"Sin apellido"})]}),(0,rw.jsxs)("div",{style:{marginBottom:20},children:[(0,rw.jsx)("div",{style:{fontSize:13,color:"#666",marginBottom:4},children:"Tel\xe9fono"}),(0,rw.jsx)("div",{style:{fontSize:16,fontWeight:600},children:(null===n||void 0===n?void 0:n.phone)||"Sin tel\xe9fono"})]}),(0,rw.jsxs)("div",{style:{marginBottom:20},children:[(0,rw.jsx)("div",{style:{fontSize:13,color:"#666",marginBottom:4},children:"Fecha de nacimiento"}),(0,rw.jsx)("div",{style:{fontSize:16,fontWeight:600},children:null!==n&&void 0!==n&&n.birthDate?new Date(n.birthDate).toLocaleDateString():"Sin fecha"})]}),!h&&(0,rw.jsx)("button",{className:"btn-primary full",onClick:()=>s(!0),style:{marginTop:20},children:"\u270f\ufe0f Editar perfil"}),h&&(0,rw.jsx)("button",{className:"btn-primary full",onClick:()=>s(!0),style:{marginTop:20,background:"#ffc107",color:"#000"},children:"\u26a0\ufe0f Completar perfil obligatorio"})]})]})}const yw=["RESERVAR MESA","CENA DE CUMPLEA\xd1OS","FIESTAS DE ESTELLA","FERIAS","LOTERIA NAVIDAD","COTILLON DE REYES"];function vw(e){let{user:t,profile:n}=e;const[r,o]=(0,i.useState)(""),[s,a]=(0,i.useState)(""),[l,c]=(0,i.useState)(""),[u,d]=(0,i.useState)(1),[h,f]=(0,i.useState)(0),[p,g]=(0,i.useState)(""),[m,y]=(0,i.useState)(1),[v,b]=(0,i.useState)(1),[w,E]=(0,i.useState)(!1),[S,x]=(0,i.useState)([]),[_,k]=(0,i.useState)([]),[T,I]=(0,i.useState)(null),C=e=>{if(!e)return"";return["Domingo","Lunes","Martes","Mi\xe9rcoles","Jueves","Viernes","S\xe1bado"][new Date(e+"T00:00:00").getDay()]};(0,i.useEffect)(()=>{null!==t&&void 0!==t&&t.uid&&A()},[t]);const A=async()=>{try{const e=await async function(){try{const e=Jy(fy(Wb,"eventRegistrations"),rv("createdAt","desc"));return(await yv(e)).docs.map(e=>je({id:e.id},e.data()))}catch(e){throw console.error("getAllEventRegistrations error:",e),e}}(),n=e.filter(e=>e.uid===t.uid),r=e.filter(e=>e.uid!==t.uid);x(n),k(r)}catch(e){console.error("Error cargando inscripciones:",e)}},N=async e=>{if(confirm("\xbfEliminar esta inscripci\xf3n?"))try{await async function(e){if(!e)throw new Error("ID de inscripci\xf3n requerido");try{await wv(py(Wb,"eventRegistrations",e))}catch(t){throw console.error("deleteEventRegistration error:",t),t}}(e),alert("Inscripci\xf3n eliminada"),A()}catch(t){console.error("Error eliminando inscripci\xf3n:",t),alert("Error al eliminar: "+(t.message||t))}};return t?(0,rw.jsxs)("div",{style:{padding:20,maxWidth:800,margin:"0 auto"},children:[(0,rw.jsx)("h2",{style:{marginBottom:24,fontSize:28,fontWeight:700,color:"#111827"},children:"\ud83d\udcc5 Eventos"}),(0,rw.jsxs)("div",{style:{background:"#fff",padding:24,borderRadius:16,boxShadow:"0 2px 8px rgba(0,0,0,0.1)",marginBottom:32},children:[(0,rw.jsx)("h3",{style:{marginTop:0,marginBottom:20,fontSize:20,fontWeight:600},children:T?"\u270f\ufe0f Editar inscripci\xf3n":"\u2795 Nueva inscripci\xf3n"}),(0,rw.jsx)("form",{onSubmit:async e=>{if(e.preventDefault(),r){if("RESERVAR MESA"===r){if(!s||!m)return void alert("Por favor completa todos los campos obligatorios")}else if("LOTERIA NAVIDAD"===r){if(!v)return void alert("Por favor indica el n\xfamero de d\xe9cimos")}else if("LOTERIA NAVIDAD"!==r&&!s)return void alert("Por favor selecciona una fecha");E(!0);try{const e={uid:t.uid,userEmail:t.email,userName:(null===n||void 0===n?void 0:n.name)||t.email,eventType:r,fecha:"LOTERIA NAVIDAD"===r?null:s,hora:l||null,adultos:["CENA DE CUMPLEA\xd1OS","FIESTAS DE ESTELLA","FERIAS","COTILLON DE REYES"].includes(r)?Number(u):0,ninos:["CENA DE CUMPLEA\xd1OS","FIESTAS DE ESTELLA","FERIAS","COTILLON DE REYES"].includes(r)?Number(h):0,comensales:"RESERVAR MESA"===r?Number(m):0,observaciones:"RESERVAR MESA"===r?p:"",decimos:"LOTERIA NAVIDAD"===r?Number(v):0,diaSemana:"FIESTAS DE ESTELLA"===r?C(s):""};T?(await async function(e,t){if(!e)throw new Error("ID de inscripci\xf3n requerido");try{const n=py(Wb,"eventRegistrations",e);return await bv(n,je(je({},t),{},{updatedAt:_v()})),je({id:e},t)}catch(n){throw console.error("updateEventRegistration error:",n),n}}(T,e),alert("Inscripci\xf3n actualizada correctamente"),I(null)):(await async function(e){try{const t=await Ev(fy(Wb,"eventRegistrations"),je(je({},e),{},{createdAt:_v(),updatedAt:_v()}));return je({id:t.id},e)}catch(t){throw console.error("addEventRegistration error:",t),t}}(e),alert("Inscripci\xf3n registrada correctamente")),o(""),a(""),c(""),d(1),f(0),g(""),y(1),b(1),A()}catch(i){console.error("Error guardando inscripci\xf3n:",i),alert("Error al guardar la inscripci\xf3n: "+(i.message||i))}finally{E(!1)}}else alert("Por favor selecciona un tipo de evento")},children:(0,rw.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:16},children:[(0,rw.jsxs)("div",{children:[(0,rw.jsx)("label",{style:{display:"block",marginBottom:8,fontWeight:600,fontSize:14},children:"Tipo de evento *"}),(0,rw.jsxs)("select",{value:r,onChange:e=>o(e.target.value),required:!0,style:{width:"100%",padding:"12px",fontSize:15,border:"1px solid #d1d5db",borderRadius:8,background:"#fff"},children:[(0,rw.jsx)("option",{value:"",children:"-- Selecciona un evento --"}),yw.map(e=>(0,rw.jsx)("option",{value:e,children:e},e))]})]}),"RESERVAR MESA"===r&&(0,rw.jsxs)(rw.Fragment,{children:[(0,rw.jsxs)("div",{children:[(0,rw.jsx)("label",{style:{display:"block",marginBottom:8,fontWeight:600,fontSize:14},children:"Fecha *"}),(0,rw.jsx)("input",{type:"date",value:s,onChange:e=>a(e.target.value),required:!0,style:{width:"100%",padding:"12px",fontSize:15,border:"1px solid #d1d5db",borderRadius:8}})]}),(0,rw.jsxs)("div",{children:[(0,rw.jsx)("label",{style:{display:"block",marginBottom:8,fontWeight:600,fontSize:14},children:"Hora (opcional)"}),(0,rw.jsx)("input",{type:"time",value:l,onChange:e=>c(e.target.value),style:{width:"100%",padding:"12px",fontSize:15,border:"1px solid #d1d5db",borderRadius:8}})]}),(0,rw.jsxs)("div",{children:[(0,rw.jsx)("label",{style:{display:"block",marginBottom:8,fontWeight:600,fontSize:14},children:"Observaciones"}),(0,rw.jsx)("textarea",{value:p,onChange:e=>g(e.target.value),placeholder:"Indica cualquier preferencia o comentario...",rows:3,style:{width:"100%",padding:"12px",fontSize:15,border:"1px solid #d1d5db",borderRadius:8,fontFamily:"inherit",resize:"vertical"}})]}),(0,rw.jsxs)("div",{children:[(0,rw.jsx)("label",{style:{display:"block",marginBottom:8,fontWeight:600,fontSize:14},children:"N\xfamero de comensales *"}),(0,rw.jsx)("input",{type:"number",min:"1",value:m,onChange:e=>y(e.target.value),required:!0,style:{width:"100%",padding:"12px",fontSize:15,border:"1px solid #d1d5db",borderRadius:8}})]})]}),"CENA DE CUMPLEA\xd1OS"===r&&(0,rw.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16},children:[(0,rw.jsxs)("div",{children:[(0,rw.jsx)("label",{style:{display:"block",marginBottom:8,fontWeight:600,fontSize:14},children:"Adultos"}),(0,rw.jsx)("input",{type:"number",min:"0",value:u,onChange:e=>d(e.target.value),style:{width:"100%",padding:"12px",fontSize:15,border:"1px solid #d1d5db",borderRadius:8}})]}),(0,rw.jsxs)("div",{children:[(0,rw.jsx)("label",{style:{display:"block",marginBottom:8,fontWeight:600,fontSize:14},children:"Ni\xf1os"}),(0,rw.jsx)("input",{type:"number",min:"0",value:h,onChange:e=>f(e.target.value),style:{width:"100%",padding:"12px",fontSize:15,border:"1px solid #d1d5db",borderRadius:8}})]})]}),"FIESTAS DE ESTELLA"===r&&(0,rw.jsxs)(rw.Fragment,{children:[(0,rw.jsxs)("div",{children:[(0,rw.jsx)("label",{style:{display:"block",marginBottom:8,fontWeight:600,fontSize:14},children:"Fecha *"}),(0,rw.jsxs)("div",{style:{display:"flex",gap:12,alignItems:"center"},children:[(0,rw.jsx)("input",{type:"date",value:s,onChange:e=>a(e.target.value),required:!0,style:{flex:1,padding:"12px",fontSize:15,border:"1px solid #d1d5db",borderRadius:8}}),s&&(0,rw.jsx)("div",{style:{padding:"12px 16px",fontSize:14,fontWeight:600,background:"#f3f4f6",borderRadius:8,color:"#374151",minWidth:"100px",textAlign:"center"},children:C(s)})]})]}),(0,rw.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16},children:[(0,rw.jsxs)("div",{children:[(0,rw.jsx)("label",{style:{display:"block",marginBottom:8,fontWeight:600,fontSize:14},children:"Adultos"}),(0,rw.jsx)("input",{type:"number",min:"0",value:u,onChange:e=>d(e.target.value),style:{width:"100%",padding:"12px",fontSize:15,border:"1px solid #d1d5db",borderRadius:8}})]}),(0,rw.jsxs)("div",{children:[(0,rw.jsx)("label",{style:{display:"block",marginBottom:8,fontWeight:600,fontSize:14},children:"Ni\xf1os"}),(0,rw.jsx)("input",{type:"number",min:"0",value:h,onChange:e=>f(e.target.value),style:{width:"100%",padding:"12px",fontSize:15,border:"1px solid #d1d5db",borderRadius:8}})]})]})]}),"FERIAS"===r&&(0,rw.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16},children:[(0,rw.jsxs)("div",{children:[(0,rw.jsx)("label",{style:{display:"block",marginBottom:8,fontWeight:600,fontSize:14},children:"Adultos"}),(0,rw.jsx)("input",{type:"number",min:"0",value:u,onChange:e=>d(e.target.value),style:{width:"100%",padding:"12px",fontSize:15,border:"1px solid #d1d5db",borderRadius:8}})]}),(0,rw.jsxs)("div",{children:[(0,rw.jsx)("label",{style:{display:"block",marginBottom:8,fontWeight:600,fontSize:14},children:"Ni\xf1os"}),(0,rw.jsx)("input",{type:"number",min:"0",value:h,onChange:e=>f(e.target.value),style:{width:"100%",padding:"12px",fontSize:15,border:"1px solid #d1d5db",borderRadius:8}})]})]}),"LOTERIA NAVIDAD"===r&&(0,rw.jsxs)("div",{children:[(0,rw.jsx)("label",{style:{display:"block",marginBottom:8,fontWeight:600,fontSize:14},children:"N\xfamero de d\xe9cimos *"}),(0,rw.jsx)("input",{type:"number",min:"1",value:v,onChange:e=>b(e.target.value),required:!0,style:{width:"100%",padding:"12px",fontSize:15,border:"1px solid #d1d5db",borderRadius:8}})]}),"COTILLON DE REYES"===r&&(0,rw.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16},children:[(0,rw.jsxs)("div",{children:[(0,rw.jsx)("label",{style:{display:"block",marginBottom:8,fontWeight:600,fontSize:14},children:"Adultos"}),(0,rw.jsx)("input",{type:"number",min:"0",value:u,onChange:e=>d(e.target.value),style:{width:"100%",padding:"12px",fontSize:15,border:"1px solid #d1d5db",borderRadius:8}})]}),(0,rw.jsxs)("div",{children:[(0,rw.jsx)("label",{style:{display:"block",marginBottom:8,fontWeight:600,fontSize:14},children:"Ni\xf1os"}),(0,rw.jsx)("input",{type:"number",min:"0",value:h,onChange:e=>f(e.target.value),style:{width:"100%",padding:"12px",fontSize:15,border:"1px solid #d1d5db",borderRadius:8}})]})]}),r&&(0,rw.jsxs)("div",{style:{display:"flex",gap:12,marginTop:8},children:[(0,rw.jsx)("button",{type:"submit",disabled:w,style:{flex:1,padding:"14px 24px",fontSize:16,fontWeight:600,background:"#1976d2",color:"#fff",border:"none",borderRadius:8,cursor:w?"wait":"pointer",opacity:w?.7:1},children:w?"Guardando...":T?"Actualizar":"Inscribirse"}),T&&(0,rw.jsx)("button",{type:"button",onClick:()=>{I(null),o(""),a(""),c(""),d(1),f(0),g(""),y(1),b(1)},style:{padding:"14px 24px",fontSize:16,fontWeight:600,background:"#6b7280",color:"#fff",border:"none",borderRadius:8,cursor:"pointer"},children:"Cancelar"})]})]})})]}),(0,rw.jsxs)("div",{style:{marginBottom:40},children:[(0,rw.jsxs)("h3",{style:{marginBottom:16,fontSize:20,fontWeight:600,color:"#1976d2"},children:["\ud83d\udcdd Mis inscripciones (",S.length,")"]}),0===S.length?(0,rw.jsx)("div",{style:{textAlign:"center",padding:40,background:"#f9fafb",borderRadius:12,color:"#6b7280"},children:"No tienes inscripciones todav\xeda"}):(0,rw.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:12},children:S.map(e=>(0,rw.jsxs)("div",{style:{background:"#fff",padding:16,borderRadius:12,boxShadow:"0 1px 3px rgba(0,0,0,0.1)",display:"flex",justifyContent:"space-between",alignItems:"center",gap:16},children:[(0,rw.jsxs)("div",{style:{flex:1},children:[(0,rw.jsx)("div",{style:{fontWeight:700,fontSize:16,color:"#1976d2",marginBottom:4},children:e.eventType}),"RESERVAR MESA"===e.eventType&&(0,rw.jsxs)(rw.Fragment,{children:[(0,rw.jsxs)("div",{style:{fontSize:14,color:"#374151",marginBottom:4},children:["\ud83d\udcc5 ",e.fecha," ",e.hora&&"\u2022 \ud83d\udd50 ".concat(e.hora)]}),(0,rw.jsxs)("div",{style:{fontSize:14,color:"#6b7280"},children:["\ud83c\udf7d\ufe0f ",e.comensales," comensal",1!==e.comensales?"es":""]}),e.observaciones&&(0,rw.jsxs)("div",{style:{fontSize:13,color:"#6b7280",marginTop:4,fontStyle:"italic"},children:["\ud83d\udcac ",e.observaciones]})]}),"CENA DE CUMPLEA\xd1OS"===e.eventType&&(0,rw.jsxs)("div",{style:{fontSize:14,color:"#6b7280"},children:["\ud83d\udc65 ",e.adultos," adulto",1!==e.adultos?"s":""," \u2022 \ud83d\udc76 ",e.ninos," ni\xf1o",1!==e.ninos?"s":""]}),"FIESTAS DE ESTELLA"===e.eventType&&(0,rw.jsxs)(rw.Fragment,{children:[(0,rw.jsxs)("div",{style:{fontSize:14,color:"#374151",marginBottom:4},children:["\ud83d\udcc5 ",e.fecha," ",e.diaSemana&&"(".concat(e.diaSemana,")")]}),(0,rw.jsxs)("div",{style:{fontSize:14,color:"#6b7280"},children:["\ud83d\udc65 ",e.adultos," adulto",1!==e.adultos?"s":""," \u2022 \ud83d\udc76 ",e.ninos," ni\xf1o",1!==e.ninos?"s":""]})]}),"FERIAS"===e.eventType&&(0,rw.jsxs)("div",{style:{fontSize:14,color:"#6b7280"},children:["\ud83d\udc65 ",e.adultos," adulto",1!==e.adultos?"s":""," \u2022 \ud83d\udc76 ",e.ninos," ni\xf1o",1!==e.ninos?"s":""]}),"LOTERIA NAVIDAD"===e.eventType&&(0,rw.jsxs)("div",{style:{fontSize:14,color:"#6b7280"},children:["\ud83c\udf9f\ufe0f ",e.decimos," d\xe9cimo",1!==e.decimos?"s":""]}),"COTILLON DE REYES"===e.eventType&&(0,rw.jsxs)("div",{style:{fontSize:14,color:"#6b7280"},children:["\ud83d\udc65 ",e.adultos," adulto",1!==e.adultos?"s":""," \u2022 \ud83d\udc76 ",e.ninos," ni\xf1o",1!==e.ninos?"s":""]})]}),(0,rw.jsxs)("div",{style:{display:"flex",gap:8},children:[(0,rw.jsx)("button",{onClick:()=>(e=>{I(e.id),o(e.eventType),a(e.fecha||""),c(e.hora||""),d(e.adultos||1),f(e.ninos||0),g(e.observaciones||""),y(e.comensales||1),b(e.decimos||1),window.scrollTo({top:0,behavior:"smooth"})})(e),style:{padding:"8px 16px",fontSize:14,fontWeight:600,background:"#f59e0b",color:"#fff",border:"none",borderRadius:6,cursor:"pointer"},children:"Editar"}),(0,rw.jsx)("button",{onClick:()=>N(e.id),style:{padding:"8px 16px",fontSize:14,fontWeight:600,background:"#ef4444",color:"#fff",border:"none",borderRadius:6,cursor:"pointer"},children:"Eliminar"})]})]},e.id))})]}),(0,rw.jsxs)("div",{children:[(0,rw.jsxs)("h3",{style:{marginBottom:16,fontSize:20,fontWeight:600,color:"#6b7280"},children:["\ud83d\udc65 Resto de inscripciones (",_.length,")"]}),0===_.length?(0,rw.jsx)("div",{style:{textAlign:"center",padding:40,background:"#f9fafb",borderRadius:12,color:"#6b7280"},children:"No hay otras inscripciones todav\xeda"}):(0,rw.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:12},children:_.map(e=>(0,rw.jsx)("div",{style:{background:"#fff",padding:16,borderRadius:12,boxShadow:"0 1px 3px rgba(0,0,0,0.1)",border:"2px solid #f3f4f6"},children:(0,rw.jsxs)("div",{children:[(0,rw.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start",marginBottom:8},children:[(0,rw.jsx)("div",{style:{fontWeight:700,fontSize:16,color:"#1976d2"},children:e.eventType}),(0,rw.jsx)("div",{style:{fontSize:12,color:"#6b7280",fontWeight:600,background:"#f3f4f6",padding:"4px 12px",borderRadius:12},children:e.userName||e.userEmail})]}),"RESERVAR MESA"===e.eventType&&(0,rw.jsxs)(rw.Fragment,{children:[(0,rw.jsxs)("div",{style:{fontSize:14,color:"#374151",marginBottom:4},children:["\ud83d\udcc5 ",e.fecha," ",e.hora&&"\u2022 \ud83d\udd50 ".concat(e.hora)]}),(0,rw.jsxs)("div",{style:{fontSize:14,color:"#6b7280"},children:["\ud83c\udf7d\ufe0f ",e.comensales," comensal",1!==e.comensales?"es":""]}),e.observaciones&&(0,rw.jsxs)("div",{style:{fontSize:13,color:"#6b7280",marginTop:4,fontStyle:"italic"},children:["\ud83d\udcac ",e.observaciones]})]}),"CENA DE CUMPLEA\xd1OS"===e.eventType&&(0,rw.jsxs)("div",{style:{fontSize:14,color:"#6b7280"},children:["\ud83d\udc65 ",e.adultos," adulto",1!==e.adultos?"s":""," \u2022 \ud83d\udc76 ",e.ninos," ni\xf1o",1!==e.ninos?"s":""]}),"FIESTAS DE ESTELLA"===e.eventType&&(0,rw.jsxs)(rw.Fragment,{children:[(0,rw.jsxs)("div",{style:{fontSize:14,color:"#374151",marginBottom:4},children:["\ud83d\udcc5 ",e.fecha," ",e.diaSemana&&"(".concat(e.diaSemana,")")]}),(0,rw.jsxs)("div",{style:{fontSize:14,color:"#6b7280"},children:["\ud83d\udc65 ",e.adultos," adulto",1!==e.adultos?"s":""," \u2022 \ud83d\udc76 ",e.ninos," ni\xf1o",1!==e.ninos?"s":""]})]}),"FERIAS"===e.eventType&&(0,rw.jsxs)("div",{style:{fontSize:14,color:"#6b7280"},children:["\ud83d\udc65 ",e.adultos," adulto",1!==e.adultos?"s":""," \u2022 \ud83d\udc76 ",e.ninos," ni\xf1o",1!==e.ninos?"s":""]}),"LOTERIA NAVIDAD"===e.eventType&&(0,rw.jsxs)("div",{style:{fontSize:14,color:"#6b7280"},children:["\ud83c\udf9f\ufe0f ",e.decimos," d\xe9cimo",1!==e.decimos?"s":""]}),"COTILLON DE REYES"===e.eventType&&(0,rw.jsxs)("div",{style:{fontSize:14,color:"#6b7280"},children:["\ud83d\udc65 ",e.adultos," adulto",1!==e.adultos?"s":""," \u2022 \ud83d\udc76 ",e.ninos," ni\xf1o",1!==e.ninos?"s":""]})]})},e.id))})]})]}):(0,rw.jsx)("div",{style:{padding:20},children:"No autenticado"})}const bw="1.0.0",ww=async()=>{try{if("caches"in window){const e=await caches.keys();await Promise.all(e.map(e=>caches.delete(e))),console.log("Cach\xe9 del navegador limpiada")}const e=localStorage.getItem("app-theme");localStorage.clear(),e&&localStorage.setItem("app-theme",e),sessionStorage.clear(),console.log("Almacenamiento local limpiado")}catch(e){console.error("Error limpiando cach\xe9:",e)}},Ew=[{name:"Azul Cl\xe1sico",primary:"#1976d2",secondary:"#1565c0",bg:"#ffffff",text:"#000000",headerBg:"#f5f5f5"},{name:"Oscuro",primary:"#212121",secondary:"#424242",bg:"#121212",text:"#ffffff",headerBg:"#1e1e1e"},{name:"Verde Natura",primary:"#2e7d32",secondary:"#1b5e20",bg:"#f1f8e9",text:"#000000",headerBg:"#dcedc8"},{name:"P\xfarpura",primary:"#7b1fa2",secondary:"#4a148c",bg:"#ffffff",text:"#000000",headerBg:"#f3e5f5"},{name:"Naranja Energ\xeda",primary:"#ef6c00",secondary:"#e65100",bg:"#fff3e0",text:"#000000",headerBg:"#ffe0b2"},{name:"Rojo Pasi\xf3n",primary:"#c62828",secondary:"#b71c1c",bg:"#ffffff",text:"#000000",headerBg:"#ffebee"},{name:"Gris Moderno",primary:"#546e7a",secondary:"#37474f",bg:"#eceff1",text:"#000000",headerBg:"#cfd8dc"},{name:"Turquesa",primary:"#00838f",secondary:"#006064",bg:"#e0f7fa",text:"#000000",headerBg:"#b2ebf2"}];function Sw(){var e;const[t,n]=(0,i.useState)(null),[r,o]=(0,i.useState)(null),[s,a]=(0,i.useState)(!0),[l,c]=(0,i.useState)(()=>{const e=localStorage.getItem("app-theme");return e?JSON.parse(e):Ew[0]}),[u,d]=(0,i.useState)(!1),[h,f]=(0,i.useState)(!1),[p,g]=(0,i.useState)(!1),[m,y]=(0,i.useState)(!1),[v,b]=(0,i.useState)(""),[w,E]=(0,i.useState)(!1),S=ne(),{isInstallable:x,isInstalled:_,installPWA:k}=function(){const[e,t]=(0,i.useState)(null),[n,r]=(0,i.useState)(!1),[o,s]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{if(window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone)return void s(!0);const e=e=>{e.preventDefault(),t(e),r(!0)};return window.addEventListener("beforeinstallprompt",e),window.addEventListener("appinstalled",()=>{s(!0),r(!1),t(null)}),()=>{window.removeEventListener("beforeinstallprompt",e)}},[]),{isInstallable:n,isInstalled:o,installPWA:async()=>{if(!e)return!1;e.prompt();const{outcome:n}=await e.userChoice;return"accepted"===n&&(t(null),r(!1),!0)}}}();(0,i.useEffect)(()=>{(()=>{const e=localStorage.getItem("app-version");return e!==bw&&(console.log("Nueva versi\xf3n detectada: ".concat(bw," (anterior: ").concat(e,")")),ww().then(()=>{localStorage.setItem("app-version",bw),window.location.reload(!0)}),!0)})()||localStorage.setItem("app-version",bw)},[]),(0,i.useEffect)(()=>{const e=function(e,t,n,r){return ct(e).onAuthStateChanged(t,n,r)}(qb,async e=>{if(a(!0),e){n(e);try{const t=await Yb(e.uid);console.log("Profile loaded:",t),console.log("PhotoURL:",null===t||void 0===t?void 0:t.photoURL),o(t)}catch(t){console.error("fetchUserDoc error:",t),o(null)}}else n(null),o(null);a(!1)});return()=>e()},[]);const T=e=>e&&e.name&&e.lastName&&e.phone&&e.birthDate;return(0,i.useEffect)(()=>{document.documentElement.style.setProperty("--primary-bg",l.primary),document.documentElement.style.setProperty("--primary-color","#ffffff"),document.documentElement.style.setProperty("--secondary-bg",l.secondary),document.documentElement.style.setProperty("--app-bg",l.bg),document.documentElement.style.setProperty("--app-text",l.text),document.documentElement.style.setProperty("--header-bg",l.headerBg),document.documentElement.style.setProperty("--ghost-border","#ffffff"===l.text?"#555":"#ccc");const e="#ffffff"===l.bg?"#f9f9f9":"#121212"===l.bg?"#1e1e1e":l.bg;document.documentElement.style.setProperty("--card-bg",e),document.body.style.backgroundColor=l.bg,document.body.style.color=l.text},[l]),(0,i.useEffect)(()=>{const e=e=>{p&&!e.target.closest("[data-user-menu]")&&g(!1)};return document.addEventListener("click",e),()=>document.removeEventListener("click",e)},[p]),(0,i.useEffect)(()=>{const e=()=>{sessionStorage.setItem("last-session",Date.now().toString())};return window.addEventListener("beforeunload",e),()=>window.removeEventListener("beforeunload",e)},[]),s?(0,rw.jsx)("div",{children:"Comprobando autenticaci\xf3n..."}):(0,rw.jsxs)("div",{style:{background:l.bg,color:l.text,minHeight:"100vh"},children:[x&&!_&&(0,rw.jsxs)("div",{style:{background:"#1976d2",color:"#fff",padding:"12px",display:"flex",justifyContent:"space-between",alignItems:"center",fontSize:"14px"},children:[(0,rw.jsx)("span",{children:"\ud83d\udcf1 Instala la app en tu dispositivo"}),(0,rw.jsx)("button",{onClick:async()=>{await k()&&alert("\xa1App instalada correctamente!")},style:{background:"#fff",color:"#1976d2",border:"none",padding:"8px 16px",borderRadius:"6px",fontWeight:"600",cursor:"pointer"},children:"Instalar"})]}),(0,rw.jsxs)("header",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px 20px",background:l.headerBg,boxShadow:"0 2px 8px rgba(0,0,0,0.1)",borderBottom:"1px solid ".concat(l.primary,"20")},children:[(0,rw.jsx)("div",{style:{display:"flex",alignItems:"center",gap:16},children:t?(0,rw.jsx)(rw.Fragment,{children:(0,rw.jsxs)("div",{style:{position:"relative"},"data-user-menu":!0,children:[(0,rw.jsx)("input",{type:"file",accept:"image/*",capture:"user",onChange:e=>{var n;return(null===(n=e.target.files)||void 0===n?void 0:n[0])&&(async e=>{if(t&&e){f(!0);try{const n=await Jb(t.uid,e);o(e=>je(je({},e),{},{photoURL:n})),d(!1),alert("Foto actualizada correctamente")}catch(n){console.error("Error subiendo foto:",n),alert("Error subiendo foto: "+(n.message||n))}finally{f(!1)}}})(e.target.files[0])},style:{display:"none"},id:"camera-input",disabled:h}),(0,rw.jsxs)("div",{onClick:()=>g(!p),style:{cursor:h?"wait":"pointer",display:"flex",alignItems:"center",gap:12,position:"relative",padding:"6px 12px",borderRadius:"24px",transition:"background 0.2s ease",background:p?l.primary+"15":"transparent"},title:"Men\xfa de usuario",onMouseEnter:e=>{p||(e.currentTarget.style.background=l.primary+"10")},onMouseLeave:e=>{p||(e.currentTarget.style.background="transparent")},children:[null!==r&&void 0!==r&&r.photoURL?(0,rw.jsx)("img",{src:r.photoURL,alt:"Foto usuario",style:{width:44,height:44,borderRadius:"50%",objectFit:"cover",border:"2px solid ".concat(l.primary),opacity:h?.5:1,boxShadow:"0 2px 4px rgba(0,0,0,0.1)"}}):(0,rw.jsx)("div",{style:{width:44,height:44,borderRadius:"50%",background:"linear-gradient(135deg, ".concat(l.primary," 0%, ").concat(l.secondary," 100%)"),color:"#fff",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"18px",fontWeight:"bold",opacity:h?.5:1,boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:((null===r||void 0===r?void 0:r.name)||t.email||"?")[0].toUpperCase()}),h&&(0,rw.jsx)("div",{style:{position:"absolute",top:6,left:12,width:44,height:44,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"50%",background:"rgba(0,0,0,0.6)",color:"white",fontSize:"20px"},children:"\u23f3"}),(0,rw.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,rw.jsx)("strong",{style:{color:l.text,fontSize:15,fontWeight:600},children:(null===r||void 0===r?void 0:r.name)||(null===(e=t.email)||void 0===e?void 0:e.split("@")[0])}),(0,rw.jsx)("span",{style:{fontSize:18,color:l.text,opacity:.5,transition:"transform 0.2s ease",transform:p?"rotate(180deg)":"rotate(0deg)"},children:"\u25bc"})]})]}),p&&(0,rw.jsxs)("div",{style:{position:"absolute",top:"60px",left:0,background:l.bg,border:"1px solid ".concat(l.primary,"30"),borderRadius:"12px",boxShadow:"0 8px 24px rgba(0,0,0,0.12)",minWidth:"220px",zIndex:1e3,overflow:"hidden"},children:[!(null!==r&&void 0!==r&&r.isAdmin)&&(0,rw.jsx)("button",{onClick:()=>{g(!1),S("/tpv")},style:{width:"100%",padding:"12px 16px",border:"none",background:"transparent",color:l.text,textAlign:"left",cursor:"pointer",fontSize:"14px",display:"flex",alignItems:"center",gap:8,borderBottom:"1px solid ".concat(l.primary,"20")},onMouseEnter:e=>e.currentTarget.style.background=l.primary+"20",onMouseLeave:e=>e.currentTarget.style.background="transparent",children:"\ud83d\uded2 TPV"}),(0,rw.jsx)("button",{onClick:()=>{g(!1),S("/listados")},style:{width:"100%",padding:"12px 16px",border:"none",background:"transparent",color:l.text,textAlign:"left",cursor:"pointer",fontSize:"14px",display:"flex",alignItems:"center",gap:8,borderBottom:"1px solid ".concat(l.primary,"20")},onMouseEnter:e=>e.currentTarget.style.background=l.primary+"20",onMouseLeave:e=>e.currentTarget.style.background="transparent",children:"\ud83d\udcca Listados"}),(0,rw.jsx)("button",{onClick:()=>{g(!1),S("/eventos")},style:{width:"100%",padding:"12px 16px",border:"none",background:"transparent",color:l.text,textAlign:"left",cursor:"pointer",fontSize:"14px",display:"flex",alignItems:"center",gap:8,borderBottom:"1px solid ".concat(l.primary,"20")},onMouseEnter:e=>e.currentTarget.style.background=l.primary+"20",onMouseLeave:e=>e.currentTarget.style.background="transparent",children:"\ud83d\udcc5 Eventos"}),(0,rw.jsx)("button",{onClick:()=>{document.getElementById("camera-input").click(),g(!1)},style:{width:"100%",padding:"12px 16px",border:"none",background:"transparent",color:l.text,textAlign:"left",cursor:"pointer",fontSize:"14px",display:"flex",alignItems:"center",gap:8,borderBottom:"1px solid ".concat(l.primary,"20")},onMouseEnter:e=>e.currentTarget.style.background=l.primary+"20",onMouseLeave:e=>e.currentTarget.style.background="transparent",children:"\ud83d\udcf8 Cambiar foto de perfil"}),(0,rw.jsx)("button",{onClick:()=>{g(!1),alert("Se enviar\xe1 un correo para cambiar la contrase\xf1a")},style:{width:"100%",padding:"12px 16px",border:"none",background:"transparent",color:l.text,textAlign:"left",cursor:"pointer",fontSize:"14px",display:"flex",alignItems:"center",gap:8,borderBottom:"1px solid ".concat(l.primary,"20")},onMouseEnter:e=>e.currentTarget.style.background=l.primary+"20",onMouseLeave:e=>e.currentTarget.style.background="transparent",children:"\ud83d\udd11 Cambiar contrase\xf1a"}),(0,rw.jsx)("button",{onClick:()=>{g(!1),S("/perfil")},style:{width:"100%",padding:"12px 16px",border:"none",background:"transparent",color:l.text,textAlign:"left",cursor:"pointer",fontSize:"14px",display:"flex",alignItems:"center",gap:8,borderBottom:"1px solid ".concat(l.primary,"20")},onMouseEnter:e=>e.currentTarget.style.background=l.primary+"20",onMouseLeave:e=>e.currentTarget.style.background="transparent",children:"\ud83d\udc64 Ver perfil"}),(0,rw.jsx)("button",{onClick:()=>{g(!1),y(!0)},style:{width:"100%",padding:"12px 16px",border:"none",background:"transparent",color:l.text,textAlign:"left",cursor:"pointer",fontSize:"14px",display:"flex",alignItems:"center",gap:8,borderBottom:"1px solid ".concat(l.primary,"20")},onMouseEnter:e=>e.currentTarget.style.background=l.primary+"20",onMouseLeave:e=>e.currentTarget.style.background="transparent",children:"\ud83d\udca1 Sugerencias para la app"}),(0,rw.jsx)("button",{onClick:()=>{g(!1),(async()=>{try{await ww(),await Qb(),window.location.href="/login"}catch(e){console.error("Logout error:",e),alert("Error cerrando sesi\xf3n: "+(e.message||e))}})()},style:{width:"100%",padding:"12px 16px",border:"none",background:"transparent",color:"#d32f2f",textAlign:"left",cursor:"pointer",fontSize:"14px",display:"flex",alignItems:"center",gap:8,fontWeight:"600"},onMouseEnter:e=>e.currentTarget.style.background="#d32f2f20",onMouseLeave:e=>e.currentTarget.style.background="transparent",children:"\ud83d\udeaa Cerrar sesi\xf3n"})]})]})}):(0,rw.jsx)("span",{style:{color:l.text},children:"No autenticado"})}),t&&(0,rw.jsxs)("button",{onClick:()=>{const e=(Ew.findIndex(e=>e.name===l.name)+1)%Ew.length,t=Ew[e];c(t),localStorage.setItem("app-theme",JSON.stringify(t))},style:{background:l.bg,border:"1px solid ".concat(l.primary,"30"),borderRadius:"20px",width:40,height:40,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:3,padding:0,boxShadow:"0 2px 8px rgba(0,0,0,0.1)",transition:"all 0.2s ease"},title:"Cambiar tema (actual: ".concat(l.name,")"),onMouseEnter:e=>{e.currentTarget.style.transform="scale(1.05)",e.currentTarget.style.boxShadow="0 4px 12px rgba(0,0,0,0.15)"},onMouseLeave:e=>{e.currentTarget.style.transform="scale(1)",e.currentTarget.style.boxShadow="0 2px 8px rgba(0,0,0,0.1)"},children:[(0,rw.jsx)("div",{style:{width:8,height:8,borderRadius:"50%",background:"#4285F4"}}),(0,rw.jsx)("div",{style:{width:8,height:8,borderRadius:"50%",background:"#EA4335"}}),(0,rw.jsx)("div",{style:{width:8,height:8,borderRadius:"50%",background:"#FBBC04"}})]})]}),m&&(0,rw.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3,padding:16},onClick:()=>y(!1),children:(0,rw.jsxs)("div",{style:{background:l.bg,borderRadius:12,padding:24,maxWidth:500,width:"100%",boxShadow:"0 8px 24px rgba(0,0,0,0.2)"},onClick:e=>e.stopPropagation(),children:[(0,rw.jsx)("h3",{style:{margin:"0 0 16px 0",color:l.text},children:"\ud83d\udca1 Enviar sugerencia"}),(0,rw.jsx)("p",{style:{margin:"0 0 16px 0",fontSize:14,color:l.text,opacity:.7},children:"Cu\xe9ntanos qu\xe9 mejoras te gustar\xeda ver en la app"}),(0,rw.jsx)("textarea",{value:v,onChange:e=>b(e.target.value),placeholder:"Escribe tu sugerencia aqu\xed...",style:{width:"100%",minHeight:120,padding:12,borderRadius:8,border:"1px solid ".concat(l.primary,"30"),fontSize:14,resize:"vertical",background:l.bg,color:l.text,fontFamily:"inherit"},autoFocus:!0}),(0,rw.jsxs)("div",{style:{display:"flex",gap:8,marginTop:16},children:[(0,rw.jsx)("button",{onClick:async()=>{if(v.trim()){E(!0);try{const e=(null===r||void 0===r?void 0:r.name)||(null===t||void 0===t?void 0:t.email)||"Usuario an\xf3nimo",n=(null===t||void 0===t?void 0:t.email)||"sin email",i="Sugerencia TPV App - ".concat(e),o="Usuario: ".concat(e,"\nEmail: ").concat(n,"\n\nSugerencia:\n").concat(v),s="mailto:inavicba@gmail.com?subject=".concat(encodeURIComponent(i),"&body=").concat(encodeURIComponent(o));window.location.href=s,y(!1),b(""),alert("Se abrir\xe1 tu cliente de correo para enviar la sugerencia")}catch(e){console.error("Error al enviar sugerencia:",e),alert("Error al abrir el cliente de correo")}finally{E(!1)}}else alert("Por favor, escribe tu sugerencia")},disabled:w||!v.trim(),className:"btn-primary",style:{flex:1},children:w?"Enviando...":"\ud83d\udce7 Enviar sugerencia"}),(0,rw.jsx)("button",{onClick:()=>{y(!1),b("")},className:"btn-ghost",style:{flex:1},children:"Cancelar"})]})]})}),(0,rw.jsx)("div",{style:{background:l.bg,color:l.text,minHeight:"100vh"},children:(0,rw.jsxs)(we,{children:[(0,rw.jsx)(ve,{path:"/",element:(0,rw.jsx)(ye,{to:t?"/menu":"/login",replace:!0})}),(0,rw.jsx)(ve,{path:"/login",element:t?(0,rw.jsx)(ye,{to:"/menu",replace:!0}):(0,rw.jsx)(iw,{})}),(0,rw.jsx)(ve,{path:"/perfil",element:t?(0,rw.jsx)(mw,{user:t,profile:r,onProfileUpdate:async()=>{if(t)try{const e=await Yb(t.uid);o(e)}catch(e){console.error("Error reloading profile:",e)}}}):(0,rw.jsx)(ye,{to:"/login",replace:!0})}),(0,rw.jsx)(ve,{path:"/menu",element:t?T(r)?(0,rw.jsx)(ow,{user:t,profile:r}):(0,rw.jsx)(ye,{to:"/perfil",replace:!0}):(0,rw.jsx)(ye,{to:"/login",replace:!0})}),(0,rw.jsx)(ve,{path:"/tpv",element:!t||null!==r&&void 0!==r&&r.isAdmin?(0,rw.jsx)(ye,{to:t?"/menu":"/login",replace:!0}):T(r)?(0,rw.jsx)(lw,{user:t,profile:r}):(0,rw.jsx)(ye,{to:"/perfil",replace:!0})}),(0,rw.jsx)(ve,{path:"/listados",element:t?T(r)?(0,rw.jsx)(hw,{user:t,profile:r}):(0,rw.jsx)(ye,{to:"/perfil",replace:!0}):(0,rw.jsx)(ye,{to:"/login",replace:!0})}),(0,rw.jsx)(ve,{path:"/eventos",element:t?T(r)?(0,rw.jsx)(vw,{user:t,profile:r}):(0,rw.jsx)(ye,{to:"/perfil",replace:!0}):(0,rw.jsx)(ye,{to:"/login",replace:!0})}),(0,rw.jsx)(ve,{path:"/productos",element:t&&null!==r&&void 0!==r&&r.isAdmin?T(r)?(0,rw.jsx)(fw,{user:t,profile:r}):(0,rw.jsx)(ye,{to:"/perfil",replace:!0}):(0,rw.jsx)(ye,{to:t?"/menu":"/login",replace:!0})}),(0,rw.jsx)(ve,{path:"/socios",element:t&&null!==r&&void 0!==r&&r.isAdmin?T(r)?(0,rw.jsx)(gw,{user:t,profile:r}):(0,rw.jsx)(ye,{to:"/perfil",replace:!0}):(0,rw.jsx)(ye,{to:t?"/menu":"/login",replace:!0})}),(0,rw.jsx)(ve,{path:"*",element:(0,rw.jsx)(ye,{to:"/",replace:!0})})]})})]})}const xw=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4]\d|[01]?\d?\d)){3}$/));function _w(e,t){navigator.serviceWorker.register(e).then(e=>{e.onupdatefound=()=>{const n=e.installing;null!=n&&(n.onstatechange=()=>{var r;"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("Nueva versi\xf3n disponible, actualizando..."),t&&t.onUpdate&&t.onUpdate(e),null===(r=e.waiting)||void 0===r||r.postMessage({type:"SKIP_WAITING"}),setTimeout(()=>{window.location.reload()},1e3)):(console.log("Contenido cacheado para uso offline."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(e=>{console.error("Error registrando service worker:",e)})}const kw=document.getElementById("root");(0,s.H)(kw).render((0,rw.jsx)(i.StrictMode,{children:(0,rw.jsx)(Te,{children:(0,rw.jsx)(Sw,{})})})),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",()=>{const t="".concat("","/service-worker.js");xw?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then(n=>{const r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then(e=>{e.unregister().then(()=>{window.location.reload()})}):_w(e,t)}).catch(()=>{console.log("No hay conexi\xf3n a internet \u2014 la app funcionar\xe1 en modo offline si est\xe1 cacheada.")})}(t,e),navigator.serviceWorker.ready.then(()=>{console.log("Service Worker listo (localhost).")})):_w(t,e)})}}()})();
//# sourceMappingURL=main.803b6151.js.map